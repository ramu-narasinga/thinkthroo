{
<<<<<<< HEAD
  "title": "How to destroy Preact node?\r",
=======
  "title": "How to destroy Preact node?",
>>>>>>> 442b740f3cf43317109944c6cf4b7ca543a8cddf
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
<<<<<<< HEAD
    "raw": "\r\nIn this article, we review a [code snippet from react-scan codebase](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67) shown below.\r\n\r\n```plaintext\r\ncontainer.remove = () => {\r\n    window.__REACT_SCAN_TOOLBAR_CONTAINER__ = undefined;\r\n\r\n    if (container.hasChildNodes()) {\r\n      // Double render(null) is needed to fully unmount Preact components.\r\n      // The first call initiates unmounting, while the second ensures\r\n      // cleanup of internal VNode references and event listeners.\r\n      render(null, container);\r\n      render(null, container);\r\n    }\r\n\r\n    originalRemove();\r\n  };\r\n```\r\n\r\nThis code snippet is picked from [packages/scan/src/web/toolbar.tsx](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67). If you have noticed, render is called twice.\r\n\r\n```plaintext\r\nrender(null, container);\r\nrender(null, container);\r\n```\r\n\r\nBut first, we need to know what happens when you call render with null.\r\n\r\n### Unmount Preact components\r\n\r\nYou can unmount/destroy Preact node using render with null and a container.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*93okNIiaUs-mHtUim2EUiA.png)\r\n\r\nThis image is a [Stackoverflow answer](https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node).\r\n\r\n### Toolbar node\r\n\r\nComing back to the code snippet shared above, Toolbar uses Preact to render its components but before doing so, previously rendered DOM nodes are removed. \r\n\r\n```plaintext\r\nif (container.hasChildNodes()) {\r\n  // Double render(null) is needed to fully unmount Preact components.\r\n  // The first call initiates unmounting, while the second ensures\r\n  // cleanup of internal VNode references and event listeners.\r\n  render(null, container);\r\n  render(null, container);\r\n}\r\n```\r\n\r\nWhat’s so special about this? it is called twice and the comment above describes why render is called twice.\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67)\r\n    \r\n2. [https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node](https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node)",
=======
    "raw": "\nIn this article, we review a [code snippet from react-scan codebase](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67) shown below.\n\n```plaintext\ncontainer.remove = () => {\n    window.__REACT_SCAN_TOOLBAR_CONTAINER__ = undefined;\n\n    if (container.hasChildNodes()) {\n      // Double render(null) is needed to fully unmount Preact components.\n      // The first call initiates unmounting, while the second ensures\n      // cleanup of internal VNode references and event listeners.\n      render(null, container);\n      render(null, container);\n    }\n\n    originalRemove();\n  };\n```\n\nThis code snippet is picked from [packages/scan/src/web/toolbar.tsx](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67). If you have noticed, render is called twice.\n\n```plaintext\nrender(null, container);\nrender(null, container);\n```\n\nBut first, we need to know what happens when you call render with null.\n\n### Unmount Preact components\n\nYou can unmount/destroy Preact node using render with null and a container.\n\n![](https://cdn-images-1.medium.com/max/1000/1*93okNIiaUs-mHtUim2EUiA.png)\n\nThis image is a [Stackoverflow answer](https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node).\n\n### Toolbar node\n\nComing back to the code snippet shared above, Toolbar uses Preact to render its components but before doing so, previously rendered DOM nodes are removed. \n\n```plaintext\nif (container.hasChildNodes()) {\n  // Double render(null) is needed to fully unmount Preact components.\n  // The first call initiates unmounting, while the second ensures\n  // cleanup of internal VNode references and event listeners.\n  render(null, container);\n  render(null, container);\n}\n```\n\nWhat’s so special about this? it is called twice and the comment above describes why render is called twice.\n\n### About me:\n\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\n\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\n\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\n\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\n\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\n\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\n\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\n\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\n\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\n\n### References:\n\n1. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67)\n    \n2. [https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node](https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node)",
>>>>>>> 442b740f3cf43317109944c6cf4b7ca543a8cddf
    "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),w=(a,e)=>{for(var t in e)i(a,t,{get:e[t],enumerable:!0})},s=(a,e,t,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!b.call(a,r)&&r!==t&&i(a,r,{get:()=>e[r],enumerable:!(c=m(e,r))||c.enumerable});return a};var N=(a,e,t)=>(t=a!=null?p(g(a)):{},s(e||!a||!a.__esModule?i(t,\"default\",{value:a,enumerable:!0}):t,a)),y=a=>s(i({},\"__esModule\",{value:!0}),a);var o=f((_,l)=>{l.exports=_jsx_runtime});var x={};w(x,{default:()=>h,frontmatter:()=>k});var n=N(o()),k={title:\"How to destroy Preact\\xA0node?\"};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we review a \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67\",children:\"code snippet from react-scan codebase\"}),\" shown below.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"container.remove = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    window.__REACT_SCAN_TOOLBAR_CONTAINER__ = undefined;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    if (container.hasChildNodes()) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      // Double render(null) is needed to fully unmount Preact components.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      // The first call initiates unmounting, while the second ensures\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      // cleanup of internal VNode references and event listeners.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      render(null, container);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      render(null, container);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    originalRemove();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  };\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This code snippet is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67\",children:\"packages/scan/src/web/toolbar.tsx\"}),\". If you have noticed, render is called twice.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"render(null, container);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"render(null, container);\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"But first, we need to know what happens when you call render with null.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"unmount-preact-components\",children:\"Unmount Preact components\"}),`\n`,(0,n.jsx)(e.p,{children:\"You can unmount/destroy Preact node using render with null and a container.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*93okNIiaUs-mHtUim2EUiA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This image is a \",(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node\",children:\"Stackoverflow answer\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"toolbar-node\",children:\"Toolbar node\"}),`\n`,(0,n.jsx)(e.p,{children:\"Coming back to the code snippet shared above, Toolbar uses Preact to render its components but before doing so, previously rendered DOM nodes are removed.\\xA0\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (container.hasChildNodes()) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Double render(null) is needed to fully unmount Preact components.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // The first call initiates unmounting, while the second ensures\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // cleanup of internal VNode references and event listeners.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  render(null, container);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  render(null, container);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"What\\u2019s so special about this? it is called twice and the comment above describes why render is called twice.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node\",children:\"https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node\"})}),`\n`]}),`\n`]})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return y(x);})();\n;return Component;"
  },
  "_id": "blog/How-to-destroy-Preact.mdx",
  "_raw": {
    "sourceFilePath": "blog/How-to-destroy-Preact.mdx",
    "sourceFileName": "How-to-destroy-Preact.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/How-to-destroy-Preact"
  },
  "type": "Doc",
  "slug": "/blog/How-to-destroy-Preact",
  "slugAsParams": "How-to-destroy-Preact"
}