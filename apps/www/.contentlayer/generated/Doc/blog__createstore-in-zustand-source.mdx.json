{
  "title": "createStore in Zustand source code explained.\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, we will understand how createStore in Zustand’s source code is written/works.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*DZYFn7JU3OzQk9DOEIExXA.png)\r\n\r\ncreateStore is exported from [vanilla.ts](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L9) and you will find this at the end of the file.\r\n\r\n```javascript\r\nexport const createStore = ((createState) =>\r\n  createState ? createStoreImpl(createState) : createStoreImpl) as CreateStore\r\n```\r\n\r\ncreateStore is arrow function that accepts a parameter called createState. if createState exists, createStoreImpl(createState) is called.\r\n\r\n### createStoreImpl\r\n\r\n```javascript\r\nconst createStoreImpl: CreateStoreImpl = (createState) => {\r\n  type TState = ReturnType<typeof createState>\r\n  type Listener = (state: TState, prevState: TState) => void\r\n  let state: TState\r\n  const listeners: Set<Listener> = new Set()\r\n\r\n  const setState: StoreApi<TState>['setState'] = (partial, replace) => {\r\n    // TODO: Remove type assertion once https://github.com/microsoft/TypeScript/issues/37663 is resolved\r\n    // https://github.com/microsoft/TypeScript/issues/37663#issuecomment-759728342\r\n    const nextState =\r\n      typeof partial === 'function'\r\n        ? (partial as (state: TState) => TState)(state)\r\n        : partial\r\n    if (!Object.is(nextState, state)) {\r\n      const previousState = state\r\n      state =\r\n        (replace ?? (typeof nextState !== 'object' || nextState === null))\r\n          ? (nextState as TState)\r\n          : Object.assign({}, state, nextState)\r\n      listeners.forEach((listener) => listener(state, previousState))\r\n    }\r\n  }\r\n\r\n  const getState: StoreApi<TState>['getState'] = () => state\r\n\r\n  const getInitialState: StoreApi<TState>['getInitialState'] = () =>\r\n    initialState\r\n\r\n  const subscribe: StoreApi<TState>['subscribe'] = (listener) => {\r\n    listeners.add(listener)\r\n    // Unsubscribe\r\n    return () => listeners.delete(listener)\r\n  }\r\n\r\n  const api = { setState, getState, getInitialState, subscribe }\r\n  const initialState = (state = createState(setState, getState, api))\r\n  return api as any\r\n}\r\n```\r\n\r\nIn our previous articles, I have written about how setState, subscribe work. We will cover the remaining functions such as getState, getInitialState, createState.\r\n\r\n#### getState\r\n\r\ngetState simply returns the state that is declared at the top of this createStoreImpl function.\r\n\r\n```javascript\r\nconst getState: StoreApi<TState>['getState'] = () => state\r\n```\r\n\r\n#### getInitialState\r\n\r\ngetInitialState returns the initialState.\r\n\r\n```javascript\r\nconst getInitialState: StoreApi<TState>['getInitialState'] = () =>\r\n    initialState\r\n```\r\n\r\n#### createState\r\n\r\ncreateState is used to initialise the state variable.\r\n\r\n```javascript\r\nconst createStoreImpl: CreateStoreImpl = (createState) => {\r\n```\r\n\r\ncreateState is a parameter in createStoreImpl. Let’s run some experiments using the demo example provided in the Zustand’s repo.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*4O0mYmQi7Iwg9bFdoHdUJg.png)\r\n\r\nThis is basically just what you pass into “create”\r\n\r\n```javascript\r\n// Create the store using Zustand\r\nconst useStore = create((set) => ({\r\n  count: 1,\r\n  inc: () => set((state) => ({ count: state.count + 1 })),\r\n}));\r\n```\r\n\r\nState initialisation happens in [vanilla.ts at L93](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L93C3-L93C70), even though create is originally exported from React, [react.ts](https://github.com/pmndrs/zustand/blob/main/src/react.ts) internally calls createStore in vanilla.ts.\r\n\r\nSo how does calling createState initializes the state?\r\n\r\n```javascript\r\n  const initialState = (state = createState(setState, getState, api))\r\n```\r\n\r\nThe trick lies in calling the arrow function, createState. From the above code snippet, you can see that createState is called with setState, getState, api\r\n\r\nLet’s run some experiments with this information. Let’s pass a custom function named test as the parameter without the original parameters.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*sk5a2f94XnAA6iD3ohCQ5g.png)\r\n\r\nThe above image shows the custom test function I added to demonstrate how the parameters are passed to createState function.\r\n\r\nlet’s now see this internal test function in action. For us to access this test function, the following example shows how createStore can be initialised with this newly added test parameter.\r\n\r\n```javascript\r\n// Create the store using Zustand\r\nconst useStore = create((set, get, api, test) => ({\r\n  count: 1,\r\n  inc: () => set((state) => ({ count: state.count + 1 })),\r\n  test: () => test() \r\n}));\r\n```\r\n\r\nBecause we exposed test in vanilla.mjs as shown below, you will have access to this function when you initialise the create function\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*en9fBc6yZO8U0IHmnWMmPg.png)\r\n\r\nI am triggering this test function when the button in the demo example is clicked.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*lGrFilrA51cudi_SAoCIXQ.png)\r\n\r\nThis, in turn, calls the test function.\r\n\r\nThis is some advanced JavaScript arrow functions usage and oh, we also just added a custom test function and used in the demo app. That is cool.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L97](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L97)\r\n",
    "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var s in e)r(n,s,{get:e[s],enumerable:!0})},F=(n,e,s,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of y(e))!g.call(n,t)&&t!==s&&r(n,t,{get:()=>e[t],enumerable:!(c=p(e,t))||c.enumerable});return n};var S=(n,e,s)=>(s=n!=null?h(m(n)):{},F(e||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),b=n=>F(r({},\"__esModule\",{value:!0}),n);var o=u((W,a)=>{a.exports=_jsx_runtime});var v={};f(v,{default:()=>d,frontmatter:()=>N});var l=S(o()),N={title:\"createStore in Zustand source code explained.\"};function i(n){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:\"In this article, we will understand how createStore in Zustand\\u2019s source code is written/works.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*DZYFn7JU3OzQk9DOEIExXA.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"createStore is exported from \",(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L9\",children:\"vanilla.ts\"}),\" and you will find this at the end of the file.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  createState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CreateStore\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"createStore is arrow function that accepts a parameter called createState. if createState exists, createStoreImpl(createState) is called.\"}),`\n`,(0,l.jsx)(e.h3,{id:\"createstoreimpl\",children:\"createStoreImpl\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CreateStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ReturnType\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" prevState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" listeners\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" setState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'setState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"partial\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" replace\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" TODO: Remove type assertion once https://github.com/microsoft/TypeScript/issues/37663 is resolved\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://github.com/microsoft/TypeScript/issues/37663#issuecomment-759728342\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'function'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"partial \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" previousState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      state \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"replace \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'object'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null))\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          ?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"assign\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({},\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      listeners\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"forEach\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" previousState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'getState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getInitialState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'getInitialState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    initialState\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" subscribe\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'subscribe'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    listeners\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Unsubscribe\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" listeners\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"delete\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getInitialState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" subscribe \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" initialState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"setState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"In our previous articles, I have written about how setState, subscribe work. We will cover the remaining functions such as getState, getInitialState, createState.\"}),`\n`,(0,l.jsx)(e.h4,{id:\"getstate\",children:\"getState\"}),`\n`,(0,l.jsx)(e.p,{children:\"getState simply returns the state that is declared at the top of this createStoreImpl function.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'getState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"})]})})})}),`\n`,(0,l.jsx)(e.h4,{id:\"getinitialstate\",children:\"getInitialState\"}),`\n`,(0,l.jsx)(e.p,{children:\"getInitialState returns the initialState.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getInitialState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'getInitialState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    initialState\"})})]})})}),`\n`,(0,l.jsx)(e.h4,{id:\"createstate\",children:\"createState\"}),`\n`,(0,l.jsx)(e.p,{children:\"createState is used to initialise the state variable.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CreateStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]})})})}),`\n`,(0,l.jsx)(e.p,{children:\"createState is a parameter in createStoreImpl. Let\\u2019s run some experiments using the demo example provided in the Zustand\\u2019s repo.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*4O0mYmQi7Iwg9bFdoHdUJg.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"This is basically just what you pass into \\u201Ccreate\\u201D\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Create the store using Zustand\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  inc\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"count \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}));\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"State initialisation happens in \",(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L93C3-L93C70\",children:\"vanilla.ts at L93\"}),\", even though create is originally exported from React, \",(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/react.ts\",children:\"react.ts\"}),\" internally calls createStore in vanilla.ts.\"]}),`\n`,(0,l.jsx)(e.p,{children:\"So how does calling createState initializes the state?\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" initialState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"setState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]})})})}),`\n`,(0,l.jsx)(e.p,{children:\"The trick lies in calling the arrow function, createState. From the above code snippet, you can see that createState is called with setState, getState, api\"}),`\n`,(0,l.jsx)(e.p,{children:\"Let\\u2019s run some experiments with this information. Let\\u2019s pass a custom function named test as the parameter without the original parameters.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*sk5a2f94XnAA6iD3ohCQ5g.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"The above image shows the custom test function I added to demonstrate how the parameters are passed to createState function.\"}),`\n`,(0,l.jsx)(e.p,{children:\"let\\u2019s now see this internal test function in action. For us to access this test function, the following example shows how createStore can be initialised with this newly added test parameter.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Create the store using Zustand\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" get\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" test\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  inc\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"count \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })),\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  test\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" test\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}));\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Because we exposed test in vanilla.mjs as shown below, you will have access to this function when you initialise the create function\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*en9fBc6yZO8U0IHmnWMmPg.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"I am triggering this test function when the button in the demo example is clicked.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*lGrFilrA51cudi_SAoCIXQ.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"This, in turn, calls the test function.\"}),`\n`,(0,l.jsx)(e.p,{children:\"This is some advanced JavaScript arrow functions usage and oh, we also just added a custom test function and used in the demo app. That is cool.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L97\",children:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L97\"})}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return b(v);})();\n;return Component;"
  },
  "_id": "blog/createstore-in-zustand-source.mdx",
  "_raw": {
    "sourceFilePath": "blog/createstore-in-zustand-source.mdx",
    "sourceFileName": "createstore-in-zustand-source.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/createstore-in-zustand-source"
  },
  "type": "Doc",
  "slug": "/blog/createstore-in-zustand-source",
  "slugAsParams": "createstore-in-zustand-source"
}