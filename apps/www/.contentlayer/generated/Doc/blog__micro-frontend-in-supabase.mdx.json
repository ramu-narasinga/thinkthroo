{
  "title": "How Supabase implemented micro-frontends using Multi Zones in Next.js\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, you will learn about Multi Zones in Next.js and its usage in [Supabase](https://github.com/supabase/supabase), an open-source firebase alternative.\r\n\r\n### Multi Zones in Next.js\r\n\r\nThe following information is picked from [Next.js documentation](https://nextjs.org/docs/app/building-your-application/deploying/multi-zones).\r\n\r\nMulti-Zones are an approach to micro-frontends that separate a large application on a domain into smaller Next.js applications that each serve a set of paths. This is useful when there are collections of pages unrelated to the other pages in the application. By moving those pages to a separate zone (i.e., a separate application), you can reduce the size of each application which improves build times and removes code that is only necessary for one of the zones. Since applications are decoupled, Multi-Zones also allows other applications on the domain to use their   \r\nown choice of framework.\r\n\r\nFor example, let’s say you have the following set of pages that you would like to split up:\r\n\r\n* /blog/\\* for all blog posts\r\n    \r\n* /dashboard/\\* for all pages when the user is logged-in to the dashboard\r\n    \r\n* /\\* for the rest of your website not covered by other zones\r\n    \r\n\r\nWith Multi-Zones support, you can create three applications that all are served on the same domain and look the same to the user, but you can develop and deploy each of the applications independently.\r\n\r\nNavigating from a page in one zone to a page in another zone, such as from / to /dashboard, will perform a hard navigation, unloading the resources of the current page and loading the resources of the new page. Pages that are frequently visited together should live in the same zone to avoid hard navigations.\r\n\r\n#### How to define a zone\r\n\r\nYou can use assetPrefix to avoid conflicts with pages and static files in other zones. Below is an example showing the assetPrefix example:\r\n\r\n```js\r\n/** @type {import('next').NextConfig} */\r\nconst nextConfig = {\r\n assetPrefix: '/blog-static',\r\n}\r\n```\r\n\r\nThis way, a project in one zone has its static assets such as JavaScript and CSS prefixed with `assetPrefix`.\r\n\r\nDocs also mentions that in versions older than 15 (&lt; 15, say 14.x, 13.x), there’s additional rewrited that need to be configured but this is no longer needed in version 15. Below is an example showing the rewrites\r\n\r\n```js\r\n/** @type {import('next').NextConfig} */\r\nconst nextConfig = {\r\n assetPrefix: '/blog-static',\r\n async rewrites() {\r\n   return {\r\n     beforeFiles: [\r\n       {\r\n         source: '/blog-static/_next/:path+',\r\n         destination: '/_next/:path+',\r\n       },\r\n     ],\r\n   }\r\n },\r\n}\r\n```\r\n\r\n[Read more about routing to the right zone](https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone) and also check out this example repository with [Multi Zones implemented](https://github.com/vercel/next.js/tree/canary/examples/with-zones).\r\n\r\nNow that you understand the basics of Multi Zones, let’s apply this knowledge and deduce how Supabase has its Multi Zones configured.\r\n\r\n### Multi Zones in Supabase\r\n\r\nIn the [Supabase repository](https://github.com/supabase/supabase/tree/master/apps), you will find that it is a monorepo. It has workspaces such as:\r\n\r\n* [design-system](https://github.com/supabase/supabase/tree/master/apps/design-system)\r\n    \r\n* [docs](https://github.com/supabase/supabase/tree/master/apps/docs)\r\n    \r\n* [studio](https://github.com/supabase/supabase/tree/master/apps/studio)\r\n    \r\n* [www](https://github.com/supabase/supabase/tree/master/apps/www)\r\n    \r\n\r\nWhen you visit [https://supabase.com](https://supabase.com), [www workspace](https://github.com/supabase/supabase/tree/master/apps/www) is responsible to show the landing page. When you were to login and visit dashboard,  \r\nthe url would be [https://supabase.com/dashboard/projects](https://supabase.com/dashboard/projects)\r\n\r\n/dashboard is a different zone and [https://supabase.com](https://supabase.com) is another zone.   \r\n[studio workspace](https://github.com/supabase/supabase/tree/master/apps/studio) is responsible for the zone that gets rendered when you visit /dashboard.\r\n\r\nFor this article, we are only focusing on two workspaces, www and studio as www loads landing and when you visit dashboard, there is a hard navigation as you moving to a different zone.\r\n\r\nThis is all fine but how is this configured? based on basics that we discussed at the top of this article, the trick to define your rewrites correctly. That’s where you should be looking too, rewrites are defined in next.config.js. Let’s dig up the www next.config.js\r\n\r\n```js\r\n//In https://github.com/supabase/supabase/blob/master/apps/www/next.config.mjs\r\n\r\nasync rewrites() {\r\n    return rewrites\r\n},\r\n```\r\n\r\nredirects are different from rewrites, for the Multi Zones, you should be focusing on `rewrites`.\r\n\r\n`rewrites` are found to be imported from [lib/rewrites.ts](https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L42)\r\n\r\n```js\r\nmodule.exports = [\r\n  {\r\n    source: '/:path*',\r\n    destination: `/:path*`,\r\n  },\r\n  {\r\n    source: '/dashboard',\r\n    destination: `${process.env.NEXT_PUBLIC_STUDIO_URL}`,\r\n  },\r\n  {\r\n    source: '/dashboard/:path*',\r\n    destination: `${process.env.NEXT_PUBLIC_STUDIO_URL}/:path*`,\r\n  },\r\n```\r\n\r\nNow then, finally we are able to understand how the www project redirects to dashboard. So, based on the above image, as you can see, when you navigate to /dashboard, destination has a value pointing to process.env.NEXT\\_PUBLIC\\_STUDIO\\_URL that you would define in your .env file. www workspace has a sample .env provided.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*tlfzBt7KhwrZNYkXIK6Uzg.png)\r\n\r\nAs you can see from the above image, process.env.NEXT\\_PUBLIC\\_STUDIO\\_URL points to a server running on a   \r\ndifferent port. So when you visit /dashboard, a hard navigation to destination happens.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/supabase/supabase/tree/master/apps](https://github.com/supabase/supabase/tree/master/apps)\r\n    \r\n2. [https://nextjs.org/docs/app/building-your-application/deploying/multi-zones](https://nextjs.org/docs/app/building-your-application/deploying/multi-zones)\r\n    \r\n3. [https://github.com/vercel/next.js/tree/canary/examples/with-zones](https://github.com/vercel/next.js/tree/canary/examples/with-zones)\r\n    \r\n4. [https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone](https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone)\r\n    \r\n5. [https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L6-L12](https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L6-L12)",
    "code": "var Component=(()=>{var p=Object.create;var l=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var g=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),b=(s,e)=>{for(var a in e)l(s,a,{get:e[a],enumerable:!0})},o=(s,e,a,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of u(e))!y.call(s,t)&&t!==a&&l(s,t,{get:()=>e[t],enumerable:!(r=F(e,t))||r.enumerable});return s};var f=(s,e,a)=>(a=s!=null?p(m(s)):{},o(e||!s||!s.__esModule?l(a,\"default\",{value:s,enumerable:!0}):a,s)),w=s=>o(l({},\"__esModule\",{value:!0}),s);var c=g((j,i)=>{i.exports=_jsx_runtime});var N={};b(N,{default:()=>d,frontmatter:()=>x});var n=f(c()),x={title:\"How Supabase implemented micro-frontends using Multi Zones in\\xA0Next.js\"};function h(s){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...s.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, you will learn about Multi Zones in Next.js and its usage in \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase\",children:\"Supabase\"}),\", an open-source firebase alternative.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"multi-zones-innextjs\",children:\"Multi Zones in\\xA0Next.js\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The following information is picked from \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones\",children:\"Next.js documentation\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Multi-Zones are an approach to micro-frontends that separate a large application on a domain into smaller Next.js applications that each serve a set of paths. This is useful when there are collections of pages unrelated to the other pages in the application. By moving those pages to a separate zone (i.e., a separate application), you can reduce the size of each application which improves build times and removes code that is only necessary for one of the zones. Since applications are decoupled, Multi-Zones also allows other applications on the domain to use their\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"own choice of framework.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"For example, let\\u2019s say you have the following set of pages that you would like to split up:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"/blog/* for all blog posts\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"/dashboard/* for all pages when the user is logged-in to the dashboard\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"/* for the rest of your website not covered by other zones\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"With Multi-Zones support, you can create three applications that all are served on the same domain and look the same to the user, but you can develop and deploy each of the applications independently.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Navigating from a page in one zone to a page in another zone, such as from / to /dashboard, will perform a hard navigation, unloading the resources of the current page and loading the resources of the new page. Pages that are frequently visited together should live in the same zone to avoid hard navigations.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"how-to-define-azone\",children:\"How to define a\\xA0zone\"}),`\n`,(0,n.jsx)(e.p,{children:\"You can use assetPrefix to avoid conflicts with pages and static files in other zones. Below is an example showing the assetPrefix example:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" @type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"import('next').NextConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextConfig \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" assetPrefix\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/blog-static'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This way, a project in one zone has its static assets such as JavaScript and CSS prefixed with \",(0,n.jsx)(e.code,{children:\"assetPrefix\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Docs also mentions that in versions older than 15 (< 15, say 14.x, 13.x), there\\u2019s additional rewrited that need to be configured but this is no longer needed in version 15. Below is an example showing the rewrites\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" @type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"import('next').NextConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextConfig \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" assetPrefix\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/blog-static'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" rewrites\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"     beforeFiles\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"       {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"         source\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/blog-static/_next/:path+'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"         destination\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/_next/:path+'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"       },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone\",children:\"Read more about routing to the right zone\"}),\" and also check out this example repository with \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/tree/canary/examples/with-zones\",children:\"Multi Zones implemented\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Now that you understand the basics of Multi Zones, let\\u2019s apply this knowledge and deduce how Supabase has its Multi Zones configured.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"multi-zones-insupabase\",children:\"Multi Zones in\\xA0Supabase\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps\",children:\"Supabase repository\"}),\", you will find that it is a monorepo. It has workspaces such as:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/design-system\",children:\"design-system\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/docs\",children:\"docs\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/studio\",children:\"studio\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/www\",children:\"www\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you visit \",(0,n.jsx)(e.a,{href:\"https://supabase.com\",children:\"https://supabase.com\"}),\", \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/www\",children:\"www workspace\"}),\" is responsible to show the landing page. When you were to login and visit dashboard,\",(0,n.jsx)(e.br,{}),`\n`,\"the url would be \",(0,n.jsx)(e.a,{href:\"https://supabase.com/dashboard/projects\",children:\"https://supabase.com/dashboard/projects\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"/dashboard is a different zone and \",(0,n.jsx)(e.a,{href:\"https://supabase.com\",children:\"https://supabase.com\"}),\" is another zone.\\xA0\",(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/studio\",children:\"studio workspace\"}),\" is responsible for the zone that gets rendered when you visit /dashboard.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"For this article, we are only focusing on two workspaces, www and studio as www loads landing and when you visit dashboard, there is a hard navigation as you moving to a different zone.\"}),`\n`,(0,n.jsx)(e.p,{children:\"This is all fine but how is this configured? based on basics that we discussed at the top of this article, the trick to define your rewrites correctly. That\\u2019s where you should be looking too, rewrites are defined in next.config.js. Let\\u2019s dig up the www next.config.js\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"In https://github.com/supabase/supabase/blob/master/apps/www/next.config.mjs\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"async rewrites\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" rewrites\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"},\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"redirects are different from rewrites, for the Multi Zones, you should be focusing on \",(0,n.jsx)(e.code,{children:\"rewrites\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"rewrites\"}),\" are found to be imported from \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L42\",children:\"lib/rewrites.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"module\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"exports \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    source\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/:path*'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    destination\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `/:path*`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    source\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/dashboard'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    destination\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_STUDIO_URL\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    source\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/dashboard/:path*'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    destination\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_STUDIO_URL\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}/:path*`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Now then, finally we are able to understand how the www project redirects to dashboard. So, based on the above image, as you can see, when you navigate to /dashboard, destination has a value pointing to process.env.NEXT_PUBLIC_STUDIO_URL that you would define in your\\xA0.env file. www workspace has a sample\\xA0.env provided.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*tlfzBt7KhwrZNYkXIK6Uzg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"As you can see from the above image, process.env.NEXT_PUBLIC_STUDIO_URL points to a server running on a\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"different port. So when you visit /dashboard, a hard navigation to destination happens.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps\",children:\"https://github.com/supabase/supabase/tree/master/apps\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones\",children:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/tree/canary/examples/with-zones\",children:\"https://github.com/vercel/next.js/tree/canary/examples/with-zones\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone\",children:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L6-L12\",children:\"https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L6-L12\"})}),`\n`]}),`\n`]})]})}function d(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(h,{...s})}):h(s)}return w(N);})();\n;return Component;"
  },
  "_id": "blog/micro-frontend-in-supabase.mdx",
  "_raw": {
    "sourceFilePath": "blog/micro-frontend-in-supabase.mdx",
    "sourceFileName": "micro-frontend-in-supabase.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/micro-frontend-in-supabase"
  },
  "type": "Doc",
  "slug": "/blog/micro-frontend-in-supabase",
  "slugAsParams": "micro-frontend-in-supabase"
}