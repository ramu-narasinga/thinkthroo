---
title: How Changsets reads config.json internally
toc: true
---

When you initialise Changesets via the CLI using init command, this command sets up the .changeset folder. It generates a readme and a config file. The config file includes the default options, as well as comments   
on what these options represent.

The default config.json generated by init command looks like below:

```plaintext
{
 "commit": false,
 "updateInternalDependencies": "patch",
 "linked": [],
 "access": "restricted",
 "baseBranch": "master",
 "ignore": [],
 "changelog": "@changesets/cli/changelog"
}
```

Read more about config.json [here](https://github.com/changesets/changesets/blob/main/docs/config-file-options.md).

Now that we understand what a config.json is for in using Changesets, let’s look at how CLI package reads this config.json.

In the run function, this try catch block is found:

```plaintext
try {
 config = await read(cwd, packages);
} catch (e) {
 let oldConfigExists = await fs.pathExists(
 path.resolve(cwd, ".changeset/config.js")
 );
```

`read` function is part of another package named [config](https://github.com/changesets/changesets/blob/main/packages/config/src/index.ts#L94).

![](https://cdn-images-1.medium.com/max/1600/1*myvRzlYdDrHtZBpyQzJX-Q.png)

As you can see from the above image, `fs.readJSON` is used in combination with path.join that combines cwd + .changesets + “config.json”

![](https://cdn-images-1.medium.com/max/1600/1*_E9sStHNLd5Xb3NwSaKIWQ.png)

parse accepts this config.json read as its first argument and this parse function is a really long function that performs additional operations using this json and packages (second argument).

### About us:

At [Thinkthroo](https://thinkthroo.com/), we study large open source projects and [provide architectural guides](https://app.thinkthroo.com/architecture). We have developed reusable [Components, built with tailwind, that you can use in your project](https://thinkthroo.com/components). We offer [Next.js, React and Node development services.](https://thinkthroo.com/components)

[Book a meeting](https://cal.com/team-thinkthroo-dxiovj/consultation?date=2024-10-19&month=2024-10) with us to discuss your project.

![](https://cdn-images-1.medium.com/max/1600/0*NxFtbdT-jz_GGi2N.png)

### References:

1. [https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L29](https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L29)
    
2. [https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L44](https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L44)
    
3. [https://github.com/changesets/changesets/blob/main/packages/config/src/index.ts#L94](https://github.com/changesets/changesets/blob/main/packages/config/src/index.ts#L94)
    
4. [https://github.com/changesets/changesets/blob/main/docs/config-file-options.md](https://github.com/changesets/changesets/blob/main/docs/config-file-options.md)
    
5. [https://github.com/changesets/changesets/blob/main/packages/cli/README.md](https://github.com/changesets/changesets/blob/main/packages/cli/README.md)