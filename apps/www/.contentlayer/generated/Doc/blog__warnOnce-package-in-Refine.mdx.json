{
  "title": "warnOnce package in Refine source code.\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, we will review a package named warn-once. You will learn\r\n\r\n1. What is warn-once?\r\n    \r\n2. Warn once usage in Refine source code\r\n    \r\n3. warn-once code review\r\n    \r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*ZtasVLHNhJL2qIBzxu6IOg.png)\r\n\r\n### What is warn-once?\r\n\r\nPrint a warning exactly once during development. Suitable for deprecation warnings, warnings for missing setup etc.\r\n\r\n#### Installation\r\n\r\nRun the below command in your CLI to install this package\r\n\r\n```plaintext\r\nnpm install warn-once\r\n```\r\n\r\n#### Usage\r\n\r\nwarn-once accepts 2 parameters, one is the condition and the other one is the message that gets printed to the CLI exactly once. warn-once has some underlying checks to ensure this logs only once in the CLI.\r\n\r\n```plaintext\r\nconst warnOnce = require('warn-once');\r\n\r\n// ...\r\n\r\nwarnOnce(someCondition, 'This is a warning message');\r\n```\r\n\r\n> Note: This warning is only shown only when NODE\\_ENV is ***not set to “production”***\r\n\r\n### Warn once usage in Refine source code\r\n\r\nSo I found this package in the Refine codebase in a file named [hooks/breadcrumbs/index.ts](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L3)\r\n\r\n```plaintext\r\nif (action && action !== \"list\") {\r\n    const key = `actions.${action}`;\r\n    const actionLabel = translate(key);\r\n    if (typeof i18nProvider !== \"undefined\" && actionLabel === key) {\r\n      warnOnce(\r\n        true,\r\n        `[useBreadcrumb]: Breadcrumb missing translate key for the \"${action}\" action. Please add \"actions.${action}\" key to your translation file.\\nFor more information, see https://refine.dev/docs/api-reference/core/hooks/useBreadcrumb/#i18n-support`,\r\n      );\r\n      breadcrumbs.push({\r\n        label: translate(\r\n          `buttons.${action}`,\r\n          textTransformers.humanize(action),\r\n        ),\r\n      });\r\n    } else {\r\n      breadcrumbs.push({\r\n        label: translate(key, textTransformers.humanize(action)),\r\n      });\r\n    }\r\n  }\r\n```\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*K_fNsFB8vybC5vfrZir5MA.png)\r\n\r\nAs you can see there are other files too, where this warn-once is used but with different parameters.\r\n\r\n### warn-once code review\r\n\r\nindex.js in the warn-once repository contains the below code\r\n\r\n```plaintext\r\nconst DEV = process.env.NODE_ENV !== \"production\";\r\n\r\nconst warnings = new Set();\r\n\r\nfunction warnOnce(condition, ...rest) {\r\n  if (DEV && condition) {\r\n    const key = rest.join(\" \");\r\n\r\n    if (warnings.has(key)) {\r\n      return;\r\n    }\r\n\r\n    warnings.add(key);\r\n    console.warn(...rest);\r\n  }\r\n}\r\n\r\nmodule.exports = warnOnce;\r\n```\r\n\r\nI also happened to create a [Pull request](https://github.com/satya164/warn-once/pull/3) with an example demonstrating the ability to pass n number of message strings as parameters.\r\n\r\nSet is used and has check ensures the message gets logged only once.\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/satya164/warn-once/pull/3](https://github.com/satya164/warn-once/pull/3)\r\n    \r\n2. [https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L109](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L109)\r\n    \r\n3. [https://www.npmjs.com/package/warn-once](https://www.npmjs.com/package/warn-once)\r\n    \r\n4. [https://github.com/satya164/warn-once/blob/main/index.js](https://github.com/satya164/warn-once/blob/main/index.js)",
    "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var w=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),b=(a,n)=>{for(var i in n)s(a,i,{get:n[i],enumerable:!0})},t=(a,n,i,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of u(n))!f.call(a,r)&&r!==i&&s(a,r,{get:()=>n[r],enumerable:!(c=m(n,r))||c.enumerable});return a};var N=(a,n,i)=>(i=a!=null?p(g(a)):{},t(n||!a||!a.__esModule?s(i,\"default\",{value:a,enumerable:!0}):i,a)),y=a=>t(s({},\"__esModule\",{value:!0}),a);var h=w((j,l)=>{l.exports=_jsx_runtime});var x={};b(x,{default:()=>o,frontmatter:()=>k});var e=N(h()),k={title:\"warnOnce package in Refine source\\xA0code.\"};function d(a){let n={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"In this article, we will review a package named warn-once. You will learn\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"What is warn-once?\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Warn once usage in Refine source code\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"warn-once code review\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*ZtasVLHNhJL2qIBzxu6IOg.png\",alt:\"\"})}),`\n`,(0,e.jsx)(n.h3,{id:\"what-is-warn-once\",children:\"What is warn-once?\"}),`\n`,(0,e.jsx)(n.p,{children:\"Print a warning exactly once during development. Suitable for deprecation warnings, warnings for missing setup etc.\"}),`\n`,(0,e.jsx)(n.h4,{id:\"installation\",children:\"Installation\"}),`\n`,(0,e.jsx)(n.p,{children:\"Run the below command in your CLI to install this package\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsx)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"npm install warn-once\"})})})})}),`\n`,(0,e.jsx)(n.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,e.jsx)(n.p,{children:\"warn-once accepts 2 parameters, one is the condition and the other one is the message that gets printed to the CLI exactly once. warn-once has some underlying checks to ensure this logs only once in the CLI.\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const warnOnce = require('warn-once');\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// ...\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"warnOnce(someCondition, 'This is a warning message');\"})})]})})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"Note: This warning is only shown only when NODE_ENV is \",(0,e.jsx)(n.em,{children:(0,e.jsx)(n.strong,{children:\"not set to \\u201Cproduction\\u201D\"})})]}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{id:\"warn-once-usage-in-refine-sourcecode\",children:\"Warn once usage in Refine source\\xA0code\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"So I found this package in the Refine codebase in a file named \",(0,e.jsx)(n.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L3\",children:\"hooks/breadcrumbs/index.ts\"})]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'if (action && action !== \"list\") {'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    const key = `actions.${action}`;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    const actionLabel = translate(key);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'    if (typeof i18nProvider !== \"undefined\" && actionLabel === key) {'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      warnOnce(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        true,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'        `[useBreadcrumb]: Breadcrumb missing translate key for the \"${action}\" action. Please add \"actions.${action}\" key to your translation file.\\\\nFor more information, see https://refine.dev/docs/api-reference/core/hooks/useBreadcrumb/#i18n-support`,'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      breadcrumbs.push({\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        label: translate(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"          `buttons.${action}`,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"          textTransformers.humanize(action),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        ),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      });\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    } else {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      breadcrumbs.push({\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        label: translate(key, textTransformers.humanize(action)),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      });\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*K_fNsFB8vybC5vfrZir5MA.png\",alt:\"\"})}),`\n`,(0,e.jsx)(n.p,{children:\"As you can see there are other files too, where this warn-once is used but with different parameters.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"warn-once-codereview\",children:\"warn-once code\\xA0review\"}),`\n`,(0,e.jsx)(n.p,{children:\"index.js in the warn-once repository contains the below code\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'const DEV = process.env.NODE_ENV !== \"production\";'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const warnings = new Set();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"function warnOnce(condition, ...rest) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  if (DEV && condition) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'    const key = rest.join(\" \");'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    if (warnings.has(key)) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      return;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    warnings.add(key);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    console.warn(...rest);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"module.exports = warnOnce;\"})})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"I also happened to create a \",(0,e.jsx)(n.a,{href:\"https://github.com/satya164/warn-once/pull/3\",children:\"Pull request\"}),\" with an example demonstrating the ability to pass n number of message strings as parameters.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Set is used and has check ensures the message gets logged only once.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Hey, my name is \",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.em,{children:(0,e.jsxs)(n.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(n.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(n.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/satya164/warn-once/pull/3\",children:\"https://github.com/satya164/warn-once/pull/3\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L109\",children:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L109\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/warn-once\",children:\"https://www.npmjs.com/package/warn-once\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/satya164/warn-once/blob/main/index.js\",children:\"https://github.com/satya164/warn-once/blob/main/index.js\"})}),`\n`]}),`\n`]})]})}function o(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(d,{...a})}):d(a)}return y(x);})();\n;return Component;"
  },
  "_id": "blog/warnOnce-package-in-Refine.mdx",
  "_raw": {
    "sourceFilePath": "blog/warnOnce-package-in-Refine.mdx",
    "sourceFileName": "warnOnce-package-in-Refine.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/warnOnce-package-in-Refine"
  },
  "type": "Doc",
  "slug": "/blog/warnOnce-package-in-Refine",
  "slugAsParams": "warnOnce-package-in-Refine"
}