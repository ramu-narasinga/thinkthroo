{
  "title": "Cache your function computation in React Server Components\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, you will learn what a cache in React is and also analyse how it is used in [nextjs-subscription-payments example](https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*1KSCesWzRdiXjDntmXBbbg.png)\r\n\r\n### Cache\r\n\r\nCache is only for use in React Server Components. React documentation suggests to cache a function that does data fetch or complex computation\r\n\r\nThese three below examples are provided in the React documentation about cache:\r\n\r\n* [Cache an expensive computation](https://react.dev/reference/react/cache#cache-expensive-computation)\r\n    \r\n* [Share a snapshot of data](https://react.dev/reference/react/cache#take-and-share-snapshot-of-data)\r\n    \r\n* [Preload data](https://react.dev/reference/react/cache#preload-data)\r\n    \r\n\r\n> It is important that you read these usage examples and understand the common pitfalls to apply cache.\r\n\r\nRead more about [cache](https://react.dev/reference/react/cache).\r\n\r\n### Cache usage in Nextjs-Subscription-Payments\r\n\r\nIn [queries.ts in nextjs-subscription-payments](https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4), you will find the below code:\r\n\r\n```ts\r\nimport { SupabaseClient } from '@supabase/supabase-js';\r\nimport { cache } from 'react';\r\nexport const getUser = cache(async (supabase: SupabaseClient) => {\r\n const {\r\n data: { user }\r\n } = await supabase.auth.getUser();\r\n return user;\r\n});\r\n```\r\n\r\nNotice the cache applied to the arrow function above. Where is this function called though? you will find this below code in [app/page.tsx](https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12)\r\n\r\n```ts\r\nimport {\r\n getProducts,\r\n getSubscription,\r\n getUser\r\n} from '@/utils/supabase/queries';\r\n\r\nexport default async function PricingPage() {\r\n const supabase = createClient();\r\n const [user, products, subscription] = await Promise.all([\r\n getUser(supabase),\r\n getProducts(supabase),\r\n getSubscription(supabase)\r\n]);\r\n```\r\n\r\nThe usecase, [Preload data](https://react.dev/reference/react/cache#preload-data) applies here. I am going to quote what is provided in preload data usage example\r\n\r\n> When rendering Page, the component calls getUser but note that it doesn’t use the returned data.This early getUser call kicks off the asynchronous database query that occurs while Page is doing other computational work and rendering children.  \r\n> When rendering Profile, we call getUser again. If the initial getUser call has already returned and cached the user data, when Profile asks and waits for this data, it can simply read from the cache without requiring another remote procedure call. If the initial data request hasn’t been completed, preloading data in this pattern reduces delay in data-fetching.\r\n\r\nThere is one more place/file where getUser is called. You will find the below code in [app/account/page.tsx](https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15)\r\n\r\n```ts\r\nimport {\r\n getUserDetails,\r\n getSubscription,\r\n getUser\r\n} from '@/utils/supabase/queries';\r\nexport default async function Account() {\r\n const supabase = createClient();\r\n const [user, userDetails, subscription] = await Promise.all([\r\n getUser(supabase),\r\n getUserDetails(supabase),\r\n getSubscription(supabase)\r\n]);\r\n```\r\n\r\nBoth, app/page.tsx and app/account/page.tsx, are server components.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4](https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4)\r\n    \r\n2. [https://react.dev/reference/react/cache](https://react.dev/reference/react/cache)\r\n    \r\n3. [https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components](https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components)\r\n    \r\n4. [https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12](https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12)\r\n    \r\n5. [https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15](https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15)",
    "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var b=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var s in e)c(l,s,{get:e[s],enumerable:!0})},t=(l,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!m.call(l,r)&&r!==s&&c(l,r,{get:()=>e[r],enumerable:!(a=d(e,r))||a.enumerable});return l};var f=(l,e,s)=>(s=l!=null?p(u(l)):{},t(e||!l||!l.__esModule?c(s,\"default\",{value:l,enumerable:!0}):s,l)),x=l=>t(c({},\"__esModule\",{value:!0}),l);var i=b((j,o)=>{o.exports=_jsx_runtime});var w={};g(w,{default:()=>F,frontmatter:()=>v});var n=f(i()),v={title:\"Cache your function computation in React Server Components\"};function h(l){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, you will learn what a cache in React is and also analyse how it is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4\",children:\"nextjs-subscription-payments example\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*1KSCesWzRdiXjDntmXBbbg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"cache\",children:\"Cache\"}),`\n`,(0,n.jsx)(e.p,{children:\"Cache is only for use in React Server Components. React documentation suggests to cache a function that does data fetch or complex computation\"}),`\n`,(0,n.jsx)(e.p,{children:\"These three below examples are provided in the React documentation about cache:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache#cache-expensive-computation\",children:\"Cache an expensive computation\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache#take-and-share-snapshot-of-data\",children:\"Share a snapshot of data\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache#preload-data\",children:\"Preload data\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"It is important that you read these usage examples and understand the common pitfalls to apply cache.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache\",children:\"cache\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"cache-usage-in-nextjs-subscription-payments\",children:\"Cache usage in Nextjs-Subscription-Payments\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4\",children:\"queries.ts in nextjs-subscription-payments\"}),\", you will find the below code:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" SupabaseClient \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/supabase-js'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cache \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'react'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUser \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cache\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" SupabaseClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" user \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"auth\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getUser\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" user\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Notice the cache applied to the arrow function above. Where is this function called though? you will find this below code in \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12\",children:\"app/page.tsx\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getProducts\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getSubscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUser\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/utils/supabase/queries'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" PricingPage\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"user\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" products\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" subscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Promise\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"all\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"([\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUser\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getProducts\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getSubscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]);\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The usecase, \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache#preload-data\",children:\"Preload data\"}),\" applies here. I am going to quote what is provided in preload data usage example\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"When rendering Page, the component calls getUser but note that it doesn\\u2019t use the returned data.This early getUser call kicks off the asynchronous database query that occurs while Page is doing other computational work and rendering children.\",(0,n.jsx)(e.br,{}),`\n`,\"When rendering Profile, we call getUser again. If the initial getUser call has already returned and cached the user data, when Profile asks and waits for this data, it can simply read from the cache without requiring another remote procedure call. If the initial data request hasn\\u2019t been completed, preloading data in this pattern reduces delay in data-fetching.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"There is one more place/file where getUser is called. You will find the below code in \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15\",children:\"app/account/page.tsx\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUserDetails\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getSubscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUser\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/utils/supabase/queries'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Account\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"user\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" userDetails\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" subscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Promise\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"all\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"([\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUser\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUserDetails\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getSubscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]);\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Both, app/page.tsx and app/account/page.tsx, are server components.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4\",children:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache\",children:\"https://react.dev/reference/react/cache\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components\",children:\"https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12\",children:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15\",children:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15\"})}),`\n`]}),`\n`]})]})}function F(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(h,{...l})}):h(l)}return x(w);})();\n;return Component;"
  },
  "_id": "blog/react-cache-in-server-components.mdx",
  "_raw": {
    "sourceFilePath": "blog/react-cache-in-server-components.mdx",
    "sourceFileName": "react-cache-in-server-components.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/react-cache-in-server-components"
  },
  "type": "Doc",
  "slug": "/blog/react-cache-in-server-components",
  "slugAsParams": "react-cache-in-server-components"
}