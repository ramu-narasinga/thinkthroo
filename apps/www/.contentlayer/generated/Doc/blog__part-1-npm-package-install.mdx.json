{
  "title": "Part 1-How to install npm packages programmatically?\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, we review how [Father, an NPM package development tool](https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17) is installs npm dependencies programmatically.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*rLf-G1IlanRswz_VhplkeQ.png)\r\n\r\n# **How did I find this code snippet?**\r\n\r\nI wrote an article about Father and in its README.md, I found that it supports micro generators that adds commonly used engineering capabilities to projects, such as setting up Jest for testing. This is similar to the [CLI tool I am building](https://github.com/ramu-narasinga/thinkthroo/tree/main/packages/thinkthroo), to generate code for authentication or S3 upload in Next.js.\r\n\r\nI started searching for the micro generators code and found a folder named [commands/generators](https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*rLf-G1IlanRswz_VhplkeQ.png)\r\n\r\n# **Common pattern in the generators**\r\n\r\nYou will see that there is a common pattern in the way these generators are defined.\r\n\r\n## [**generators/eslint.ts**](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/eslint.ts)\r\n\r\n[eslint.ts](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/eslint.ts) has the below code\r\n\r\n```javascript\r\nimport { GeneratorType } from '@umijs/core';\r\nimport { logger } from '../../utils';\r\nimport fg from 'fast-glob';\r\nimport { writeFileSync } from 'fs';\r\nimport { join } from 'path';\r\nimport { IApi } from '../../types';\r\nimport { GeneratorHelper } from './utils';\r\n\r\nexport default (api: IApi) => {\r\n  api.describe({\r\n    key: 'generator:eslint',\r\n  });\r\n\r\n  api.registerGenerator({\r\n    key: 'eslint',\r\n    name: 'Enable ESLint',\r\n    description: 'Setup ESLint Configuration',\r\n    type: GeneratorType.enable,\r\n    checkEnable: () => {\r\n      ...\r\n    },\r\n    disabledDescription:\r\n      'ESLint has already enabled. You can remove .eslintrc, then run this again to re-setup.',\r\n    fn: async () => {\r\n      ....\r\n    },\r\n  });\r\n};\r\n```\r\n\r\n## [**generators/jest.ts**](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42)\r\n\r\n[jest.ts](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42) has the below definition:\r\n\r\n```javascript\r\nimport { GeneratorType } from '@umijs/core';\r\nimport { logger } from '../../utils';\r\nimport { existsSync, writeFileSync } from 'fs';\r\nimport { join } from 'path';\r\nimport { IApi } from '../../types';\r\nimport { GeneratorHelper, promptsExitWhenCancel } from './utils';\r\n\r\nexport default (api: IApi) => {\r\n  api.describe({\r\n    key: 'generator:jest',\r\n  });\r\n\r\n  api.registerGenerator({\r\n    key: 'jest',\r\n    name: 'Enable Jest',\r\n    description: 'Setup Jest Configuration',\r\n    type: GeneratorType.enable,\r\n    checkEnable: () => {\r\n      ...\r\n    },\r\n    disabledDescription:\r\n      'Jest has already enabled. You can remove jest.config.{ts,js}, then run this again to re-setup.',\r\n    fn: async () => {\r\n      ...\r\n    },\r\n  });\r\n};\r\n```\r\n\r\nDo you see the common pattern in these two definitions above? there is\r\n\r\n* api.describe\r\n    \r\n\r\nThis accepts an object that has the below properties:\r\n\r\n1. key\r\n    \r\n\r\n* api.registerGenerator\r\n    \r\n\r\nThis accepts an object that has the below properties:\r\n\r\n1. key\r\n    \r\n2. name\r\n    \r\n3. description\r\n    \r\n4. type\r\n    \r\n5. checkEnable\r\n    \r\n6. disabledDescription\r\n    \r\n7. fn\r\n    \r\n\r\n# **h.installDeps()**\r\n\r\n[At line 97 in generators/jest.ts](https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators), you find this below code snippet\r\n\r\n```javascript\r\nh.installDeps();\r\n```\r\n\r\nWhat is h here? [At line 27](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42), you will see h is initialized as shown below:\r\n\r\n```javascript\r\nconst h = new GeneratorHelper(api);\r\n```\r\n\r\nTo see how the installDeps is defined, we need to review [GeneratorHelper](https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L6)\r\n\r\n# **GeneratorHelper**\r\n\r\n[GeneratorHelper](https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L19) has the below shown functions at the time of writing this article\r\n\r\n```javascript\r\nimport { getNpmClient, installWithNpmClient, prompts } from '@umijs/utils';\r\nimport { writeFileSync } from 'fs';\r\nimport { IApi } from '../../types';\r\nimport { logger } from '../../utils';\r\n\r\nexport class GeneratorHelper {\r\n  constructor(readonly api: IApi) {}\r\n\r\n  addDevDeps(deps: Record<string, string>) {\r\n    ...\r\n  }\r\n\r\n  addScript(name: string, cmd: string) {\r\n    ...\r\n  }\r\n\r\n  private addScriptToPkg(name: string, cmd: string) {\r\n    ...\r\n  }\r\n\r\n  installDeps() {\r\n    ...  \r\n  }\r\n}\r\n```\r\n\r\n## **installDeps**\r\n\r\n[installDeps](https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L41C3-L48C4) is defined as shown below in GeneratorHelper.\r\n\r\n```javascript\r\ninstallDeps() {\r\n    const { api } = this;\r\n    const npmClient = getNpmClient({ cwd: api.cwd });\r\n    installWithNpmClient({\r\n      npmClient,\r\n    });\r\n    logger.quietExpect.info(`Install dependencies with ${npmClient}`);\r\n  }\r\n```\r\n\r\nThere are two functions that we need to learn about to understand how Father installs npm deps programmatically.\r\n\r\n* getNpmClient\r\n    \r\n* installWithNpmClient\r\n    \r\n\r\nThis will be discussed in part 2, i.e., in the next article.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [src/commands/generators/jest.ts#L97](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L97)\r\n    \r\n2. [src/commands/generators/utils.ts#L1](https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L1)\r\n    \r\n3. [/search?q=repo%3Aumijs%2Ffather%20%40umijs%2Futils&type=code](https://github.com/search?q=repo%3Aumijs%2Ffather+%40umijs%2Futils&type=code)\r\n    \r\n4. [https://github.com/orgs/umijs/repositories?q=utils](https://github.com/orgs/umijs/repositories?q=utils)\r\n    \r\n5. [https://www.npmjs.com/package/@umijs/utils](https://www.npmjs.com/package/@umijs/utils)\r\n    \r\n6. [https://github.com/umijs/umi/blob/master/package.json#L82](https://github.com/umijs/umi/blob/master/package.json#L82)\r\n    \r\n7. [https://github.com/umijs/umi/tree/master/packages/utils](https://github.com/umijs/umi/tree/master/packages/utils)\r\n    \r\n8. [/packages/utils/src/npmClient.ts#L13](https://github.com/umijs/umi/blob/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/src/npmClient.ts#L13)\r\n    \r\n9. [/packages/utils/compiled](https://github.com/umijs/umi/tree/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/compiled)",
    "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},o=(n,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!g.call(n,r)&&r!==s&&c(n,r,{get:()=>e[r],enumerable:!(a=p(e,r))||a.enumerable});return n};var b=(n,e,s)=>(s=n!=null?d(m(n)):{},o(e||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),N=n=>o(c({},\"__esModule\",{value:!0}),n);var F=u((v,i)=>{i.exports=_jsx_runtime});var w={};f(w,{default:()=>h,frontmatter:()=>j});var l=b(F()),j={title:\"Part 1-How to install npm packages programmatically?\"};function t(n){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we review how \",(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17\",children:\"Father, an NPM package development tool\"}),\" is installs npm dependencies programmatically.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*rLf-G1IlanRswz_VhplkeQ.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h1,{id:\"how-did-i-find-this-code-snippet\",children:(0,l.jsx)(e.strong,{children:\"How did I find this code snippet?\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"I wrote an article about Father and in its README.md, I found that it supports micro generators that adds commonly used engineering capabilities to projects, such as setting up Jest for testing. This is similar to the \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga/thinkthroo/tree/main/packages/thinkthroo\",children:\"CLI tool I am building\"}),\", to generate code for authentication or S3 upload in Next.js.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"I started searching for the micro generators code and found a folder named \",(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators\",children:\"commands/generators\"}),\".\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*rLf-G1IlanRswz_VhplkeQ.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h1,{id:\"common-pattern-in-the-generators\",children:(0,l.jsx)(e.strong,{children:\"Common pattern in the generators\"})}),`\n`,(0,l.jsx)(e.p,{children:\"You will see that there is a common pattern in the way these generators are defined.\"}),`\n`,(0,l.jsx)(e.h2,{id:\"generatorseslintts\",children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/eslint.ts\",children:(0,l.jsx)(e.strong,{children:\"generators/eslint.ts\"})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/eslint.ts\",children:\"eslint.ts\"}),\" has the below code\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorType \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@umijs/core'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" logger \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fg \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'fast-glob'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" writeFileSync \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'fs'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" join \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'path'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" IApi \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../types'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorHelper \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" IApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"describe\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'generator:eslint'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"registerGenerator\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'eslint'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'Enable ESLint'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    description\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'Setup ESLint Configuration'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorType\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"enable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    checkEnable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    disabledDescription\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      'ESLint has already enabled. You can remove .eslintrc, then run this again to re-setup.'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    fn\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ....\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"generatorsjestts\",children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42\",children:(0,l.jsx)(e.strong,{children:\"generators/jest.ts\"})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42\",children:\"jest.ts\"}),\" has the below definition:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorType \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@umijs/core'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" logger \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" existsSync\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" writeFileSync \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'fs'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" join \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'path'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" IApi \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../types'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorHelper\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" promptsExitWhenCancel \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" IApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"describe\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'generator:jest'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"registerGenerator\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'jest'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'Enable Jest'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    description\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'Setup Jest Configuration'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorType\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"enable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    checkEnable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    disabledDescription\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      'Jest has already enabled. You can remove jest.config.{ts,js}, then run this again to re-setup.'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    fn\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Do you see the common pattern in these two definitions above? there is\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"api.describe\"}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"This accepts an object that has the below properties:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsx)(e.li,{children:\"key\"}),`\n`]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"api.registerGenerator\"}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"This accepts an object that has the below properties:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"key\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"name\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"description\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"type\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"checkEnable\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"disabledDescription\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"fn\"}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(e.h1,{id:\"hinstalldeps\",children:(0,l.jsx)(e.strong,{children:\"h.installDeps()\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators\",children:\"At line 97 in generators/jest.ts\"}),\", you find this below code snippet\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"h\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"installDeps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"What is h here? \",(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42\",children:\"At line 27\"}),\", you will see h is initialized as shown below:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" h \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorHelper\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"To see how the installDeps is defined, we need to review \",(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L6\",children:\"GeneratorHelper\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"generatorhelper\",children:(0,l.jsx)(e.strong,{children:\"GeneratorHelper\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L19\",children:\"GeneratorHelper\"}),\" has the below shown functions at the time of writing this article\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getNpmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" installWithNpmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" prompts \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@umijs/utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" writeFileSync \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'fs'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" IApi \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../types'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" logger \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" class\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" GeneratorHelper\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  constructor(readonly\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" IApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {}\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  addDevDeps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"deps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Record\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">)\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  addScript\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cmd\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  private\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" addScriptToPkg\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cmd\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  installDeps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  \"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"installdeps\",children:(0,l.jsx)(e.strong,{children:\"installDeps\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L41C3-L48C4\",children:\"installDeps\"}),\" is defined as shown below in GeneratorHelper.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"installDeps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" npmClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getNpmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cwd\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cwd \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    installWithNpmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      npmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    });\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    logger\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"quietExpect\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"info\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`Install dependencies with ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"npmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"There are two functions that we need to learn about to understand how Father installs npm deps programmatically.\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"getNpmClient\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"installWithNpmClient\"}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"This will be discussed in part 2, i.e., in the next article.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"references\",children:(0,l.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L97\",children:\"src/commands/generators/jest.ts#L97\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L1\",children:\"src/commands/generators/utils.ts#L1\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Aumijs%2Ffather+%40umijs%2Futils&type=code\",children:\"/search?q=repo%3Aumijs%2Ffather%20%40umijs%2Futils&type=code\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/orgs/umijs/repositories?q=utils\",children:\"https://github.com/orgs/umijs/repositories?q=utils\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://www.npmjs.com/package/@umijs/utils\",children:\"https://www.npmjs.com/package/@umijs/utils\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/umi/blob/master/package.json#L82\",children:\"https://github.com/umijs/umi/blob/master/package.json#L82\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/umi/tree/master/packages/utils\",children:\"https://github.com/umijs/umi/tree/master/packages/utils\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/umi/blob/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/src/npmClient.ts#L13\",children:\"/packages/utils/src/npmClient.ts#L13\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/umi/tree/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/compiled\",children:\"/packages/utils/compiled\"})}),`\n`]}),`\n`]})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return N(w);})();\n;return Component;"
  },
  "_id": "blog/part-1-npm-package-install.mdx",
  "_raw": {
    "sourceFilePath": "blog/part-1-npm-package-install.mdx",
    "sourceFileName": "part-1-npm-package-install.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/part-1-npm-package-install"
  },
  "type": "Doc",
  "slug": "/blog/part-1-npm-package-install",
  "slugAsParams": "part-1-npm-package-install"
}