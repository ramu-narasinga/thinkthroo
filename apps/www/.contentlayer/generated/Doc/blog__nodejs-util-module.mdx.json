{
  "title": "Node.js util module usage in Changesets\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nYou will find this below import at [line 4 in Changesets source code](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4)\r\n\r\n```plaintext\r\nimport { format } from \"util\";\r\n```\r\n\r\nIn this article, an overview of util module and its usage in Changesets is provided.\r\n\r\n### Util module\r\n\r\nThe util module is primarily designed to support the needs of Node.js’ own internal APIs. However, many of the utilities are useful for application and module developers as well. It can be accessed using:\r\n\r\n```plaintext\r\nconst util = require('util');\r\n```\r\n\r\nYou can read more about Util module [here](https://nodejs.org/docs/latest-v8.x/api/util.html).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*pLyBJFlAaaKiVXfK8YFN-A.png)\r\n\r\nUtil module has quite some APIs, but we are interested in Format API as this is what is found to be used in Changesets source code.\r\n\r\n### util.format\r\n\r\nThe util.format() method returns a formatted string using the first argument as a printf-like format.\r\n\r\nThe first argument is a string containing zero or more placeholder tokens. Each placeholder token is replaced with the converted value from the corresponding argument. Supported placeholders are:\r\n\r\n* %s — String.\r\n    \r\n* %d — Number (integer or floating point value).\r\n    \r\n* %i — Integer.\r\n    \r\n* %f — Floating point value.\r\n    \r\n* %j — JSON. Replaced with the string ‘\\[Circular\\]’ if the argument contains circular references.\r\n    \r\n* %o — Object. A string representation of an object with generic JavaScript object formatting. Similar to   \r\n    util.inspect() with options \\{ showHidden: true, depth: 4, showProxy: true \\}. This will show the full object   \r\n    including non-enumerable symbols and properties.\r\n    \r\n* %O — Object. A string representation of an object with generic JavaScript object formatting. Similar to util.inspect()   \r\n    without options. This will show the full object not including non-enumerable symbols and properties.\r\n    \r\n* %% — single percent sign (‘%’). This does not consume an argument.\r\n    \r\n\r\nIf the placeholder does not have a corresponding argument, the placeholder is not replaced.\r\n\r\n```plaintext\r\nutil.format('%s:%s', 'foo');\r\n// Returns: 'foo:%s'\r\n```\r\n\r\nIf there are more arguments passed to the util.format() method than the number of placeholders, the extra arguments are coerced into strings then concatenated to the returned string, each delimited by a space. Excessive arguments whose typeof is ‘object’ or ‘symbol’ (except null) will be transformed by util.inspect().\r\n\r\n```plaintext\r\nutil.format('%s:%s', 'foo', 'bar', 'baz'); // 'foo:bar baz'\r\n```\r\n\r\nIf the first argument is not a string then util.format() returns a string that is the concatenation of all arguments separated by spaces. Each argument is converted to a string using util.inspect().\r\n\r\n```plaintext\r\nutil.format(1, 2, 3); // '1 2 3'\r\n```\r\n\r\nIf only one argument is passed to util.format(), it is returned as it is without any formatting.\r\n\r\n```plaintext\r\nutil.format('%% %s'); // '%% %s'\r\n```\r\n\r\nNow that we understand the basics of Util module and the format API, let’s now look at format usage in Changesets.\r\n\r\n### util.format usage in Changesets\r\n\r\nSearching for format, I found [2 instances where format is used](https://github.com/search?q=repo%3Achangesets%2Fchangesets+format%28&type=code).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*_hrWkFg_3ndxW8BKYrWKLg.png)\r\n\r\n```plaintext\r\n${format(\"\", err).replace(process.cwd(), \"<cwd>\")}\r\n```\r\n\r\nThis just outputs error and there are no replacements to be made since the first argument is an empty string.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*_hrWkFg_3ndxW8BKYrWKLg.png)\r\n\r\n```plaintext\r\nutil\r\n .format(\"\", …args)\r\n .split(\"\\n\")\r\n .join(\"\\n\" + fullPrefix + \" \")\r\n```\r\n\r\nThis produces a string separated by a space, assuming …args is comma separated\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://www.npmjs.com/package/util](https://www.npmjs.com/package/util)\r\n    \r\n2. [https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4)\r\n    \r\n3. [https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88)\r\n    \r\n4. [https://nodejs.org/docs/latest-v8.x/api/util.html#util\\_util\\_format\\_format\\_args](https://nodejs.org/docs/latest-v8.x/api/util.html#util_util_format_format_args)\r\n    \r\n5. [https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L23](https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L23)\r\n    \r\n6. [https://github.com/changesets/changesets/blob/main/packages/get-github-info/src/index.test.ts#L127](https://github.com/changesets/changesets/blob/main/packages/get-github-info/src/index.test.ts#L127)\r\n    \r\n7. [https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88)",
    "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),x=(n,e)=>{for(var a in e)r(n,a,{get:e[a],enumerable:!0})},l=(n,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!f.call(n,i)&&i!==a&&r(n,i,{get:()=>e[i],enumerable:!(s=m(e,i))||s.enumerable});return n};var w=(n,e,a)=>(a=n!=null?p(u(n)):{},l(e||!n||!n.__esModule?r(a,\"default\",{value:n,enumerable:!0}):a,n)),y=n=>l(r({},\"__esModule\",{value:!0}),n);var h=b((N,c)=>{c.exports=_jsx_runtime});var j={};x(j,{default:()=>o,frontmatter:()=>k});var t=w(h()),k={title:\"Node.js util module usage in Changesets\"};function d(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"You will find this below import at \",(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4\",children:\"line 4 in Changesets source code\"})]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:'import { format } from \"util\";'})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"In this article, an overview of util module and its usage in Changesets is provided.\"}),`\n`,(0,t.jsx)(e.h3,{id:\"util-module\",children:\"Util module\"}),`\n`,(0,t.jsx)(e.p,{children:\"The util module is primarily designed to support the needs of Node.js\\u2019 own internal APIs. However, many of the utilities are useful for application and module developers as well. It can be accessed using:\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"const util = require('util');\"})})})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"You can read more about Util module \",(0,t.jsx)(e.a,{href:\"https://nodejs.org/docs/latest-v8.x/api/util.html\",children:\"here\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*pLyBJFlAaaKiVXfK8YFN-A.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Util module has quite some APIs, but we are interested in Format API as this is what is found to be used in Changesets source code.\"}),`\n`,(0,t.jsx)(e.h3,{id:\"utilformat\",children:\"util.format\"}),`\n`,(0,t.jsx)(e.p,{children:\"The util.format() method returns a formatted string using the first argument as a printf-like format.\"}),`\n`,(0,t.jsx)(e.p,{children:\"The first argument is a string containing zero or more placeholder tokens. Each placeholder token is replaced with the converted value from the corresponding argument. Supported placeholders are:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%s\\u200A\\u2014\\u200AString.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%d\\u200A\\u2014\\u200ANumber (integer or floating point value).\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%i\\u200A\\u2014\\u200AInteger.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%f\\u200A\\u2014\\u200AFloating point value.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%j\\u200A\\u2014\\u200AJSON. Replaced with the string \\u2018[Circular]\\u2019 if the argument contains circular references.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"%o\\u200A\\u2014\\u200AObject. A string representation of an object with generic JavaScript object formatting. Similar to\\xA0\",(0,t.jsx)(e.br,{}),`\n`,\"util.inspect() with options { showHidden: true, depth: 4, showProxy: true }. This will show the full object\\xA0\",(0,t.jsx)(e.br,{}),`\n`,\"including non-enumerable symbols and properties.\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"%O\\u200A\\u2014\\u200AObject. A string representation of an object with generic JavaScript object formatting. Similar to util.inspect()\\xA0\",(0,t.jsx)(e.br,{}),`\n`,\"without options. This will show the full object not including non-enumerable symbols and properties.\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%%\\u200A\\u2014\\u200Asingle percent sign (\\u2018%\\u2019). This does not consume an argument.\"}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:\"If the placeholder does not have a corresponding argument, the placeholder is not replaced.\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"util.format('%s:%s', 'foo');\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"// Returns: 'foo:%s'\"})})]})})}),`\n`,(0,t.jsx)(e.p,{children:\"If there are more arguments passed to the util.format() method than the number of placeholders, the extra arguments are coerced into strings then concatenated to the returned string, each delimited by a space. Excessive arguments whose typeof is \\u2018object\\u2019 or \\u2018symbol\\u2019 (except null) will be transformed by util.inspect().\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"util.format('%s:%s', 'foo', 'bar', 'baz'); // 'foo:bar baz'\"})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"If the first argument is not a string then util.format() returns a string that is the concatenation of all arguments separated by spaces. Each argument is converted to a string using util.inspect().\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"util.format(1, 2, 3); // '1 2 3'\"})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"If only one argument is passed to util.format(), it is returned as it is without any formatting.\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"util.format('%% %s'); // '%% %s'\"})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"Now that we understand the basics of Util module and the format API, let\\u2019s now look at format usage in Changesets.\"}),`\n`,(0,t.jsx)(e.h3,{id:\"utilformat-usage-in-changesets\",children:\"util.format usage in Changesets\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Searching for format, I found \",(0,t.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Achangesets%2Fchangesets+format%28&type=code\",children:\"2 instances where format is used\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*_hrWkFg_3ndxW8BKYrWKLg.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:'${format(\"\", err).replace(process.cwd(), \"<cwd>\")}'})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"This just outputs error and there are no replacements to be made since the first argument is an empty string.\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*_hrWkFg_3ndxW8BKYrWKLg.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"util\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:' .format(\"\", \\u2026args)'})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:' .split(\"\\\\n\")'})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:' .join(\"\\\\n\" + fullPrefix + \" \")'})})]})})}),`\n`,(0,t.jsx)(e.p,{children:\"This produces a string separated by a space, assuming\\xA0\\u2026args is comma separated\"}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://www.npmjs.com/package/util\",children:\"https://www.npmjs.com/package/util\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://nodejs.org/docs/latest-v8.x/api/util.html#util_util_format_format_args\",children:\"https://nodejs.org/docs/latest-v8.x/api/util.html#util_util_format_format_args\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L23\",children:\"https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L23\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/get-github-info/src/index.test.ts#L127\",children:\"https://github.com/changesets/changesets/blob/main/packages/get-github-info/src/index.test.ts#L127\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88\"})}),`\n`]}),`\n`]})]})}function o(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}return y(j);})();\n;return Component;"
  },
  "_id": "blog/nodejs-util-module.mdx",
  "_raw": {
    "sourceFilePath": "blog/nodejs-util-module.mdx",
    "sourceFileName": "nodejs-util-module.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/nodejs-util-module"
  },
  "type": "Doc",
  "slug": "/blog/nodejs-util-module",
  "slugAsParams": "nodejs-util-module"
}