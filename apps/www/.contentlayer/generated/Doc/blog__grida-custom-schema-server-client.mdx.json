{
  "title": "Custom schema specific Supabase Server Component clients in Grida Form workspace\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, we review the code in [server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17) in Grida. Well, what’s so special about this file? let’s find out.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*XZ1SgtGtKbE0wQ2lfxILWA.png)\r\n\r\n# **Server Component Client**\r\n\r\nBefore we look at [Grida Forms server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17), Let’s first understand what a Server Component Client means.\r\n\r\nIn the [Supabase Auth guides](https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app), at step 3, you will find the information about Server Component Client and it has the below code.\r\n\r\n```javascript\r\nimport { createServerClient } from '@supabase/ssr'\r\nimport { cookies } from 'next/headers'\r\n\r\nexport async function createClient() {\r\n  const cookieStore = await cookies()\r\n\r\n  return createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        getAll() {\r\n          return cookieStore.getAll()\r\n        },\r\n        setAll(cookiesToSet) {\r\n          try {\r\n            cookiesToSet.forEach(({ name, value, options }) =>\r\n              cookieStore.set(name, value, options)\r\n            )\r\n          } catch {\r\n            // The `setAll` method was called from a Server Component.\r\n            // This can be ignored if you have middleware refreshing\r\n            // user sessions.\r\n          }\r\n        },\r\n      },\r\n    }\r\n  )\r\n}\r\n```\r\n\r\n> *Server Component client — To access Supabase from Server Components, Server Actions, and Route Handlers, which run only on the server.*\r\n\r\nSo far, I have reviewed Supabase Server Component Client in Nextjs-Subscription-Payments example and Midday.ai but I have never seen multiple Server components clients defined in the same file like in [Grida Form server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17)\r\n\r\n# **Grida Form server.ts**\r\n\r\n[Grida Form server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17) has multiple Server Component clients defined.\r\n\r\n## **workspace client**\r\n\r\nAt [line 7](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L7C1-L15C3), you will find the below code:\r\n\r\n```javascript\r\nexport const workspaceclient = createClient<Database, \"public\">(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_KEY!,\r\n  {\r\n    db: {\r\n      schema: \"public\",\r\n    },\r\n  }\r\n);\r\n```\r\n\r\n## **Grida Forms Client**\r\n\r\nAt [line 17](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17C1-L25C3), you will find the below code:\r\n\r\n```javascript\r\nexport const grida_forms_client = createClient<Database, \"grida_forms\">(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_KEY!,\r\n  {\r\n    db: {\r\n      schema: \"grida_forms\",\r\n    },\r\n  }\r\n);\r\n```\r\n\r\n## **Grida Sites Client**\r\n\r\nAt [line 27](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L27C1-L35C3), you will find this below code:\r\n\r\n```javascript\r\nexport const grida_sites_client = createClient<Database, \"grida_sites\">(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_KEY!,\r\n  {\r\n    db: {\r\n      schema: \"grida_sites\",\r\n    },\r\n  }\r\n);\r\n```\r\n\r\n## **Grida Commerce Client**\r\n\r\nAt [line 37](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L37C1-L46C1), you will find the below code:\r\n\r\n```javascript\r\nexport const grida_commerce_client = createClient<Database, \"grida_commerce\">(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_KEY!,\r\n  {\r\n    db: {\r\n      schema: \"grida_commerce\",\r\n    },\r\n  }\r\n);\r\n```\r\n\r\n## **Grida XSupabase Client**\r\n\r\nAt [line 47](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L47C1-L54C4), you will find the below code:\r\n\r\n```javascript\r\nexport const grida_xsupabase_client = createClient<\r\n  Database,\r\n  \"grida_x_supabase\"\r\n>(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.SUPABASE_SERVICE_KEY!, {\r\n  db: {\r\n    schema: \"grida_x_supabase\",\r\n  },\r\n});\r\n```\r\n\r\nAll these clients are located in a single file — [grida/apps/forms/lib/supabase/server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L47C1-L54C4)\r\n\r\n# **createClient imported**\r\n\r\nAt [line 4 in server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L4), you will find the below import\r\n\r\n```javascript\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n```\r\n\r\nBut is this same as what is provided in the Supabase Auth Documentation? Nope. You will find the below import in Supabase Auth Docs.\r\n\r\n```javascript\r\nimport { createServerClient } from '@supabase/ssr'\r\n```\r\n\r\nWait, so Supabase Auth Docs tells us to use [`@supabase/ssr`](http://twitter.com/supabase/ssr) and Grida Forms workspace uses [`@supabase/supabase-js`](http://twitter.com/supabase/supabase-js). Do you know why?\r\n\r\nIn order to configure your Supabase client with a custom schema, you will have to use [@supabase/supabase-js](http://twitter.com/supabase/supabase-js). [Using Custom Schema Guide](https://supabase.com/docs/guides/api/using-custom-schemas) has the following example code snippet provided:\r\n\r\n```javascript\r\n// Initialize the JS client\r\nimport { createClient } from '@supabase/supabase-js'\r\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, { db: { schema: 'myschema' } })\r\n// Make a request\r\nconst { data: todos, error } = await supabase.from('todos').select('*')\r\n// You can also change the target schema on a per-query basis\r\nconst { data: todos, error } = await supabase.schema('myschema').from('todos').select('*')\r\n```\r\n\r\nYou will find the clients in Grida Form server.ts have the same syntax for defining the db schema.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17)\r\n    \r\n2. [https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app](https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app)\r\n    \r\n3. [https://supabase.com/docs/guides/api/using-custom-schemas](https://supabase.com/docs/guides/api/using-custom-schemas)",
    "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},o=(n,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(n,r)&&r!==s&&c(n,r,{get:()=>e[r],enumerable:!(a=p(e,r))||a.enumerable});return n};var f=(n,e,s)=>(s=n!=null?d(m(n)):{},o(e||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),v=n=>o(c({},\"__esModule\",{value:!0}),n);var F=g((C,i)=>{i.exports=_jsx_runtime});var S={};b(S,{default:()=>h,frontmatter:()=>N});var l=f(F()),N={title:\"Custom schema specific Supabase Server Component clients in Grida Form workspace\"};function t(n){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we review the code in \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\",children:\"server.ts\"}),\" in Grida. Well, what\\u2019s so special about this file? let\\u2019s find out.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*XZ1SgtGtKbE0wQ2lfxILWA.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h1,{id:\"server-component-client\",children:(0,l.jsx)(e.strong,{children:\"Server Component Client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Before we look at \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\",children:\"Grida Forms server.ts\"}),\", Let\\u2019s first understand what a Server Component Client means.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"In the \",(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app\",children:\"Supabase Auth guides\"}),\", at step 3, you will find the information about Server Component Client and it has the below code.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createServerClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/ssr'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookies \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next/headers'\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookieStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createServerClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_ANON_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        getAll\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookieStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getAll\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        setAll\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cookiesToSet\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          try\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            cookiesToSet\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"forEach\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              cookieStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            )\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" catch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" The `setAll` method was called from a Server Component.\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" This can be ignored if you have middleware refreshing\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" user sessions.\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:\"Server Component client \\u2014 To access Supabase from Server Components, Server Actions, and Route Handlers, which run only on the server.\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[\"So far, I have reviewed Supabase Server Component Client in Nextjs-Subscription-Payments example and Midday.ai but I have never seen multiple Server components clients defined in the same file like in \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\",children:\"Grida Form server.ts\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"grida-form-serverts\",children:(0,l.jsx)(e.strong,{children:\"Grida Form server.ts\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\",children:\"Grida Form server.ts\"}),\" has multiple Server Component clients defined.\"]}),`\n`,(0,l.jsx)(e.h2,{id:\"workspace-client\",children:(0,l.jsx)(e.strong,{children:\"workspace client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L7C1-L15C3\",children:\"line 7\"}),\", you will find the below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" workspaceclient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"public\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_SERVICE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"public\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"grida-forms-client\",children:(0,l.jsx)(e.strong,{children:\"Grida Forms Client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17C1-L25C3\",children:\"line 17\"}),\", you will find the below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" grida_forms_client \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_forms\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_SERVICE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_forms\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"grida-sites-client\",children:(0,l.jsx)(e.strong,{children:\"Grida Sites Client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L27C1-L35C3\",children:\"line 27\"}),\", you will find this below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" grida_sites_client \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_sites\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_SERVICE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_sites\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"grida-commerce-client\",children:(0,l.jsx)(e.strong,{children:\"Grida Commerce Client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L37C1-L46C1\",children:\"line 37\"}),\", you will find the below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" grida_commerce_client \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_commerce\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_SERVICE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_commerce\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"grida-xsupabase-client\",children:(0,l.jsx)(e.strong,{children:\"Grida XSupabase Client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L47C1-L54C4\",children:\"line 47\"}),\", you will find the below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" grida_xsupabase_client \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  Database\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"grida_x_supabase\"'})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_SERVICE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_x_supabase\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"All these clients are located in a single file \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L47C1-L54C4\",children:\"grida/apps/forms/lib/supabase/server.ts\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"createclient-imported\",children:(0,l.jsx)(e.strong,{children:\"createClient imported\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L4\",children:\"line 4 in server.ts\"}),\", you will find the below import\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@supabase/supabase-js\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,l.jsx)(e.p,{children:\"But is this same as what is provided in the Supabase Auth Documentation? Nope. You will find the below import in Supabase Auth Docs.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createServerClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/ssr'\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Wait, so Supabase Auth Docs tells us to use \",(0,l.jsx)(e.a,{href:\"http://twitter.com/supabase/ssr\",children:(0,l.jsx)(e.code,{children:\"@supabase/ssr\"})}),\" and Grida Forms workspace uses \",(0,l.jsx)(e.a,{href:\"http://twitter.com/supabase/supabase-js\",children:(0,l.jsx)(e.code,{children:\"@supabase/supabase-js\"})}),\". Do you know why?\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"In order to configure your Supabase client with a custom schema, you will have to use \",(0,l.jsx)(e.a,{href:\"http://twitter.com/supabase/supabase-js\",children:\"@supabase/supabase-js\"}),\". \",(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/api/using-custom-schemas\",children:\"Using Custom Schema Guide\"}),\" has the following example code snippet provided:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Initialize the JS client\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/supabase-js'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" SUPABASE_ANON_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'myschema'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Make a request\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" todos\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" error \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'todos'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"select\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'*'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" You can also change the target schema on a per-query basis\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" todos\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" error \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'myschema'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'todos'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"select\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'*'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"You will find the clients in Grida Form server.ts have the same syntax for defining the db schema.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me-1\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"references\",children:(0,l.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app\",children:\"https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/api/using-custom-schemas\",children:\"https://supabase.com/docs/guides/api/using-custom-schemas\"})}),`\n`]}),`\n`]})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return v(S);})();\n;return Component;"
  },
  "_id": "blog/grida-custom-schema-server-client.mdx",
  "_raw": {
    "sourceFilePath": "blog/grida-custom-schema-server-client.mdx",
    "sourceFileName": "grida-custom-schema-server-client.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/grida-custom-schema-server-client"
  },
  "type": "Doc",
  "slug": "/blog/grida-custom-schema-server-client",
  "slugAsParams": "grida-custom-schema-server-client"
}