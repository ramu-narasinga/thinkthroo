{
  "title": "__useInternal() in Grida codebase.\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, we will review the [\\_\\_useInternal() function in Grida codebase](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133).\r\n\r\n```js\r\nfunction __useInternal() {\r\n  const state = useContext(DocumentContext);\r\n  if (!state) {\r\n    throw new Error(\r\n      \"useDocument must be used within a StandaloneDocumentEditor\"\r\n    );\r\n  }\r\n\r\n  const dispatch = __useDispatch();\r\n\r\n  return useMemo(() => [state, dispatch] as const, [state, dispatch]);\r\n}\r\n```\r\n\r\nHow did I come across this function? In the previous articles, I wrote Toolbar component and a function called setCursorMode. \r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*bdohzvRBjI6wxGkvgj2L4g.png)\r\n\r\nIn the [useEventTarget function](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087), state and dispatch are destructured from this function, \\_\\_useInternal().\r\n\r\n```js\r\nexport function useEventTarget() {\r\n  const [state, dispatch] = __useInternal();\r\n```\r\n\r\n#### DocumentContext\r\n\r\nDocumentContext is created at [line number 41 in provider.tsx](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L41).\r\n\r\n```js\r\nconst DocumentContext = createContext<IDocumentEditorState | null>(null);\r\n```\r\n\r\n#### DocumentContext.Provider\r\n\r\nYou will find DocumentContext.Provider in StandaloneDocumentEditor [component at line 102](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L102).\r\n\r\n```js\r\nreturn (\r\n    <DocumentContext.Provider value={state}>\r\n      <DocumentDispatcherContext.Provider value={__dispatch}>\r\n        <ProgramDataContextHost>\r\n          <DataProvider data={{ props: shallowRootProps }}>\r\n            <EditorGoogleFontsManager>\r\n              {/*  */}\r\n              {children}\r\n            </EditorGoogleFontsManager>\r\n          </DataProvider>\r\n        </ProgramDataContextHost>\r\n      </DocumentDispatcherContext.Provider>\r\n    </DocumentContext.Provider>\r\n  );\r\n```\r\n\r\nThis is where value is initialised to state.\r\n\r\n#### state\r\n\r\nThe below code is picked from [line 71 in provider.tsx](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L71C2-L74C5)\r\n\r\n```js\r\nconst state = useMemo(\r\n  () => initDocumentEditorState({ ...initial, editable, debug }),\r\n  [initial, editable, debug]\r\n);\r\n```\r\n\r\nLet’s just follow along the code as this is about state that used in the canvas. I would find out how initDocumentEditorState looks like.\r\n\r\n#### initDocumentEditorState\r\n\r\nThis function is defined in [grida-react-canvas/state.ts at line 600](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/state.ts#L600)\r\n\r\n```js\r\nexport function initDocumentEditorState({\r\n  debug,\r\n  ...init\r\n}: Omit<IDocumentEditorInit, \"debug\"> & {\r\n  debug?: boolean;\r\n}): IDocumentEditorState {\r\n  const s = new document.DocumentState(init.document);\r\n\r\n  // console.log(\"i\", init[\"transform\"]);\r\n\r\n  return {\r\n    transform: cmath.transform.identity,\r\n    debug: debug ?? false,\r\n    selection: [],\r\n    hovered_node_id: null,\r\n    hovered_vertex_idx: null,\r\n    pointer: {\r\n      position: cmath.vector2.zero,\r\n    },\r\n    history: {\r\n      future: [],\r\n      past: [],\r\n    },\r\n    gesture: { type: \"idle\" },\r\n    gesture_modifiers: {\r\n      translate_with_hierarchy_change: \"on\",\r\n      translate_with_clone: \"off\",\r\n      tarnslate_with_axis_lock: \"off\",\r\n      transform_with_center_origin: \"off\",\r\n      transform_with_preserve_aspect_ratio: \"off\",\r\n      rotate_with_quantize: \"off\",\r\n    },\r\n    document_ctx: document.Context.from(init.document).snapshot(),\r\n    // history: initialHistoryState(init),\r\n    surface_raycast_targeting: DEFAULT_RAY_TARGETING,\r\n    surface_measurement_targeting: \"off\",\r\n    surface_measurement_targeting_locked: false,\r\n    surface_raycast_detected_node_ids: [],\r\n    googlefonts: s.fonts().map((family) => ({ family })),\r\n    cursor_mode: { type: \"cursor\" },\r\n    ...init,\r\n  };\r\n}\r\n```\r\n\r\nThis function is used in playground.tsx\r\n\r\n#### playground.tsx\r\n\r\n```js\r\nconst [state, dispatch] = useReducer(\r\n    standaloneDocumentReducer,\r\n    initDocumentEditorState({\r\n      editable: true,\r\n      debug: pref.debug,\r\n      document: {\r\n        nodes: {\r\n          root: {\r\n            id: \"root\",\r\n            name: \"root\",\r\n            active: true,\r\n            locked: false,\r\n            type: \"container\",\r\n            children: [],\r\n            width: 800,\r\n            height: 600,\r\n            position: \"relative\",\r\n            style: {},\r\n            opacity: 1,\r\n            zIndex: 0,\r\n            rotation: 0,\r\n            expanded: false,\r\n            cornerRadius: 0,\r\n            padding: 0,\r\n            layout: \"flow\",\r\n            direction: \"horizontal\",\r\n            mainAxisAlignment: \"start\",\r\n            crossAxisAlignment: \"start\",\r\n            mainAxisGap: 0,\r\n            crossAxisGap: 0,\r\n          },\r\n        },\r\n        root_id: \"root\",\r\n      },\r\n    })\r\n```\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087)\r\n    \r\n2. [https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133C1-L144C2](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133C1-L144C2)",
    "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,l)=>()=>(l||n((l={exports:{}}).exports,l),l.exports),f=(n,l)=>{for(var s in l)c(n,s,{get:l[s],enumerable:!0})},o=(n,l,s,F)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let r of y(l))!u.call(n,r)&&r!==s&&c(n,r,{get:()=>l[r],enumerable:!(F=p(l,r))||F.enumerable});return n};var N=(n,l,s)=>(s=n!=null?h(m(n)):{},o(l||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),b=n=>o(c({},\"__esModule\",{value:!0}),n);var i=g((w,a)=>{a.exports=_jsx_runtime});var v={};f(v,{default:()=>d,frontmatter:()=>_});var e=N(i()),_={title:\"__useInternal() in Grida codebase.\"};function t(n){let l={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(l.p,{children:[\"In this article, we will review the \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133\",children:\"__useInternal() function in Grida codebase\"}),\".\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" __useInternal\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" state \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" useContext\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentContext\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    throw\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" Error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'      \"useDocument must be used within a StandaloneDocumentEditor\"'})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    );\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" dispatch \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" __useDispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" useMemo\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" dispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" const,\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" dispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"]);\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"How did I come across this function? In the previous articles, I wrote Toolbar component and a function called setCursorMode.\\xA0\"}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*bdohzvRBjI6wxGkvgj2L4g.png\",alt:\"\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"In the \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087\",children:\"useEventTarget function\"}),\", state and dispatch are destructured from this function, __useInternal().\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" useEventTarget\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" dispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" __useInternal\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"();\"})]})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"documentcontext\",children:\"DocumentContext\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"DocumentContext is created at \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L41\",children:\"line number 41 in provider.tsx\"}),\".\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsx)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" DocumentContext \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" createContext\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"IDocumentEditorState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">(null);\"})]})})})}),`\n`,(0,e.jsx)(l.h4,{id:\"documentcontextprovider\",children:\"DocumentContext.Provider\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"You will find DocumentContext.Provider in StandaloneDocumentEditor \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L102\",children:\"component at line 102\"}),\".\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentContext.Provider value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentDispatcherContext.Provider value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"__dispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ProgramDataContextHost\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DataProvider data\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={{\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" props\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" shallowRootProps \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}}>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"EditorGoogleFontsManager\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"              {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/*\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  */\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"              {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"children\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"EditorGoogleFontsManager\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DataProvider\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ProgramDataContextHost\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentDispatcherContext.Provider\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentContext.Provider\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  );\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"This is where value is initialised to state.\"}),`\n`,(0,e.jsx)(l.h4,{id:\"state\",children:\"state\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"The below code is picked from \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L71C2-L74C5\",children:\"line 71 in provider.tsx\"})]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" state \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" useMemo\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  ()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" initDocumentEditorState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ...\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"initial\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" editable\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" debug \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"initial\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" editable\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"]\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"Let\\u2019s just follow along the code as this is about state that used in the canvas. I would find out how initDocumentEditorState looks like.\"}),`\n`,(0,e.jsx)(l.h4,{id:\"initdocumenteditorstate\",children:\"initDocumentEditorState\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"This function is defined in \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/state.ts#L600\",children:\"grida-react-canvas/state.ts at line 600\"})]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" initDocumentEditorState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  ...\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"init\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}:\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Omit\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"IDocumentEditorInit\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"debug\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" &\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" boolean\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}):\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" IDocumentEditorState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" s \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" document\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"init\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"document\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:' console.log(\"i\", init[\"transform\"]);'})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    transform\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" cmath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"transform\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"identity\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" debug \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    selection\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    hovered_node_id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" null,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    hovered_vertex_idx\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" null,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    pointer\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      position\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" cmath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"vector2\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"zero\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    history\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      future\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      past\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    gesture\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"idle\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    gesture_modifiers\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      translate_with_hierarchy_change\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"on\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      translate_with_clone\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      tarnslate_with_axis_lock\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      transform_with_center_origin\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      transform_with_preserve_aspect_ratio\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      rotate_with_quantize\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    document_ctx\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" document\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"Context\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"from\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"init\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"document\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"snapshot\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" history: initialHistoryState(init),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    surface_raycast_targeting\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" DEFAULT_RAY_TARGETING\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    surface_measurement_targeting\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    surface_measurement_targeting_locked\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    surface_raycast_detected_node_ids\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    googlefonts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" s\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"fonts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"map\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"family\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" family \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"})),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    cursor_mode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"cursor\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    ...\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"init\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  };\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"This function is used in playground.tsx\"}),`\n`,(0,e.jsx)(l.h4,{id:\"playgroundtsx\",children:\"playground.tsx\"}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" dispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" useReducer\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    standaloneDocumentReducer\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    initDocumentEditorState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      editable\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" pref\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      document\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        nodes\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          root\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"root\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"root\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            active\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            locked\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"container\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            children\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            width\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 800,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            height\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 600,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            position\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"relative\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            style\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {},\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            opacity\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 1,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            zIndex\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            rotation\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            expanded\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            cornerRadius\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            padding\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            layout\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"flow\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            direction\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"horizontal\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            mainAxisAlignment\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"start\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            crossAxisAlignment\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"start\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            mainAxisGap\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            crossAxisGap\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          },\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        root_id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"root\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    })\"})})]})})}),`\n`,(0,e.jsx)(l.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,e.jsx)(l.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.em,{children:(0,e.jsxs)(l.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(l.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(l.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,e.jsxs)(l.ol,{children:[`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133C1-L144C2\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133C1-L144C2\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:l}=n.components||{};return l?(0,e.jsx)(l,{...n,children:(0,e.jsx)(t,{...n})}):t(n)}return b(v);})();\n;return Component;"
  },
  "_id": "blog/useinternal-in-grida.mdx",
  "_raw": {
    "sourceFilePath": "blog/useinternal-in-grida.mdx",
    "sourceFileName": "useinternal-in-grida.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/useinternal-in-grida"
  },
  "type": "Doc",
  "slug": "/blog/useinternal-in-grida",
  "slugAsParams": "useinternal-in-grida"
}