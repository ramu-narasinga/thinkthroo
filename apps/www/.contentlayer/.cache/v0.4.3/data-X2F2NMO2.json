{
  "cacheItemsMap": {
    "blog/add-a-test-case.mdx": {
      "document": {
        "title": "Add a test case when your open-source project’s issue is fixed.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nBuilding a stable project is hard and time consuming. When you open source that project, reliability and stability is important because you need to establish that trust and authority. As your open source project evolves and new features are introduced, regressions (bugs that reappear) can sneak back into the code. To prevent this, it is important to add test cases whenever an issue is fixed. These test cases act as a safety net, ensuring that future changes don’t reintroduce old bugs.\r\n\r\nIn this article, we’ll explore the importance of adding test cases for bug fixes by examining two issues from Zustand’s repository — [**Issue #84**](https://github.com/pmndrs/zustand/issues/84) and [**Issue #86**](https://github.com/pmndrs/zustand/issues/86). Zustand, a popular state management library for React, experienced these bugs in its subscription management. Both issues were subtle but critical, and writing test cases for them ensures they won’t surface again in future releases.\r\n\r\nMind you, these issues were reported on Zustand’s version — 2.2.1. Link to codesandbox: [https://codesandbox.io/s/quirky-taussig-ng90m](https://codesandbox.io/s/quirky-taussig-ng90m)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*49_ts2DhjaXfW0wgY3UVwQ.png)\r\n\r\nThe latest stable Zustand’s version is 4.5.5 but it’s good to learn what it means to add test cases to the bugs fixed after they were reported.\r\n\r\n# **Why Should You Add a Test Case After Fixing a Bug?**\r\n\r\nWhen an issue is reported and fixed in a codebase, it’s tempting to move on after the fix. But without a dedicated test case that reproduces the problem, there is no guarantee that the issue won’t recur in future updates. Even if the code seems stable after the fix, new features or refactors can sometimes undo the correction.\r\n\r\nHere’s why it’s crucial to add a test case after each bug fix:\r\n\r\n1. **Prevents Regressions:** As the code evolves, automated tests ensure that past issues don’t creep back in.\r\n    \r\n2. **Serves as Documentation:** Test cases provide clear examples of what was fixed and how the software should behave under similar conditions.\r\n    \r\n3. **Confidence in Future Development:** Contributors can confidently make changes, knowing that tests will catch any breaks.\r\n    \r\n\r\nNow, let’s look at real-world examples from Zustand’s codebase and see how test cases were added after issues #84 and #86 were fixed.\r\n\r\n# **Issue #84: Subscribers Can Be Corrupted During State Updates**\r\n\r\n## **Background**\r\n\r\nThe bug reported in [Issue #84](https://github.com/pmndrs/zustand/issues/84) revolved around Zustand’s subscription system. Under certain conditions, subscribers could be “orphaned” — meaning components subscribing to the store would stop receiving updates.\r\n\r\nWhen state updates happened during the component lifecycle (e.g., unmounts or re-renders), the array of subscribers could be corrupted. This caused a component that had subscribed to the store to never get updates, as its listener was overwritten by another subscriber.\r\n\r\nSubscribers are a Set. Here’s a proof from Zustand’s source code related to createStore\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*uN5rluQSzLdC3RYlvVch-w.png)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*_rfjvuNlw31UfAZeX3Bmsg.png)\r\n\r\n## **Test Case for Fixing Issue #84**\r\n\r\nAfter fixing this issue, Zustand added a test case to ensure the correct subscriber is removed on unmount:\r\n\r\n```plaintext\r\n// https://github.com/pmndrs/zustand/issues/84\r\nit('ensures the correct subscriber is removed on unmount', async () => {\r\n  const useBoundStore = create(() => ({ count: 0 }))\r\n  const api = useBoundStore\r\n\r\n  function increment() {\r\n    api.setState(({ count }) => ({ count: count + 1 }))\r\n  }\r\n\r\n  function Count() {\r\n    const c = useBoundStore((s) => s.count)\r\n    return <div>count: {c}</div>\r\n  }\r\n\r\n  function CountWithInitialIncrement() {\r\n    useLayoutEffect(increment, [])\r\n    return <Count />\r\n  }\r\n\r\n  function Component() {\r\n    const [Counter, setCounter] = useState(() => CountWithInitialIncrement)\r\n    useLayoutEffect(() => {\r\n      setCounter(() => Count)\r\n    }, [])\r\n    return (\r\n      <>\r\n        <Counter />\r\n        <Count />\r\n      </>\r\n    )\r\n  }\r\n\r\n  const { findAllByText } = render(\r\n    <>\r\n      <Component />\r\n    </>,\r\n  )\r\n\r\n  expect((await findAllByText('count: 1')).length).toBe(2)\r\n\r\n  act(increment)\r\n\r\n  expect((await findAllByText('count: 2')).length).toBe(2)\r\n})\r\n```\r\n\r\nThis test checks that the correct subscriber is removed when components unmount and ensures the subscription system functions as expected. Here’s what happens in the test:\r\n\r\n* A store is created with an initial `count` of `0`.\r\n    \r\n* Components subscribe to the `count` state.\r\n    \r\n* The `increment` function is called when the component mounts, increasing the `count`.\r\n    \r\n* After unmounting and mounting components, the test ensures that the right subscribers are removed and that the state update propagates correctly to the components still mounted.\r\n    \r\n\r\nThis ensures the original bug, where subscribers would be corrupted during the lifecycle, does not reoccur.\r\n\r\n# **Issue #86: Subscribers Overwritten on Component Remount**\r\n\r\n## **Background**\r\n\r\nIn [Issue #86](https://github.com/pmndrs/zustand/issues/86), an issue was reported where subscribers would stop receiving updates after components remounted. This happened because subscribers in Zustand were being overwritten with the same index when switching between mounted components.\r\n\r\nThe issue boiled down to a problem in managing multiple subscribers — each subscriber was assigned an index, and when a new component subscribed, the indices could conflict. This caused one subscriber to overwrite another, leading to components not receiving state updates after a remount.\r\n\r\n## **Test Case for Fixing Issue #86**\r\n\r\nHere’s the test case added after fixing this issue:\r\n\r\n```plaintext\r\n// https://github.com/pmndrs/zustand/issues/86\r\nit('ensures a subscriber is not mistakenly overwritten', async () => {\r\n  const useBoundStore = create(() => ({ count: 0 }))\r\n  const { setState } = useBoundStore\r\n\r\n  function Count1() {\r\n    const c = useBoundStore((s) => s.count)\r\n    return <div>count1: {c}</div>\r\n  }\r\n\r\n  function Count2() {\r\n    const c = useBoundStore((s) => s.count)\r\n    return <div>count2: {c}</div>\r\n  }\r\n\r\n  // Add 1st subscriber.\r\n  const { findAllByText, rerender } = render(\r\n    <StrictMode>\r\n      <Count1 />\r\n    </StrictMode>,\r\n  )\r\n\r\n  // Replace 1st subscriber with another.\r\n  rerender(\r\n    <StrictMode>\r\n      <Count2 />\r\n    </StrictMode>,\r\n  )\r\n\r\n  // Add 2 additional subscribers.\r\n  rerender(\r\n    <StrictMode>\r\n      <Count2 />\r\n      <Count1 />\r\n      <Count1 />\r\n    </StrictMode>,\r\n  )\r\n\r\n  // Call all subscribers\r\n  act(() => setState({ count: 1 }))\r\n\r\n  expect((await findAllByText('count1: 1')).length).toBe(2)\r\n  expect((await findAllByText('count2: 1')).length).toBe(1)\r\n})\r\n```\r\n\r\nThis test ensures that:\r\n\r\n* Subscribers are not overwritten when components are mounted and unmounted.\r\n    \r\n* Multiple components can subscribe to the same store without conflict.\r\n    \r\n* When the state changes, all subscribed components update correctly.\r\n    \r\n\r\nBy testing for the correct number of `count1` and `count2` components receiving updates, the test guarantees that the fix for this issue works and won't regress in future versions of Zustand.\r\n\r\n# **Lesson here is — “Ensure Stability with Tests”**\r\n\r\nThese two examples from Zustand illustrate why it is essential to add test cases after fixing bugs in an open-source project. They help ensure:\r\n\r\n* The original bug is fixed.\r\n    \r\n* Future changes do not break the fix.\r\n    \r\n* Contributors can refactor, add features, or improve performance without worrying about breaking functionality that was previously addressed.\r\n    \r\n\r\nBy writing test cases after bug fixes, you contribute to the long-term health of the project, helping both maintainers and users trust that the project is stable and well-maintained.\r\n\r\n# **Conclusion**\r\n\r\nAdding test cases after fixing bugs is a crucial habit for maintaining the integrity of your open-source project. As demonstrated in Zustand’s handling of Issues #84 and #86, these test cases help catch potential regressions and ensure the system behaves as expected in real-world scenarios.\r\n\r\nSo, the next time you fix a bug in your open-source project, don’t stop at the fix. Add a test case to ensure the issue is gone for good, safeguarding your project’s future stability.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L628](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L628)\r\n    \r\n2. [https://github.com/pmndrs/zustand/issues/86](https://github.com/pmndrs/zustand/issues/86)\r\n    \r\n3. [https://github.com/pmndrs/zustand/blob/v4.5.5/src/vanilla.ts#L89](https://github.com/pmndrs/zustand/blob/v4.5.5/src/vanilla.ts#L89)\r\n    \r\n4. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var a=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),N=(s,e)=>{for(var t in e)a(s,t,{get:e[t],enumerable:!0})},c=(s,e,t,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!b.call(s,i)&&i!==t&&a(s,i,{get:()=>e[i],enumerable:!(r=u(e,i))||r.enumerable});return s};var w=(s,e,t)=>(t=s!=null?p(g(s)):{},c(e||!s||!s.__esModule?a(t,\"default\",{value:s,enumerable:!0}):t,s)),y=s=>c(a({},\"__esModule\",{value:!0}),s);var d=f((C,l)=>{l.exports=_jsx_runtime});var v={};N(v,{default:()=>o,frontmatter:()=>x});var n=w(d()),x={title:\"Add a test case when your open-source project\\u2019s issue is fixed.\"};function h(s){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...s.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Building a stable project is hard and time consuming. When you open source that project, reliability and stability is important because you need to establish that trust and authority. As your open source project evolves and new features are introduced, regressions (bugs that reappear) can sneak back into the code. To prevent this, it is important to add test cases whenever an issue is fixed. These test cases act as a safety net, ensuring that future changes don\\u2019t reintroduce old bugs.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In this article, we\\u2019ll explore the importance of adding test cases for bug fixes by examining two issues from Zustand\\u2019s repository \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/issues/84\",children:(0,n.jsx)(e.strong,{children:\"Issue #84\"})}),\" and \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/issues/86\",children:(0,n.jsx)(e.strong,{children:\"Issue #86\"})}),\". Zustand, a popular state management library for React, experienced these bugs in its subscription management. Both issues were subtle but critical, and writing test cases for them ensures they won\\u2019t surface again in future releases.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Mind you, these issues were reported on Zustand\\u2019s version \\u2014 2.2.1. Link to codesandbox: \",(0,n.jsx)(e.a,{href:\"https://codesandbox.io/s/quirky-taussig-ng90m\",children:\"https://codesandbox.io/s/quirky-taussig-ng90m\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*49_ts2DhjaXfW0wgY3UVwQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"The latest stable Zustand\\u2019s version is 4.5.5 but it\\u2019s good to learn what it means to add test cases to the bugs fixed after they were reported.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"why-should-you-add-a-test-case-after-fixing-a-bug\",children:(0,n.jsx)(e.strong,{children:\"Why Should You Add a Test Case After Fixing a Bug?\"})}),`\n`,(0,n.jsx)(e.p,{children:\"When an issue is reported and fixed in a codebase, it\\u2019s tempting to move on after the fix. But without a dedicated test case that reproduces the problem, there is no guarantee that the issue won\\u2019t recur in future updates. Even if the code seems stable after the fix, new features or refactors can sometimes undo the correction.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Here\\u2019s why it\\u2019s crucial to add a test case after each bug fix:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Prevents Regressions:\"}),\" As the code evolves, automated tests ensure that past issues don\\u2019t creep back in.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Serves as Documentation:\"}),\" Test cases provide clear examples of what was fixed and how the software should behave under similar conditions.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Confidence in Future Development:\"}),\" Contributors can confidently make changes, knowing that tests will catch any breaks.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Now, let\\u2019s look at real-world examples from Zustand\\u2019s codebase and see how test cases were added after issues #84 and #86 were fixed.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"issue-84-subscribers-can-be-corrupted-during-state-updates\",children:(0,n.jsx)(e.strong,{children:\"Issue #84: Subscribers Can Be Corrupted During State Updates\"})}),`\n`,(0,n.jsx)(e.h2,{id:\"background\",children:(0,n.jsx)(e.strong,{children:\"Background\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The bug reported in \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/issues/84\",children:\"Issue #84\"}),\" revolved around Zustand\\u2019s subscription system. Under certain conditions, subscribers could be \\u201Corphaned\\u201D \\u2014 meaning components subscribing to the store would stop receiving updates.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"When state updates happened during the component lifecycle (e.g., unmounts or re-renders), the array of subscribers could be corrupted. This caused a component that had subscribed to the store to never get updates, as its listener was overwritten by another subscriber.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Subscribers are a Set. Here\\u2019s a proof from Zustand\\u2019s source code related to createStore\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*uN5rluQSzLdC3RYlvVch-w.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*_rfjvuNlw31UfAZeX3Bmsg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h2,{id:\"test-case-for-fixing-issue-84\",children:(0,n.jsx)(e.strong,{children:\"Test Case for Fixing Issue #84\"})}),`\n`,(0,n.jsx)(e.p,{children:\"After fixing this issue, Zustand added a test case to ensure the correct subscriber is removed on unmount:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// https://github.com/pmndrs/zustand/issues/84\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"it('ensures the correct subscriber is removed on unmount', async () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const useBoundStore = create(() => ({ count: 0 }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const api = useBoundStore\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function increment() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.setState(({ count }) => ({ count: count + 1 }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function Count() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const c = useBoundStore((s) => s.count)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return <div>count: {c}</div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function CountWithInitialIncrement() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    useLayoutEffect(increment, [])\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return <Count />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function Component() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const [Counter, setCounter] = useState(() => CountWithInitialIncrement)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    useLayoutEffect(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      setCounter(() => Count)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }, [])\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        <Counter />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        <Count />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      </>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { findAllByText } = render(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <Component />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  expect((await findAllByText('count: 1')).length).toBe(2)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  act(increment)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  expect((await findAllByText('count: 2')).length).toBe(2)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"})\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This test checks that the correct subscriber is removed when components unmount and ensures the subscription system functions as expected. Here\\u2019s what happens in the test:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"A store is created with an initial \",(0,n.jsx)(e.code,{children:\"count\"}),\" of \",(0,n.jsx)(e.code,{children:\"0\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Components subscribe to the \",(0,n.jsx)(e.code,{children:\"count\"}),\" state.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"increment\"}),\" function is called when the component mounts, increasing the \",(0,n.jsx)(e.code,{children:\"count\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"After unmounting and mounting components, the test ensures that the right subscribers are removed and that the state update propagates correctly to the components still mounted.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"This ensures the original bug, where subscribers would be corrupted during the lifecycle, does not reoccur.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"issue-86-subscribers-overwritten-on-component-remount\",children:(0,n.jsx)(e.strong,{children:\"Issue #86: Subscribers Overwritten on Component Remount\"})}),`\n`,(0,n.jsx)(e.h2,{id:\"background-1\",children:(0,n.jsx)(e.strong,{children:\"Background\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"In \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/issues/86\",children:\"Issue #86\"}),\", an issue was reported where subscribers would stop receiving updates after components remounted. This happened because subscribers in Zustand were being overwritten with the same index when switching between mounted components.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The issue boiled down to a problem in managing multiple subscribers \\u2014 each subscriber was assigned an index, and when a new component subscribed, the indices could conflict. This caused one subscriber to overwrite another, leading to components not receiving state updates after a remount.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"test-case-for-fixing-issue-86\",children:(0,n.jsx)(e.strong,{children:\"Test Case for Fixing Issue #86\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Here\\u2019s the test case added after fixing this issue:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// https://github.com/pmndrs/zustand/issues/86\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"it('ensures a subscriber is not mistakenly overwritten', async () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const useBoundStore = create(() => ({ count: 0 }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { setState } = useBoundStore\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function Count1() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const c = useBoundStore((s) => s.count)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return <div>count1: {c}</div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function Count2() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const c = useBoundStore((s) => s.count)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return <div>count2: {c}</div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Add 1st subscriber.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { findAllByText, rerender } = render(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <StrictMode>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <Count1 />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </StrictMode>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Replace 1st subscriber with another.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  rerender(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <StrictMode>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <Count2 />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </StrictMode>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Add 2 additional subscribers.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  rerender(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <StrictMode>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <Count2 />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <Count1 />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <Count1 />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </StrictMode>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Call all subscribers\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  act(() => setState({ count: 1 }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  expect((await findAllByText('count1: 1')).length).toBe(2)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  expect((await findAllByText('count2: 1')).length).toBe(1)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"})\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This test ensures that:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Subscribers are not overwritten when components are mounted and unmounted.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Multiple components can subscribe to the same store without conflict.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"When the state changes, all subscribed components update correctly.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"By testing for the correct number of \",(0,n.jsx)(e.code,{children:\"count1\"}),\" and \",(0,n.jsx)(e.code,{children:\"count2\"}),\" components receiving updates, the test guarantees that the fix for this issue works and won't regress in future versions of Zustand.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"lesson-here-is--ensure-stability-with-tests\",children:(0,n.jsx)(e.strong,{children:\"Lesson here is \\u2014 \\u201CEnsure Stability with Tests\\u201D\"})}),`\n`,(0,n.jsx)(e.p,{children:\"These two examples from Zustand illustrate why it is essential to add test cases after fixing bugs in an open-source project. They help ensure:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"The original bug is fixed.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Future changes do not break the fix.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Contributors can refactor, add features, or improve performance without worrying about breaking functionality that was previously addressed.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"By writing test cases after bug fixes, you contribute to the long-term health of the project, helping both maintainers and users trust that the project is stable and well-maintained.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"conclusion\",children:(0,n.jsx)(e.strong,{children:\"Conclusion\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Adding test cases after fixing bugs is a crucial habit for maintaining the integrity of your open-source project. As demonstrated in Zustand\\u2019s handling of Issues #84 and #86, these test cases help catch potential regressions and ensure the system behaves as expected in real-world scenarios.\"}),`\n`,(0,n.jsx)(e.p,{children:\"So, the next time you fix a bug in your open-source project, don\\u2019t stop at the fix. Add a test case to ensure the issue is gone for good, safeguarding your project\\u2019s future stability.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L628\",children:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L628\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/issues/86\",children:\"https://github.com/pmndrs/zustand/issues/86\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/src/vanilla.ts#L89\",children:\"https://github.com/pmndrs/zustand/blob/v4.5.5/src/vanilla.ts#L89\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\"})}),`\n`]}),`\n`]})]})}function o(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(h,{...s})}):h(s)}return y(v);})();\n;return Component;"
        },
        "_id": "blog/add-a-test-case.mdx",
        "_raw": {
          "sourceFilePath": "blog/add-a-test-case.mdx",
          "sourceFileName": "add-a-test-case.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/add-a-test-case"
        },
        "type": "Doc",
        "slug": "/blog/add-a-test-case",
        "slugAsParams": "add-a-test-case"
      },
      "documentHash": "1740489186225",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/analyzeSizeChange-script-in-tRPC.mdx": {
      "document": {
        "title": "analyzeSizeChange script in tRPC source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we provide an overview of [analyzeSizeChange script in trpc source code](https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts).\r\n\r\nThis file has the following functions:\r\n\r\n1\\. func analyzeSizeChange  \r\n2\\. func onAnalysis  \r\n3\\. type GitHubLogType  \r\n4\\. type GitHubLogOptions  \r\n5\\. func logNewModule  \r\n6\\. func logDifference  \r\n7\\. func logGithubMessage  \r\n8\\. func difference  \r\n9\\. func resolveJsonPaths  \r\n10\\. func stripAnsiEscapes  \r\n11\\. func formatGithubOptions  \r\n12\\. func formatGithubMessage\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*5bZryISMnFUikOk1liDFag.png)\r\n\r\nThe most important function here is analyzeSizeChange because it has a function named onAnalysis.\r\n\r\n```plaintext\r\nexport default function analyzeSizeChange(packageDir: string) {\r\n let analyzePluginIterations = 0;\r\n return analyze({\r\n summaryOnly: process.env.CI ? undefined : true,\r\n skipFormatted: process.env.CI ? true : undefined,\r\n onAnalysis: (analysis) => {\r\n …\r\n // calls logDifference\r\n if (prevModule) {\r\n logDifference(\r\n `Module '${module.id}'`,\r\n prevModule.size,\r\n module.size,\r\n );\r\n } else {\r\n logNewModule(module.id, module.size);\r\n }\r\n …\r\n })\r\n}\r\n```\r\n\r\nlogDifference and logNewModule are in this same file and are colocated. This is for readability and reusability purposes.\r\n\r\n# **logNewModule:**\r\n\r\n```plaintext\r\nfunction logNewModule(name: string, size: number) {\r\n if (size < ABSOLUTE_BYTE_CHANGE_THRESHOLD) {\r\n   return;\r\n }\r\n const type = 'notice';\r\n const options = {\r\n   title: `New Module (${size} bytes in ${name})`,\r\n };\r\n const message = `${name} size: ${size} bytes`;\r\n logGithubMessage(type, message, options);\r\n}\r\n```\r\n\r\nlogNewModule calls a function named logGithubMessage that is located somewhere at the bottom of this same file after this  \r\nfunction.\r\n\r\n# **logDifference:**\r\n\r\n```plaintext\r\nfunction logDifference(name: string, before: number, after: number) {\r\n const change = difference(before, after);\r\n if (\r\n   change.absolute < ABSOLUTE_BYTE_CHANGE_THRESHOLD &&\r\n   change.percent < PERCENT_CHANGE_THRESHOLD\r\n ) {\r\n   return;\r\n }\r\n const type = 'error';\r\n const options = {\r\n   title: `Important Size Change (${change.absolute} bytes in ${name})`,\r\n };\r\n const message = `${name} size change: ${\r\n   change.absolute\r\n } bytes (${change.percent.toFixed(2)}%)`;\r\n logGithubMessage(type, message, options);\r\n}\r\n```\r\n\r\n`logDifference` calls logGithubMessage and difference functions, at this point, we can see that function heierarchy is  \r\nfrom top to bottom, core functions are ranked higher while single responsibility functions are positioned lower.\r\n\r\n# **logGithubMessage**\r\n\r\n```plaintext\r\nfunction logGithubMessage(\r\n type: GitHubLogType,\r\n message: string,\r\n options: GitHubLogOptions = {},\r\n) {\r\n console.log(\r\n   stripAnsiEscapes(\r\n   `::${type} ${formatGithubOptions(options)}::${formatGithubMessage(\r\n   message,\r\n   )\r\n}`,\r\n),\r\n );\r\n}\r\n```\r\n\r\nlogGithubMessage uses three functions — stripAnsiEscapes, formatGithubOptions and formatGithubMessage.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1\\. https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts\r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----b216f5ea61ff--------------------------------)\r\n",
          "code": "var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),N=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!f.call(a,i)&&i!==s&&l(a,i,{get:()=>e[i],enumerable:!(r=m(e,i))||r.enumerable});return a};var y=(a,e,s)=>(s=a!=null?o(g(a)):{},c(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),z=a=>c(l({},\"__esModule\",{value:!0}),a);var h=b((G,t)=>{t.exports=_jsx_runtime});var w={};N(w,{default:()=>p,frontmatter:()=>M});var n=y(h()),M={title:\"analyzeSizeChange script in tRPC source code\"};function d(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we provide an overview of \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts\",children:\"analyzeSizeChange script in trpc source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"This file has the following functions:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. func analyzeSizeChange\",(0,n.jsx)(e.br,{}),`\n`,\"2. func onAnalysis\",(0,n.jsx)(e.br,{}),`\n`,\"3. type GitHubLogType\",(0,n.jsx)(e.br,{}),`\n`,\"4. type GitHubLogOptions\",(0,n.jsx)(e.br,{}),`\n`,\"5. func logNewModule\",(0,n.jsx)(e.br,{}),`\n`,\"6. func logDifference\",(0,n.jsx)(e.br,{}),`\n`,\"7. func logGithubMessage\",(0,n.jsx)(e.br,{}),`\n`,\"8. func difference\",(0,n.jsx)(e.br,{}),`\n`,\"9. func resolveJsonPaths\",(0,n.jsx)(e.br,{}),`\n`,\"10. func stripAnsiEscapes\",(0,n.jsx)(e.br,{}),`\n`,\"11. func formatGithubOptions\",(0,n.jsx)(e.br,{}),`\n`,\"12. func formatGithubMessage\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*5bZryISMnFUikOk1liDFag.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"The most important function here is analyzeSizeChange because it has a function named onAnalysis.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export default function analyzeSizeChange(packageDir: string) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" let analyzePluginIterations = 0;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" return analyze({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" summaryOnly: process.env.CI ? undefined : true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" skipFormatted: process.env.CI ? true : undefined,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" onAnalysis: (analysis) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \\u2026\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // calls logDifference\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (prevModule) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" logDifference(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" `Module '${module.id}'`,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" prevModule.size,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" module.size,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" } else {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" logNewModule(module.id, module.size);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \\u2026\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" })\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"logDifference and logNewModule are in this same file and are colocated. This is for readability and reusability purposes.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"lognewmodule\",children:(0,n.jsx)(e.strong,{children:\"logNewModule:\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function logNewModule(name: string, size: number) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (size < ABSOLUTE_BYTE_CHANGE_THRESHOLD) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   return;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const type = 'notice';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const options = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   title: `New Module (${size} bytes in ${name})`,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const message = `${name} size: ${size} bytes`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" logGithubMessage(type, message, options);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"logNewModule calls a function named logGithubMessage that is located somewhere at the bottom of this same file after this\",(0,n.jsx)(e.br,{}),`\n`,\"function.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"logdifference\",children:(0,n.jsx)(e.strong,{children:\"logDifference:\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function logDifference(name: string, before: number, after: number) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const change = difference(before, after);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   change.absolute < ABSOLUTE_BYTE_CHANGE_THRESHOLD &&\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   change.percent < PERCENT_CHANGE_THRESHOLD\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   return;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const type = 'error';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const options = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   title: `Important Size Change (${change.absolute} bytes in ${name})`,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const message = `${name} size change: ${\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   change.absolute\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" } bytes (${change.percent.toFixed(2)}%)`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" logGithubMessage(type, message, options);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"logDifference\"}),\" calls logGithubMessage and difference functions, at this point, we can see that function heierarchy is\",(0,n.jsx)(e.br,{}),`\n`,\"from top to bottom, core functions are ranked higher while single responsibility functions are positioned lower.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"loggithubmessage\",children:(0,n.jsx)(e.strong,{children:\"logGithubMessage\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function logGithubMessage(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" type: GitHubLogType,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" message: string,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" options: GitHubLogOptions = {},\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\") {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" console.log(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   stripAnsiEscapes(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   `::${type} ${formatGithubOptions(options)}::${formatGithubMessage(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   message,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}`,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"logGithubMessage uses three functions \\u2014 stripAnsiEscapes, formatGithubOptions and formatGithubMessage.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts\",children:\"https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----b216f5ea61ff--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return z(w);})();\n;return Component;"
        },
        "_id": "blog/analyzeSizeChange-script-in-tRPC.mdx",
        "_raw": {
          "sourceFilePath": "blog/analyzeSizeChange-script-in-tRPC.mdx",
          "sourceFileName": "analyzeSizeChange-script-in-tRPC.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/analyzeSizeChange-script-in-tRPC"
        },
        "type": "Doc",
        "slug": "/blog/analyzeSizeChange-script-in-tRPC",
        "slugAsParams": "analyzeSizeChange-script-in-tRPC"
      },
      "documentHash": "1740489186227",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/arrayToDict-function.mdx": {
      "document": {
        "title": "arrayToDict function in tRPC source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze arrayToDict function found in [tRPC source code](https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L57).\r\n\r\n```javascript\r\n// https://github.com/trpc/trpc/pull/669\r\nfunction arrayToDict(array: unknown[]) {\r\n const dict: Record<number, unknown> = {};\r\n for (let index = 0; index < array.length; index++) {\r\n const element = array[index];\r\n dict[index] = element;\r\n }\r\n return dict;\r\n}\r\n```\r\n\r\nThis function is straight forward. dict is an object initialized above the for loop. In this for loop, array\\[index\\] is assigned to element and dict is an object that array indices as keys and values being array items based on index.\r\n\r\nAlthough this function is simple, a lot was discussed in PR: [https://github.com/trpc/trpc/pull/669](https://github.com/trpc/trpc/pull/669) before this solution was presented to KATT (Creator of tRPC).\r\n\r\nThis pull request was about — fix: batching with zod .optional() input.\r\n\r\nPR’s description:  \r\n\\- JSON.stringify(\\[undefined\\]) === \\[null\\]  \r\n\\- this causes issues with .optional() zod schemas as it expects an object or undefined, not null  \r\n\\- fixed by ugly hack that runs validator twice when it fails if the raw input was === null.  \r\n\\- fixed by [@simonedelmann](http://twitter.com/simonedelmann)’s idea\r\n\r\nI would recommend going through this pull request conversation to give you an insight on how decisions are made. This conversation shows how ideas are bounced around and also talk about what could break based on an idea, if it’s just an edge-case and they finally choose to go with arrayToDict idea.\r\n\r\nIn this pull request, you also find [All Contributors Github app](https://github.com/apps/allcontributors) that gives  \r\nattribution to contributor based on an idea. This is what All Contributors is about — Recognize all contributors, not just the ones who push code. With All Contributes, even if you present an idea without writing any code, you could make them a contributor with a comment:\r\n\r\n“  \r\n[@all](http://twitter.com/all)\\-contributors add [@username](http://twitter.com/username) for reviews  \r\n“\r\n\r\nand [@all](http://twitter.com/all)\\-contributors adds tagged user as a contributor.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L57](https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L57)\r\n    \r\n2. [https://github.com/trpc/trpc/pull/669](https://github.com/trpc/trpc/pull/669)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var o=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),g=(t,e)=>{for(var r in e)o(t,r,{get:e[r],enumerable:!0})},c=(t,e,r,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of u(e))!y.call(t,l)&&l!==r&&o(t,l,{get:()=>e[l],enumerable:!(i=F(e,l))||i.enumerable});return t};var f=(t,e,r)=>(r=t!=null?p(m(t)):{},c(e||!t||!t.__esModule?o(r,\"default\",{value:t,enumerable:!0}):r,t)),w=t=>c(o({},\"__esModule\",{value:!0}),t);var a=b((v,s)=>{s.exports=_jsx_runtime});var x={};g(x,{default:()=>d,frontmatter:()=>k});var n=f(a()),k={title:\"arrayToDict function in tRPC source code\"};function h(t){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze arrayToDict function found in \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L57\",children:\"tRPC source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://github.com/trpc/trpc/pull/669\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" arrayToDict\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"array\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" unknown\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[])\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" dict\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Record\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"number\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" unknown\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {};\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" for\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (let\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" index \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0;\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" index \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" array\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"length\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" index\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"++)\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" element \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" array\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"index\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"];\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" dict\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"index\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" element\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" dict\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This function is straight forward. dict is an object initialized above the for loop. In this for loop, array[index] is assigned to element and dict is an object that array indices as keys and values being array items based on index.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Although this function is simple, a lot was discussed in PR: \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/pull/669\",children:\"https://github.com/trpc/trpc/pull/669\"}),\" before this solution was presented to KATT (Creator of tRPC).\"]}),`\n`,(0,n.jsx)(e.p,{children:\"This pull request was about \\u2014 fix: batching with zod .optional() input.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"PR\\u2019s description:\",(0,n.jsx)(e.br,{}),`\n`,\"- JSON.stringify([undefined]) === [null]\",(0,n.jsx)(e.br,{}),`\n`,\"- this causes issues with .optional() zod schemas as it expects an object or undefined, not null\",(0,n.jsx)(e.br,{}),`\n`,\"- fixed by ugly hack that runs validator twice when it fails if the raw input was === null.\",(0,n.jsx)(e.br,{}),`\n`,\"- fixed by \",(0,n.jsx)(e.a,{href:\"http://twitter.com/simonedelmann\",children:\"@simonedelmann\"}),\"\\u2019s idea\"]}),`\n`,(0,n.jsx)(e.p,{children:\"I would recommend going through this pull request conversation to give you an insight on how decisions are made. This conversation shows how ideas are bounced around and also talk about what could break based on an idea, if it\\u2019s just an edge-case and they finally choose to go with arrayToDict idea.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In this pull request, you also find \",(0,n.jsx)(e.a,{href:\"https://github.com/apps/allcontributors\",children:\"All Contributors Github app\"}),\" that gives\",(0,n.jsx)(e.br,{}),`\n`,\"attribution to contributor based on an idea. This is what All Contributors is about \\u2014 Recognize all contributors, not just the ones who push code. With All Contributes, even if you present an idea without writing any code, you could make them a contributor with a comment:\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"\\u201C\",(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(e.a,{href:\"http://twitter.com/all\",children:\"@all\"}),\"-contributors add \",(0,n.jsx)(e.a,{href:\"http://twitter.com/username\",children:\"@username\"}),\" for reviews\",(0,n.jsx)(e.br,{}),`\n`,\"\\u201C\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"and \",(0,n.jsx)(e.a,{href:\"http://twitter.com/all\",children:\"@all\"}),\"-contributors adds tagged user as a contributor.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L57\",children:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L57\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/pull/669\",children:\"https://github.com/trpc/trpc/pull/669\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(h,{...t})}):h(t)}return w(x);})();\n;return Component;"
        },
        "_id": "blog/arrayToDict-function.mdx",
        "_raw": {
          "sourceFilePath": "blog/arrayToDict-function.mdx",
          "sourceFileName": "arrayToDict-function.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/arrayToDict-function"
        },
        "type": "Doc",
        "slug": "/blog/arrayToDict-function",
        "slugAsParams": "arrayToDict-function"
      },
      "documentHash": "1740489186230",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/assert-in-grida.mdx": {
      "document": {
        "title": "assert in Nodejs and its usage in Grida source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review the [assert](https://nodejs.org/api/assert.html#assertvalue-message) usage in Grida source code and I ran some experiments in a codesandbox repo to see this in action. Let’s get started.\r\n\r\n### Assert in Nodejs\r\n\r\n[assert](https://nodejs.org/api/assert.html#assertvalue-message) is an alias of [assert.ok()](https://nodejs.org/api/assert.html#assertokvalue-message). Use this to test if `value` is truthy. It is equivalent to `assert.equal(!!value, true, message)`.\r\n\r\n> If `value` is not truthy, an [`AssertionError`](https://nodejs.org/api/assert.html#class-assertassertionerror) is thrown with a `message` property set equal to the value of the `message` parameter. If the `message` parameter is `undefined`, a default error message is assigned. If the `message` parameter is an instance of an [`Error`](https://nodejs.org/api/errors.html#class-error) then it will be thrown instead of the `AssertionError`. If no arguments are passed in at all `message` will be set to the string: `'No value argument passed to assert.ok()'`.\r\n\r\n[Read more about assert](https://nodejs.org/api/assert.html#assertvalue-message).\r\n\r\n### Assert in Grida source code\r\n\r\nI [searched for assert across grida repository](https://github.com/search?q=repo%3Agridaco%2Fgrida+assert&type=code&p=1), and found 94 hits.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*Zx-d2MruFi_lUQ0WHDlKwQ.png)\r\n\r\nI chose this code snippet from [grida-react-canvas](https://github.com/gridaco/grida/blob/c46c184aba6c021ecd798caa708374b7f8938ccd/apps/forms/grida-react-canvas/nodes/node.tsx#L93).\r\n\r\n> I study large open-source projects and provide insights, give [my repository a star](https://github.com/ramu-narasinga/thinkthroo).\r\n\r\n```js\r\nassert(\r\n    !(children && USER_CHILDREN),\r\n    \"NodeElement: children should not be provided when node has children\"\r\n);\r\n```\r\n\r\nIf the condition here is not met, AssertionError is thrown in your console, but at this point I wanted to find out if this would stop the execution. For that reason, I setup a simple example on codesandbox and ran some experiments.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*wY9-DMHX9-sH6AFI1r_UOg.png)\r\n\r\nassert is going to stop your execution, this lets you add defensive mechanisms in place with a clear error message as to why the error has occured. Obviously you would set this error message yourself. Link to Codesandbox — [https://codesandbox.io/p/devbox/kwz5ps](https://codesandbox.io/p/devbox/kwz5ps)\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/search?q=repo%3Agridaco%2Fgrida+assert&type=code&p=1](https://github.com/search?q=repo%3Agridaco%2Fgrida+assert&type=code&p=1)\r\n    \r\n2. [https://nodejs.org/api/assert.html#assertvalue-message](https://nodejs.org/api/assert.html#assertvalue-message)\r\n    \r\n3. [https://nodejs.org/api/assert.html#assertokvalue-message](https://nodejs.org/api/assert.html#assertokvalue-message)\r\n    \r\n4. [https://nodejs.org/api/assert.html#class-assertassertionerror](https://nodejs.org/api/assert.html#class-assertassertionerror)",
          "code": "var Component=(()=>{var p=Object.create;var a=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),y=(s,e)=>{for(var t in e)a(s,t,{get:e[t],enumerable:!0})},i=(s,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let n of u(e))!f.call(s,n)&&n!==t&&a(s,n,{get:()=>e[n],enumerable:!(o=m(e,n))||o.enumerable});return s};var F=(s,e,t)=>(t=s!=null?p(g(s)):{},i(e||!s||!s.__esModule?a(t,\"default\",{value:s,enumerable:!0}):t,s)),j=s=>i(a({},\"__esModule\",{value:!0}),s);var c=b((k,h)=>{h.exports=_jsx_runtime});var w={};y(w,{default:()=>l,frontmatter:()=>v});var r=F(c()),v={title:\"assert in Nodejs and its usage in Grida source\\xA0code\"};function d(s){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...s.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(e.p,{children:[\"In this article, we will review the \",(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/assert.html#assertvalue-message\",children:\"assert\"}),\" usage in Grida source code and I ran some experiments in a codesandbox repo to see this in action. Let\\u2019s get started.\"]}),`\n`,(0,r.jsx)(e.h3,{id:\"assert-innodejs\",children:\"Assert in\\xA0Nodejs\"}),`\n`,(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/assert.html#assertvalue-message\",children:\"assert\"}),\" is an alias of \",(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/assert.html#assertokvalue-message\",children:\"assert.ok()\"}),\". Use this to test if \",(0,r.jsx)(e.code,{children:\"value\"}),\" is truthy. It is equivalent to \",(0,r.jsx)(e.code,{children:\"assert.equal(!!value, true, message)\"}),\".\"]}),`\n`,(0,r.jsxs)(e.blockquote,{children:[`\n`,(0,r.jsxs)(e.p,{children:[\"If \",(0,r.jsx)(e.code,{children:\"value\"}),\" is not truthy, an \",(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/assert.html#class-assertassertionerror\",children:(0,r.jsx)(e.code,{children:\"AssertionError\"})}),\" is thrown with a \",(0,r.jsx)(e.code,{children:\"message\"}),\" property set equal to the value of the \",(0,r.jsx)(e.code,{children:\"message\"}),\" parameter. If the \",(0,r.jsx)(e.code,{children:\"message\"}),\" parameter is \",(0,r.jsx)(e.code,{children:\"undefined\"}),\", a default error message is assigned. If the \",(0,r.jsx)(e.code,{children:\"message\"}),\" parameter is an instance of an \",(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/errors.html#class-error\",children:(0,r.jsx)(e.code,{children:\"Error\"})}),\" then it will be thrown instead of the \",(0,r.jsx)(e.code,{children:\"AssertionError\"}),\". If no arguments are passed in at all \",(0,r.jsx)(e.code,{children:\"message\"}),\" will be set to the string: \",(0,r.jsx)(e.code,{children:\"'No value argument passed to assert.ok()'\"}),\".\"]}),`\n`]}),`\n`,(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/assert.html#assertvalue-message\",children:\"Read more about assert\"}),\".\"]}),`\n`,(0,r.jsx)(e.h3,{id:\"assert-in-grida-sourcecode\",children:\"Assert in Grida source\\xA0code\"}),`\n`,(0,r.jsxs)(e.p,{children:[\"I \",(0,r.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Agridaco%2Fgrida+assert&type=code&p=1\",children:\"searched for assert across grida repository\"}),\", and found 94 hits.\"]}),`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*Zx-d2MruFi_lUQ0WHDlKwQ.png\",alt:\"\"})}),`\n`,(0,r.jsxs)(e.p,{children:[\"I chose this code snippet from \",(0,r.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/c46c184aba6c021ecd798caa708374b7f8938ccd/apps/forms/grida-react-canvas/nodes/node.tsx#L93\",children:\"grida-react-canvas\"}),\".\"]}),`\n`,(0,r.jsxs)(e.blockquote,{children:[`\n`,(0,r.jsxs)(e.p,{children:[\"I study large open-source projects and provide insights, give \",(0,r.jsx)(e.a,{href:\"https://github.com/ramu-narasinga/thinkthroo\",children:\"my repository a star\"}),\".\"]}),`\n`]}),`\n`,(0,r.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,r.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,r.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,r.jsxs)(e.span,{className:\"line\",children:[(0,r.jsx)(e.span,{style:{color:\"#FFF\"},children:\"assert\"}),(0,r.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,r.jsxs)(e.span,{className:\"line\",children:[(0,r.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    !(\"}),(0,r.jsx)(e.span,{style:{color:\"#FFF\"},children:\"children \"}),(0,r.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"&&\"}),(0,r.jsx)(e.span,{style:{color:\"#FFF\"},children:\" USER_CHILDREN\"}),(0,r.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    \"NodeElement: children should not be provided when node has children\"'})}),`\n`,(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,r.jsx)(e.p,{children:\"If the condition here is not met, AssertionError is thrown in your console, but at this point I wanted to find out if this would stop the execution. For that reason, I setup a simple example on codesandbox and ran some experiments.\"}),`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*wY9-DMHX9-sH6AFI1r_UOg.png\",alt:\"\"})}),`\n`,(0,r.jsxs)(e.p,{children:[\"assert is going to stop your execution, this lets you add defensive mechanisms in place with a clear error message as to why the error has occured. Obviously you would set this error message yourself. Link to Codesandbox\\u200A\\u2014\\u200A\",(0,r.jsx)(e.a,{href:\"https://codesandbox.io/p/devbox/kwz5ps\",children:\"https://codesandbox.io/p/devbox/kwz5ps\"})]}),`\n`,(0,r.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,r.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.em,{children:(0,r.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,r.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,r.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,r.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,r.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,r.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,r.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,r.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,r.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,r.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,r.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,r.jsxs)(e.ol,{children:[`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Agridaco%2Fgrida+assert&type=code&p=1\",children:\"https://github.com/search?q=repo%3Agridaco%2Fgrida+assert&type=code&p=1\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/assert.html#assertvalue-message\",children:\"https://nodejs.org/api/assert.html#assertvalue-message\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/assert.html#assertokvalue-message\",children:\"https://nodejs.org/api/assert.html#assertokvalue-message\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/assert.html#class-assertassertionerror\",children:\"https://nodejs.org/api/assert.html#class-assertassertionerror\"})}),`\n`]}),`\n`]})]})}function l(s={}){let{wrapper:e}=s.components||{};return e?(0,r.jsx)(e,{...s,children:(0,r.jsx)(d,{...s})}):d(s)}return j(w);})();\n;return Component;"
        },
        "_id": "blog/assert-in-grida.mdx",
        "_raw": {
          "sourceFilePath": "blog/assert-in-grida.mdx",
          "sourceFileName": "assert-in-grida.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/assert-in-grida"
        },
        "type": "Doc",
        "slug": "/blog/assert-in-grida",
        "slugAsParams": "assert-in-grida"
      },
      "documentHash": "1740489186231",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/attachShadow()-method.mdx": {
      "document": {
        "title": "attachShadow() method in react-scan source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review the below code snippet from [react-scan source code](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L49).\r\n\r\n```plaintext\r\nconst initRootContainer = (): RootContainer => {\r\n  if (rootContainer && shadowRoot) {\r\n    return { rootContainer, shadowRoot };\r\n  }\r\n\r\n  rootContainer = document.createElement('div');\r\n  rootContainer.id = 'react-scan-root';\r\n\r\n  // Notice the attachShadow here?\r\n  shadowRoot = rootContainer.attachShadow({ mode: 'open' });\r\n\r\n  const cssStyles = document.createElement('style');\r\n  cssStyles.textContent = styles;\r\n```\r\n\r\nWhat’s so interesting about this code snippet? well, it is the `attachShadow` method used.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*52t_KqtFwTjPITgDbNscmw.png)\r\n\r\n# **attachShadow**\r\n\r\nThe `Element.attachShadow()` method attaches a shadow DOM tree to the specified element and returns a reference to its [`ShadowRoot`](https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot).\r\n\r\nI have seen [ShadowDOM usage in Next.js source code](https://dev.to/ramunarasinga/tips-from-open-source-use-shadow-dom-to-avoid-potential-css-breaks-41dd).\r\n\r\nIt looks like you can’t attach shadowDOM to every type of element. Read more about [elements you can attach shadowDOM to](https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow#elements_you_can_attach_a_shadow_to).\r\n\r\nComing back to the code snippet in consideration above:\r\n\r\n```plaintext\r\nattachShadow({ mode: 'open' })\r\n```\r\n\r\nThere is a parameter here, mode.\r\n\r\nMDN documentation tells us that mode is a string specifying the *encapsulation mode* for the shadow DOM tree. This can be one of:\r\n\r\n* open\r\n    \r\n\r\nElements of the shadow root are accessible from JavaScript outside the root, for example using [`Element.shadowRoot`](https://developer.mozilla.org/en-US/docs/Web/API/Element/shadowRoot):\r\n\r\n```plaintext\r\nelement.attachShadow({ mode: \"open\" });\r\nelement.shadowRoot; // Returns a ShadowRoot obj\r\n```\r\n\r\n* closed\r\n    \r\n\r\nDenies access to the node(s) of a closed shadow root from JavaScript outside it:\r\n\r\n```plaintext\r\nelement.attachShadow({ mode: \"closed\" });\r\nelement.shadowRoot; // Returns null\r\n```\r\n\r\nRead more about the [parameters you can pass into attachShadow method](https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow#parameters).\r\n\r\n# **About me:**\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com/). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L49](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L49)\r\n    \r\n2. [https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow](https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow)\r\n    \r\n3. [https://dev.to/ramunarasinga/tips-from-open-source-use-shadow-dom-to-avoid-potential-css-breaks-41dd](https://dev.to/ramunarasinga/tips-from-open-source-use-shadow-dom-to-avoid-potential-css-breaks-41dd)",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var w=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),b=(a,e)=>{for(var t in e)r(a,t,{get:e[t],enumerable:!0})},i=(a,e,t,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of u(e))!f.call(a,o)&&o!==t&&r(a,o,{get:()=>e[o],enumerable:!(c=m(e,o))||c.enumerable});return a};var y=(a,e,t)=>(t=a!=null?p(g(a)):{},i(e||!a||!a.__esModule?r(t,\"default\",{value:a,enumerable:!0}):t,a)),S=a=>i(r({},\"__esModule\",{value:!0}),a);var s=w((k,h)=>{h.exports=_jsx_runtime});var x={};b(x,{default:()=>l,frontmatter:()=>v});var n=y(s()),v={title:\"attachShadow() method in react-scan source code.\"};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will review the below code snippet from \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L49\",children:\"react-scan source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const initRootContainer = (): RootContainer => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (rootContainer && shadowRoot) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return { rootContainer, shadowRoot };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  rootContainer = document.createElement('div');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  rootContainer.id = 'react-scan-root';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Notice the attachShadow here?\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  shadowRoot = rootContainer.attachShadow({ mode: 'open' });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const cssStyles = document.createElement('style');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  cssStyles.textContent = styles;\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"What\\u2019s so interesting about this code snippet? well, it is the \",(0,n.jsx)(e.code,{children:\"attachShadow\"}),\" method used.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*52t_KqtFwTjPITgDbNscmw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"attachshadow\",children:(0,n.jsx)(e.strong,{children:\"attachShadow\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"Element.attachShadow()\"}),\" method attaches a shadow DOM tree to the specified element and returns a reference to its \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot\",children:(0,n.jsx)(e.code,{children:\"ShadowRoot\"})}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I have seen \",(0,n.jsx)(e.a,{href:\"https://dev.to/ramunarasinga/tips-from-open-source-use-shadow-dom-to-avoid-potential-css-breaks-41dd\",children:\"ShadowDOM usage in Next.js source code\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"It looks like you can\\u2019t attach shadowDOM to every type of element. Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow#elements_you_can_attach_a_shadow_to\",children:\"elements you can attach shadowDOM to\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Coming back to the code snippet in consideration above:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"attachShadow({ mode: 'open' })\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"There is a parameter here, mode.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"MDN documentation tells us that mode is a string specifying the \",(0,n.jsx)(e.em,{children:\"encapsulation mode\"}),\" for the shadow DOM tree. This can be one of:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"open\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Elements of the shadow root are accessible from JavaScript outside the root, for example using \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Element/shadowRoot\",children:(0,n.jsx)(e.code,{children:\"Element.shadowRoot\"})}),\":\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'element.attachShadow({ mode: \"open\" });'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"element.shadowRoot; // Returns a ShadowRoot obj\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"closed\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Denies access to the node(s) of a closed shadow root from JavaScript outside it:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'element.attachShadow({ mode: \"closed\" });'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"element.shadowRoot; // Returns null\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about the \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow#parameters\",children:\"parameters you can pass into attachShadow method\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L49\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L49\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/Element/attachShadow\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://dev.to/ramunarasinga/tips-from-open-source-use-shadow-dom-to-avoid-potential-css-breaks-41dd\",children:\"https://dev.to/ramunarasinga/tips-from-open-source-use-shadow-dom-to-avoid-potential-css-breaks-41dd\"})}),`\n`]}),`\n`]})]})}function l(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return S(x);})();\n;return Component;"
        },
        "_id": "blog/attachShadow()-method.mdx",
        "_raw": {
          "sourceFilePath": "blog/attachShadow()-method.mdx",
          "sourceFileName": "attachShadow()-method.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/attachShadow()-method"
        },
        "type": "Doc",
        "slug": "/blog/attachShadow()-method",
        "slugAsParams": "attachShadow()-method"
      },
      "documentHash": "1741593264434",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/BadMapPolyfill-in-React-Source.mdx": {
      "document": {
        "title": "BadMapPolyfill in React Source Code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we study the [packages/react/src/BadMapPolyfill.js](https://github.com/facebook/react/blob/main/packages/react/src/BadMapPolyfill.js) file source code.\r\n\r\n```plaintext\r\n/**\r\n * Copyright © Meta Platforms, Inc. and affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n * @flow\r\n */\r\nexport let hasBadMapPolyfill: boolean;\r\n  if (__DEV__) {\r\n   hasBadMapPolyfill = false;\r\n   try {\r\n     const frozenObject = Object.freeze({});\r\n     /* eslint-disable no-new */\r\n     new Map([[frozenObject, null]]);\r\n     new Set([frozenObject]);\r\n     /* eslint-enable no-new */\r\n   } catch (e) {\r\n     // TODO: Consider warning about bad polyfills\r\n     hasBadMapPolyfill = true;\r\n }\r\n}\r\n```\r\n\r\nMap’s been available across browsers since July 2015. The Map object holds key-value pairs and remembers the original insertion order of the keys.\r\n\r\nThis code above tries to create a new Map and new Set in a try block and if it fails, it is caught in the catch block and `hasBadMapPolyfill` set to true, otherwise `hasBadMapPolyfill` remains false.\r\n\r\n# **eslint-enable no-new**\r\n\r\n[ESLint docs](https://eslint.org/docs/latest/rules/no-new) states that no-new disallows new operators outside of assignments or comparisons. The goal of using new with a constructor is typically to create an object of a particular type and store that object in a variable, such as:\r\n\r\n```plaintext\r\nvar person = new Person();\r\n```\r\n\r\nIt’s less common to use new and not store the result, such as:\r\n\r\n```plaintext\r\nnew Person();\r\n```\r\n\r\nThis rule is aimed at maintaining consistency and convention by disallowing constructor calls using the new keyword that do not assign the resulting object to a variable.\r\n\r\n# **Map and Set pollyfills:**\r\n\r\n[Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map) in MDN docs provides a link to Map polyfill available in [core-js](https://github.com/zloirock/core-js#map)\r\n\r\n[Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set) in MDN docs provides a link to Map polyfill available in [core-js](https://github.com/zloirock/core-js#set)\r\n\r\n## **Where is this hasBadMapPollyfill used?**\r\n\r\nhasBadMapPollyfill is used in [/packages/react-reconciler/src/ReactFiber.js](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L122-L134)\r\n\r\nExcept the code you see in BadMapPollyfill is written here again. I do not know the reason why.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*NAOSiNaRo0ZDBJ9UjCb5BA.png)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/facebook/react/blob/main/packages/react/src/BadMapPolyfill.js](https://github.com/facebook/react/blob/main/packages/react/src/BadMapPolyfill.js)\r\n    \r\n2. [https://eslint.org/docs/latest/rules/no-new](https://eslint.org/docs/latest/rules/no-new)\r\n    \r\n3. [https://developer.mozilla.org/en-US/docs/Glossary/Polyfill](https://developer.mozilla.org/en-US/docs/Glossary/Polyfill)\r\n    \r\n4. [https://github.com/search?q=repo%3Afacebook%2Freact%20hasBadMapPolyfill&type=code](https://github.com/search?q=repo%3Afacebook%2Freact+hasBadMapPolyfill&type=code)\r\n    \r\n5. [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L207](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L207)\r\n    \r\n6. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)\r\n    \r\n7. [https://github.com/zloirock/core-js#map](https://github.com/zloirock/core-js#map)\r\n    \r\n8. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)\r\n    \r\n9. [https://github.com/zloirock/core-js#set](https://github.com/zloirock/core-js#set)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=>{for(var l in e)t(a,l,{get:e[l],enumerable:!0})},c=(a,e,l,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of b(e))!u.call(a,r)&&r!==l&&t(a,r,{get:()=>e[r],enumerable:!(i=m(e,r))||i.enumerable});return a};var j=(a,e,l)=>(l=a!=null?p(f(a)):{},c(e||!a||!a.__esModule?t(l,\"default\",{value:a,enumerable:!0}):l,a)),k=a=>c(t({},\"__esModule\",{value:!0}),a);var o=g((N,s)=>{s.exports=_jsx_runtime});var M={};y(M,{default:()=>d,frontmatter:()=>w});var n=j(o()),w={title:\"BadMapPolyfill in React Source Code.\"};function h(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we study the \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/packages/react/src/BadMapPolyfill.js\",children:\"packages/react/src/BadMapPolyfill.js\"}),\" file source code.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Copyright \\xA9 Meta Platforms, Inc. and affiliates.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * This source code is licensed under the MIT license found in the\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * LICENSE file in the root directory of this source tree.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * @flow\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export let hasBadMapPolyfill: boolean;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (__DEV__) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   hasBadMapPolyfill = false;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   try {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     const frozenObject = Object.freeze({});\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     /* eslint-disable no-new */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     new Map([[frozenObject, null]]);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     new Set([frozenObject]);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     /* eslint-enable no-new */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   } catch (e) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     // TODO: Consider warning about bad polyfills\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     hasBadMapPolyfill = true;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Map\\u2019s been available across browsers since July 2015. The Map object holds key-value pairs and remembers the original insertion order of the keys.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This code above tries to create a new Map and new Set in a try block and if it fails, it is caught in the catch block and \",(0,n.jsx)(e.code,{children:\"hasBadMapPolyfill\"}),\" set to true, otherwise \",(0,n.jsx)(e.code,{children:\"hasBadMapPolyfill\"}),\" remains false.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"eslint-enable-no-new\",children:(0,n.jsx)(e.strong,{children:\"eslint-enable no-new\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://eslint.org/docs/latest/rules/no-new\",children:\"ESLint docs\"}),\" states that no-new disallows new operators outside of assignments or comparisons. The goal of using new with a constructor is typically to create an object of a particular type and store that object in a variable, such as:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"var person = new Person();\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"It\\u2019s less common to use new and not store the result, such as:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"new Person();\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"This rule is aimed at maintaining consistency and convention by disallowing constructor calls using the new keyword that do not assign the resulting object to a variable.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"map-and-set-pollyfills\",children:(0,n.jsx)(e.strong,{children:\"Map and Set pollyfills:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\",children:\"Map\"}),\" in MDN docs provides a link to Map polyfill available in \",(0,n.jsx)(e.a,{href:\"https://github.com/zloirock/core-js#map\",children:\"core-js\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\",children:\"Set\"}),\" in MDN docs provides a link to Map polyfill available in \",(0,n.jsx)(e.a,{href:\"https://github.com/zloirock/core-js#set\",children:\"core-js\"})]}),`\n`,(0,n.jsx)(e.h2,{id:\"where-is-this-hasbadmappollyfill-used\",children:(0,n.jsx)(e.strong,{children:\"Where is this hasBadMapPollyfill used?\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"hasBadMapPollyfill is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L122-L134\",children:\"/packages/react-reconciler/src/ReactFiber.js\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"Except the code you see in BadMapPollyfill is written here again. I do not know the reason why.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*NAOSiNaRo0ZDBJ9UjCb5BA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/packages/react/src/BadMapPolyfill.js\",children:\"https://github.com/facebook/react/blob/main/packages/react/src/BadMapPolyfill.js\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://eslint.org/docs/latest/rules/no-new\",children:\"https://eslint.org/docs/latest/rules/no-new\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Glossary/Polyfill\",children:\"https://developer.mozilla.org/en-US/docs/Glossary/Polyfill\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Afacebook%2Freact+hasBadMapPolyfill&type=code\",children:\"https://github.com/search?q=repo%3Afacebook%2Freact%20hasBadMapPolyfill&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L207\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L207\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/zloirock/core-js#map\",children:\"https://github.com/zloirock/core-js#map\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/zloirock/core-js#set\",children:\"https://github.com/zloirock/core-js#set\"})}),`\n`]}),`\n`]})]})}function d(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return k(M);})();\n;return Component;"
        },
        "_id": "blog/BadMapPolyfill-in-React-Source.mdx",
        "_raw": {
          "sourceFilePath": "blog/BadMapPolyfill-in-React-Source.mdx",
          "sourceFileName": "BadMapPolyfill-in-React-Source.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/BadMapPolyfill-in-React-Source"
        },
        "type": "Doc",
        "slug": "/blog/BadMapPolyfill-in-React-Source",
        "slugAsParams": "BadMapPolyfill-in-React-Source"
      },
      "documentHash": "1740489186187",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/biome-tool-chain.mdx": {
      "document": {
        "title": "Biome.js, a toolchain to format and lint your web project\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI found that [t3-env](https://github.com/t3-oss/t3-env/blob/main/package.json#L10) uses [Biomejs](https://biomejs.dev/) for linting purposes. This article provides an overview of Biomejs and usage in t3-env.\r\n\r\n### Biome.js\r\n\r\nBiome.js is a toolchain for your web project. It helps with formatting and linting your project.\r\n\r\n#### Quick start\r\n\r\n1. Installation\r\n    \r\n\r\n```plaintext\r\nnpm install - save-dev - save-exact @biomejs/biome\r\n```\r\n\r\n2\\. Configuration\r\n\r\n```plaintext\r\nnpx @biomejs/biome init\r\n```\r\n\r\nWhen you run the above command, it automatically creates biome.json file. Below is the code generated by default when you run  \r\nthe above command in biome.json.\r\n\r\n```plaintext\r\n{\r\n \"$schema\": \"https://biomejs.dev/schemas/1.9.4/schema.json\",\r\n \"vcs\": {\r\n \"enabled\": false,\r\n \"clientKind\": \"git\",\r\n \"useIgnoreFile\": false\r\n },\r\n \"files\": { \"ignoreUnknown\": false, \"ignore\": [] },\r\n \"formatter\": { \"enabled\": true, \"indentStyle\": \"tab\" },\r\n \"organizeImports\": { \"enabled\": true },\r\n \"linter\": {\r\n \"enabled\": true,\r\n \"rules\": { \"recommended\": true }\r\n },\r\n \"javascript\": { \"formatter\": { \"quoteStyle\": \"double\" } }\r\n}\r\n```\r\n\r\nThe linter.enabled: true enables the linter and rules.recommended: true enables the recommended rules. This corresponds to the default settings.\r\n\r\nFormatting is enabled by default, but you can disable it by explicitly using formatter.enabled: false.\r\n\r\n3\\. Biome commands\r\n\r\na. format\r\n\r\nYou can format files and directories using the format command with the — write option:\r\n\r\n```plaintext\r\nnpx @biomejs/biome format - write <files>\r\n```\r\n\r\nb. lint\r\n\r\nYou can lint and apply safe fixes to files and directories using the lint command with the — write option:\r\n\r\n```plaintext\r\nnpx @biomejs/biome lint - write <files>\r\n```\r\n\r\nc. check\r\n\r\nYou can run both, format and link, by leveraging the check command:\r\n\r\n```plaintext\r\nnpx @biomejs/biome check - write <files>\r\n```\r\n\r\n### Biome.js usage in t3-env\r\n\r\n1. Scripts in package.json\r\n    \r\n\r\n```plaintext\r\n\"lint\": \"biome check .\",\r\n\"lint:fix\": \"biome check . - apply\",\r\n```\r\n\r\nThis is found to be using the `check` CLI command that applies formatting and linting. There’s a variation though, lint only checks the linting issues but when you do lint:fix, it is executed with — apply.\r\n\r\n — apply — Alias for — write, writes safe fixes, formatting and import sorting (deprecated, use — write)\r\n\r\n2\\. [biome.json](https://github.com/t3-oss/t3-env/blob/main/biome.json)\r\n\r\n```plaintext\r\n{\r\n \"$schema\": \"https://biomejs.dev/schemas/1.5.3/schema.json\",\r\n \"organizeImports\": {\r\n \"enabled\": true\r\n },\r\n \"formatter\": {\r\n \"enabled\": true,\r\n \"indentWidth\": 2,\r\n \"indentStyle\": \"space\"\r\n },\r\n \"linter\": {\r\n \"enabled\": true,\r\n \"rules\": {\r\n \"recommended\": true,\r\n \"a11y\": {\r\n \"noSvgWithoutTitle\": \"off\",\r\n \"useButtonType\": \"off\",\r\n \"useAltText\": \"off\"\r\n },\r\n \"complexity\": {\r\n \"noBannedTypes\": \"off\"\r\n },\r\n \"style\": {\r\n \"useImportType\": \"error\",\r\n \"useExportType\": \"error\"\r\n }\r\n }\r\n },\r\n \"overrides\": [\r\n {\r\n \"include\": [\"**/*.test.ts\"],\r\n \"linter\": {\r\n \"rules\": {\r\n \"suspicious\": {\r\n \"noExplicitAny\": \"off\"\r\n }\r\n }\r\n }\r\n }\r\n ],\r\n \"vcs\": {\r\n \"enabled\": true,\r\n \"clientKind\": \"git\",\r\n \"useIgnoreFile\": true\r\n }\r\n}\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1\\. [https://biomejs.dev/](https://biomejs.dev/)  \r\n2\\. [https://github.com/t3-oss/t3-env/blob/main/biome.json](https://github.com/t3-oss/t3-env/blob/main/biome.json)  \r\n3\\. [https://github.com/t3-oss/t3-env/blob/main/package.json#L10](https://github.com/t3-oss/t3-env/blob/main/package.json#L10)",
          "code": "var Component=(()=>{var o=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),N=(a,e)=>{for(var i in e)s(a,i,{get:e[i],enumerable:!0})},r=(a,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of u(e))!f.call(a,l)&&l!==i&&s(a,l,{get:()=>e[l],enumerable:!(t=m(e,l))||t.enumerable});return a};var y=(a,e,i)=>(i=a!=null?o(g(a)):{},r(e||!a||!a.__esModule?s(i,\"default\",{value:a,enumerable:!0}):i,a)),j=a=>r(s({},\"__esModule\",{value:!0}),a);var d=b((k,c)=>{c.exports=_jsx_runtime});var x={};N(x,{default:()=>p,frontmatter:()=>v});var n=y(d()),v={title:\"Biome.js, a toolchain to format and lint your web\\xA0project\"};function h(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I found that \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/package.json#L10\",children:\"t3-env\"}),\" uses \",(0,n.jsx)(e.a,{href:\"https://biomejs.dev/\",children:\"Biomejs\"}),\" for linting purposes. This article provides an overview of Biomejs and usage in t3-env.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"biomejs\",children:\"Biome.js\"}),`\n`,(0,n.jsx)(e.p,{children:\"Biome.js is a toolchain for your web project. It helps with formatting and linting your project.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"quick-start\",children:\"Quick start\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Installation\"}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npm install - save-dev - save-exact @biomejs/biome\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"2. Configuration\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npx @biomejs/biome init\"})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you run the above command, it automatically creates biome.json file. Below is the code generated by default when you run\",(0,n.jsx)(e.br,{}),`\n`,\"the above command in biome.json.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"$schema\": \"https://biomejs.dev/schemas/1.9.4/schema.json\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"vcs\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"enabled\": false,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"clientKind\": \"git\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"useIgnoreFile\": false'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"files\": { \"ignoreUnknown\": false, \"ignore\": [] },'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"formatter\": { \"enabled\": true, \"indentStyle\": \"tab\" },'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"organizeImports\": { \"enabled\": true },'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"linter\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"enabled\": true,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"rules\": { \"recommended\": true }'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"javascript\": { \"formatter\": { \"quoteStyle\": \"double\" } }'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"The linter.enabled: true enables the linter and rules.recommended: true enables the recommended rules. This corresponds to the default settings.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Formatting is enabled by default, but you can disable it by explicitly using formatter.enabled: false.\"}),`\n`,(0,n.jsx)(e.p,{children:\"3. Biome commands\"}),`\n`,(0,n.jsx)(e.p,{children:\"a. format\"}),`\n`,(0,n.jsx)(e.p,{children:\"You can format files and directories using the format command with the\\u200A\\u2014\\u200Awrite option:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npx @biomejs/biome format - write <files>\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"b. lint\"}),`\n`,(0,n.jsx)(e.p,{children:\"You can lint and apply safe fixes to files and directories using the lint command with the\\u200A\\u2014\\u200Awrite option:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npx @biomejs/biome lint - write <files>\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"c. check\"}),`\n`,(0,n.jsx)(e.p,{children:\"You can run both, format and link, by leveraging the check command:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npx @biomejs/biome check - write <files>\"})})})})}),`\n`,(0,n.jsx)(e.h3,{id:\"biomejs-usage-int3-env\",children:\"Biome.js usage in\\xA0t3-env\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Scripts in package.json\"}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"lint\": \"biome check .\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"lint:fix\": \"biome check . - apply\",'})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This is found to be using the \",(0,n.jsx)(e.code,{children:\"check\"}),\" CLI command that applies formatting and linting. There\\u2019s a variation though, lint only checks the linting issues but when you do lint:fix, it is executed with\\u200A\\u2014\\u200Aapply.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"\\u200A\\u2014\\u200Aapply\\u200A\\u2014\\u200AAlias for\\u200A\\u2014\\u200Awrite, writes safe fixes, formatting and import sorting (deprecated, use\\u200A\\u2014\\u200Awrite)\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"2. \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/biome.json\",children:\"biome.json\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"$schema\": \"https://biomejs.dev/schemas/1.5.3/schema.json\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"organizeImports\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"enabled\": true'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"formatter\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"enabled\": true,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"indentWidth\": 2,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"indentStyle\": \"space\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"linter\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"enabled\": true,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"rules\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"recommended\": true,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"a11y\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"noSvgWithoutTitle\": \"off\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"useButtonType\": \"off\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"useAltText\": \"off\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"complexity\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"noBannedTypes\": \"off\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"style\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"useImportType\": \"error\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"useExportType\": \"error\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"overrides\": ['})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"include\": [\"**/*.test.ts\"],'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"linter\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"rules\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"suspicious\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"noExplicitAny\": \"off\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"vcs\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"enabled\": true,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"clientKind\": \"git\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"useIgnoreFile\": true'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. \",(0,n.jsx)(e.a,{href:\"https://biomejs.dev/\",children:\"https://biomejs.dev/\"}),(0,n.jsx)(e.br,{}),`\n`,\"2. \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/biome.json\",children:\"https://github.com/t3-oss/t3-env/blob/main/biome.json\"}),(0,n.jsx)(e.br,{}),`\n`,\"3. \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/package.json#L10\",children:\"https://github.com/t3-oss/t3-env/blob/main/package.json#L10\"})]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return j(x);})();\n;return Component;"
        },
        "_id": "blog/biome-tool-chain.mdx",
        "_raw": {
          "sourceFilePath": "blog/biome-tool-chain.mdx",
          "sourceFileName": "biome-tool-chain.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/biome-tool-chain"
        },
        "type": "Doc",
        "slug": "/blog/biome-tool-chain",
        "slugAsParams": "biome-tool-chain"
      },
      "documentHash": "1740489186234",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/bippy-into-react-internals.mdx": {
      "document": {
        "title": "Bippy, a toolkit to hack into react internals.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI found an import from “bippy” in react-scan source code. I wanted to find out what this is about. In this article, you will understand the below concepts\r\n\r\n1. What is react-scan?\r\n    \r\n2. What is Bippy?\r\n    \r\n3. How did I find this package?\r\n    \r\n\r\n# **What is react-scan?**\r\n\r\n[react-scan](https://github.com/aidenybai/react-scan) helps you scan for React performance issues and eliminate slow renders in your app.\r\n\r\n## **Installation**\r\n\r\nYou can run the below command to install react-scan\r\n\r\n```javascript\r\nnpm i react-scan\r\n```\r\n\r\nRead more about [installation](https://github.com/aidenybai/react-scan?tab=readme-ov-file#install).\r\n\r\n## **Usage**\r\n\r\nreact-scan provides usage documentation.\r\n\r\nRead more about [usage](https://github.com/aidenybai/react-scan?tab=readme-ov-file#usage).\r\n\r\n# **What is Bippy?**\r\n\r\nI copied the below description from [Bippy’s readme](https://www.npmjs.com/package/bippy).\r\n\r\n[bippy](https://www.npmjs.com/package/bippy) is a toolkit to **hack into react internals**\r\n\r\nby default, you cannot access react internals. bippy bypasses this by “pretending” to be react devtools, giving you access to the fiber tree and other internals.\r\n\r\n* works outside of react — no react code modification needed\r\n    \r\n* utility functions that work across modern react (v17–19)\r\n    \r\n* no prior react source code knowledge required\r\n    \r\n\r\n```javascript\r\nimport { onCommitFiberRoot, traverseFiber } from 'bippy';\r\n\r\nonCommitFiberRoot((root) => {\r\n  traverseFiber(root.current, (fiber) => {\r\n    // prints every fiber in the current React tree\r\n    console.log('fiber:', fiber);\r\n  });\r\n});\r\n```\r\n\r\n> *\\[!WARNING\\] ⚠️⚠️⚠️* ***this project may break production apps and cause unexpected behavior*** *⚠️⚠️⚠️*\r\n> \r\n> *this project uses react internals, which can change at any time. it is not recommended to depend on internals unless you really, really have to. by proceeding, you acknowledge the risk of breaking your own code or apps that use your code.*\r\n\r\nbippy allows you to **access** and **use** react fibers **outside** of react components.\r\n\r\na react fiber is a “unit of execution.” this means react will do something based on the data in a fiber. each fiber either represents a composite (function/class component) or a host (dom element)\r\n\r\nfibers are useful because they contain information about the react app (component props, state, contexts, etc.). a simplified version of a fiber looks roughly like this:\r\n\r\n```javascript\r\ninterface Fiber {\r\n  // component type (function/class)\r\n  type: any;\r\n\r\n  child: Fiber | null;\r\n  sibling: Fiber | null;\r\n\r\n  // stateNode is the host fiber (e.g. DOM element)\r\n  stateNode: Node | null;\r\n\r\n  // parent fiber\r\n  return: Fiber | null;\r\n\r\n  // the previous or current version of the fiber\r\n  alternate: Fiber | null;\r\n\r\n  // saved props input\r\n  memoizedProps: any;\r\n\r\n  // state (useState, useReducer, useSES, etc.)\r\n  memoizedState: any;\r\n\r\n  // contexts (useContext)\r\n  dependencies: Dependencies | null;\r\n\r\n  // effects (useEffect, useLayoutEffect, etc.)\r\n  updateQueue: any;\r\n}\r\n```\r\n\r\nNow that we understand the basics, let me tell you how I ended up finding this bippy package.\r\n\r\n# **How did I find Bippy?**\r\n\r\nreact-scan has the below packages folder.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*wk1QbU03w2lUAFjDLpTjdA.png)\r\n\r\n## **scan/src/index.ts**\r\n\r\nscan is where I should be looking to understand react-scan internal source code. This below code is picked from [packages/scan/src/index.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/index.ts#L3).\r\n\r\n```javascript\r\nimport { init } from './install-hook'; // Initialize RDT hook\r\n\r\ninit();\r\n\r\nexport * from './core/index';\r\n```\r\n\r\ninit is imported from another file, [install-hook.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/install-hook.ts#L1)\r\n\r\n## **install-hook.ts**\r\n\r\n```javascript\r\nimport { installRDTHook } from 'bippy';\r\n\r\n// Initialize React DevTools hook\r\nconst init = () => {\r\n  installRDTHook();\r\n};\r\n\r\ninit();\r\n\r\nexport { init };\r\n```\r\n\r\nThe above code is picked from [install-hook.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/install-hook.ts#L1). Now init calls another function `installRDTHook()` that is imported from ‘bippy’. This is where I have found bippy and wanted to find out more about this package.\r\n\r\nBippy is written by the same author, [Aiden Bai](https://github.com/aidenybai), who also wrote react-scan.\r\n\r\n## **installRDTHook**\r\n\r\nThere is no mention of installRDT in the react-scan documentation\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*JVUagbvh6AZIatOpZtGVow.png)\r\n\r\nAnd yet it is found to be used in [install-hook.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/install-hook.ts#L1) as shown below\r\n\r\n```javascript\r\nimport { installRDTHook } from 'bippy';\r\n\r\n// Initialize React DevTools hook\r\nconst init = () => {\r\n  installRDTHook();\r\n};\r\n\r\ninit();\r\n\r\nexport { init };\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com/). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://www.npmjs.com/package/bippy](https://www.npmjs.com/package/bippy)\r\n    \r\n2. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/install-hook.ts#L1](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/install-hook.ts#L1)\r\n    \r\n3. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/index.ts#L3](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/index.ts#L3)\r\n    \r\n4. [https://github.com/aidenybai/bippy/blob/e1a570110a74fc0efc7c5acd80a7b0af7f488de0/packages/bippy/src/rdt-hook.ts#L46](https://github.com/aidenybai/bippy/blob/e1a570110a74fc0efc7c5acd80a7b0af7f488de0/packages/bippy/src/rdt-hook.ts#L46)",
          "code": "var Component=(()=>{var F=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var a in e)s(l,a,{get:e[a],enumerable:!0})},i=(l,e,a,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(l,c)&&c!==a&&s(l,c,{get:()=>e[c],enumerable:!(r=p(e,c))||r.enumerable});return l};var f=(l,e,a)=>(a=l!=null?F(m(l)):{},i(e||!l||!l.__esModule?s(a,\"default\",{value:l,enumerable:!0}):a,l)),k=l=>i(s({},\"__esModule\",{value:!0}),l);var t=b((j,o)=>{o.exports=_jsx_runtime});var w={};g(w,{default:()=>d,frontmatter:()=>N});var n=f(t()),N={title:\"Bippy, a toolkit to hack into react internals.\"};function h(l){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"I found an import from \\u201Cbippy\\u201D in react-scan source code. I wanted to find out what this is about. In this article, you will understand the below concepts\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What is react-scan?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What is Bippy?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"How did I find this package?\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"what-is-react-scan\",children:(0,n.jsx)(e.strong,{children:\"What is react-scan?\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan\",children:\"react-scan\"}),\" helps you scan for React performance issues and eliminate slow renders in your app.\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"installation\",children:(0,n.jsx)(e.strong,{children:\"Installation\"})}),`\n`,(0,n.jsx)(e.p,{children:\"You can run the below command to install react-scan\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"npm i react\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"scan\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan?tab=readme-ov-file#install\",children:\"installation\"}),\".\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"usage\",children:(0,n.jsx)(e.strong,{children:\"Usage\"})}),`\n`,(0,n.jsx)(e.p,{children:\"react-scan provides usage documentation.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan?tab=readme-ov-file#usage\",children:\"usage\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"what-is-bippy\",children:(0,n.jsx)(e.strong,{children:\"What is Bippy?\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I copied the below description from \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/bippy\",children:\"Bippy\\u2019s readme\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/bippy\",children:\"bippy\"}),\" is a toolkit to \",(0,n.jsx)(e.strong,{children:\"hack into react internals\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"by default, you cannot access react internals. bippy bypasses this by \\u201Cpretending\\u201D to be react devtools, giving you access to the fiber tree and other internals.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"works outside of react \\u2014 no react code modification needed\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"utility functions that work across modern react (v17\\u201319)\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"no prior react source code knowledge required\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" onCommitFiberRoot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" traverseFiber \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'bippy'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"onCommitFiberRoot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"root\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  traverseFiber\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"root\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"current\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fiber\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" prints every fiber in the current React tree\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    console\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'fiber:'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fiber\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"[!WARNING] \\u26A0\\uFE0F\\u26A0\\uFE0F\\u26A0\\uFE0F\"}),\" \",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.strong,{children:\"this project may break production apps and cause unexpected behavior\"})}),\" \",(0,n.jsx)(e.em,{children:\"\\u26A0\\uFE0F\\u26A0\\uFE0F\\u26A0\\uFE0F\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:\"this project uses react internals, which can change at any time. it is not recommended to depend on internals unless you really, really have to. by proceeding, you acknowledge the risk of breaking your own code or apps that use your code.\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"bippy allows you to \",(0,n.jsx)(e.strong,{children:\"access\"}),\" and \",(0,n.jsx)(e.strong,{children:\"use\"}),\" react fibers \",(0,n.jsx)(e.strong,{children:\"outside\"}),\" of react components.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"a react fiber is a \\u201Cunit of execution.\\u201D this means react will do something based on the data in a fiber. each fiber either represents a composite (function/class component) or a host (dom element)\"}),`\n`,(0,n.jsx)(e.p,{children:\"fibers are useful because they contain information about the react app (component props, state, contexts, etc.). a simplified version of a fiber looks roughly like this:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"interface\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Fiber\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" component type (function/class)\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  child\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Fiber\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  sibling\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Fiber\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" stateNode is the host fiber (e.g. DOM element)\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  stateNode\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Node\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" parent fiber\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Fiber\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" the previous or current version of the fiber\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  alternate\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Fiber\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" saved props input\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  memoizedProps\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" state (useState, useReducer, useSES, etc.)\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  memoizedState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" contexts (useContext)\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  dependencies\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Dependencies\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" effects (useEffect, useLayoutEffect, etc.)\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  updateQueue\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Now that we understand the basics, let me tell you how I ended up finding this bippy package.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"how-did-i-find-bippy\",children:(0,n.jsx)(e.strong,{children:\"How did I find Bippy?\"})}),`\n`,(0,n.jsx)(e.p,{children:\"react-scan has the below packages folder.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*wk1QbU03w2lUAFjDLpTjdA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h2,{id:\"scansrcindexts\",children:(0,n.jsx)(e.strong,{children:\"scan/src/index.ts\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"scan is where I should be looking to understand react-scan internal source code. This below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/index.ts#L3\",children:\"packages/scan/src/index.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" init \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './install-hook'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Initialize RDT hook\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"init\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" *\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './core/index'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"init is imported from another file, \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/install-hook.ts#L1\",children:\"install-hook.ts\"})]}),`\n`,(0,n.jsx)(e.h2,{id:\"install-hookts\",children:(0,n.jsx)(e.strong,{children:\"install-hook.ts\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" installRDTHook \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'bippy'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Initialize React DevTools hook\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" init\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  installRDTHook\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"init\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" init \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The above code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/install-hook.ts#L1\",children:\"install-hook.ts\"}),\". Now init calls another function \",(0,n.jsx)(e.code,{children:\"installRDTHook()\"}),\" that is imported from \\u2018bippy\\u2019. This is where I have found bippy and wanted to find out more about this package.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Bippy is written by the same author, \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai\",children:\"Aiden Bai\"}),\", who also wrote react-scan.\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"installrdthook\",children:(0,n.jsx)(e.strong,{children:\"installRDTHook\"})}),`\n`,(0,n.jsx)(e.p,{children:\"There is no mention of installRDT in the react-scan documentation\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*JVUagbvh6AZIatOpZtGVow.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"And yet it is found to be used in \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/install-hook.ts#L1\",children:\"install-hook.ts\"}),\" as shown below\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" installRDTHook \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'bippy'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Initialize React DevTools hook\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" init\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  installRDTHook\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"init\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" init \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/bippy\",children:\"https://www.npmjs.com/package/bippy\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/install-hook.ts#L1\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/install-hook.ts#L1\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/index.ts#L3\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/index.ts#L3\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/bippy/blob/e1a570110a74fc0efc7c5acd80a7b0af7f488de0/packages/bippy/src/rdt-hook.ts#L46\",children:\"https://github.com/aidenybai/bippy/blob/e1a570110a74fc0efc7c5acd80a7b0af7f488de0/packages/bippy/src/rdt-hook.ts#L46\"})}),`\n`]}),`\n`]})]})}function d(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(h,{...l})}):h(l)}return k(w);})();\n;return Component;"
        },
        "_id": "blog/bippy-into-react-internals.mdx",
        "_raw": {
          "sourceFilePath": "blog/bippy-into-react-internals.mdx",
          "sourceFileName": "bippy-into-react-internals.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/bippy-into-react-internals"
        },
        "type": "Doc",
        "slug": "/blog/bippy-into-react-internals",
        "slugAsParams": "bippy-into-react-internals"
      },
      "documentHash": "1740996959804",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Build-an-offscreen-DOM.mdx": {
      "document": {
        "title": "Build an offscreen DOM tree using this method.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI found the below code snippet in [packages/scan/core/index.ts in react-scan source code](https://github.com/aidenybai/react-scan/blob/fe4e17de6911970f50386fb12a62a0556ca55579/packages/scan/src/core/index.ts#L49).\r\n\r\n```javascript\r\nconst fragment = document.createDocumentFragment();\r\n```\r\n\r\nIn this article, you will learn\r\n\r\n1. What is DocumentFragment?\r\n    \r\n2. How is DocumentFragment used in react-scan?\r\n    \r\n3. createDocumentFragment method.\r\n    \r\n\r\n# **What is DocumentFragment**\r\n\r\nThe below information is picked from [MDN docs](https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment).\r\n\r\n## **Definition**\r\n\r\n> *The* `DocumentFragment` interface represents a minimal document object that has no parent.\r\n> \r\n> *It is used as a lightweight version of* [`Document`](https://developer.mozilla.org/en-US/docs/Web/API/Document) that stores a segment of a document structure comprised of nodes just like a standard document. The key difference is due to the fact that the document fragment isn't part of the active document tree structure. Changes made to the fragment don't affect the document.\r\n\r\n## **Usage**\r\n\r\n> *A common use for* `DocumentFragment` is to create one, assemble a DOM subtree within it, then append or insert the fragment into the DOM using [`Node`](https://developer.mozilla.org/en-US/docs/Web/API/Node) interface methods such as [`appendChild()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild), [`append()`](https://developer.mozilla.org/en-US/docs/Web/API/Element/append), or [`insertBefore()`](https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore). Doing this moves the fragment's nodes into the DOM, leaving behind an empty `DocumentFragment`.\r\n> \r\n> *This interface is also of great use with Web components:* [`<template>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template) elements contain a `DocumentFragment` in their [`HTMLTemplateElement.content`](https://developer.mozilla.org/en-US/docs/Web/API/HTMLTemplateElement/content) property.\r\n> \r\n> *An empty* `DocumentFragment` can be created using the [`document.createDocumentFragment()`](https://developer.mozilla.org/en-US/docs/Web/API/Document/createDocumentFragment) method or the constructor.\r\n\r\nRead more about [DocumentFragment](https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment).\r\n\r\n# **How is DocumentFragment used in react-scan?**\r\n\r\nI [searched for DocumentFragment in the react-scan codebase](https://github.com/search?q=repo%3Aaidenybai%2Freact-scan+DocumentFragment&type=code) and found the below shown results.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*CsJZ2XzVMAJEqEBxcc3zYA.png)\r\n\r\ncreateDocumentFragment is used in two files:\r\n\r\n1. [react-is-not-available.ts](https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/extension/src/inject/react-is-not-available.ts#L42)\r\n    \r\n2. [packages/scan/src/core/index.ts](https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/scan/src/core/index.ts#L49)\r\n    \r\n\r\n# **createDocumentFragment method**\r\n\r\nCreates a new empty [`DocumentFragment`](https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment) into which DOM nodes can be added to build an offscreen DOM tree. Read more about [createDocumentFragment](https://developer.mozilla.org/en-US/docs/Web/API/Document/createDocumentFragment).\r\n\r\n# **About me:**\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com/). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/search?q=repo%3Aaidenybai%2Freact-scan%20DocumentFragment&type=code](https://github.com/search?q=repo%3Aaidenybai%2Freact-scan+DocumentFragment&type=code)\r\n    \r\n2. [https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/extension/src/inject/react-is-not-available.ts#L42](https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/extension/src/inject/react-is-not-available.ts#L42)\r\n    \r\n3. [https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/scan/src/core/index.ts#L49](https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/scan/src/core/index.ts#L49)\r\n    \r\n4. [https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment](https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment)\r\n    \r\n\r\n",
          "code": "var Component=(()=>{var m=Object.create;var a=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),F=(t,e)=>{for(var c in e)a(t,c,{get:e[c],enumerable:!0})},i=(t,e,c,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!b.call(t,r)&&r!==c&&a(t,r,{get:()=>e[r],enumerable:!(o=p(e,r))||o.enumerable});return t};var D=(t,e,c)=>(c=t!=null?m(g(t)):{},i(e||!t||!t.__esModule?a(c,\"default\",{value:t,enumerable:!0}):c,t)),y=t=>i(a({},\"__esModule\",{value:!0}),t);var h=f((A,d)=>{d.exports=_jsx_runtime});var k={};F(k,{default:()=>l,frontmatter:()=>v});var n=D(h()),v={title:\"Build an offscreen DOM tree using this method.\"};function s(t){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I found the below code snippet in \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/fe4e17de6911970f50386fb12a62a0556ca55579/packages/scan/src/core/index.ts#L49\",children:\"packages/scan/core/index.ts in react-scan source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fragment \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" document\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createDocumentFragment\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]})})})}),`\n`,(0,n.jsx)(e.p,{children:\"In this article, you will learn\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What is DocumentFragment?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"How is DocumentFragment used in react-scan?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"createDocumentFragment method.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"what-is-documentfragment\",children:(0,n.jsx)(e.strong,{children:\"What is DocumentFragment\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below information is picked from \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\",children:\"MDN docs\"}),\".\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"definition\",children:(0,n.jsx)(e.strong,{children:\"Definition\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"The\"}),\" \",(0,n.jsx)(e.code,{children:\"DocumentFragment\"}),\" interface represents a minimal document object that has no parent.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"It is used as a lightweight version of\"}),\" \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Document\",children:(0,n.jsx)(e.code,{children:\"Document\"})}),\" that stores a segment of a document structure comprised of nodes just like a standard document. The key difference is due to the fact that the document fragment isn't part of the active document tree structure. Changes made to the fragment don't affect the document.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"usage\",children:(0,n.jsx)(e.strong,{children:\"Usage\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"A common use for\"}),\" \",(0,n.jsx)(e.code,{children:\"DocumentFragment\"}),\" is to create one, assemble a DOM subtree within it, then append or insert the fragment into the DOM using \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Node\",children:(0,n.jsx)(e.code,{children:\"Node\"})}),\" interface methods such as \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild\",children:(0,n.jsx)(e.code,{children:\"appendChild()\"})}),\", \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Element/append\",children:(0,n.jsx)(e.code,{children:\"append()\"})}),\", or \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\",children:(0,n.jsx)(e.code,{children:\"insertBefore()\"})}),\". Doing this moves the fragment's nodes into the DOM, leaving behind an empty \",(0,n.jsx)(e.code,{children:\"DocumentFragment\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"This interface is also of great use with Web components:\"}),\" \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/template\",children:(0,n.jsx)(e.code,{children:\"<template>\"})}),\" elements contain a \",(0,n.jsx)(e.code,{children:\"DocumentFragment\"}),\" in their \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLTemplateElement/content\",children:(0,n.jsx)(e.code,{children:\"HTMLTemplateElement.content\"})}),\" property.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"An empty\"}),\" \",(0,n.jsx)(e.code,{children:\"DocumentFragment\"}),\" can be created using the \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Document/createDocumentFragment\",children:(0,n.jsx)(e.code,{children:\"document.createDocumentFragment()\"})}),\" method or the constructor.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\",children:\"DocumentFragment\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"how-is-documentfragment-used-in-react-scan\",children:(0,n.jsx)(e.strong,{children:\"How is DocumentFragment used in react-scan?\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I \",(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Aaidenybai%2Freact-scan+DocumentFragment&type=code\",children:\"searched for DocumentFragment in the react-scan codebase\"}),\" and found the below shown results.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*CsJZ2XzVMAJEqEBxcc3zYA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"createDocumentFragment is used in two files:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/extension/src/inject/react-is-not-available.ts#L42\",children:\"react-is-not-available.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/scan/src/core/index.ts#L49\",children:\"packages/scan/src/core/index.ts\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"createdocumentfragment-method\",children:(0,n.jsx)(e.strong,{children:\"createDocumentFragment method\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Creates a new empty \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\",children:(0,n.jsx)(e.code,{children:\"DocumentFragment\"})}),\" into which DOM nodes can be added to build an offscreen DOM tree. Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Document/createDocumentFragment\",children:\"createDocumentFragment\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Aaidenybai%2Freact-scan+DocumentFragment&type=code\",children:\"https://github.com/search?q=repo%3Aaidenybai%2Freact-scan%20DocumentFragment&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/extension/src/inject/react-is-not-available.ts#L42\",children:\"https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/extension/src/inject/react-is-not-available.ts#L42\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/scan/src/core/index.ts#L49\",children:\"https://github.com/aidenybai/react-scan/blob/cd12e388f46a40293e6a276cd46dc3c6455246d7/packages/scan/src/core/index.ts#L49\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\"})}),`\n`]}),`\n`]})]})}function l(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(s,{...t})}):s(t)}return y(k);})();\n;return Component;"
        },
        "_id": "blog/Build-an-offscreen-DOM.mdx",
        "_raw": {
          "sourceFilePath": "blog/Build-an-offscreen-DOM.mdx",
          "sourceFileName": "Build-an-offscreen-DOM.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Build-an-offscreen-DOM"
        },
        "type": "Doc",
        "slug": "/blog/Build-an-offscreen-DOM",
        "slugAsParams": "Build-an-offscreen-DOM"
      },
      "documentHash": "1740997965986",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/build-design-system-in-tailwind.mdx": {
      "document": {
        "title": "buildDesignSystem fn in Tailwind CSS source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze [buildDesignSystem function in Tailwind CSS source code.](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L36)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*OcKTGhnCYia7TSxHpMGHsg.png)\r\n\r\nDesignSystem type picked from [design-system.ts](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L36)\r\n\r\n```plaintext\r\nexport type DesignSystem = {\r\n  theme: Theme\r\n  utilities: Utilities\r\n  variants: Variants\r\n\r\n  invalidCandidates: Set<string>\r\n\r\n  // Whether to mark utility declarations as !important\r\n  important: boolean\r\n\r\n  getClassOrder(classes: string[]): [string, bigint | null][]\r\n  getClassList(): ClassEntry[]\r\n  getVariants(): VariantEntry[]\r\n\r\n  parseCandidate(candidate: string): Candidate[]\r\n  parseVariant(variant: string): Variant | null\r\n  compileAstNodes(candidate: Candidate): ReturnType<typeof compileAstNodes>\r\n\r\n  getVariantOrder(): Map<Variant, number>\r\n  resolveThemeValue(path: string): string | undefined\r\n\r\n  // Used by IntelliSense\r\n  candidatesToCss(classes: string[]): (string | null)[]\r\n}\r\n```\r\n\r\nAt the time of writing this article, [design-system.ts](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L36) has about 144 LOC.\r\n\r\nLet’s discuss how the values returned by DefaultMap utility function is used in [designSystem](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L48).\r\n\r\n```plaintext\r\nlet parsedVariants = new DefaultMap((variant) => parseVariant(variant, designSystem))\r\nlet parsedCandidates = new DefaultMap((candidate) =>\r\n  Array.from(parseCandidate(candidate, designSystem)),\r\n)\r\nlet compiledAstNodes = new DefaultMap<Candidate>((candidate) =>\r\n  compileAstNodes(candidate, designSystem),\r\n)\r\n```\r\n\r\nThese variables are used in designSystem object as shown below:\r\n\r\n```plaintext\r\nparseCandidate(candidate: string) {\r\n  return parsedCandidates.get(candidate)\r\n},\r\nparseVariant(variant: string) {\r\n  return parsedVariants.get(variant)\r\n},\r\ncompileAstNodes(candidate: Candidate) {\r\n  return compiledAstNodes.get(candidate)\r\n},\r\n```\r\n\r\nutilities and variants are the values returned by `createUtilities` and `createVariants`.\r\n\r\nKeys such as [candidatesToCss](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L56C5-L56C20), [getVariantOrder](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L97) and [resolveThemeValue](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L122) have their function implementations that require furter analysis.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts)\r\n    \r\n2. [https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/index.ts#L319](https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/index.ts#L319)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----dc5c2c6036a1--------------------------------)\r\n",
          "code": "var Component=(()=>{var o=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),w=(a,e)=>{for(var s in e)t(a,s,{get:e[s],enumerable:!0})},r=(a,e,s,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!b.call(a,i)&&i!==s&&t(a,i,{get:()=>e[i],enumerable:!(l=m(e,i))||l.enumerable});return a};var y=(a,e,s)=>(s=a!=null?o(u(a)):{},r(e||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),N=a=>r(t({},\"__esModule\",{value:!0}),a);var d=f((v,c)=>{c.exports=_jsx_runtime});var k={};w(k,{default:()=>p,frontmatter:()=>x});var n=y(d()),x={title:\"buildDesignSystem fn in Tailwind CSS source code.\"};function h(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze \",(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L36\",children:\"buildDesignSystem function in Tailwind CSS source code.\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*OcKTGhnCYia7TSxHpMGHsg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"DesignSystem type picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L36\",children:\"design-system.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export type DesignSystem = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  theme: Theme\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  utilities: Utilities\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  variants: Variants\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  invalidCandidates: Set<string>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Whether to mark utility declarations as !important\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  important: boolean\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  getClassOrder(classes: string[]): [string, bigint | null][]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  getClassList(): ClassEntry[]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  getVariants(): VariantEntry[]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  parseCandidate(candidate: string): Candidate[]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  parseVariant(variant: string): Variant | null\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  compileAstNodes(candidate: Candidate): ReturnType<typeof compileAstNodes>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  getVariantOrder(): Map<Variant, number>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  resolveThemeValue(path: string): string | undefined\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Used by IntelliSense\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  candidatesToCss(classes: string[]): (string | null)[]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"At the time of writing this article, \",(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L36\",children:\"design-system.ts\"}),\" has about 144 LOC.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s discuss how the values returned by DefaultMap utility function is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L48\",children:\"designSystem\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let parsedVariants = new DefaultMap((variant) => parseVariant(variant, designSystem))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let parsedCandidates = new DefaultMap((candidate) =>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  Array.from(parseCandidate(candidate, designSystem)),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\")\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let compiledAstNodes = new DefaultMap<Candidate>((candidate) =>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  compileAstNodes(candidate, designSystem),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\")\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"These variables are used in designSystem object as shown below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"parseCandidate(candidate: string) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return parsedCandidates.get(candidate)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"parseVariant(variant: string) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return parsedVariants.get(variant)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"compileAstNodes(candidate: Candidate) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return compiledAstNodes.get(candidate)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"utilities and variants are the values returned by \",(0,n.jsx)(e.code,{children:\"createUtilities\"}),\" and \",(0,n.jsx)(e.code,{children:\"createVariants\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Keys such as \",(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L56C5-L56C20\",children:\"candidatesToCss\"}),\", \",(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L97\",children:\"getVariantOrder\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts#L122\",children:\"resolveThemeValue\"}),\" have their function implementations that require furter analysis.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts\",children:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/design-system.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/index.ts#L319\",children:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/index.ts#L319\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----dc5c2c6036a1--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return N(k);})();\n;return Component;"
        },
        "_id": "blog/build-design-system-in-tailwind.mdx",
        "_raw": {
          "sourceFilePath": "blog/build-design-system-in-tailwind.mdx",
          "sourceFileName": "build-design-system-in-tailwind.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/build-design-system-in-tailwind"
        },
        "type": "Doc",
        "slug": "/blog/build-design-system-in-tailwind",
        "slugAsParams": "build-design-system-in-tailwind"
      },
      "documentHash": "1740489186236",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/bunchee-bundler.mdx": {
      "document": {
        "title": "Bunchee, a bundler for JS/TS package\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI found that [Bunchee](https://www.npmjs.com/package/bunchee) is used in [t3-env](https://github.com/t3-oss/t3-env/blob/main/packages/core/package.json#L40) to bundle their [core](https://github.com/t3-oss/t3-env/blob/main/packages/core/package.json#L40), [nextjs](https://github.com/t3-oss/t3-env/blob/main/packages/nextjs/package.json), [nuxt](https://github.com/t3-oss/t3-env/blob/main/packages/nuxt/package.json) packages.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*zmEZ0GNa4gedmN0qpsdvhg.png)\r\n\r\n### Bunchee\r\n\r\nBunchee is a zero configuration bundler makes bundling JS/TS library effortless. It’s built on top of Rollup and SWC, allowing you to focus on writing code and generating multiple bundles (CommonJS or ESModule) at the same time. \r\n\r\nIt uses the standard exports configuration in package.json as the only source of truth, and uses entry file conventions   \r\nto match your exports and build them into bundles.\r\n\r\n#### Quick start\r\n\r\n1. [Install Bunchee](https://www.npmjs.com/package/bunchee#quick-start) in a TS project\r\n    \r\n\r\nInstall bunchee using the below command:\r\n\r\n```plaintext\r\nnpm install - save-dev bunchee typescript\r\n```\r\n\r\n2\\. [Configuration](https://www.npmjs.com/package/bunchee#configuration)  \r\nYou can use Bunchee to configure the package.json automatically using the below command:\r\n\r\n```plaintext\r\n# Use bunchee to prepare package.json configuration\r\nnpm exec bunchee - prepare\r\n```\r\n\r\nOr you can configure the package.json manually. The below configuration is an example picked from documentation.\r\n\r\n```plaintext\r\n{\r\n \"files\": [\"dist\"],\r\n \"exports\": {\r\n \"import\": {\r\n \"types\": \"./dist/es/index.d.mts\",\r\n \"default\": \"./dist/es/index.mjs\"\r\n },\r\n \"require\": {\r\n \"types\": \"./dist/cjs/index.d.ts\",\r\n \"default\": \"./dist/cjs/index.js\"\r\n }\r\n },\r\n \"scripts\": {\r\n \"build\": \"bunchee\"\r\n }\r\n}\r\n```\r\n\r\n3\\. Build\r\n\r\nIn the configuration step above, we have defined the `build` script. You just have to execute this script — `npm run build`, index.ts become the entry point for the bundler and generates the output based on the `exports` object.\r\n\r\nFor example: src/index.ts will match the exports name “.” or the only main export.\r\n\r\n### Exports in core/package.json\r\n\r\nThis below code is picked from [t3-env/packages/core/package.json](https://github.com/t3-oss/t3-env/blob/main/packages/core/package.json#L13C3-L23C5).\r\n\r\n```plaintext\r\n\"exports\": {\r\n \"./package.json\": \"./package.json\",\r\n \".\": {\r\n \"types\": \"./dist/index.d.ts\",\r\n \"default\": \"./dist/index.js\"\r\n },\r\n \"./presets\": {\r\n \"types\": \"./dist/presets.d.ts\",\r\n \"default\": \"./dist/presets.js\"\r\n }\r\n},\r\n```\r\n\r\n### Exports in nextjs/package.json\r\n\r\nThis below code is picked from [t3-env/packages/nextjs/package.json](https://github.com/t3-oss/t3-env/blob/main/packages/nextjs/package.json#L13-L23)\r\n\r\n```plaintext\r\n\"exports\": {\r\n \"./package.json\": \"./package.json\",\r\n \".\": {\r\n \"types\": \"./dist/index.d.ts\",\r\n \"default\": \"./dist/index.js\"\r\n },\r\n \"./presets\": {\r\n \"types\": \"./dist/presets.d.ts\",\r\n \"default\": \"./dist/presets.js\"\r\n }\r\n},\r\n```\r\n\r\n### Exports in nuxt/package.json\r\n\r\nThis below code is picked from [t3-env/packages/nuxt/package.json](https://github.com/t3-oss/t3-env/blob/main/packages/nuxt/package.json)\r\n\r\n```plaintext\r\n\"exports\": {\r\n \"./package.json\": \"./package.json\",\r\n \".\": {\r\n \"types\": \"./dist/index.d.ts\",\r\n \"default\": \"./dist/index.js\"\r\n },\r\n \"./presets\": {\r\n \"types\": \"./dist/presets.d.ts\",\r\n \"default\": \"./dist/presets.js\"\r\n }\r\n},\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### Reference:\r\n\r\n1. [https://www.npmjs.com/package/bunchee](https://www.npmjs.com/package/bunchee)\r\n    \r\n2. [https://github.com/t3-oss/t3-env/blob/main/packages/core/package.json#L40](https://github.com/t3-oss/t3-env/blob/main/packages/core/package.json#L40)",
          "code": "var Component=(()=>{var o=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),k=(a,e)=>{for(var s in e)t(a,s,{get:e[s],enumerable:!0})},l=(a,e,s,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!b.call(a,i)&&i!==s&&t(a,i,{get:()=>e[i],enumerable:!(c=m(e,i))||c.enumerable});return a};var x=(a,e,s)=>(s=a!=null?o(g(a)):{},l(e||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),j=a=>l(t({},\"__esModule\",{value:!0}),a);var d=f((v,r)=>{r.exports=_jsx_runtime});var y={};k(y,{default:()=>p,frontmatter:()=>N});var n=x(d()),N={title:\"Bunchee, a bundler for JS/TS\\xA0package\"};function h(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I found that \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/bunchee\",children:\"Bunchee\"}),\" is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/package.json#L40\",children:\"t3-env\"}),\" to bundle their \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/package.json#L40\",children:\"core\"}),\", \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/nextjs/package.json\",children:\"nextjs\"}),\", \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/nuxt/package.json\",children:\"nuxt\"}),\" packages.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*zmEZ0GNa4gedmN0qpsdvhg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"bunchee\",children:\"Bunchee\"}),`\n`,(0,n.jsx)(e.p,{children:\"Bunchee is a zero configuration bundler makes bundling JS/TS library effortless. It\\u2019s built on top of Rollup and SWC, allowing you to focus on writing code and generating multiple bundles (CommonJS or ESModule) at the same time.\\xA0\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"It uses the standard exports configuration in package.json as the only source of truth, and uses entry file conventions\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"to match your exports and build them into bundles.\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"quick-start\",children:\"Quick start\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/bunchee#quick-start\",children:\"Install Bunchee\"}),\" in a TS project\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Install bunchee using the below command:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npm install - save-dev bunchee typescript\"})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"2. \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/bunchee#configuration\",children:\"Configuration\"}),(0,n.jsx)(e.br,{}),`\n`,\"You can use Bunchee to configure the package.json automatically using the below command:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# Use bunchee to prepare package.json configuration\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npm exec bunchee - prepare\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Or you can configure the package.json manually. The below configuration is an example picked from documentation.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"files\": [\"dist\"],'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"exports\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"import\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"types\": \"./dist/es/index.d.mts\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"default\": \"./dist/es/index.mjs\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"require\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"types\": \"./dist/cjs/index.d.ts\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"default\": \"./dist/cjs/index.js\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"scripts\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"build\": \"bunchee\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"3. Build\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the configuration step above, we have defined the \",(0,n.jsx)(e.code,{children:\"build\"}),\" script. You just have to execute this script\\u200A\\u2014\\u200A\",(0,n.jsx)(e.code,{children:\"npm run build\"}),\", index.ts become the entry point for the bundler and generates the output based on the \",(0,n.jsx)(e.code,{children:\"exports\"}),\" object.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"For example: src/index.ts will match the exports name \\u201C.\\u201D or the only main export.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"exports-in-corepackagejson\",children:\"Exports in core/package.json\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/package.json#L13C3-L23C5\",children:\"t3-env/packages/core/package.json\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"exports\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"./package.json\": \"./package.json\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \".\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"types\": \"./dist/index.d.ts\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"default\": \"./dist/index.js\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"./presets\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"types\": \"./dist/presets.d.ts\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"default\": \"./dist/presets.js\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"exports-in-nextjspackagejson\",children:\"Exports in nextjs/package.json\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/nextjs/package.json#L13-L23\",children:\"t3-env/packages/nextjs/package.json\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"exports\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"./package.json\": \"./package.json\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \".\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"types\": \"./dist/index.d.ts\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"default\": \"./dist/index.js\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"./presets\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"types\": \"./dist/presets.d.ts\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"default\": \"./dist/presets.js\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"exports-in-nuxtpackagejson\",children:\"Exports in nuxt/package.json\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/nuxt/package.json\",children:\"t3-env/packages/nuxt/package.json\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"exports\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"./package.json\": \"./package.json\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \".\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"types\": \"./dist/index.d.ts\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"default\": \"./dist/index.js\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"./presets\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"types\": \"./dist/presets.d.ts\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"default\": \"./dist/presets.js\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"reference\",children:\"Reference:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/bunchee\",children:\"https://www.npmjs.com/package/bunchee\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/package.json#L40\",children:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/package.json#L40\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return j(y);})();\n;return Component;"
        },
        "_id": "blog/bunchee-bundler.mdx",
        "_raw": {
          "sourceFilePath": "blog/bunchee-bundler.mdx",
          "sourceFileName": "bunchee-bundler.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/bunchee-bundler"
        },
        "type": "Doc",
        "slug": "/blog/bunchee-bundler",
        "slugAsParams": "bunchee-bundler"
      },
      "documentHash": "1740489186238",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Bypass-bundlers-detection.mdx": {
      "document": {
        "title": "Bypass bundlers detection of the require statement\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse how React source code bypasses bundlers’ detection of require statement.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*Y9c7pS_8c12d5xp3fIRnCg.png)\r\n\r\nBy concatenating the string “require” with a random number (Math.random()), the code generates a string that looks like “require”, but is not directly recognizable by the bundler during static analysis. The string is then sliced to get the first 7 characters, ensuring that the result is always “require” (since “require” + Math.random() will result in something like “require0.123456”, which is sliced to “require”).\r\n\r\nAll this trouble to invoke a MacroTask called setImmediate that is available in Node environment.\r\n\r\n# **setImmediate**\r\n\r\nWhen you want to execute some piece of code asynchronously,  \r\nbut as soon as possible, one option is to use the setImmediate() function provided by Node.js:\r\n\r\n```plaintext\r\nsetImmediate(() => {\r\n // run something\r\n});\r\n```\r\n\r\nAny function passed as the setImmediate() argument is a callback that’s executed in the next iteration of the event loop.\r\n\r\nRead more about setImmediate at [Nodejs Docs](https://nodejs.org/en/learn/asynchronous-work/understanding-setimmediate).\r\n\r\n# **Why avoid bundlers detecting require?**\r\n\r\n## **Browser environments don’t need Node.js modules:**\r\n\r\nReact needs to differentiate between the Node.js environment (where setImmediate is used) and the browser environment (where MessageChannel is used). If a bundler detects require, it might automatically include a Node.js polyfill in the browser bundle, which is unnecessary and can bloat the code.\r\n\r\n## **Avoid accidental polyfill inclusion:**\r\n\r\nBundlers, like Webpack, often include polyfills for Node.js APIs when they detect require. This is problematic for a lightweight library like React, where such polyfills are unnecessary and may interfere with React’s own logic for handling environments (browser vs. Node.js).\r\n\r\nThis enqueueTask is a fallback method used in [ReactAct.js](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*EaUXDJhoXv9cdKs4AVcVOg.png)\r\n\r\n```plaintext\r\n// $FlowFixMe[invalid-computed-prop]\r\nconst nodeRequire = module && module[requireString];\r\n// assuming we're in node, let's try to get node's\r\n// version of setImmediate, bypassing fake timers if any.\r\nenqueueTaskImpl = nodeRequire.call(module, 'timers').setImmediate;\r\n```\r\n\r\n`timers` is a core module in Node.js. It provides a set of timer functions that can be used to schedule code execution at specific intervals or after a delay. These functions are similar to the global timer functions in  \r\nJavaScript (like setTimeout and setInterval), but they are provided as part of the timers module for additional control and precision.\r\n\r\n```plaintext\r\nnodeRequire.call(module, 'timers')\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js#L23](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js#L23)\r\n    \r\n2. [https://nodejs.org/en/learn/asynchronous-work/understanding-setimmediate](https://nodejs.org/en/learn/asynchronous-work/understanding-setimmediate)\r\n    \r\n3. [https://nodejs.org/api/timers.html#setimmediatecallback-args](https://nodejs.org/api/timers.html#setimmediatecallback-args)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----61e9b23ed3a4--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var a in e)r(t,a,{get:e[a],enumerable:!0})},c=(t,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!b.call(t,i)&&i!==a&&r(t,i,{get:()=>e[i],enumerable:!(s=m(e,i))||s.enumerable});return t};var k=(t,e,a)=>(a=t!=null?p(g(t)):{},c(e||!t||!t.__esModule?r(a,\"default\",{value:t,enumerable:!0}):a,t)),w=t=>c(r({},\"__esModule\",{value:!0}),t);var o=f((q,d)=>{d.exports=_jsx_runtime});var j={};y(j,{default:()=>h,frontmatter:()=>v});var n=k(o()),v={title:\"Bypass bundlers detection of the require statement\"};function l(t){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this article, we analyse how React source code bypasses bundlers\\u2019 detection of require statement.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*Y9c7pS_8c12d5xp3fIRnCg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"By concatenating the string \\u201Crequire\\u201D with a random number (Math.random()), the code generates a string that looks like \\u201Crequire\\u201D, but is not directly recognizable by the bundler during static analysis. The string is then sliced to get the first 7 characters, ensuring that the result is always \\u201Crequire\\u201D (since \\u201Crequire\\u201D + Math.random() will result in something like \\u201Crequire0.123456\\u201D, which is sliced to \\u201Crequire\\u201D).\"}),`\n`,(0,n.jsx)(e.p,{children:\"All this trouble to invoke a MacroTask called setImmediate that is available in Node environment.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"setimmediate\",children:(0,n.jsx)(e.strong,{children:\"setImmediate\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you want to execute some piece of code asynchronously,\",(0,n.jsx)(e.br,{}),`\n`,\"but as soon as possible, one option is to use the setImmediate() function provided by Node.js:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"setImmediate(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // run something\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Any function passed as the setImmediate() argument is a callback that\\u2019s executed in the next iteration of the event loop.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about setImmediate at \",(0,n.jsx)(e.a,{href:\"https://nodejs.org/en/learn/asynchronous-work/understanding-setimmediate\",children:\"Nodejs Docs\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"why-avoid-bundlers-detecting-require\",children:(0,n.jsx)(e.strong,{children:\"Why avoid bundlers detecting require?\"})}),`\n`,(0,n.jsx)(e.h2,{id:\"browser-environments-dont-need-nodejs-modules\",children:(0,n.jsx)(e.strong,{children:\"Browser environments don\\u2019t need Node.js modules:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"React needs to differentiate between the Node.js environment (where setImmediate is used) and the browser environment (where MessageChannel is used). If a bundler detects require, it might automatically include a Node.js polyfill in the browser bundle, which is unnecessary and can bloat the code.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"avoid-accidental-polyfill-inclusion\",children:(0,n.jsx)(e.strong,{children:\"Avoid accidental polyfill inclusion:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Bundlers, like Webpack, often include polyfills for Node.js APIs when they detect require. This is problematic for a lightweight library like React, where such polyfills are unnecessary and may interfere with React\\u2019s own logic for handling environments (browser vs. Node.js).\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This enqueueTask is a fallback method used in \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js\",children:\"ReactAct.js\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*EaUXDJhoXv9cdKs4AVcVOg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// $FlowFixMe[invalid-computed-prop]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const nodeRequire = module && module[requireString];\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// assuming we're in node, let's try to get node's\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// version of setImmediate, bypassing fake timers if any.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"enqueueTaskImpl = nodeRequire.call(module, 'timers').setImmediate;\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"timers\"}),\" is a core module in Node.js. It provides a set of timer functions that can be used to schedule code execution at specific intervals or after a delay. These functions are similar to the global timer functions in\",(0,n.jsx)(e.br,{}),`\n`,\"JavaScript (like setTimeout and setInterval), but they are provided as part of the timers module for additional control and precision.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"nodeRequire.call(module, 'timers')\"})})})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js#L23\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js#L23\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nodejs.org/en/learn/asynchronous-work/understanding-setimmediate\",children:\"https://nodejs.org/en/learn/asynchronous-work/understanding-setimmediate\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nodejs.org/api/timers.html#setimmediatecallback-args\",children:\"https://nodejs.org/api/timers.html#setimmediatecallback-args\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----61e9b23ed3a4--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function h(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(l,{...t})}):l(t)}return w(j);})();\n;return Component;"
        },
        "_id": "blog/Bypass-bundlers-detection.mdx",
        "_raw": {
          "sourceFilePath": "blog/Bypass-bundlers-detection.mdx",
          "sourceFileName": "Bypass-bundlers-detection.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Bypass-bundlers-detection"
        },
        "type": "Doc",
        "slug": "/blog/Bypass-bundlers-detection",
        "slugAsParams": "Bypass-bundlers-detection"
      },
      "documentHash": "1740489186189",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/canvas-route-in-grida.mdx": {
      "document": {
        "title": "Locating the canvas route in the Grida codebase.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI am contributing to an open source project, [Grida](https://github.com/gridaco/grida). Grida provides forms for developers and has a canvas that can be used to design, like Figma. In this article, I wanted to share how I located the [/canvas](https://app.grida.co/canvas) route in the large Grida codebase.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*KY24qCkautaIDXaYQL3jog.png)\r\n\r\nGrida codebase has a lot of folders. It can be challenging to navigate this codebase to find the feature you want to work on when you are just getting started. Let’s first locate the route — /canvas.\r\n\r\n### /canvas route\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*37hr7eUJAauTqI-QQKJNxw.png)\r\n\r\nThis project manages workspaces using pnpm. You can confirm this by looking at [pnpm-workspace.yaml](https://github.com/gridaco/grida/blob/main/pnpm-workspace.yaml)\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*uqHAZcTXDdDrhtnjIzCffg.png)\r\n\r\nIt took me a while to find out where the /canvas route is located because in the [apps](https://github.com/gridaco/grida/tree/main/apps) folder, you have about 5 projects. Question was, which workspace has it? I tried my luck with [forms project](https://github.com/gridaco/grida/tree/main/apps/forms).\r\n\r\n[forms](https://github.com/gridaco/grida/tree/main/apps/forms) is a Next.js app router based application. Since this uses app router, to locate /canvas, you should be looking for a folder named canvas in the app. But it was not that obvious because again [app folder](https://github.com/gridaco/grida/tree/main/apps/forms/app) has a lot of route groups as seen below:\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*emwH35BSw8WSHtAdDEll1Q.png)\r\n\r\nI found that canvas folder is located in [(dev) route group](https://github.com/gridaco/grida/tree/main/apps/forms/app/%28dev%29) and the canvas/page.tsx has the below code:\r\n\r\n```js\r\n// import CanvasPlayground from \"@/scaffolds/playground-canvas/playground\";\r\nimport dynamic from \"next/dynamic\";\r\nimport { Metadata } from \"next\";\r\n\r\nconst PlaygroundCanvas = dynamic(\r\n  () => import(\"@/scaffolds/playground-canvas/playground\"),\r\n  {\r\n    ssr: false,\r\n  }\r\n);\r\n\r\nexport const metadata: Metadata = {\r\n  title: \"Canvas Playground\",\r\n  description: \"Grida Canvas SDK Playground\",\r\n};\r\n\r\nexport default function CanvasPlaygroundPage() {\r\n  return <PlaygroundCanvas />;\r\n}\r\n```\r\n\r\nPlaygroundCanvas is a component imported dynamically from [@/scaffolds/playground-canvas/playground](https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx). \r\n\r\nplayground.tsx file has about 877 lines of code at the time of writing this article. This is you starting point to understand how canvas works. I did some study and found that this canvas feature is mathematical, fun to work on and can feel complicated.\r\n\r\nI will write more articles explaining the features used in canvas, for example, how the rectangle gets populated on to the board with a click on the toolbar item and how the drag increases the rectangle size. This is just one example, there is more elements and lot of a mathematical concepts are applied behind the scenes.\r\n\r\nThe reason I am writing these articles is because I am determined to contribute to Grida as much as possible and this canvas feature seems like a proper brain teaser.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/gridaco/grida/tree/main](https://github.com/gridaco/grida/tree/main)\r\n    \r\n2. [https://app.grida.co/canvas](https://app.grida.co/canvas)\r\n    \r\n3. [https://github.com/gridaco/grida/tree/main/apps/forms](https://github.com/gridaco/grida/tree/main/apps/forms)\r\n    \r\n4. [https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx](https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx)",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var y=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var r in e)s(n,r,{get:e[r],enumerable:!0})},c=(n,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of F(e))!u.call(n,t)&&t!==r&&s(n,t,{get:()=>e[t],enumerable:!(o=m(e,t))||o.enumerable});return n};var b=(n,e,r)=>(r=n!=null?p(g(n)):{},c(e||!n||!n.__esModule?s(r,\"default\",{value:n,enumerable:!0}):r,n)),v=n=>c(s({},\"__esModule\",{value:!0}),n);var i=y((N,l)=>{l.exports=_jsx_runtime});var x={};f(x,{default:()=>d,frontmatter:()=>w});var a=b(i()),w={title:\"Locating the canvas route in the Grida codebase.\"};function h(n){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:[\"I am contributing to an open source project, \",(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida\",children:\"Grida\"}),\". Grida provides forms for developers and has a canvas that can be used to design, like Figma. In this article, I wanted to share how I located the \",(0,a.jsx)(e.a,{href:\"https://app.grida.co/canvas\",children:\"/canvas\"}),\" route in the large Grida codebase.\"]}),`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*KY24qCkautaIDXaYQL3jog.png\",alt:\"\"})}),`\n`,(0,a.jsx)(e.p,{children:\"Grida codebase has a lot of folders. It can be challenging to navigate this codebase to find the feature you want to work on when you are just getting started. Let\\u2019s first locate the route\\u200A\\u2014\\u200A/canvas.\"}),`\n`,(0,a.jsx)(e.h3,{id:\"canvas-route\",children:\"/canvas route\"}),`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*37hr7eUJAauTqI-QQKJNxw.png\",alt:\"\"})}),`\n`,(0,a.jsxs)(e.p,{children:[\"This project manages workspaces using pnpm. You can confirm this by looking at \",(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/pnpm-workspace.yaml\",children:\"pnpm-workspace.yaml\"})]}),`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*uqHAZcTXDdDrhtnjIzCffg.png\",alt:\"\"})}),`\n`,(0,a.jsxs)(e.p,{children:[\"It took me a while to find out where the /canvas route is located because in the \",(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida/tree/main/apps\",children:\"apps\"}),\" folder, you have about 5 projects. Question was, which workspace has it? I tried my luck with \",(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida/tree/main/apps/forms\",children:\"forms project\"}),\".\"]}),`\n`,(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida/tree/main/apps/forms\",children:\"forms\"}),\" is a Next.js app router based application. Since this uses app router, to locate /canvas, you should be looking for a folder named canvas in the app. But it was not that obvious because again \",(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida/tree/main/apps/forms/app\",children:\"app folder\"}),\" has a lot of route groups as seen below:\"]}),`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*emwH35BSw8WSHtAdDEll1Q.png\",alt:\"\"})}),`\n`,(0,a.jsxs)(e.p,{children:[\"I found that canvas folder is located in \",(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida/tree/main/apps/forms/app/%28dev%29\",children:\"(dev) route group\"}),\" and the canvas/page.tsx has the below code:\"]}),`\n`,(0,a.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,a.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF4\"},children:' import CanvasPlayground from \"@/scaffolds/playground-canvas/playground\";'})]}),`\n`,(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF\"},children:\" dynamic \"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"next/dynamic\"'}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Metadata \"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"next\"'}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF\"},children:\" PlaygroundCanvas \"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF\"},children:\" dynamic\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ()\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" import(\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"@/scaffolds/playground-canvas/playground\"'}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    ssr\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF\"},children:\" metadata\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Metadata\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  title\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"Canvas Playground\"'}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  description\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"Grida Canvas SDK Playground\"'}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CanvasPlaygroundPage\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,a.jsxs)(e.span,{className:\"line\",children:[(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,a.jsx)(e.span,{style:{color:\"#FFF\"},children:\"PlaygroundCanvas \"}),(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/>;\"})]}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,a.jsxs)(e.p,{children:[\"PlaygroundCanvas is a component imported dynamically from \",(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx\",children:\"@/scaffolds/playground-canvas/playground\"}),\".\\xA0\"]}),`\n`,(0,a.jsx)(e.p,{children:\"playground.tsx file has about 877 lines of code at the time of writing this article. This is you starting point to understand how canvas works. I did some study and found that this canvas feature is mathematical, fun to work on and can feel complicated.\"}),`\n`,(0,a.jsx)(e.p,{children:\"I will write more articles explaining the features used in canvas, for example, how the rectangle gets populated on to the board with a click on the toolbar item and how the drag increases the rectangle size. This is just one example, there is more elements and lot of a mathematical concepts are applied behind the scenes.\"}),`\n`,(0,a.jsx)(e.p,{children:\"The reason I am writing these articles is because I am determined to contribute to Grida as much as possible and this canvas feature seems like a proper brain teaser.\"}),`\n`,(0,a.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,a.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.em,{children:(0,a.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,a.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,a.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,a.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,a.jsxs)(e.ol,{children:[`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida/tree/main\",children:\"https://github.com/gridaco/grida/tree/main\"})}),`\n`]}),`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://app.grida.co/canvas\",children:\"https://app.grida.co/canvas\"})}),`\n`]}),`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida/tree/main/apps/forms\",children:\"https://github.com/gridaco/grida/tree/main/apps/forms\"})}),`\n`]}),`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(h,{...n})}):h(n)}return v(x);})();\n;return Component;"
        },
        "_id": "blog/canvas-route-in-grida.mdx",
        "_raw": {
          "sourceFilePath": "blog/canvas-route-in-grida.mdx",
          "sourceFileName": "canvas-route-in-grida.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/canvas-route-in-grida"
        },
        "type": "Doc",
        "slug": "/blog/canvas-route-in-grida",
        "slugAsParams": "canvas-route-in-grida"
      },
      "documentHash": "1740489186240",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/changesets-reads-config.mdx": {
      "document": {
        "title": "How Changsets reads config.json internally\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nWhen you initialise Changesets via the CLI using init command, this command sets up the .changeset folder. It generates a readme and a config file. The config file includes the default options, as well as comments   \r\non what these options represent.\r\n\r\nThe default config.json generated by init command looks like below:\r\n\r\n```plaintext\r\n{\r\n \"commit\": false,\r\n \"updateInternalDependencies\": \"patch\",\r\n \"linked\": [],\r\n \"access\": \"restricted\",\r\n \"baseBranch\": \"master\",\r\n \"ignore\": [],\r\n \"changelog\": \"@changesets/cli/changelog\"\r\n}\r\n```\r\n\r\nRead more about config.json [here](https://github.com/changesets/changesets/blob/main/docs/config-file-options.md).\r\n\r\nNow that we understand what a config.json is for in using Changesets, let’s look at how CLI package reads this config.json.\r\n\r\nIn the run function, this try catch block is found:\r\n\r\n```plaintext\r\ntry {\r\n config = await read(cwd, packages);\r\n} catch (e) {\r\n let oldConfigExists = await fs.pathExists(\r\n path.resolve(cwd, \".changeset/config.js\")\r\n );\r\n```\r\n\r\n`read` function is part of another package named [config](https://github.com/changesets/changesets/blob/main/packages/config/src/index.ts#L94).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*myvRzlYdDrHtZBpyQzJX-Q.png)\r\n\r\nAs you can see from the above image, `fs.readJSON` is used in combination with path.join that combines cwd + .changesets + “config.json”\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*_E9sStHNLd5Xb3NwSaKIWQ.png)\r\n\r\nparse accepts this config.json read as its first argument and this parse function is a really long function that performs additional operations using this json and packages (second argument).\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L29](https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L29)\r\n    \r\n2. [https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L44](https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L44)\r\n    \r\n3. [https://github.com/changesets/changesets/blob/main/packages/config/src/index.ts#L94](https://github.com/changesets/changesets/blob/main/packages/config/src/index.ts#L94)\r\n    \r\n4. [https://github.com/changesets/changesets/blob/main/docs/config-file-options.md](https://github.com/changesets/changesets/blob/main/docs/config-file-options.md)\r\n    \r\n5. [https://github.com/changesets/changesets/blob/main/packages/cli/README.md](https://github.com/changesets/changesets/blob/main/packages/cli/README.md)",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),k=(a,e)=>{for(var t in e)c(a,t,{get:e[t],enumerable:!0})},h=(a,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of m(e))!f.call(a,s)&&s!==t&&c(a,s,{get:()=>e[s],enumerable:!(i=g(e,s))||i.enumerable});return a};var w=(a,e,t)=>(t=a!=null?p(u(a)):{},h(e||!a||!a.__esModule?c(t,\"default\",{value:a,enumerable:!0}):t,a)),y=a=>h(c({},\"__esModule\",{value:!0}),a);var o=b((L,r)=>{r.exports=_jsx_runtime});var x={};k(x,{default:()=>d,frontmatter:()=>j});var n=w(o()),j={title:\"How Changsets reads config.json internally\"};function l(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"When you initialise Changesets via the CLI using init command, this command sets up the\\xA0.changeset folder. It generates a readme and a config file. The config file includes the default options, as well as comments\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"on what these options represent.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The default config.json generated by init command looks like below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"commit\": false,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"updateInternalDependencies\": \"patch\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"linked\": [],'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"access\": \"restricted\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"baseBranch\": \"master\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"ignore\": [],'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"changelog\": \"@changesets/cli/changelog\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about config.json \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/docs/config-file-options.md\",children:\"here\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Now that we understand what a config.json is for in using Changesets, let\\u2019s look at how CLI package reads this config.json.\"}),`\n`,(0,n.jsx)(e.p,{children:\"In the run function, this try catch block is found:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"try {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" config = await read(cwd, packages);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"} catch (e) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" let oldConfigExists = await fs.pathExists(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' path.resolve(cwd, \".changeset/config.js\")'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" );\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"read\"}),\" function is part of another package named \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/config/src/index.ts#L94\",children:\"config\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*myvRzlYdDrHtZBpyQzJX-Q.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"As you can see from the above image, \",(0,n.jsx)(e.code,{children:\"fs.readJSON\"}),\" is used in combination with path.join that combines cwd +\\xA0.changesets + \\u201Cconfig.json\\u201D\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*_E9sStHNLd5Xb3NwSaKIWQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"parse accepts this config.json read as its first argument and this parse function is a really long function that performs additional operations using this json and packages (second argument).\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L29\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L29\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L44\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L44\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/config/src/index.ts#L94\",children:\"https://github.com/changesets/changesets/blob/main/packages/config/src/index.ts#L94\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/docs/config-file-options.md\",children:\"https://github.com/changesets/changesets/blob/main/docs/config-file-options.md\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/README.md\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/README.md\"})}),`\n`]}),`\n`]})]})}function d(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(l,{...a})}):l(a)}return y(x);})();\n;return Component;"
        },
        "_id": "blog/changesets-reads-config.mdx",
        "_raw": {
          "sourceFilePath": "blog/changesets-reads-config.mdx",
          "sourceFileName": "changesets-reads-config.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/changesets-reads-config"
        },
        "type": "Doc",
        "slug": "/blog/changesets-reads-config",
        "slugAsParams": "changesets-reads-config"
      },
      "documentHash": "1740489186241",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/check-component-is-froward-ref.mdx": {
      "document": {
        "title": "How to check if a component is a forward ref component in React?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review a code snippet from [TipTap source code](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L25).\r\n\r\n```js\r\n/**\r\n * Check if a component is a forward ref component.\r\n * @param Component\r\n * @returns {boolean}\r\n */\r\nfunction isForwardRefComponent(Component: any) {\r\n  return !!(\r\n    typeof Component === 'object'\r\n    && Component.$$typeof?.toString() === 'Symbol(react.forward_ref)'\r\n  )\r\n}\r\n```\r\n\r\nThis comment explains what this function does — `isForwardRefComponent` \r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*v0cIlJZBlwhg38PYrWtFAQ.png)\r\n\r\nYou would write forwardRef in React using this below syntax:\r\n\r\n```js\r\nimport { forwardRef } from 'react';\r\n\r\nconst MyInput = forwardRef(function MyInput(props, ref) {\r\n  // ...\r\n});\r\n```\r\n\r\n> In React 19, `forwardRef` is no longer necessary. Pass `ref` as a prop instead. `forwardRef` will deprecated in a future release. Learn more [here](https://react.dev/blog/2024/04/25/react-19#ref-as-a-prop).\r\n\r\nRead more about [forwardRef](https://react.dev/reference/react/forwardRef).\r\n\r\n### Checking for forward\\_ref\r\n\r\n```js\r\ntypeof Component === 'object'\r\n&& Component.$$typeof?.toString() === 'Symbol(react.forward_ref)'\r\n```\r\n\r\nI don’t think you would find something like this in the documentation. \r\n\r\nFew things I would like to mention here. If it were up to me, I would console.log the component that is created using forwardRef and then inspect its properties and find a reliable prop that I can check to ensure this component is a forward\\_ref. `’Symbol(react.forward_ref)’` this is likely a value of key — `$$typeof` \r\n\r\nI used the docs example to log the MyInput component and it looks as shown below\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*3eW7HMgFrCURIsZsbjPy7A.png)\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L25](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L25)\r\n    \r\n2. [https://react.dev/reference/react/useRef](https://react.dev/reference/react/useRef)\r\n    \r\n3. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Symbol](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol)",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var u=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),g=(r,e)=>{for(var l in e)c(r,l,{get:e[l],enumerable:!0})},a=(r,e,l,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of m(e))!f.call(r,o)&&o!==l&&c(r,o,{get:()=>e[o],enumerable:!(t=F(e,o))||t.enumerable});return r};var b=(r,e,l)=>(l=r!=null?p(y(r)):{},a(e||!r||!r.__esModule?c(l,\"default\",{value:r,enumerable:!0}):l,r)),w=r=>a(c({},\"__esModule\",{value:!0}),r);var i=u((v,s)=>{s.exports=_jsx_runtime});var R={};g(R,{default:()=>h,frontmatter:()=>k});var n=b(i()),k={title:\"How to check if a component is a forward ref component in\\xA0React?\"};function d(r){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will review a code snippet from \",(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L25\",children:\"TipTap source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Check if a component is a forward ref component.\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@param\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Component\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@returns\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\"}\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" isForwardRefComponent\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Component\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" !!(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'object'\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    &&\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"$$typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"toString\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'Symbol(react.forward_ref)'\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This comment explains what this function does\\u200A\\u2014\\u200A\",(0,n.jsx)(e.code,{children:\"isForwardRefComponent\"}),\"\\xA0\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*v0cIlJZBlwhg38PYrWtFAQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"You would write forwardRef in React using this below syntax:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" forwardRef \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'react'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" MyInput \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" forwardRef\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" MyInput\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"props\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ref\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" ...\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"In React 19, \",(0,n.jsx)(e.code,{children:\"forwardRef\"}),\" is no longer necessary. Pass \",(0,n.jsx)(e.code,{children:\"ref\"}),\" as a prop instead. \",(0,n.jsx)(e.code,{children:\"forwardRef\"}),\" will deprecated in a future release. Learn more \",(0,n.jsx)(e.a,{href:\"https://react.dev/blog/2024/04/25/react-19#ref-as-a-prop\",children:\"here\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/forwardRef\",children:\"forwardRef\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"checking-for-forward_ref\",children:\"Checking for forward_ref\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'object'\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"&&\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"$$typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"toString\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'Symbol(react.forward_ref)'\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"I don\\u2019t think you would find something like this in the documentation.\\xA0\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Few things I would like to mention here. If it were up to me, I would console.log the component that is created using forwardRef and then inspect its properties and find a reliable prop that I can check to ensure this component is a forward_ref. \",(0,n.jsx)(e.code,{children:\"\\u2019Symbol(react.forward_ref)\\u2019\"}),\" this is likely a value of key\\u200A\\u2014\\u200A\",(0,n.jsx)(e.code,{children:\"$$typeof\"}),\"\\xA0\"]}),`\n`,(0,n.jsx)(e.p,{children:\"I used the docs example to log the MyInput component and it looks as shown below\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*3eW7HMgFrCURIsZsbjPy7A.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L25\",children:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L25\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useRef\",children:\"https://react.dev/reference/react/useRef\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol\"})}),`\n`]}),`\n`]})]})}function h(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(d,{...r})}):d(r)}return w(R);})();\n;return Component;"
        },
        "_id": "blog/check-component-is-froward-ref.mdx",
        "_raw": {
          "sourceFilePath": "blog/check-component-is-froward-ref.mdx",
          "sourceFileName": "check-component-is-froward-ref.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/check-component-is-froward-ref"
        },
        "type": "Doc",
        "slug": "/blog/check-component-is-froward-ref",
        "slugAsParams": "check-component-is-froward-ref"
      },
      "documentHash": "1740489186244",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/check-if-class-component.mdx": {
      "document": {
        "title": "How to check if a component is a class component in React?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review a code snippet from [TipTap source code](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L8).\r\n\r\n```js\r\n/**\r\n * Check if a component is a class component.\r\n * @param Component\r\n * @returns {boolean}\r\n */\r\nfunction isClassComponent(Component: any) {\r\n  return !!(\r\n    typeof Component === 'function'\r\n    && Component.prototype\r\n    && Component.prototype.isReactComponent\r\n  )\r\n}\r\n```\r\n\r\nThe beauty lies in the comment explaining what this function does. `isClassComponent` function name is pretty self-explanatory. It checks if a `Component` is a class component.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*j9UVR_srq9Zu8KrhWw2IXw.png)\r\n\r\nYou would write a class component in React using this below syntax:\r\n\r\n```js\r\nimport { Component } from \"react\";\r\n\r\nclass Editor extends Component {...}\r\n```\r\n\r\nSo what are these checks?\r\n\r\n#### Checking component typeof\r\n\r\n```js\r\ntypeof Component === 'function'\r\n```\r\n\r\n### isReactComponent\r\n\r\n```js\r\n&& Component.prototype\r\n&& Component.prototype.isReactComponent\r\n```\r\n\r\n`isReactComponent` decides if a component is a class component.\r\n\r\nIt is a common practice to use `!!` to return boolean value.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L8](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L8)",
          "code": "var Component=(()=>{var p=Object.create;var o=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),f=(l,e)=>{for(var t in e)o(l,t,{get:e[t],enumerable:!0})},a=(l,e,t,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of m(e))!u.call(l,c)&&c!==t&&o(l,c,{get:()=>e[c],enumerable:!(r=F(e,c))||r.enumerable});return l};var b=(l,e,t)=>(t=l!=null?p(y(l)):{},a(e||!l||!l.__esModule?o(t,\"default\",{value:l,enumerable:!0}):t,l)),C=l=>a(o({},\"__esModule\",{value:!0}),l);var i=g((N,s)=>{s.exports=_jsx_runtime});var w={};f(w,{default:()=>d,frontmatter:()=>k});var n=b(i()),k={title:\"How to check if a component is a class component in\\xA0React?\"};function h(l){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will review a code snippet from \",(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L8\",children:\"TipTap source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Check if a component is a class component.\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@param\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Component\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@returns\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\"}\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" isClassComponent\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Component\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" !!(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'function'\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    &&\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prototype\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    &&\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prototype\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isReactComponent\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The beauty lies in the comment explaining what this function does. \",(0,n.jsx)(e.code,{children:\"isClassComponent\"}),\" function name is pretty self-explanatory. It checks if a \",(0,n.jsx)(e.code,{children:\"Component\"}),\" is a class component.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*j9UVR_srq9Zu8KrhWw2IXw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"You would write a class component in React using this below syntax:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"react\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"class\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" extends\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Component\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {...}\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"So what are these checks?\"}),`\n`,(0,n.jsx)(e.h4,{id:\"checking-component-typeof\",children:\"Checking component typeof\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'function'\"})]})})})}),`\n`,(0,n.jsx)(e.h3,{id:\"isreactcomponent\",children:\"isReactComponent\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"&&\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prototype\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"&&\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Component\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prototype\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isReactComponent\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"isReactComponent\"}),\" decides if a component is a class component.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"It is a common practice to use\\xA0\",(0,n.jsx)(e.code,{children:\"!!\"}),\" to return boolean value.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L8\",children:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L8\"})}),`\n`]})]})}function d(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(h,{...l})}):h(l)}return C(w);})();\n;return Component;"
        },
        "_id": "blog/check-if-class-component.mdx",
        "_raw": {
          "sourceFilePath": "blog/check-if-class-component.mdx",
          "sourceFileName": "check-if-class-component.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/check-if-class-component"
        },
        "type": "Doc",
        "slug": "/blog/check-if-class-component",
        "slugAsParams": "check-if-class-component"
      },
      "documentHash": "1740489186246",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/citty-cli-builder.mdx": {
      "document": {
        "title": "Citty, an elegant CLI builder by Unjs\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review the Citty, an elegant CLI builder. This library is built by [Unjs](https://unjs.io/).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*mw5GnAIKnUiCV9tQyQpRng.png)\r\n\r\nI came across this package in [cli.ts in unbuild](https://github.com/unjs/unbuild/blob/main/src/cli.ts#L2C41-L2C46). Let’s see this in action by running some experiments in codesandbox.\r\n\r\nI copied the code below, provided in [citty docs](https://github.com/unjs/citty?tab=readme-ov-file#usage), in a codesandbox project.\r\n\r\n```js\r\nimport { defineCommand, runMain } from \"citty\";\r\n\r\nconst main = defineCommand({\r\n  meta: {\r\n    name: \"hello\",\r\n    version: \"1.0.0\",\r\n    description: \"My Awesome CLI App\",\r\n  },\r\n  args: {\r\n    name: {\r\n      type: \"positional\",\r\n      description: \"Your name\",\r\n      required: true,\r\n    },\r\n    friendly: {\r\n      type: \"boolean\",\r\n      description: \"Use friendly greeting\",\r\n    },\r\n  },\r\n  run({ args }) {\r\n    console.log(`${args.friendly ? \"Hi\" : \"Greetings\"} ${args.name}!`);\r\n  },\r\n});\r\n\r\nrunMain(main);\r\n```\r\n\r\nand below image shows the outcome.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*K4W-vdtoOx1KJm2dULjlcA.png)\r\n\r\nLink to codesandbox — [https://codesandbox.io/p/devbox/vlmqqv](https://codesandbox.io/p/devbox/vlmqqv)\r\n\r\nPretty straightforward right? let’s now review how this is implemented in [cli.ts in unbuild source code](https://github.com/unjs/unbuild/blob/main/src/cli.ts#L8).\r\n\r\n```js\r\n#!/usr/bin/env node\r\nimport { defineCommand, runMain } from \"citty\";\r\nimport consola from \"consola\";\r\nimport { resolve } from \"pathe\";\r\nimport { name, version, description } from \"../package.json\";\r\nimport { build } from \"./build\";\r\n\r\nconst main = defineCommand({\r\n  meta: {\r\n    name,\r\n    version,\r\n    description,\r\n  },\r\n  args: {\r\n    dir: {\r\n      type: \"positional\",\r\n      description: \"The directory to build\",\r\n      required: false,\r\n    },\r\n    config: {\r\n      type: \"string\",\r\n      description: [\r\n        \"The configuration file to use relative to the current working directory.\",\r\n        \"                 Unbuild tries to read `build.config` from the build `DIR` by default.\",\r\n        \"\",\r\n      ].join(\"\\n\"),\r\n    },\r\n    watch: {\r\n      type: \"boolean\",\r\n      description: \"Watch the src dir and rebuild on change (experimental)\",\r\n    },\r\n    stub: {\r\n      type: \"boolean\",\r\n      description: \"Stub the package for JIT compilation\",\r\n    },\r\n    minify: {\r\n      type: \"boolean\",\r\n      description: \"Minify build\",\r\n    },\r\n    sourcemap: {\r\n      type: \"boolean\",\r\n      description: \"Generate sourcemaps (experimental)\",\r\n    },\r\n    parallel: {\r\n      type: \"boolean\",\r\n      description:\r\n        \"Run different types of builds (untyped, mkdist, Rollup, copy) simultaneously.\",\r\n    },\r\n  },\r\n  async run({ args }) {\r\n    const rootDir = resolve(process.cwd(), args.dir || \".\");\r\n    await build(rootDir, args.stub, {\r\n      sourcemap: args.sourcemap,\r\n      config: args.config ? resolve(args.config) : undefined,\r\n      stub: args.stub,\r\n      watch: args.watch,\r\n      rollup: {\r\n        esbuild: {\r\n          minify: args.minify,\r\n        },\r\n      },\r\n    }).catch((error) => {\r\n      consola.error(`Error building ${rootDir}: ${error}`);\r\n      throw error;\r\n    });\r\n  },\r\n});\r\n\r\nrunMain(main);\r\n```\r\n\r\nIn the example provided in the documentation, there were two argument\r\n\r\n* friendly\r\n    \r\n* name\r\n    \r\n\r\nBut the cli.ts has arguments specific to unbuild:\r\n\r\n* dir — string\r\n    \r\n* config — string\r\n    \r\n* watch — boolean\r\n    \r\n* stub — boolean\r\n    \r\n* minify — boolean\r\n    \r\n* sourcemap — boolean\r\n    \r\n* parallel — boolean\r\n    \r\n\r\n#### run \r\n\r\n```js\r\nasync run({ args }) {\r\n    const rootDir = resolve(process.cwd(), args.dir || \".\");\r\n    await build(rootDir, args.stub, {\r\n      sourcemap: args.sourcemap,\r\n      config: args.config ? resolve(args.config) : undefined,\r\n      stub: args.stub,\r\n      watch: args.watch,\r\n      rollup: {\r\n        esbuild: {\r\n          minify: args.minify,\r\n        },\r\n      },\r\n    }).catch((error) => {\r\n      consola.error(`Error building ${rootDir}: ${error}`);\r\n      throw error;\r\n    });\r\n  },\r\n```\r\n\r\nAll the options passed via CLI are used in build function as a parameter. build function is imported from ‘build.ts’ function.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/unjs/citty](https://github.com/unjs/citty)\r\n    \r\n2. [https://github.com/unjs/unbuild/blob/main/src/cli.ts#L2C41-L2C46](https://github.com/unjs/unbuild/blob/main/src/cli.ts#L2C41-L2C46)",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(e,l)=>()=>(l||e((l={exports:{}}).exports,l),l.exports),N=(e,l)=>{for(var s in l)c(e,s,{get:l[s],enumerable:!0})},o=(e,l,s,F)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let r of y(l))!u.call(e,r)&&r!==s&&c(e,r,{get:()=>l[r],enumerable:!(F=p(l,r))||F.enumerable});return e};var b=(e,l,s)=>(s=e!=null?h(m(e)):{},o(l||!e||!e.__esModule?c(s,\"default\",{value:e,enumerable:!0}):s,e)),f=e=>o(c({},\"__esModule\",{value:!0}),e);var i=g((x,a)=>{a.exports=_jsx_runtime});var j={};N(j,{default:()=>d,frontmatter:()=>w});var n=b(i()),w={title:\"Citty, an elegant CLI builder by\\xA0Unjs\"};function t(e){let l={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.p,{children:[\"In this article, we will review the Citty, an elegant CLI builder. This library is built by \",(0,n.jsx)(l.a,{href:\"https://unjs.io/\",children:\"Unjs\"}),\".\"]}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*mw5GnAIKnUiCV9tQyQpRng.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"I came across this package in \",(0,n.jsx)(l.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/cli.ts#L2C41-L2C46\",children:\"cli.ts in unbuild\"}),\". Let\\u2019s see this in action by running some experiments in codesandbox.\"]}),`\n`,(0,n.jsxs)(l.p,{children:[\"I copied the code below, provided in \",(0,n.jsx)(l.a,{href:\"https://github.com/unjs/citty?tab=readme-ov-file#usage\",children:\"citty docs\"}),\", in a codesandbox project.\"]}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" defineCommand\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" runMain \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"citty\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" main \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" defineCommand\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  meta\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"hello\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    version\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"1.0.0\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"My Awesome CLI App\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"positional\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Your name\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      required\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    friendly\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"boolean\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Use friendly greeting\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  run\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    console\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`${\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"friendly\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ? \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"Hi\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" : \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"Greetings\"} ${'}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}!`\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"runMain\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"main\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"and below image shows the outcome.\"}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*K4W-vdtoOx1KJm2dULjlcA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(l.p,{children:[\"Link to codesandbox\\u200A\\u2014\\u200A\",(0,n.jsx)(l.a,{href:\"https://codesandbox.io/p/devbox/vlmqqv\",children:\"https://codesandbox.io/p/devbox/vlmqqv\"})]}),`\n`,(0,n.jsxs)(l.p,{children:[\"Pretty straightforward right? let\\u2019s now review how this is implemented in \",(0,n.jsx)(l.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/cli.ts#L8\",children:\"cli.ts in unbuild source code\"}),\".\"]}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"#!\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF4\"},children:\"/usr/bin/env node\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" defineCommand\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" runMain \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"citty\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" consola \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"consola\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" resolve \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"pathe\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" version\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" description \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"../package.json\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" build \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"./build\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" main \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" defineCommand\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  meta\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    version\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    dir\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"positional\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"The directory to build\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      required\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    config\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"string\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:'        \"The configuration file to use relative to the current working directory.\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:'        \"                 Unbuild tries to read `build.config` from the build `DIR` by default.\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:'        \"\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      ].\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"\\\\n\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    watch\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"boolean\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Watch the src dir and rebuild on change (experimental)\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    stub\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"boolean\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Stub the package for JIT compilation\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    minify\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"boolean\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Minify build\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    sourcemap\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"boolean\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Generate sourcemaps (experimental)\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    parallel\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"boolean\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      description\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:'        \"Run different types of builds (untyped, mkdist, Rollup, copy) simultaneously.\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  async\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" run\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" rootDir \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" resolve\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cwd\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(),\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"dir \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"||\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \".\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    await\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" build\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"rootDir\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"stub\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      sourcemap\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"sourcemap\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      config\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"config \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" resolve\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"config\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" undefined,\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      stub\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"stub\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      watch\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"watch\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      rollup\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        esbuild\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          minify\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"minify\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    }).\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      consola\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`Error building ${\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"rootDir\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}: ${\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      throw\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" error\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"});\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"runMain\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"main\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"In the example provided in the documentation, there were two argument\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:\"friendly\"}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:\"name\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(l.p,{children:\"But the cli.ts has arguments specific to unbuild:\"}),`\n`,(0,n.jsxs)(l.ul,{children:[`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:\"dir\\u200A\\u2014\\u200Astring\"}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:\"config\\u200A\\u2014\\u200Astring\"}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:\"watch\\u200A\\u2014\\u200Aboolean\"}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:\"stub\\u200A\\u2014\\u200Aboolean\"}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:\"minify\\u200A\\u2014\\u200Aboolean\"}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:\"sourcemap\\u200A\\u2014\\u200Aboolean\"}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:\"parallel\\u200A\\u2014\\u200Aboolean\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(l.h4,{id:\"run\",children:\"run\\xA0\"}),`\n`,(0,n.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"async run\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" rootDir \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" resolve\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cwd\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(),\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"dir \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"||\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \".\"'}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    await\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" build\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"rootDir\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"stub\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      sourcemap\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"sourcemap\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      config\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"config \"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" resolve\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"config\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" undefined,\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      stub\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"stub\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      watch\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"watch\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      rollup\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        esbuild\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          minify\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" args\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"minify\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    }).\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"catch\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      consola\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`Error building ${\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"rootDir\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}: ${\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(l.span,{className:\"line\",children:[(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      throw\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF\"},children:\" error\"}),(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    });\"})}),`\n`,(0,n.jsx)(l.span,{className:\"line\",children:(0,n.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  },\"})})]})})}),`\n`,(0,n.jsx)(l.p,{children:\"All the options passed via CLI are used in build function as a parameter. build function is imported from \\u2018build.ts\\u2019 function.\"}),`\n`,(0,n.jsx)(l.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(l.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.em,{children:(0,n.jsxs)(l.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(l.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(l.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(l.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(l.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(l.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(l.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(l.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(l.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(l.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(l.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(l.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(l.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(l.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(l.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(l.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(l.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(l.ol,{children:[`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.a,{href:\"https://github.com/unjs/citty\",children:\"https://github.com/unjs/citty\"})}),`\n`]}),`\n`,(0,n.jsxs)(l.li,{children:[`\n`,(0,n.jsx)(l.p,{children:(0,n.jsx)(l.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/cli.ts#L2C41-L2C46\",children:\"https://github.com/unjs/unbuild/blob/main/src/cli.ts#L2C41-L2C46\"})}),`\n`]}),`\n`]})]})}function d(e={}){let{wrapper:l}=e.components||{};return l?(0,n.jsx)(l,{...e,children:(0,n.jsx)(t,{...e})}):t(e)}return f(j);})();\n;return Component;"
        },
        "_id": "blog/citty-cli-builder.mdx",
        "_raw": {
          "sourceFilePath": "blog/citty-cli-builder.mdx",
          "sourceFileName": "citty-cli-builder.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/citty-cli-builder"
        },
        "type": "Doc",
        "slug": "/blog/citty-cli-builder",
        "slugAsParams": "citty-cli-builder"
      },
      "documentHash": "1740489186249",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/client-options-interface.mdx": {
      "document": {
        "title": "ClientOptions interface in T3 Env source code explained\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse the ClientOptions interface provided for the client object in createEnv parameter, a function in T3 Env. A simple usage of t3-env is provided below:\r\n\r\n```plaintext\r\nexport const env = createEnv({\r\n /*\r\n * Serverside Environment variables, not available on the client.\r\n * Will throw if you access these variables on the client.\r\n */\r\n server: {\r\n DATABASE_URL: z.string().url(),\r\n OPEN_AI_API_KEY: z.string().min(1),\r\n },\r\n /*\r\n * Environment variables available on the client (and server).\r\n *\r\n * 💡 You'll get type errors if these are not prefixed with NEXT_PUBLIC_.\r\n */\r\n client: {\r\n NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\r\n },\r\n /*\r\n * Due to how Next.js bundles environment variables on Edge and Client,\r\n * we need to manually destructure them to make sure all are included in bundle.\r\n *\r\n * 💡 You'll get type errors if not all variables from `server` & `client` are included here.\r\n */\r\n runtimeEnv: {\r\n DATABASE_URL: process.env.DATABASE_URL,\r\n OPEN_AI_API_KEY: process.env.OPEN_AI_API_KEY,\r\n NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:\r\n process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY,\r\n },\r\n});\r\n```\r\n\r\nWe are interested in finding out the types/interfaces of client object.\r\n\r\n```plaintext\r\nclient: {\r\n NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\r\n },\r\n```\r\n\r\nStraight away, I could tell we could expect this type along the lines of Record&lt;String, ZodType&gt;, but the way t3-env defines is different. Look at the below type picked from [T3 Env source code](https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L130C1-L151C2).\r\n\r\n```plaintext\r\nexport interface ClientOptions<\r\n TPrefix extends string | undefined,\r\n TClient extends Record<string, ZodType>,\r\n> {\r\n /**\r\n * The prefix that client-side variables must have. This is enforced both at\r\n * a type-level and at runtime.\r\n */\r\n clientPrefix: TPrefix;\r\n/**\r\n * Specify your client-side environment variables schema here. This way you can ensure the app isn't\r\n * built with invalid env vars.\r\n */\r\n client: Partial<{\r\n [TKey in keyof TClient]: TKey extends `${TPrefix}${string}`\r\n ? TClient[TKey]\r\n : ErrorMessage<`${TKey extends string\r\n ? TKey\r\n : never} is not prefixed with ${TPrefix}.`>;\r\n }>;\r\n}\r\n```\r\n\r\nYou will find that this uses generic type and TClient is of type Record&lt;string, ZodType&gt;, but client does not have this type, instead it has a check in place to ensure your key defined in client is prefixed with whatever you define in ClientPrefix.\r\n\r\nSay, for example, you have defined your prefix as “NEXT\\_PUBLIC\\_” and you try to define some variable with a key that is not prefixed with “NEXT\\_PBULIC\\_”, you will see an error along the lines “\\{variable\\} is not prefixed with “NEXT\\_PBULIC\\_”\r\n\r\nThis is powerful in frameworks like Next.js where you don’t want to accidentally expose server side varaibles to the client side.\r\n\r\nCheck this docs — [https://env.t3.gg/docs/core#create-your-schema](https://env.t3.gg/docs/core#create-your-schema), this talks about prefix error.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L130](https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L130)\r\n    \r\n2. [https://env.t3.gg/docs/core#create-your-schema](https://env.t3.gg/docs/core#create-your-schema)\r\n",
          "code": "var Component=(()=>{var o=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=>{for(var i in e)r(a,i,{get:e[i],enumerable:!0})},t=(a,e,i,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of u(e))!g.call(a,s)&&s!==i&&r(a,s,{get:()=>e[s],enumerable:!(l=m(e,s))||l.enumerable});return a};var v=(a,e,i)=>(i=a!=null?o(f(a)):{},t(e||!a||!a.__esModule?r(i,\"default\",{value:a,enumerable:!0}):i,a)),b=a=>t(r({},\"__esModule\",{value:!0}),a);var h=N((T,c)=>{c.exports=_jsx_runtime});var _={};y(_,{default:()=>p,frontmatter:()=>x});var n=v(h()),x={title:\"ClientOptions interface in T3 Env source code explained\"};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this article, we analyse the ClientOptions interface provided for the client object in createEnv parameter, a function in T3 Env. A simple usage of t3-env is provided below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const env = createEnv({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Serverside Environment variables, not available on the client.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Will throw if you access these variables on the client.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" server: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: z.string().url(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" OPEN_AI_API_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Environment variables available on the client (and server).\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * \\u{1F4A1} You'll get type errors if these are not prefixed with NEXT_PUBLIC_.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" client: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Due to how Next.js bundles environment variables on Edge and Client,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * we need to manually destructure them to make sure all are included in bundle.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * \\u{1F4A1} You'll get type errors if not all variables from `server` & `client` are included here.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" runtimeEnv: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: process.env.DATABASE_URL,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" OPEN_AI_API_KEY: process.env.OPEN_AI_API_KEY,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"We are interested in finding out the types/interfaces of client object.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"client: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Straight away, I could tell we could expect this type along the lines of Record<String, ZodType>, but the way t3-env defines is different. Look at the below type picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L130C1-L151C2\",children:\"T3 Env source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export interface ClientOptions<\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TPrefix extends string | undefined,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TClient extends Record<string, ZodType>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"> {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * The prefix that client-side variables must have. This is enforced both at\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * a type-level and at runtime.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" clientPrefix: TPrefix;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Specify your client-side environment variables schema here. This way you can ensure the app isn't\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * built with invalid env vars.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" client: Partial<{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" [TKey in keyof TClient]: TKey extends `${TPrefix}${string}`\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ? TClient[TKey]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" : ErrorMessage<`${TKey extends string\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ? TKey\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" : never} is not prefixed with ${TPrefix}.`>;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }>;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"You will find that this uses generic type and TClient is of type Record<string, ZodType>, but client does not have this type, instead it has a check in place to ensure your key defined in client is prefixed with whatever you define in ClientPrefix.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Say, for example, you have defined your prefix as \\u201CNEXT_PUBLIC_\\u201D and you try to define some variable with a key that is not prefixed with \\u201CNEXT_PBULIC_\\u201D, you will see an error along the lines \\u201C{variable} is not prefixed with \\u201CNEXT_PBULIC_\\u201D\"}),`\n`,(0,n.jsx)(e.p,{children:\"This is powerful in frameworks like Next.js where you don\\u2019t want to accidentally expose server side varaibles to the client side.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Check this docs\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://env.t3.gg/docs/core#create-your-schema\",children:\"https://env.t3.gg/docs/core#create-your-schema\"}),\", this talks about prefix error.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L130\",children:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L130\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://env.t3.gg/docs/core#create-your-schema\",children:\"https://env.t3.gg/docs/core#create-your-schema\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return b(_);})();\n;return Component;"
        },
        "_id": "blog/client-options-interface.mdx",
        "_raw": {
          "sourceFilePath": "blog/client-options-interface.mdx",
          "sourceFileName": "client-options-interface.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/client-options-interface"
        },
        "type": "Doc",
        "slug": "/blog/client-options-interface",
        "slugAsParams": "client-options-interface"
      },
      "documentHash": "1740489186250",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/cna-app-name-validation.mdx": {
      "document": {
        "title": "create-next-app validates your app name using this package\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "In this article, we analyze how [create-next-app](https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162) validates your project name.\r\n\r\n```plaintext\r\nvalidate: (name) => {\r\n const validation = validateNpmName(basename(resolve(name)))\r\n if (validation.valid) {\r\n   return true\r\n }\r\n return 'Invalid project name: ' + validation.problems[0]\r\n},\r\n```\r\n\r\nHave you tried naming your project with spaces in it when using create-next-app command? if you have done so, it won’t allow spaces in your project because it follows certain principles when it comes to naming your project.\r\n\r\nSo what are these naming convention rules?\r\n\r\n# **validateNpmName function**\r\n\r\nIf you check this [create-next-app/index.ts](https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162), it calls a function named `validateNpmName`. This is imported from [helpers/validate-pkg.ts](https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*uzCKGZ-Gfwx3WXrbSvLILw.png)\r\n\r\nThis function is straight forward, calls a function named `validateProjectName` that is imported from [validate-npm-package-name](https://www.npmjs.com/package/validate-npm-package-name).\r\n\r\n[Documentation](https://www.npmjs.com/package/validate-npm-package-name) says that if a name is valid, you will get the below object back:\r\n\r\n```plaintext\r\n{\r\n validForNewPackages: true,\r\n validForOldPackages: true\r\n}\r\n```\r\n\r\nWhat makes a name valid? let’s check the documentation again. Documentataion provides these Naming rules:\r\n\r\n1. package name length should be greater than zero\r\n    \r\n2. all the characters in the package name must be lowercase i.e., no uppercase or mixed case names are allowed\r\n    \r\n3. package name can consist of hyphens\r\n    \r\n4. package name must not contain any non-url-safe characters (since name ends up being part of a URL)\r\n    \r\n5. package name should not start with . or \\_\r\n    \r\n6. package name should not contain any spaces\r\n    \r\n7. package name should not contain any of the following characters: ~)(‘!\\*\r\n    \r\n8. package name cannot be the same as a node.js/io.js core module nor a reserved/blacklisted name. For example, the following names are invalid:  \r\n    — http  \r\n    — stream  \r\n    — node\\_modules  \r\n    — favicon.ico\r\n    \r\n9. package name length cannot exceed 214\r\n    \r\n\r\nThese are the rules you should keep in mind when naming your Next.js project.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1\\. [https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162](https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162)  \r\n2\\. [https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13](https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13)  \r\n3\\. [https://www.npmjs.com/package/validate-npm-package-name](https://www.npmjs.com/package/validate-npm-package-name)  \r\n4\\. [https://github.com/npm/validate-npm-package-name/tree/main](https://github.com/npm/validate-npm-package-name/tree/main)\r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----a97f7c8d44c4--------------------------------)\r\n",
          "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),k=(a,e)=>{for(var t in e)c(a,t,{get:e[t],enumerable:!0})},l=(a,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of g(e))!b.call(a,r)&&r!==t&&c(a,r,{get:()=>e[r],enumerable:!(i=m(e,r))||i.enumerable});return a};var v=(a,e,t)=>(t=a!=null?d(u(a)):{},l(e||!a||!a.__esModule?c(t,\"default\",{value:a,enumerable:!0}):t,a)),w=a=>l(c({},\"__esModule\",{value:!0}),a);var s=f((N,h)=>{h.exports=_jsx_runtime});var y={};k(y,{default:()=>o,frontmatter:()=>x});var n=v(s()),x={title:\"create-next-app validates your app name using this package\"};function p(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze how \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162\",children:\"create-next-app\"}),\" validates your project name.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"validate: (name) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const validation = validateNpmName(basename(resolve(name)))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (validation.valid) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   return true\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" return 'Invalid project name: ' + validation.problems[0]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Have you tried naming your project with spaces in it when using create-next-app command? if you have done so, it won\\u2019t allow spaces in your project because it follows certain principles when it comes to naming your project.\"}),`\n`,(0,n.jsx)(e.p,{children:\"So what are these naming convention rules?\"}),`\n`,(0,n.jsx)(e.h1,{id:\"validatenpmname-function\",children:(0,n.jsx)(e.strong,{children:\"validateNpmName function\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you check this \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162\",children:\"create-next-app/index.ts\"}),\", it calls a function named \",(0,n.jsx)(e.code,{children:\"validateNpmName\"}),\". This is imported from \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13\",children:\"helpers/validate-pkg.ts\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*uzCKGZ-Gfwx3WXrbSvLILw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This function is straight forward, calls a function named \",(0,n.jsx)(e.code,{children:\"validateProjectName\"}),\" that is imported from \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/validate-npm-package-name\",children:\"validate-npm-package-name\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/validate-npm-package-name\",children:\"Documentation\"}),\" says that if a name is valid, you will get the below object back:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" validForNewPackages: true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" validForOldPackages: true\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"What makes a name valid? let\\u2019s check the documentation again. Documentataion provides these Naming rules:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name length should be greater than zero\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"all the characters in the package name must be lowercase i.e., no uppercase or mixed case names are allowed\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name can consist of hyphens\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name must not contain any non-url-safe characters (since name ends up being part of a URL)\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name should not start with . or _\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name should not contain any spaces\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name should not contain any of the following characters: ~)(\\u2018!*\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"package name cannot be the same as a node.js/io.js core module nor a reserved/blacklisted name. For example, the following names are invalid:\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2014 http\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2014 stream\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2014 node_modules\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2014 favicon.ico\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name length cannot exceed 214\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"These are the rules you should keep in mind when naming your Next.js project.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162\",children:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162\"}),(0,n.jsx)(e.br,{}),`\n`,\"2. \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13\",children:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13\"}),(0,n.jsx)(e.br,{}),`\n`,\"3. \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/validate-npm-package-name\",children:\"https://www.npmjs.com/package/validate-npm-package-name\"}),(0,n.jsx)(e.br,{}),`\n`,\"4. \",(0,n.jsx)(e.a,{href:\"https://github.com/npm/validate-npm-package-name/tree/main\",children:\"https://github.com/npm/validate-npm-package-name/tree/main\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----a97f7c8d44c4--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(p,{...a})}):p(a)}return w(y);})();\n;return Component;"
        },
        "_id": "blog/cna-app-name-validation.mdx",
        "_raw": {
          "sourceFilePath": "blog/cna-app-name-validation.mdx",
          "sourceFileName": "cna-app-name-validation.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/cna-app-name-validation"
        },
        "type": "Doc",
        "slug": "/blog/cna-app-name-validation",
        "slugAsParams": "cna-app-name-validation"
      },
      "documentHash": "1740489186252",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/codecov-yml-in-Lobechat.mdx": {
      "document": {
        "title": "codecov.yml in Lobechat source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze [codecov.yml found in Lobechat repository](https://github.com/lobehub/lobe-chat/blob/main/codecov.yml) I have seen codecov.yml in a lot of open source projects. So what is codecov.yml?\r\n\r\n# **codecov.yml**\r\n\r\nCodecov by Sentry is the all-in-one code coverage and quality solution for any test suite — giving developers  \r\nactionable insights to deploy reliable code with confidence. Trusted by over 29,000 organizations.\r\n\r\nCheck out the [codecov’s quick start guide](https://docs.codecov.com/docs/quick-start).\r\n\r\n# **codecov.yml in Lobechat**\r\n\r\nThe below code snippet is picked from [Lobechat](https://github.com/lobehub/lobe-chat/blob/main/codecov.yml).\r\n\r\n```plaintext\r\ncoverage:\r\n status:\r\n project:\r\n default: off\r\n server:\r\n flags:\r\n - server\r\n app:\r\n flags:\r\n - app\r\n patch: off\r\n```\r\n\r\nBy default, Codecov will only show git diff coverage checks on a PR but it looks like Lobechat turned this off since the default is off. Check this guide, [Set project coverage checks on a pull request](https://docs.codecov.com/docs/common-recipe-list#set-project-coverage-checks-on-a-pull-request), for more info.\r\n\r\nFor the server and the app, it has the flags, I found this [documentation for flags on codecov](https://docs.codecov.com/docs/flags).\r\n\r\nYou can group coverage reports based on type of tests or sub-projects/teams based on flags.\r\n\r\nFlags allow you to isolate and categorize coverage reports for different tests and features in your project. This is particularly helpful if:  \r\n1\\. You have multiple types of tests (e.g., unit, integration, frontend, backend, etc) AND/OR  \r\n2\\. You’re employing a monorepo setup where you’d like to encapsulate each project’s test coverage independently.\r\n\r\nThis [pull request](https://github.com/lobehub/lobe-chat/pull/4394) has Codecov report. Here is an example of [reports with flags](https://app.codecov.io/gh/lobehub/lobe-chat/pull/4394/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=lobehub).\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1\\. https://about.codecov.io/  \r\n2\\. https://github.com/lobehub/lobe-chat/blob/main/codecov.yml  \r\n3\\. https://docs.codecov.com/docs/flags\r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----76c7e452263e--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),v=(n,e)=>{for(var o in e)r(n,o,{get:e[o],enumerable:!0})},i=(n,e,o,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of u(e))!f.call(n,c)&&c!==o&&r(n,c,{get:()=>e[c],enumerable:!(a=m(e,c))||a.enumerable});return n};var y=(n,e,o)=>(o=n!=null?p(b(n)):{},i(e||!n||!n.__esModule?r(o,\"default\",{value:n,enumerable:!0}):o,n)),k=n=>i(r({},\"__esModule\",{value:!0}),n);var h=g((_,s)=>{s.exports=_jsx_runtime});var w={};v(w,{default:()=>d,frontmatter:()=>j});var t=y(h()),j={title:\"codecov.yml in Lobechat source code.\"};function l(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"In this article, we analyze \",(0,t.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/codecov.yml\",children:\"codecov.yml found in Lobechat repository\"}),\" I have seen codecov.yml in a lot of open source projects. So what is codecov.yml?\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"codecovyml\",children:(0,t.jsx)(e.strong,{children:\"codecov.yml\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codecov by Sentry is the all-in-one code coverage and quality solution for any test suite \\u2014 giving developers\",(0,t.jsx)(e.br,{}),`\n`,\"actionable insights to deploy reliable code with confidence. Trusted by over 29,000 organizations.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Check out the \",(0,t.jsx)(e.a,{href:\"https://docs.codecov.com/docs/quick-start\",children:\"codecov\\u2019s quick start guide\"}),\".\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"codecovyml-in-lobechat\",children:(0,t.jsx)(e.strong,{children:\"codecov.yml in Lobechat\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"The below code snippet is picked from \",(0,t.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/codecov.yml\",children:\"Lobechat\"}),\".\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"coverage:\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\" status:\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\" project:\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\" default: off\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\" server:\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\" flags:\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\" - server\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\" app:\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\" flags:\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\" - app\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\" patch: off\"})})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"By default, Codecov will only show git diff coverage checks on a PR but it looks like Lobechat turned this off since the default is off. Check this guide, \",(0,t.jsx)(e.a,{href:\"https://docs.codecov.com/docs/common-recipe-list#set-project-coverage-checks-on-a-pull-request\",children:\"Set project coverage checks on a pull request\"}),\", for more info.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"For the server and the app, it has the flags, I found this \",(0,t.jsx)(e.a,{href:\"https://docs.codecov.com/docs/flags\",children:\"documentation for flags on codecov\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:\"You can group coverage reports based on type of tests or sub-projects/teams based on flags.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Flags allow you to isolate and categorize coverage reports for different tests and features in your project. This is particularly helpful if:\",(0,t.jsx)(e.br,{}),`\n`,\"1. You have multiple types of tests (e.g., unit, integration, frontend, backend, etc) AND/OR\",(0,t.jsx)(e.br,{}),`\n`,\"2. You\\u2019re employing a monorepo setup where you\\u2019d like to encapsulate each project\\u2019s test coverage independently.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"This \",(0,t.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/pull/4394\",children:\"pull request\"}),\" has Codecov report. Here is an example of \",(0,t.jsx)(e.a,{href:\"https://app.codecov.io/gh/lobehub/lobe-chat/pull/4394/flags?src=pr&el=flag&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=lobehub\",children:\"reports with flags\"}),\".\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h1,{id:\"references\",children:(0,t.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"1. \",(0,t.jsx)(e.a,{href:\"https://about.codecov.io/\",children:\"https://about.codecov.io/\"}),(0,t.jsx)(e.br,{}),`\n`,\"2. \",(0,t.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/codecov.yml\",children:\"https://github.com/lobehub/lobe-chat/blob/main/codecov.yml\"}),(0,t.jsx)(e.br,{}),`\n`,\"3. \",(0,t.jsx)(e.a,{href:\"https://docs.codecov.com/docs/flags\",children:\"https://docs.codecov.com/docs/flags\"})]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----76c7e452263e--------------------------------\",children:[(0,t.jsx)(e.br,{}),`\n`]})})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}return k(w);})();\n;return Component;"
        },
        "_id": "blog/codecov-yml-in-Lobechat.mdx",
        "_raw": {
          "sourceFilePath": "blog/codecov-yml-in-Lobechat.mdx",
          "sourceFileName": "codecov-yml-in-Lobechat.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/codecov-yml-in-Lobechat"
        },
        "type": "Doc",
        "slug": "/blog/codecov-yml-in-Lobechat",
        "slugAsParams": "codecov-yml-in-Lobechat"
      },
      "documentHash": "1740489186254",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/codemirror-cli-parse.mdx": {
      "document": {
        "title": "How CodeMirror v6 setup command handles CLI arguments?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse how the CodeMirror v6 development environment setup script processes CLI arguments. This function is used in setting up development environment for Codemirror v6 as mentioned in their [repository](https://github.com/codemirror/dev/tree/main).\r\n\r\nCodeMirror does not use Monorepo setup, instead it clones the packages that are repositories on their own as part of install command.\r\n\r\nWait what install command? In the [CodeMirror v6 repository](https://github.com/codemirror/dev/tree/main),  \r\nREADME.md has this below information about setting up the dev env.\r\n\r\n### CodeMirror Readme:\r\n\r\nThis is the central repository for CodeMirror. It holds the bug tracker and development scripts.\r\n\r\nIf you want to use CodeMirror, install the separate packages from npm, and ignore the contents of this repository. If you want to develop on CodeMirror, this repository provides scripts to install and work with the various packages.\r\n\r\nTo get started, make sure you are running node.js version 16. After cloning the repository, run\r\n\r\n```plaintext\r\nnode bin/cm.js install\r\n```\r\n\r\nTo clone the packages that make up the system, install dependencies, and build the packages. At any time you can rebuild packages, either by running npm run prepare in their subdirectory, or all at once with\r\n\r\n```plaintext\r\nnode bin/cm.js build\r\n```\r\n\r\nDeveloping is best done by setting up\r\n\r\n```plaintext\r\nnpm run dev\r\n```\r\n\r\nWhich starts a server that automatically rebuilds the packages when their code changes and exposes a dev server on port 8090 running the demo and browser tests.\r\n\r\n### install CLI argument\r\n\r\nWhen you run the command `node bin/cm.js install`, this executes the script bin/cm.js that runs a function named start(), found at the bottom of [bin/cm.js](https://github.com/codemirror/dev/blob/main/bin/cm.js#L362)\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*tcUB5Zht_roGJA6qTKmsXA.png)\r\n\r\n`cm.js` has the install function at [line 81](https://github.com/codemirror/dev/blob/main/bin/cm.js#L81), but does it mean you could just down the function you want to execute in a script as a CLI argument and it would not get called? No, I don’t think so. `install` would be an argument passed in via CLI and start function does some processing. Below is the start function code picked from CodeMirror v6 source code.\r\n\r\n```plaintext\r\nfunction start() {\r\n  let command = process.argv[2]\r\n  if (command && ![\"install\", \"--help\"].includes(command)) assertInstalled()\r\n  let args = process.argv.slice(3)\r\n  let cmdFn = {\r\n    packages: listPackages,\r\n    status,\r\n    build,\r\n    devserver,\r\n    release,\r\n    unreleased,\r\n    install,\r\n    clean,\r\n    commit,\r\n    push,\r\n    grep,\r\n    \"build-readme\": buildReadme,\r\n    test,\r\n    run: runCmd,\r\n    \"--help\": () => help(0)\r\n  }[command]\r\n  if (!cmdFn || cmdFn.length > args.length) help(1)\r\n  new Promise(r => r(cmdFn.apply(null, args))).catch(e => error(e))\r\n}\r\n```\r\n\r\nArgument is accessed via `let command = process.argv[2]`, this means command now has the value “install”. Then next step is assert if the project has been already installed using the below shown check:\r\n\r\n```plaintext\r\nif (command && ![\"install\", \" - help\"].includes(command)) assertInstalled()\r\n```\r\n\r\nIf you passed in any additional arguments after install, they get asssigned to args variable and then cmdFn is decided using an object as shown below:\r\n\r\n```plaintext\r\nlet args = process.argv.slice(3)\r\nlet cmdFn = {\r\n packages: listPackages,\r\n status,\r\n build,\r\n devserver,\r\n release,\r\n unreleased,\r\n install,\r\n clean,\r\n commit,\r\n push,\r\n grep,\r\n \"build-readme\": buildReadme,\r\n test,\r\n run: runCmd,\r\n \" - help\": () => help(0)\r\n}[command]\r\n```\r\n\r\nSince command value is install and cmdFn object has “install” key/value pair, value here would be the install function itself.\r\n\r\n```plaintext\r\nif (!cmdFn || cmdFn.length > args.length) help(1)\r\nnew Promise(r => r(cmdFn.apply(null, args))).catch(e => error(e))\r\n```\r\n\r\nIf there’s no function available for the argument you passed, help is called that basically shows a list of supported functions.\r\n\r\nand then install is called with `apply`. Read more about [apply in JavaScript](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply).\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/codemirror/dev/blob/main/bin/cm.js#L90](https://github.com/codemirror/dev/blob/main/bin/cm.js#L90)\r\n    \r\n2. [https://github.com/codemirror/dev/blob/main/bin/cm.js#L81](https://github.com/codemirror/dev/blob/main/bin/cm.js#L81)\r\n    \r\n3. [https://github.com/codemirror/dev/blob/main/bin/cm.js#L13](https://github.com/codemirror/dev/blob/main/bin/cm.js#L13)\r\n    \r\n4. [https://github.com/codemirror/dev/tree/main](https://github.com/codemirror/dev/tree/main)\r\n    \r\n5. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Function/apply](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply)",
          "code": "var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),v=(a,e)=>{for(var r in e)t(a,r,{get:e[r],enumerable:!0})},s=(a,e,r,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!b.call(a,i)&&i!==r&&t(a,i,{get:()=>e[i],enumerable:!(l=m(e,i))||l.enumerable});return a};var y=(a,e,r)=>(r=a!=null?p(g(a)):{},s(e||!a||!a.__esModule?t(r,\"default\",{value:a,enumerable:!0}):r,a)),N=a=>s(t({},\"__esModule\",{value:!0}),a);var d=f((x,c)=>{c.exports=_jsx_runtime});var j={};v(j,{default:()=>o,frontmatter:()=>w});var n=y(d()),w={title:\"How CodeMirror v6 setup command handles CLI arguments?\"};function h(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse how the CodeMirror v6 development environment setup script processes CLI arguments. This function is used in setting up development environment for Codemirror v6 as mentioned in their \",(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/tree/main\",children:\"repository\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"CodeMirror does not use Monorepo setup, instead it clones the packages that are repositories on their own as part of install command.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Wait what install command? In the \",(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/tree/main\",children:\"CodeMirror v6 repository\"}),\",\",(0,n.jsx)(e.br,{}),`\n`,\"README.md has this below information about setting up the dev env.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"codemirror-readme\",children:\"CodeMirror Readme:\"}),`\n`,(0,n.jsx)(e.p,{children:\"This is the central repository for CodeMirror. It holds the bug tracker and development scripts.\"}),`\n`,(0,n.jsx)(e.p,{children:\"If you want to use CodeMirror, install the separate packages from npm, and ignore the contents of this repository. If you want to develop on CodeMirror, this repository provides scripts to install and work with the various packages.\"}),`\n`,(0,n.jsx)(e.p,{children:\"To get started, make sure you are running node.js version 16. After cloning the repository, run\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"node bin/cm.js install\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"To clone the packages that make up the system, install dependencies, and build the packages. At any time you can rebuild packages, either by running npm run prepare in their subdirectory, or all at once with\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"node bin/cm.js build\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"Developing is best done by setting up\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npm run dev\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"Which starts a server that automatically rebuilds the packages when their code changes and exposes a dev server on port 8090 running the demo and browser tests.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"install-cliargument\",children:\"install CLI\\xA0argument\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you run the command \",(0,n.jsx)(e.code,{children:\"node bin/cm.js install\"}),\", this executes the script bin/cm.js that runs a function named start(), found at the bottom of \",(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L362\",children:\"bin/cm.js\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*tcUB5Zht_roGJA6qTKmsXA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"cm.js\"}),\" has the install function at \",(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L81\",children:\"line 81\"}),\", but does it mean you could just down the function you want to execute in a script as a CLI argument and it would not get called? No, I don\\u2019t think so. \",(0,n.jsx)(e.code,{children:\"install\"}),\" would be an argument passed in via CLI and start function does some processing. Below is the start function code picked from CodeMirror v6 source code.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function start() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  let command = process.argv[2]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  if (command && ![\"install\", \"--help\"].includes(command)) assertInstalled()'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  let args = process.argv.slice(3)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  let cmdFn = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    packages: listPackages,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    status,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    build,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    devserver,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    release,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    unreleased,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    install,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    clean,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    commit,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    push,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    grep,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"build-readme\": buildReadme,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    test,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    run: runCmd,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"--help\": () => help(0)'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }[command]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (!cmdFn || cmdFn.length > args.length) help(1)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  new Promise(r => r(cmdFn.apply(null, args))).catch(e => error(e))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Argument is accessed via \",(0,n.jsx)(e.code,{children:\"let command = process.argv[2]\"}),\", this means command now has the value \\u201Cinstall\\u201D. Then next step is assert if the project has been already installed using the below shown check:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'if (command && ![\"install\", \" - help\"].includes(command)) assertInstalled()'})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"If you passed in any additional arguments after install, they get asssigned to args variable and then cmdFn is decided using an object as shown below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let args = process.argv.slice(3)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let cmdFn = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" packages: listPackages,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" status,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" build,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" devserver,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" release,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" unreleased,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" install,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" clean,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" commit,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" push,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" grep,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"build-readme\": buildReadme,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" test,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" run: runCmd,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \" - help\": () => help(0)'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}[command]\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Since command value is install and cmdFn object has \\u201Cinstall\\u201D key/value pair, value here would be the install function itself.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (!cmdFn || cmdFn.length > args.length) help(1)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"new Promise(r => r(cmdFn.apply(null, args))).catch(e => error(e))\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"If there\\u2019s no function available for the argument you passed, help is called that basically shows a list of supported functions.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"and then install is called with \",(0,n.jsx)(e.code,{children:\"apply\"}),\". Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply\",children:\"apply in JavaScript\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L90\",children:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L90\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L81\",children:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L81\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L13\",children:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L13\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/tree/main\",children:\"https://github.com/codemirror/dev/tree/main\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply\"})}),`\n`]}),`\n`]})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return N(j);})();\n;return Component;"
        },
        "_id": "blog/codemirror-cli-parse.mdx",
        "_raw": {
          "sourceFilePath": "blog/codemirror-cli-parse.mdx",
          "sourceFileName": "codemirror-cli-parse.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/codemirror-cli-parse"
        },
        "type": "Doc",
        "slug": "/blog/codemirror-cli-parse",
        "slugAsParams": "codemirror-cli-parse"
      },
      "documentHash": "1740489186257",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/codemirror-degit.mdx": {
      "document": {
        "title": "What if CodeMirror v6 dev setup uses Degit internally to clone packages?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we explore the idea of using Degit to clone/download core/non core packages required to setup the development environment for CodeMirror V6.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*ZE9lB08qc78rRj8UpC4aAA.png)\r\n\r\nPay attention to the run function in the above image.\r\n\r\n```plaintext\r\nrun(\"git\", [\"clone\", origin, pkg.dir])\r\n```\r\n\r\nWhat this does is that it uses child\\_process execSyncFile API to execute this “git clone” command programmatically in Node.js. But instead of cloning, what if we use degit? you might be wondering what a degit is at this point.\r\n\r\n### Degit\r\n\r\ndegit makes copies of git repositories. When you run degit some-user/some-repo, it will find the latest commit on [https://github.com/some-user/some-repo](https://github.com/some-user/some-repo) and download the associated tar file to ~/.degit/some-user/some-repo/commithash.tar.gz if it doesn’t already exist locally. (This is much quicker than using git clone, because you’re not downloading the entire git history.)\r\n\r\nDegit can quickly download the latest commit of any public repository but this does not get you the entire  \r\nhistory.\r\n\r\n### Would it make sense to use Degit?\r\n\r\nShort answer — no, long answer would be CodeMirror does not use monorepo architecture and clones public repositories from CodeMirror organization. What Degit does is it downloads the latest commit of all these packages that make up the CodeMirror but it does not have entire git history\r\n\r\nWithout Git history, you can’t blame anyone, you wouldn’t know who changed a line of code when there is no history. Degit can be used to download templates/starters to download the latest commit and make it quick. [Remotion uses degit](https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts)\r\n\r\nSince this clone execution is part of development setup for CodeMirror v6, you would definitely want the entire git history of core/non core packages used.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1\\. [https://github.com/Rich-Harris/degit](https://github.com/Rich-Harris/degit)  \r\n2\\. [https://github.com/codemirror/dev/blob/main/bin/cm.js#L90C7-L90C45](https://github.com/codemirror/dev/blob/main/bin/cm.js#L90C7-L90C45)  \r\n3\\. [https://github.com/codemirror/dev/blob/main/bin/cm.js#L64-L66](https://github.com/codemirror/dev/blob/main/bin/cm.js#L64-L66)  \r\n4\\. [https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts](https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts)",
          "code": "var Component=(()=>{var l=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),y=(o,e)=>{for(var i in e)r(o,i,{get:e[i],enumerable:!0})},c=(o,e,i,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let n of u(e))!b.call(o,n)&&n!==i&&r(o,n,{get:()=>e[n],enumerable:!(a=p(e,n))||a.enumerable});return o};var w=(o,e,i)=>(i=o!=null?l(g(o)):{},c(e||!o||!o.__esModule?r(i,\"default\",{value:o,enumerable:!0}):i,o)),k=o=>c(r({},\"__esModule\",{value:!0}),o);var s=f((C,h)=>{h.exports=_jsx_runtime});var x={};y(x,{default:()=>m,frontmatter:()=>v});var t=w(s()),v={title:\"What if CodeMirror v6 dev setup uses Degit internally to clone packages?\"};function d(o){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...o.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:\"In this article, we explore the idea of using Degit to clone/download core/non core packages required to setup the development environment for CodeMirror V6.\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*ZE9lB08qc78rRj8UpC4aAA.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Pay attention to the run function in the above image.\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:'run(\"git\", [\"clone\", origin, pkg.dir])'})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"What this does is that it uses child_process execSyncFile API to execute this \\u201Cgit clone\\u201D command programmatically in Node.js. But instead of cloning, what if we use degit? you might be wondering what a degit is at this point.\"}),`\n`,(0,t.jsx)(e.h3,{id:\"degit\",children:\"Degit\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"degit makes copies of git repositories. When you run degit some-user/some-repo, it will find the latest commit on \",(0,t.jsx)(e.a,{href:\"https://github.com/some-user/some-repo\",children:\"https://github.com/some-user/some-repo\"}),\" and download the associated tar file to ~/.degit/some-user/some-repo/commithash.tar.gz if it doesn\\u2019t already exist locally. (This is much quicker than using git clone, because you\\u2019re not downloading the entire git history.)\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Degit can quickly download the latest commit of any public repository but this does not get you the entire\",(0,t.jsx)(e.br,{}),`\n`,\"history.\"]}),`\n`,(0,t.jsx)(e.h3,{id:\"would-it-make-sense-to-usedegit\",children:\"Would it make sense to use\\xA0Degit?\"}),`\n`,(0,t.jsx)(e.p,{children:\"Short answer\\u200A\\u2014\\u200Ano, long answer would be CodeMirror does not use monorepo architecture and clones public repositories from CodeMirror organization. What Degit does is it downloads the latest commit of all these packages that make up the CodeMirror but it does not have entire git history\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Without Git history, you can\\u2019t blame anyone, you wouldn\\u2019t know who changed a line of code when there is no history. Degit can be used to download templates/starters to download the latest commit and make it quick. \",(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts\",children:\"Remotion uses degit\"})]}),`\n`,(0,t.jsx)(e.p,{children:\"Since this clone execution is part of development setup for CodeMirror v6, you would definitely want the entire git history of core/non core packages used.\"}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"1. \",(0,t.jsx)(e.a,{href:\"https://github.com/Rich-Harris/degit\",children:\"https://github.com/Rich-Harris/degit\"}),(0,t.jsx)(e.br,{}),`\n`,\"2. \",(0,t.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L90C7-L90C45\",children:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L90C7-L90C45\"}),(0,t.jsx)(e.br,{}),`\n`,\"3. \",(0,t.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L64-L66\",children:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L64-L66\"}),(0,t.jsx)(e.br,{}),`\n`,\"4. \",(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts\",children:\"https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts\"})]})]})}function m(o={}){let{wrapper:e}=o.components||{};return e?(0,t.jsx)(e,{...o,children:(0,t.jsx)(d,{...o})}):d(o)}return k(x);})();\n;return Component;"
        },
        "_id": "blog/codemirror-degit.mdx",
        "_raw": {
          "sourceFilePath": "blog/codemirror-degit.mdx",
          "sourceFileName": "codemirror-degit.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/codemirror-degit"
        },
        "type": "Doc",
        "slug": "/blog/codemirror-degit",
        "slugAsParams": "codemirror-degit"
      },
      "documentHash": "1740489186258",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/codemirror-packages-install.mdx": {
      "document": {
        "title": "How CodeMirror v6 dev setup installs packages without a monorepo\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn the previous articles, we looked at:  \r\n1\\. How CodeMirror v6 setup command processes CLI arguments?  \r\n2\\. How CodeMirror v6 dev setup retrieves packages without a monorepo\r\n\r\nThis leads to the next question how are packages installed as part development environment setup without using a monorepo. [install function](https://github.com/codemirror/dev/blob/main/bin/cm.js#L81) is called using apply as explained in the previous articles mentioned above.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*7UrMKzkOrYNADpIGIuFf-Q.png)\r\n\r\n```plaintext\r\nlet base = arg == \" - ssh\" ? \"git@github.com:codemirror/\" : \"https://github.com/codemirror/\"\r\nif (arg && arg != \" - ssh\") help(1)\r\n```\r\n\r\nIn case you are wondeirng what these 2 lines are for, Github lets you clone a repository via the ssh, hence this scenaria is handled to set the correct base url.\r\n\r\n```plaintext\r\nfor (let pkg of packages) {\r\n if (fs.existsSync(pkg.dir)) {\r\n   console.warn(`Skipping cloning of ${pkg.name} (directory exists)`)\r\n } else {\r\n   let origin = base + (pkg.name == \"codemirror\" ? \"basic-setup\" : pkg.name) + \".git\"\r\n   run(\"git\", [\"clone\", origin, pkg.dir])\r\n }\r\n}\r\n```\r\n\r\nIf a package already exists, it is checked via existsSync and console.warn is shown about it being skipped otherwise, origin is assigned a value using base with a .git extension, since this is a URL there is no point in using API such as join as that is applicable to file system and the run function is called.\r\n\r\n### run function\r\n\r\n```plaintext\r\nfunction run(cmd, args, wd = root, { shell = false } = {}) {\r\n return child.execFileSync(cmd, args, {shell, cwd: wd, encoding: \"utf8\", stdio: [\"ignore\", \"pipe\", process.stderr]})\r\n}\r\n```\r\n\r\nrun functions seems to be using execFileSync API provided by `child`. `child` is initialized at the top of the file.\r\n\r\n```plaintext\r\nconst child = require(\"child_process\")\r\n```\r\n\r\nWe need to understand what child\\_process and execFileSync API are.\r\n\r\n#### child\\_process\r\n\r\nThe node:child\\_process module provides the ability to spawn subprocesses in a manner that is similar, but not identical, to popen. This capability is primarily provided by the child\\_process.spawn() function:\r\n\r\n```plaintext\r\nconst { spawn } = require('node:child_process');\r\nconst ls = spawn('ls', ['-lh', '/usr']);\r\nls.stdout.on('data', (data) => {\r\n console.log(`stdout: ${data}`);\r\n});\r\nls.stderr.on('data', (data) => {\r\n console.error(`stderr: ${data}`);\r\n});\r\nls.on('close', (code) => {\r\n console.log(`child process exited with code ${code}`);\r\n});\r\n```\r\n\r\nThis above information is picked from [Node.js documentation](https://nodejs.org/api/child_process.html#child-process)\r\n\r\n#### execFileSync\r\n\r\nThe child\\_process.execFileSync() method is generally identical to child\\_process.execFile() with theexception that the method will not return until the child process has fully closed. When a timeout has been encountered and killSignal is sent, the method won’t return until the process has completely exited.\r\n\r\nIf the child process intercepts and handles the SIGTERM signal and does not exit, the parent process will still wait until the child process has exited.\r\n\r\nIf the process times out or has a non-zero exit code, this method will throw an Error that will include the full result of the underlying child\\_process.spawnSync().\r\n\r\nIf the shell option is enabled, do not pass unsanitized user input to this function. Any input containing shell metacharacters may be used to trigger arbitrary command execution.\r\n\r\n```plaintext\r\nconst { execFileSync } = require('node:child_process');\r\ntry {\r\n const stdout = execFileSync('my-script.sh', ['my-arg'], {\r\n // Capture stdout and stderr from child process. Overrides the\r\n // default behavior of streaming child stderr to the parent stderr\r\n stdio: 'pipe',\r\n// Use utf8 encoding for stdio pipes\r\n encoding: 'utf8',\r\n });\r\nconsole.log(stdout);\r\n} catch (err) {\r\n if (err.code) {\r\n // Spawning child process failed\r\n console.error(err.code);\r\n } else {\r\n // Child was spawned but exited with non-zero exit code\r\n // Error contains any stdout and stderr from the child\r\n const { stdout, stderr } = err;\r\nconsole.error({ stdout, stderr });\r\n }\r\n}\r\n```\r\n\r\nThis above information is picked from [Node.js documentation](https://nodejs.org/api/child_process.html#child_processexecfilesyncfile-args-options)\r\n\r\nNow that we understand what this API is used for, we can now look at the run function from CodeMirror.\r\n\r\n```plaintext\r\nfunction run(cmd, args, wd = root, { shell = false } = {}) {\r\n return child.execFileSync(cmd, args, {shell, cwd: wd, encoding: \"utf8\", stdio: [\"ignore\", \"pipe\", process.stderr]})\r\n}\r\n```\r\n\r\nexecFileSync executes the cmd (command) passed in as the first parameter. Install function calls run using the below variables.\r\n\r\n```plaintext\r\nrun(\"git\", [\"clone\", origin, pkg.dir])\r\n```\r\n\r\nHere the command is git and args is an array — \\[“clone”, origin, pkg.dir\\]. Install function basically clones the packages that are public repositories in the CodeMirror organization. Executing the commands programattically reminds me of two related concepts:  \r\n1\\. \\[Execa\\]([https://www.npmjs.com/package/execa](https://www.npmjs.com/package/execa))  \r\n2\\. \\[Degit\\]([https://github.com/Rich-Harris/degit](https://github.com/Rich-Harris/degit))\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1. [https://github.com/codemirror/dev/blob/main/bin/cm.js#L64C1-L66C2](https://github.com/codemirror/dev/blob/main/bin/cm.js#L64C1-L66C2)\r\n    \r\n2. [https://github.com/codemirror/dev/blob/main/bin/cm.js#L81](https://github.com/codemirror/dev/blob/main/bin/cm.js#L81)\r\n    \r\n3. [https://nodejs.org/api/child\\_process.html#child\\_processexecfilesyncfile-args-options](https://nodejs.org/api/child_process.html#child_processexecfilesyncfile-args-options)\r\n    \r\n4. [https://nodejs.org/api/child\\_process.html#child\\_processexecfilefile-args-options-callback](https://nodejs.org/api/child_process.html#child_processexecfilefile-args-options-callback)",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=>{for(var i in e)r(a,i,{get:e[i],enumerable:!0})},c=(a,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of u(e))!f.call(a,s)&&s!==i&&r(a,s,{get:()=>e[s],enumerable:!(t=m(e,s))||t.enumerable});return a};var x=(a,e,i)=>(i=a!=null?p(g(a)):{},c(e||!a||!a.__esModule?r(i,\"default\",{value:a,enumerable:!0}):i,a)),w=a=>c(r({},\"__esModule\",{value:!0}),a);var d=b((_,l)=>{l.exports=_jsx_runtime});var k={};y(k,{default:()=>o,frontmatter:()=>N});var n=x(d()),N={title:\"How CodeMirror v6 dev setup installs packages without a\\xA0monorepo\"};function h(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In the previous articles, we looked at:\",(0,n.jsx)(e.br,{}),`\n`,\"1. How CodeMirror v6 setup command processes CLI arguments?\",(0,n.jsx)(e.br,{}),`\n`,\"2. How CodeMirror v6 dev setup retrieves packages without a monorepo\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"This leads to the next question how are packages installed as part development environment setup without using a monorepo. \",(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L81\",children:\"install function\"}),\" is called using apply as explained in the previous articles mentioned above.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*7UrMKzkOrYNADpIGIuFf-Q.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'let base = arg == \" - ssh\" ? \"git@github.com:codemirror/\" : \"https://github.com/codemirror/\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'if (arg && arg != \" - ssh\") help(1)'})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"In case you are wondeirng what these 2 lines are for, Github lets you clone a repository via the ssh, hence this scenaria is handled to set the correct base url.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"for (let pkg of packages) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (fs.existsSync(pkg.dir)) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   console.warn(`Skipping cloning of ${pkg.name} (directory exists)`)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" } else {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'   let origin = base + (pkg.name == \"codemirror\" ? \"basic-setup\" : pkg.name) + \".git\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'   run(\"git\", [\"clone\", origin, pkg.dir])'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"If a package already exists, it is checked via existsSync and console.warn is shown about it being skipped otherwise, origin is assigned a value using base with a\\xA0.git extension, since this is a URL there is no point in using API such as join as that is applicable to file system and the run function is called.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"run-function\",children:\"run function\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function run(cmd, args, wd = root, { shell = false } = {}) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' return child.execFileSync(cmd, args, {shell, cwd: wd, encoding: \"utf8\", stdio: [\"ignore\", \"pipe\", process.stderr]})'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"run functions seems to be using execFileSync API provided by \",(0,n.jsx)(e.code,{children:\"child\"}),\". \",(0,n.jsx)(e.code,{children:\"child\"}),\" is initialized at the top of the file.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'const child = require(\"child_process\")'})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"We need to understand what child_process and execFileSync API are.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"child_process\",children:\"child_process\"}),`\n`,(0,n.jsx)(e.p,{children:\"The node:child_process module provides the ability to spawn subprocesses in a manner that is similar, but not identical, to popen. This capability is primarily provided by the child_process.spawn() function:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const { spawn } = require('node:child_process');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const ls = spawn('ls', ['-lh', '/usr']);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"ls.stdout.on('data', (data) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" console.log(`stdout: ${data}`);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"ls.stderr.on('data', (data) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" console.error(`stderr: ${data}`);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"ls.on('close', (code) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" console.log(`child process exited with code ${code}`);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This above information is picked from \",(0,n.jsx)(e.a,{href:\"https://nodejs.org/api/child_process.html#child-process\",children:\"Node.js documentation\"})]}),`\n`,(0,n.jsx)(e.h4,{id:\"execfilesync\",children:\"execFileSync\"}),`\n`,(0,n.jsx)(e.p,{children:\"The child_process.execFileSync() method is generally identical to child_process.execFile() with theexception that the method will not return until the child process has fully closed. When a timeout has been encountered and killSignal is sent, the method won\\u2019t return until the process has completely exited.\"}),`\n`,(0,n.jsx)(e.p,{children:\"If the child process intercepts and handles the SIGTERM signal and does not exit, the parent process will still wait until the child process has exited.\"}),`\n`,(0,n.jsx)(e.p,{children:\"If the process times out or has a non-zero exit code, this method will throw an Error that will include the full result of the underlying child_process.spawnSync().\"}),`\n`,(0,n.jsx)(e.p,{children:\"If the shell option is enabled, do not pass unsanitized user input to this function. Any input containing shell metacharacters may be used to trigger arbitrary command execution.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const { execFileSync } = require('node:child_process');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"try {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const stdout = execFileSync('my-script.sh', ['my-arg'], {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Capture stdout and stderr from child process. Overrides the\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // default behavior of streaming child stderr to the parent stderr\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" stdio: 'pipe',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Use utf8 encoding for stdio pipes\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" encoding: 'utf8',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log(stdout);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"} catch (err) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (err.code) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Spawning child process failed\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" console.error(err.code);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" } else {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Child was spawned but exited with non-zero exit code\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Error contains any stdout and stderr from the child\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const { stdout, stderr } = err;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.error({ stdout, stderr });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This above information is picked from \",(0,n.jsx)(e.a,{href:\"https://nodejs.org/api/child_process.html#child_processexecfilesyncfile-args-options\",children:\"Node.js documentation\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"Now that we understand what this API is used for, we can now look at the run function from CodeMirror.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function run(cmd, args, wd = root, { shell = false } = {}) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' return child.execFileSync(cmd, args, {shell, cwd: wd, encoding: \"utf8\", stdio: [\"ignore\", \"pipe\", process.stderr]})'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"execFileSync executes the cmd (command) passed in as the first parameter. Install function calls run using the below variables.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'run(\"git\", [\"clone\", origin, pkg.dir])'})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Here the command is git and args is an array\\u200A\\u2014\\u200A[\\u201Cclone\\u201D, origin, pkg.dir]. Install function basically clones the packages that are public repositories in the CodeMirror organization. Executing the commands programattically reminds me of two related concepts:\",(0,n.jsx)(e.br,{}),`\n`,\"1. [Execa](\",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/execa\",children:\"https://www.npmjs.com/package/execa\"}),\")\",(0,n.jsx)(e.br,{}),`\n`,\"2. [Degit](\",(0,n.jsx)(e.a,{href:\"https://github.com/Rich-Harris/degit\",children:\"https://github.com/Rich-Harris/degit\"}),\")\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L64C1-L66C2\",children:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L64C1-L66C2\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L81\",children:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L81\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nodejs.org/api/child_process.html#child_processexecfilesyncfile-args-options\",children:\"https://nodejs.org/api/child_process.html#child_processexecfilesyncfile-args-options\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nodejs.org/api/child_process.html#child_processexecfilefile-args-options-callback\",children:\"https://nodejs.org/api/child_process.html#child_processexecfilefile-args-options-callback\"})}),`\n`]}),`\n`]})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return w(k);})();\n;return Component;"
        },
        "_id": "blog/codemirror-packages-install.mdx",
        "_raw": {
          "sourceFilePath": "blog/codemirror-packages-install.mdx",
          "sourceFileName": "codemirror-packages-install.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/codemirror-packages-install"
        },
        "type": "Doc",
        "slug": "/blog/codemirror-packages-install",
        "slugAsParams": "codemirror-packages-install"
      },
      "documentHash": "1740489186260",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/codemirror-packages-retrieve.mdx": {
      "document": {
        "title": "How CodeMirror v6 dev setup retrieves packages without a monorepo\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn the OSS community, it is quite common to come across monorepo projects where the workspaces and packages are all in a single repository. CodeMirror has a different style to the way packages are managed, each package that is used is a repository on its own. In this article, we analyse what these packages are that CodeMirror uses and how they are installed when you want to setup CodeMirror v6 locally to contribute.\r\n\r\n### bin/packages.js\r\n\r\nBefore we analyse the install function, let’s first understand the variours packages that make up the CodeMirror. You  \r\nwill find these packages listed in [bin/packages.js file](https://github.com/codemirror/dev/blob/main/bin/packages.js)\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*KhY0OvraEoVdbjs-c6rWwQ.png)\r\n\r\nThese below are the core packages:\r\n\r\n```plaintext\r\nexports.core = [\r\n \"state\",\r\n \"view\",\r\n \"language\",\r\n \"commands\",\r\n \"search\",\r\n \"autocomplete\",\r\n \"lint\",\r\n \"collab\",\r\n \"language-data\",\r\n \"codemirror\",\r\n]\r\n```\r\n\r\nThese below are the non-core packages.\r\n\r\n```plaintext\r\nexports.nonCore = [\r\n \"lang-javascript\",\r\n \"lang-java\",\r\n \"lang-json\",\r\n \"lang-cpp\",\r\n \"lang-php\",\r\n \"lang-python\",\r\n \"lang-go\",\r\n \"lang-css\",\r\n \"lang-sass\",\r\n \"lang-html\",\r\n \"lang-sql\",\r\n \"lang-rust\",\r\n \"lang-xml\",\r\n \"lang-markdown\",\r\n \"lang-lezer\",\r\n \"lang-wast\",\r\n \"lang-angular\",\r\n \"lang-vue\",\r\n \"lang-liquid\",\r\n \"lang-less\",\r\n \"lang-yaml\",\r\n \"legacy-modes\",\r\n \"theme-one-dark\",\r\n \"merge\"\r\n]\r\n```\r\n\r\nYou will find repositories in the [CodeMirror organisation](https://github.com/orgs/codemirror/repositories) for all these packages shown above. There is no single repository containing all these packages like in a monorepo, instead you have all these repositories that make up the CodeMirror.\r\n\r\n### exports.core and exports.nonCore\r\n\r\nYou will find that these packages are accessed via a function named [loadPackages](https://github.com/codemirror/dev/blob/main/bin/packages.js#L60).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*YOkoQSFxLN8U1M-kJKbM2g.png)\r\n\r\nYou might be wondering what exports.all here is in the above image, at [line 42](https://github.com/codemirror/dev/blob/main/bin/packages.js#L42). It is interesting how the concat is made on exports.core and exports.nonCore and this you have all these packages merged into one array and assigned to exports.all.\r\n\r\n### exports.loadPackages\r\n\r\n```plaintext\r\nlet packages = exports.all.map(n => new Pkg(n))\r\n```\r\n\r\nUsing map on exports.all, new Pkg class is instantiated using the Pkg class that’s shown below:\r\n\r\n```plaintext\r\nclass Pkg {\r\n constructor(name) {\r\n this.name = name\r\n this.dir = join(__dirname, \"..\", name)\r\n this.main = null\r\n if (name != \"legacy-modes\" && fs.existsSync(this.dir)) {\r\n let files = fs.readdirSync(join(this.dir, \"src\")).filter(f => /^[^.]+\\.ts$/.test(f))\r\n let main = files.length == 1 ? files[0] : files.includes(\"index.ts\") ? \"index.ts\"\r\n : files.includes(name.replace(/^(theme-|lang-)/, \"\") + \".ts\") ? name.replace(/^(theme-|lang-)/, \"\") + \".ts\" : null\r\n if (!main) throw new Error(\"Couldn't find a main script for \" + name)\r\n this.main = join(this.dir, \"src\", main)\r\n }\r\n }\r\n}\r\n```\r\n\r\nIt technically sets `name`, `dir` and `main`.\r\n\r\n```plaintext\r\nlet packageNames = Object.create(null)\r\nfor (let p of packages) packageNames[p.name] = p\r\n```\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*-sdBU2-qq0ofmghc7dbT_Q.png)\r\n\r\nObject.create(null) creates an empty object, that’s fancy way of creating a obj that would otherwise be just `obj = {}` and finally below is the return statement.\r\n\r\n```plaintext\r\nreturn {\r\n  packages, \r\n  packageNames, \r\n  buildPackages: packages.filter(p => p.main)\r\n}\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1. [https://github.com/codemirror/dev/blob/main/bin/cm.js#L81](https://github.com/codemirror/dev/blob/main/bin/cm.js#L81)\r\n    \r\n2. [https://github.com/codemirror/dev/blob/main/bin/packages.js](https://github.com/codemirror/dev/blob/main/bin/packages.js)\r\n    \r\n3. [https://github.com/orgs/codemirror/repositories](https://github.com/orgs/codemirror/repositories)",
          "code": "var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),N=(a,e)=>{for(var i in e)l(a,i,{get:e[i],enumerable:!0})},c=(a,e,i,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of g(e))!f.call(a,s)&&s!==i&&l(a,s,{get:()=>e[s],enumerable:!(r=m(e,s))||r.enumerable});return a};var k=(a,e,i)=>(i=a!=null?o(u(a)):{},c(e||!a||!a.__esModule?l(i,\"default\",{value:a,enumerable:!0}):i,a)),y=a=>c(l({},\"__esModule\",{value:!0}),a);var h=b((v,t)=>{t.exports=_jsx_runtime});var x={};N(x,{default:()=>p,frontmatter:()=>w});var n=k(h()),w={title:\"How CodeMirror v6 dev setup retrieves packages without a\\xA0monorepo\"};function d(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In the OSS community, it is quite common to come across monorepo projects where the workspaces and packages are all in a single repository. CodeMirror has a different style to the way packages are managed, each package that is used is a repository on its own. In this article, we analyse what these packages are that CodeMirror uses and how they are installed when you want to setup CodeMirror v6 locally to contribute.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"binpackagesjs\",children:\"bin/packages.js\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Before we analyse the install function, let\\u2019s first understand the variours packages that make up the CodeMirror. You\",(0,n.jsx)(e.br,{}),`\n`,\"will find these packages listed in \",(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/packages.js\",children:\"bin/packages.js file\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*KhY0OvraEoVdbjs-c6rWwQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"These below are the core packages:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"exports.core = [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"state\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"view\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"language\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"commands\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"search\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"autocomplete\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lint\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"collab\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"language-data\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"codemirror\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"]\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"These below are the non-core packages.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"exports.nonCore = [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-javascript\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-java\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-json\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-cpp\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-php\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-python\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-go\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-css\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-sass\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-html\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-sql\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-rust\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-xml\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-markdown\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-lezer\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-wast\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-angular\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-vue\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-liquid\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-less\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"lang-yaml\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"legacy-modes\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"theme-one-dark\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"merge\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"]\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find repositories in the \",(0,n.jsx)(e.a,{href:\"https://github.com/orgs/codemirror/repositories\",children:\"CodeMirror organisation\"}),\" for all these packages shown above. There is no single repository containing all these packages like in a monorepo, instead you have all these repositories that make up the CodeMirror.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"exportscore-and-exportsnoncore\",children:\"exports.core and exports.nonCore\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find that these packages are accessed via a function named \",(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/packages.js#L60\",children:\"loadPackages\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*YOkoQSFxLN8U1M-kJKbM2g.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You might be wondering what exports.all here is in the above image, at \",(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/packages.js#L42\",children:\"line 42\"}),\". It is interesting how the concat is made on exports.core and exports.nonCore and this you have all these packages merged into one array and assigned to exports.all.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"exportsloadpackages\",children:\"exports.loadPackages\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let packages = exports.all.map(n => new Pkg(n))\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"Using map on exports.all, new Pkg class is instantiated using the Pkg class that\\u2019s shown below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"class Pkg {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" constructor(name) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" this.name = name\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' this.dir = join(__dirname, \"..\", name)'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" this.main = null\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' if (name != \"legacy-modes\" && fs.existsSync(this.dir)) {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' let files = fs.readdirSync(join(this.dir, \"src\")).filter(f => /^[^.]+\\\\.ts$/.test(f))'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' let main = files.length == 1 ? files[0] : files.includes(\"index.ts\") ? \"index.ts\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' : files.includes(name.replace(/^(theme-|lang-)/, \"\") + \".ts\") ? name.replace(/^(theme-|lang-)/, \"\") + \".ts\" : null'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:` if (!main) throw new Error(\"Couldn't find a main script for \" + name)`})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' this.main = join(this.dir, \"src\", main)'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"It technically sets \",(0,n.jsx)(e.code,{children:\"name\"}),\", \",(0,n.jsx)(e.code,{children:\"dir\"}),\" and \",(0,n.jsx)(e.code,{children:\"main\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let packageNames = Object.create(null)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"for (let p of packages) packageNames[p.name] = p\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*-sdBU2-qq0ofmghc7dbT_Q.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Object.create(null) creates an empty object, that\\u2019s fancy way of creating a obj that would otherwise be just \",(0,n.jsx)(e.code,{children:\"obj = {}\"}),\" and finally below is the return statement.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"return {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  packages, \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  packageNames, \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  buildPackages: packages.filter(p => p.main)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L81\",children:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L81\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/packages.js\",children:\"https://github.com/codemirror/dev/blob/main/bin/packages.js\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/orgs/codemirror/repositories\",children:\"https://github.com/orgs/codemirror/repositories\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return y(x);})();\n;return Component;"
        },
        "_id": "blog/codemirror-packages-retrieve.mdx",
        "_raw": {
          "sourceFilePath": "blog/codemirror-packages-retrieve.mdx",
          "sourceFileName": "codemirror-packages-retrieve.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/codemirror-packages-retrieve"
        },
        "type": "Doc",
        "slug": "/blog/codemirror-packages-retrieve",
        "slugAsParams": "codemirror-packages-retrieve"
      },
      "documentHash": "1740489186263",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/comparing-s3-upload-feature.mdx": {
      "document": {
        "title": "Comparison of S3 upload feature between Documenso and aws-s3-image-upload example\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will compare the steps involved to upload a file to AWS S3 between [Documenso](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L69) and [AWS S3 image upload example](https://github.com/vercel/examples/tree/main/solutions/aws-s3-image-upload).\r\n\r\nWe start with the simple example provided by Vercel.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*dg9iACJK3o4SHyxXThZc4Q.png)\r\n\r\n### examples/aws-s3-image-upload\r\n\r\nVercel provides a good working example of [uploading a file to AWS S3](https://github.com/vercel/examples/tree/main/solutions/aws-s3-image-upload).  \r\nThis [example’s README](https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/README.md) provides two options, either you can use an existing S3 bucket or create a new bucket. Understanding this helps  \r\nyou configure your upload feature correctly.\r\n\r\nIt is about the time we look at the source code. We are looking for an input element with `type=file`. In the [app/page.tsx](https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/page.tsx#L58C5-L76C12), you will find this below code:\r\n\r\n```js\r\nreturn (\r\n    <main>\r\n      <h1>Upload a File to S3</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          id=\"file\"\r\n          type=\"file\"\r\n          onChange={(e) => {\r\n            const files = e.target.files\r\n            if (files) {\r\n              setFile(files[0])\r\n            }\r\n          }}\r\n          accept=\"image/png, image/jpeg\"\r\n        />\r\n        <button type=\"submit\" disabled={uploading}>\r\n          Upload\r\n        </button>\r\n      </form>\r\n    </main>\r\n  )\r\n}\r\n```\r\n\r\n### onChange\r\n\r\n`onChange` updates state using `setFile`, but it does not do the uploading. upload happens when you submit this form.\r\n\r\n```js\r\nonChange={(e) => {\r\n  const files = e.target.files\r\n  if (files) {\r\n    setFile(files[0])\r\n  }\r\n}}\r\n```\r\n\r\n#### handleSubmit\r\n\r\nA lot is happening in the [handleSubmit function](https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/page.tsx#L9C3-L55C4). We need to analyse the list of operations in this handleSubmit function. I have written the comments inside this code snippet to explain the steps.\r\n\r\n```js\r\nconst handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault()\r\n\r\n    if (!file) {\r\n      alert('Please select a file to upload.')\r\n      return\r\n    }\r\n\r\n    setUploading(true)\r\n\r\n    const response = await fetch(\r\n      process.env.NEXT_PUBLIC_BASE_URL + '/api/upload',\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ filename: file.name, contentType: file.type }),\r\n      }\r\n    )\r\n\r\n    if (response.ok) {\r\n      const { url, fields } = await response.json()\r\n\r\n      const formData = new FormData()\r\n      Object.entries(fields).forEach(([key, value]) => {\r\n        formData.append(key, value as string)\r\n      })\r\n      formData.append('file', file)\r\n\r\n      const uploadResponse = await fetch(url, {\r\n        method: 'POST',\r\n        body: formData,\r\n      })\r\n\r\n      if (uploadResponse.ok) {\r\n        alert('Upload successful!')\r\n      } else {\r\n        console.error('S3 Upload Error:', uploadResponse)\r\n        alert('Upload failed.')\r\n      }\r\n    } else {\r\n      alert('Failed to get pre-signed URL.')\r\n    }\r\n\r\n    setUploading(false)\r\n  }\r\n```\r\n\r\n#### api/upload\r\n\r\n[api/upload/route.ts](https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/api/upload/route.ts) has the below code:\r\n\r\n```js\r\nimport { createPresignedPost } from '@aws-sdk/s3-presigned-post'\r\nimport { S3Client } from '@aws-sdk/client-s3'\r\nimport { v4 as uuidv4 } from 'uuid'\r\n\r\nexport async function POST(request: Request) {\r\n  const { filename, contentType } = await request.json()\r\n\r\n  try {\r\n    const client = new S3Client({ region: process.env.AWS_REGION })\r\n    const { url, fields } = await createPresignedPost(client, {\r\n      Bucket: process.env.AWS_BUCKET_NAME,\r\n      Key: uuidv4(),\r\n      Conditions: [\r\n        ['content-length-range', 0, 10485760], // up to 10 MB\r\n        ['starts-with', '$Content-Type', contentType],\r\n      ],\r\n      Fields: {\r\n        acl: 'public-read',\r\n        'Content-Type': contentType,\r\n      },\r\n      Expires: 600, // Seconds before the presigned post expires. 3600 by default.\r\n    })\r\n\r\n    return Response.json({ url, fields })\r\n  } catch (error) {\r\n    return Response.json({ error: error.message })\r\n  }\r\n}\r\n```\r\n\r\nThe first request in the handleSubmit was to /api/upload and sends content type and filename as payload. It is parsed as below:\r\n\r\n```js\r\nconst { filename, contentType } = await request.json()\r\n```\r\n\r\nNext step is to create a S3 client and then create a presigned post that returns url and field. You would use this `url` to upload your file.\r\n\r\nWith this knowledge, let’s analyse how the upload works in Documenso and draw some comparison.\r\n\r\n### PDF file upload in Documenso\r\n\r\nLet’s start with the input element with `type=file`. Code is organized differently in Documenso. You would find input element in a file named [document-dropzone.tsx](https://github.com/documenso/documenso/blob/main/packages/ui/primitives/document-dropzone.tsx#L157).\r\n\r\n```js\r\n<input {...getInputProps()} />\r\n\r\n<p className=\"text-foreground mt-8 font-medium\">{_(heading[type])}</p>\r\n```\r\n\r\nHere `getInputProps` is returned `useDropzone`. Documenso uses react-dropzone.\r\n\r\n```js\r\nimport { useDropzone } from 'react-dropzone';\r\n```\r\n\r\nonDrop calls props.onDrop, you will find an attribute value named `onFileDrop` in [upload-document.tsx](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx).\r\n\r\n```js\r\n<DocumentDropzone\r\n  className=\"h-[min(400px,50vh)]\"\r\n  disabled={remaining.documents === 0 || !session?.user.emailVerified}\r\n  disabledMessage={disabledMessage}\r\n  onDrop={onFileDrop}\r\n  onDropRejected={onFileDropRejected}\r\n/>\r\n```\r\n\r\nLet’s see what happens in [onFileDrop function](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L61).\r\n\r\n```js\r\nconst onFileDrop = async (file: File) => {\r\n    try {\r\n      setIsLoading(true);\r\n\r\n      const { type, data } = await putPdfFile(file);\r\n\r\n      const { id: documentDataId } = await createDocumentData({\r\n        type,\r\n        data,\r\n      });\r\n\r\n      const { id } = await createDocument({\r\n        title: file.name,\r\n        documentDataId,\r\n        teamId: team?.id,\r\n      });\r\n\r\n      void refreshLimits();\r\n\r\n      toast({\r\n        title: _(msg`Document uploaded`),\r\n        description: _(msg`Your document has been uploaded successfully.`),\r\n        duration: 5000,\r\n      });\r\n\r\n      analytics.capture('App: Document Uploaded', {\r\n        userId: session?.user.id,\r\n        documentId: id,\r\n        timestamp: new Date().toISOString(),\r\n      });\r\n\r\n      router.push(`${formatDocumentsPath(team?.url)}/${id}/edit`);\r\n    } catch (err) {\r\n      const error = AppError.parseError(err);\r\n\r\n      console.error(err);\r\n\r\n      if (error.code === 'INVALID_DOCUMENT_FILE') {\r\n        toast({\r\n          title: _(msg`Invalid file`),\r\n          description: _(msg`You cannot upload encrypted PDFs`),\r\n          variant: 'destructive',\r\n        });\r\n      } else if (err instanceof TRPCClientError) {\r\n        toast({\r\n          title: _(msg`Error`),\r\n          description: err.message,\r\n          variant: 'destructive',\r\n        });\r\n      } else {\r\n        toast({\r\n          title: _(msg`Error`),\r\n          description: _(msg`An error occurred while uploading your document.`),\r\n          variant: 'destructive',\r\n        });\r\n      }\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n```\r\n\r\nThere’s a lot of happening but for our analysis, let’s only consider the function named `putFile`.\r\n\r\n#### putPdfFile\r\n\r\nputPdfFile is defined in [upload/put-file.ts](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22C1-L43C3)\r\n\r\n```js\r\n/**\r\n * Uploads a document file to the appropriate storage location and creates\r\n * a document data record.\r\n */\r\nexport const putPdfFile = async (file: File) => {\r\n  const isEncryptedDocumentsAllowed = await getFlag('app_allow_encrypted_documents').catch(\r\n    () => false,\r\n  );\r\n\r\n  const pdf = await PDFDocument.load(await file.arrayBuffer()).catch((e) => {\r\n    console.error(`PDF upload parse error: ${e.message}`);\r\n\r\n    throw new AppError('INVALID_DOCUMENT_FILE');\r\n  });\r\n\r\n  if (!isEncryptedDocumentsAllowed && pdf.isEncrypted) {\r\n    throw new AppError('INVALID_DOCUMENT_FILE');\r\n  }\r\n\r\n  if (!file.name.endsWith('.pdf')) {\r\n    file.name = `${file.name}.pdf`;\r\n  }\r\n\r\n  removeOptionalContentGroups(pdf);\r\n\r\n  const bytes = await pdf.save();\r\n\r\n  const { type, data } = await putFile(new File([bytes], file.name, { type: 'application/pdf' }));\r\n\r\n  return await createDocumentData({ type, data });\r\n};\r\n```\r\n\r\n#### putFile\r\n\r\nThis calls `putFile` function.\r\n\r\n```js\r\n/**\r\n * Uploads a file to the appropriate storage location.\r\n */\r\nexport const putFile = async (file: File) => {\r\n  const NEXT_PUBLIC_UPLOAD_TRANSPORT = env('NEXT_PUBLIC_UPLOAD_TRANSPORT');\r\n\r\n  return await match(NEXT_PUBLIC_UPLOAD_TRANSPORT)\r\n    .with('s3', async () => putFileInS3(file))\r\n    .otherwise(async () => putFileInDatabase(file));\r\n};\r\n```\r\n\r\n#### putFileInS3\r\n\r\n```js\r\nconst putFileInS3 = async (file: File) => {\r\n  const { getPresignPostUrl } = await import('./server-actions');\r\n\r\n  const { url, key } = await getPresignPostUrl(file.name, file.type);\r\n\r\n  const body = await file.arrayBuffer();\r\n\r\n  const reponse = await fetch(url, {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/octet-stream',\r\n    },\r\n    body,\r\n  });\r\n\r\n  if (!reponse.ok) {\r\n    throw new Error(\r\n      `Failed to upload file \"${file.name}\", failed with status code ${reponse.status}`,\r\n    );\r\n  }\r\n\r\n  return {\r\n    type: DocumentDataType.S3_PATH,\r\n    data: key,\r\n  };\r\n};\r\n```\r\n\r\n#### getPresignPostUrl\r\n\r\n```js\r\nexport const getPresignPostUrl = async (fileName: string, contentType: string) => {\r\n  const client = getS3Client();\r\n\r\n  const { getSignedUrl } = await import('@aws-sdk/s3-request-presigner');\r\n\r\n  let token: JWT | null = null;\r\n\r\n  try {\r\n    const baseUrl = APP_BASE_URL() ?? 'http://localhost:3000';\r\n\r\n    token = await getToken({\r\n      req: new NextRequest(baseUrl, {\r\n        headers: headers(),\r\n      }),\r\n    });\r\n  } catch (err) {\r\n    // Non server-component environment\r\n  }\r\n\r\n  // Get the basename and extension for the file\r\n  const { name, ext } = path.parse(fileName);\r\n\r\n  let key = `${alphaid(12)}/${slugify(name)}${ext}`;\r\n\r\n  if (token) {\r\n    key = `${token.id}/${key}`;\r\n  }\r\n\r\n  const putObjectCommand = new PutObjectCommand({\r\n    Bucket: process.env.NEXT_PRIVATE_UPLOAD_BUCKET,\r\n    Key: key,\r\n    ContentType: contentType,\r\n  });\r\n\r\n  const url = await getSignedUrl(client, putObjectCommand, {\r\n    expiresIn: ONE_HOUR / ONE_SECOND,\r\n  });\r\n\r\n  return { key, url };\r\n};\r\n```\r\n\r\n### Comparison\r\n\r\n* You do not see any POST request in Documenso. It uses a function named getSignedUrl to get the url, whereas   \r\n    vercel example makes a `POST` request to `api/upload` route.\r\n    \r\n* Input element can be located easily in Vercel example as this is just an example, but Documenso is found  \r\n    to be using react-dropzone and the input element is located according to business context.\r\n    \r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L69](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L69)\r\n    \r\n2. [https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/README.md](https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/README.md)\r\n    \r\n3. [https://github.com/vercel/examples/tree/main/solutions/aws-s3-image-upload](https://github.com/vercel/examples/tree/main/solutions/aws-s3-image-upload)\r\n    \r\n4. [https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/page.tsx#L58C5-L76C12](https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/page.tsx#L58C5-L76C12)\r\n    \r\n5. [https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/api/upload/route.ts](https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/api/upload/route.ts)\r\n    \r\n6. [https://github.com/documenso/documenso/blob/main/packages/ui/primitives/document-dropzone.tsx#L157](https://github.com/documenso/documenso/blob/main/packages/ui/primitives/document-dropzone.tsx#L157)\r\n    \r\n7. [https://react-dropzone.js.org/](https://react-dropzone.js.org/)\r\n    \r\n8. [https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L61](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L61)\r\n    \r\n9. [https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22)",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var N=(n,l)=>()=>(l||n((l={exports:{}}).exports,l),l.exports),g=(n,l)=>{for(var s in l)c(n,s,{get:l[s],enumerable:!0})},o=(n,l,s,r)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let F of y(l))!u.call(n,F)&&F!==s&&c(n,F,{get:()=>l[F],enumerable:!(r=h(l,F))||r.enumerable});return n};var f=(n,l,s)=>(s=n!=null?p(m(n)):{},o(l||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),b=n=>o(c({},\"__esModule\",{value:!0}),n);var i=N((D,a)=>{a.exports=_jsx_runtime});var v={};g(v,{default:()=>d,frontmatter:()=>w});var e=f(i()),w={title:\"Comparison of S3 upload feature between Documenso and aws-s3-image-upload example\"};function t(n){let l={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(l.p,{children:[\"In this article, we will compare the steps involved to upload a file to AWS S3 between \",(0,e.jsx)(l.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L69\",children:\"Documenso\"}),\" and \",(0,e.jsx)(l.a,{href:\"https://github.com/vercel/examples/tree/main/solutions/aws-s3-image-upload\",children:\"AWS S3 image upload example\"}),\".\"]}),`\n`,(0,e.jsx)(l.p,{children:\"We start with the simple example provided by Vercel.\"}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*dg9iACJK3o4SHyxXThZc4Q.png\",alt:\"\"})}),`\n`,(0,e.jsx)(l.h3,{id:\"examplesaws-s3-image-upload\",children:\"examples/aws-s3-image-upload\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"Vercel provides a good working example of \",(0,e.jsx)(l.a,{href:\"https://github.com/vercel/examples/tree/main/solutions/aws-s3-image-upload\",children:\"uploading a file to AWS S3\"}),\".\",(0,e.jsx)(l.br,{}),`\n`,\"This \",(0,e.jsx)(l.a,{href:\"https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/README.md\",children:\"example\\u2019s README\"}),\" provides two options, either you can use an existing S3 bucket or create a new bucket. Understanding this helps\",(0,e.jsx)(l.br,{}),`\n`,\"you configure your upload feature correctly.\"]}),`\n`,(0,e.jsxs)(l.p,{children:[\"It is about the time we look at the source code. We are looking for an input element with \",(0,e.jsx)(l.code,{children:\"type=file\"}),\". In the \",(0,e.jsx)(l.a,{href:\"https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/page.tsx#L58C5-L76C12\",children:\"app/page.tsx\"}),\", you will find this below code:\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"main\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"h1\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"Upload a File to S3\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"</\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"h1\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"form onSubmit\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"handleSubmit\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"input\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"file\"'})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"file\"'})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          onChange\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"e\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" files \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" e\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"target\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"files\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"files\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"              setFile\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"files\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"[0])\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          }}\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          accept\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"image/png, image/jpeg\"'})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        />\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"button type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"submit\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" disabled\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"uploading\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}>\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          Upload\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"button\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"form\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"main\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.h3,{id:\"onchange\",children:\"onChange\"}),`\n`,(0,e.jsxs)(l.p,{children:[(0,e.jsx)(l.code,{children:\"onChange\"}),\" updates state using \",(0,e.jsx)(l.code,{children:\"setFile\"}),\", but it does not do the uploading. upload happens when you submit this form.\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"onChange\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"(e) => \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" files \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" e\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"target\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"files\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"files\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    setFile\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"files\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"[0])\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}}\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"handlesubmit\",children:\"handleSubmit\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"A lot is happening in the \",(0,e.jsx)(l.a,{href:\"https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/page.tsx#L9C3-L55C4\",children:\"handleSubmit function\"}),\". We need to analyse the list of operations in this handleSubmit function. I have written the comments inside this code snippet to explain the steps.\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" handleSubmit\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"e\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" React\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"FormEvent\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"HTMLFormElement\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">)\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    e\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"preventDefault\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      alert\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'Please select a file to upload.'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      return\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    setUploading\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(true)\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" response \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" fetch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      process\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_BASE_URL \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '/api/upload'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      {\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        method\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'POST'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        headers\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          'Content-Type'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'application/json'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        body\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" JSON\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"stringify\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" filename\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" contentType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"type \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}),\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    )\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"response\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ok\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" url\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" fields \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" response\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"json\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" formData \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" FormData\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      Object\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"entries\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"fields\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"forEach\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(([\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"])\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        formData\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"append\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      })\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      formData\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"append\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'file'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" uploadResponse \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" fetch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"url\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        method\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'POST'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        body\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" formData\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      })\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"uploadResponse\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ok\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        alert\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'Upload successful!'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      }\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        console\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'S3 Upload Error:'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" uploadResponse\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        alert\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'Upload failed.'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    }\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      alert\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'Failed to get pre-signed URL.'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    setUploading\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(false)\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"apiupload\",children:\"api/upload\"}),`\n`,(0,e.jsxs)(l.p,{children:[(0,e.jsx)(l.a,{href:\"https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/api/upload/route.ts\",children:\"api/upload/route.ts\"}),\" has the below code:\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" createPresignedPost \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '@aws-sdk/s3-presigned-post'\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" S3Client \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '@aws-sdk/client-s3'\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" v4 \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" uuidv4 \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'uuid'\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" POST\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Request\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" filename\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" contentType \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" request\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"json\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  try\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" client \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" S3Client\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" region\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" process\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"AWS_REGION \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"})\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" url\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" fields \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" createPresignedPost\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"client\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      Bucket\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" process\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"AWS_BUCKET_NAME\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      Key\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" uuidv4\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      Conditions\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'content-length-range'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 10485760],\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" up to 10 MB\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'starts-with'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '$Content-Type'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" contentType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"],\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      ],\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      Fields\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        acl\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'public-read'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        'Content-Type'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" contentType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      Expires\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 600,\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" Seconds before the presigned post expires. 3600 by default.\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    })\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" Response\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"json\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" url\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" fields \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"})\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" catch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" Response\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"json\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"message \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"})\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"The first request in the handleSubmit was to /api/upload and sends content type and filename as payload. It is parsed as below:\"}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsx)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" filename\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" contentType \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" request\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"json\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"})]})})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"Next step is to create a S3 client and then create a presigned post that returns url and field. You would use this \",(0,e.jsx)(l.code,{children:\"url\"}),\" to upload your file.\"]}),`\n`,(0,e.jsx)(l.p,{children:\"With this knowledge, let\\u2019s analyse how the upload works in Documenso and draw some comparison.\"}),`\n`,(0,e.jsx)(l.h3,{id:\"pdf-file-upload-in-documenso\",children:\"PDF file upload in Documenso\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"Let\\u2019s start with the input element with \",(0,e.jsx)(l.code,{children:\"type=file\"}),\". Code is organized differently in Documenso. You would find input element in a file named \",(0,e.jsx)(l.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/ui/primitives/document-dropzone.tsx#L157\",children:\"document-dropzone.tsx\"}),\".\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"input \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"{...\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"getInputProps\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" />\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"p className\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"text-foreground mt-8 font-medium\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">{\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"_\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"heading\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"])}</\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"Here \",(0,e.jsx)(l.code,{children:\"getInputProps\"}),\" is returned \",(0,e.jsx)(l.code,{children:\"useDropzone\"}),\". Documenso uses react-dropzone.\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsx)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" useDropzone \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'react-dropzone'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"onDrop calls props.onDrop, you will find an attribute value named \",(0,e.jsx)(l.code,{children:\"onFileDrop\"}),\" in \",(0,e.jsx)(l.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx\",children:\"upload-document.tsx\"}),\".\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentDropzone\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  className\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"h-[min(400px,50vh)]\"'})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  disabled\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"remaining\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"documents \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" !\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"session\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"user\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"emailVerified\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  disabledMessage\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"disabledMessage\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  onDrop\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"onFileDrop\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  onDropRejected\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"onFileDropRejected\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/>\"})})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"Let\\u2019s see what happens in \",(0,e.jsx)(l.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L61\",children:\"onFileDrop function\"}),\".\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" onFileDrop\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" File\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    try\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      setIsLoading\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(true);\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" data \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" putPdfFile\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" documentDataId \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" createDocumentData\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        data\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      });\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" id \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" createDocument\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        title\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        documentDataId\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        teamId\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" team\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      });\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      void\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" refreshLimits\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      toast\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        title\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" _\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"msg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`Document uploaded`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        description\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" _\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"msg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`Your document has been uploaded successfully.`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        duration\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 5000,\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      });\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      analytics\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"capture\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'App: Document Uploaded'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        userId\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" session\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"user\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        documentId\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        timestamp\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" Date\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"toISOString\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(),\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      });\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      router\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"push\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`${\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"formatDocumentsPath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"team\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"url\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}/${\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}/edit`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    }\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" catch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"err\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" error \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" AppError\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"parseError\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"err\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      console\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"err\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"code \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'INVALID_DOCUMENT_FILE'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        toast\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          title\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" _\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"msg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`Invalid file`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          description\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" _\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"msg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`You cannot upload encrypted PDFs`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          variant\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'destructive'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        });\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      }\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"err \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"instanceof\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TRPCClientError\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        toast\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          title\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" _\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"msg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`Error`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          description\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" err\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"message\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          variant\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'destructive'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        });\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      }\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        toast\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          title\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" _\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"msg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`Error`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          description\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" _\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"msg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`An error occurred while uploading your document.`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          variant\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'destructive'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        });\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    }\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" finally\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      setIsLoading\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(false);\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  };\"})})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"There\\u2019s a lot of happening but for our analysis, let\\u2019s only consider the function named \",(0,e.jsx)(l.code,{children:\"putFile\"}),\".\"]}),`\n`,(0,e.jsx)(l.h4,{id:\"putpdffile\",children:\"putPdfFile\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"putPdfFile is defined in \",(0,e.jsx)(l.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22C1-L43C3\",children:\"upload/put-file.ts\"})]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" * Uploads a document file to the appropriate storage location and creates\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" * a document data record.\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" putPdfFile\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" File\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" isEncryptedDocumentsAllowed \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" getFlag\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'app_allow_encrypted_documents'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"catch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    ()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  );\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" pdf \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" PDFDocument\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"load\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"arrayBuffer\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()).\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"catch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"e\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    console\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`PDF upload parse error: ${\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"e\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"message\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    throw\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" AppError\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'INVALID_DOCUMENT_FILE'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"isEncryptedDocumentsAllowed \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"&&\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" pdf\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"isEncrypted\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    throw\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" AppError\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'INVALID_DOCUMENT_FILE'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"endsWith\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'.pdf'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"name \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" `${\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}.pdf`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  removeOptionalContentGroups\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"pdf\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" bytes \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" pdf\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"save\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" data \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" putFile\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" File\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"([\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"bytes\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"],\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'application/pdf'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" }));\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" createDocumentData\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" data \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"});\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"putfile\",children:\"putFile\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"This calls \",(0,e.jsx)(l.code,{children:\"putFile\"}),\" function.\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" * Uploads a file to the appropriate storage location.\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" putFile\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" File\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" NEXT_PUBLIC_UPLOAD_TRANSPORT \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" env\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'NEXT_PUBLIC_UPLOAD_TRANSPORT'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" match\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    .\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"with\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'s3'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" putFileInS3\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    .\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"otherwise\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(async\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" putFileInDatabase\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"putfileins3\",children:\"putFileInS3\"}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" putFileInS3\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" File\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" getPresignPostUrl \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" import(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'./server-actions'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" url\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" key \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" getPresignPostUrl\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" body \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"arrayBuffer\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" reponse \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" fetch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"url\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    method\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'PUT'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    headers\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      'Content-Type'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'application/octet-stream'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    body\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"reponse\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ok\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    throw\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" Error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'      `Failed to upload file \"${'}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'}\", failed with status code ${'}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"reponse\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"status\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    );\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" DocumentDataType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"S3_PATH\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    data\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" key\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  };\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"getpresignposturl\",children:\"getPresignPostUrl\"}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getPresignPostUrl\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"fileName\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" contentType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" client \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" getS3Client\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" getSignedUrl \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" import(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'@aws-sdk/s3-request-presigner'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  let\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" token\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" JWT\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" null \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" null;\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  try\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" baseUrl \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" APP_BASE_URL\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ??\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'http://localhost:3000'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    token \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" getToken\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      req\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" NextRequest\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"baseUrl\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        headers\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" headers\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(),\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      }),\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    });\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" catch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"err\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" Non server-component environment\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" Get the basename and extension for the file\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" ext \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" path\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"parse\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"fileName\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  let\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" key \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" `${\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"alphaid\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(12)\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}/${\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"slugify\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}${\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ext\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"token\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    key \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" `${\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"token\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}/${\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" putObjectCommand \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" PutObjectCommand\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    Bucket\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" process\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"NEXT_PRIVATE_UPLOAD_BUCKET\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    Key\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" key\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    ContentType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" contentType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" url \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" getSignedUrl\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"client\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" putObjectCommand\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    expiresIn\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" ONE_HOUR \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" ONE_SECOND\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" key\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" url \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"};\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,e.jsx)(l.h3,{id:\"comparison\",children:\"Comparison\"}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsxs)(l.p,{children:[\"You do not see any POST request in Documenso. It uses a function named getSignedUrl to get the url, whereas\\xA0\",(0,e.jsx)(l.br,{}),`\n`,\"vercel example makes a \",(0,e.jsx)(l.code,{children:\"POST\"}),\" request to \",(0,e.jsx)(l.code,{children:\"api/upload\"}),\" route.\"]}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsxs)(l.p,{children:[\"Input element can be located easily in Vercel example as this is just an example, but Documenso is found\",(0,e.jsx)(l.br,{}),`\n`,\"to be using react-dropzone and the input element is located according to business context.\"]}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(l.h1,{id:\"about-me\",children:(0,e.jsx)(l.strong,{children:\"About me:\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(l.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My Github \\u2014 \",(0,e.jsx)(l.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My website \\u2014 \",(0,e.jsx)(l.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My Youtube channel \\u2014 \",(0,e.jsx)(l.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Learning platform \\u2014 \",(0,e.jsx)(l.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Codebase Architecture \\u2014 \",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Best practices \\u2014 \",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Production-grade projects \\u2014 \",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(l.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,e.jsxs)(l.ol,{children:[`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L69\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L69\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/README.md\",children:\"https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/README.md\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/vercel/examples/tree/main/solutions/aws-s3-image-upload\",children:\"https://github.com/vercel/examples/tree/main/solutions/aws-s3-image-upload\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/page.tsx#L58C5-L76C12\",children:\"https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/page.tsx#L58C5-L76C12\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/api/upload/route.ts\",children:\"https://github.com/vercel/examples/blob/main/solutions/aws-s3-image-upload/app/api/upload/route.ts\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/ui/primitives/document-dropzone.tsx#L157\",children:\"https://github.com/documenso/documenso/blob/main/packages/ui/primitives/document-dropzone.tsx#L157\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://react-dropzone.js.org/\",children:\"https://react-dropzone.js.org/\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L61\",children:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L61\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:l}=n.components||{};return l?(0,e.jsx)(l,{...n,children:(0,e.jsx)(t,{...n})}):t(n)}return b(v);})();\n;return Component;"
        },
        "_id": "blog/comparing-s3-upload-feature.mdx",
        "_raw": {
          "sourceFilePath": "blog/comparing-s3-upload-feature.mdx",
          "sourceFileName": "comparing-s3-upload-feature.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/comparing-s3-upload-feature"
        },
        "type": "Doc",
        "slug": "/blog/comparing-s3-upload-feature",
        "slugAsParams": "comparing-s3-upload-feature"
      },
      "documentHash": "1740489186265",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Comparing-the-copyToClipboard.mdx": {
      "document": {
        "title": "Comparing the copyToClipboard implementations in Shadcn-ui/ui and Codehike.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will compare the Copy button code between [Shadcn-ui/ui](https://github.com/code-hike/codehike/blob/next/packages/mdx/src/smooth-code/copy-button.tsx#L3) and [Codehike](https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L31).\r\n\r\n# **copyToClipboard in Shadcn-ui/ui**\r\n\r\nThe code snippet below is picked from [shadcn-ui source code](https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L24).\r\n\r\n```plaintext\r\nexport async function copyToClipboardWithMeta(value: string, event?: Event) {\r\n  navigator.clipboard.writeText(value)\r\n  if (event) {\r\n    trackEvent(event)\r\n  }\r\n}\r\n```\r\n\r\nI think ‘withMeta’ in the function name copyToClipboardWithMeta refers to the analytics recorded in the [trackEvent function](https://github.com/shadcn-ui/ui/blob/main/apps/www/lib/events.ts#L27).\r\n\r\n```plaintext\r\nimport va from \"@vercel/analytics\"\r\n\r\nexport function trackEvent(input: Event): void {\r\n  const event = eventSchema.parse(input)\r\n  if (event) {\r\n    va.track(event.name, event.properties)\r\n  }\r\n}\r\n```\r\n\r\n# **copyToClipboard in Codehike**\r\n\r\nThe code snippet below is picked from [codehike source code](https://github.com/code-hike/codehike/blob/next/packages/mdx/src/smooth-code/copy-button.tsx#L54).\r\n\r\n```plaintext\r\nfunction copyToClipboard(text: string) {\r\n  if (!navigator.clipboard) {\r\n    fallbackCopyTextToClipboard(text)\r\n    return\r\n  }\r\n  navigator.clipboard.writeText(text)\r\n}\r\n```\r\n\r\nCodehike implements the copyToClipboard differently.\r\n\r\n1. There is no analytics recorded when the copyToClipboard function is called like we saw this happening in Shadcn-ui/ui.\r\n    \r\n2. There is a fallback method in case the navigation.clipboard API is not available.\r\n    \r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*ZUnSWA5l9xkDQ4XC3Vp54w.png)\r\n\r\n## **fallbackCopyTextToClipboard:**\r\n\r\nThis below code snippet is picked from [Codehike source code](https://github.com/code-hike/codehike/blob/next/packages/mdx/src/smooth-code/copy-button.tsx#L62C1-L84C2). This function is just under the copyToClipboard.\r\n\r\n```plaintext\r\nfunction fallbackCopyTextToClipboard(text: string) {\r\n  var textArea = document.createElement(\"textarea\")\r\n  textArea.value = text\r\n\r\n  // Avoid scrolling to bottom\r\n  textArea.style.top = \"0\"\r\n  textArea.style.left = \"0\"\r\n  textArea.style.position = \"fixed\"\r\n\r\n  document.body.appendChild(textArea)\r\n  textArea.focus()\r\n  textArea.select()\r\n\r\n  try {\r\n    var successful = document.execCommand(\"copy\")\r\n    // var msg = successful ? \"successful\" : \"unsuccessful\"\r\n    // console.log(\"Fallback: Copying text command was \" + msg)\r\n  } catch (err) {\r\n    // console.error(\"Fallback: Oops, unable to copy\", err)\r\n  }\r\n\r\n  document.body.removeChild(textArea)\r\n}\r\n```\r\n\r\n# **Conclusion:**\r\n\r\nIf I were to implement a copyToClipboard functionality, I would also add a fallback in case the navigator.clipboard is not available in a given browser like in Codehike and if you also use Vercel analytics in your application, you might as well record your analytics like in shadcn-ui/ui.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png)\r\n\r\n> [*Get free courses inspired by the best practices used in open source.*](https://app.thinkthroo.com/best-practices)\r\n\r\n# About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/code-hike/codehike/blob/next/packages/mdx/src/mini-editor/editor-tween.tsx](https://github.com/code-hike/codehike/blob/next/packages/mdx/src/mini-editor/editor-tween.tsx)\r\n    \r\n2. [https://github.com/code-hike/codehike/blob/next/packages/mdx/src/smooth-code/copy-button.tsx#L3](https://github.com/code-hike/codehike/blob/next/packages/mdx/src/smooth-code/copy-button.tsx#L3)\r\n    \r\n3. [https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L31](https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L31)\r\n    \r\n4. [https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L24](https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L24)\r\n    \r\n5. [https://github.com/shadcn-ui/ui/blob/main/apps/www/lib/events.ts#L27](https://github.com/shadcn-ui/ui/blob/main/apps/www/lib/events.ts#L27)",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),x=(a,e)=>{for(var i in e)c(a,i,{get:e[i],enumerable:!0})},s=(a,e,i,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of u(e))!g.call(a,t)&&t!==i&&c(a,t,{get:()=>e[t],enumerable:!(l=m(e,t))||l.enumerable});return a};var y=(a,e,i)=>(i=a!=null?p(b(a)):{},s(e||!a||!a.__esModule?c(i,\"default\",{value:a,enumerable:!0}):i,a)),k=a=>s(c({},\"__esModule\",{value:!0}),a);var o=f((C,r)=>{r.exports=_jsx_runtime});var v={};x(v,{default:()=>d,frontmatter:()=>w});var n=y(o()),w={title:\"Comparing the copyToClipboard implementations in Shadcn-ui/ui and Codehike.\"};function h(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will compare the Copy button code between \",(0,n.jsx)(e.a,{href:\"https://github.com/code-hike/codehike/blob/next/packages/mdx/src/smooth-code/copy-button.tsx#L3\",children:\"Shadcn-ui/ui\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L31\",children:\"Codehike\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"copytoclipboard-in-shadcn-uiui\",children:(0,n.jsx)(e.strong,{children:\"copyToClipboard in Shadcn-ui/ui\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The code snippet below is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L24\",children:\"shadcn-ui source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export async function copyToClipboardWithMeta(value: string, event?: Event) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  navigator.clipboard.writeText(value)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (event) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    trackEvent(event)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I think \\u2018withMeta\\u2019 in the function name copyToClipboardWithMeta refers to the analytics recorded in the \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/lib/events.ts#L27\",children:\"trackEvent function\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import va from \"@vercel/analytics\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function trackEvent(input: Event): void {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const event = eventSchema.parse(input)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (event) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    va.track(event.name, event.properties)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"copytoclipboard-in-codehike\",children:(0,n.jsx)(e.strong,{children:\"copyToClipboard in Codehike\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The code snippet below is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/code-hike/codehike/blob/next/packages/mdx/src/smooth-code/copy-button.tsx#L54\",children:\"codehike source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function copyToClipboard(text: string) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (!navigator.clipboard) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    fallbackCopyTextToClipboard(text)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  navigator.clipboard.writeText(text)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Codehike implements the copyToClipboard differently.\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"There is no analytics recorded when the copyToClipboard function is called like we saw this happening in Shadcn-ui/ui.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"There is a fallback method in case the navigation.clipboard API is not available.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*ZUnSWA5l9xkDQ4XC3Vp54w.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h2,{id:\"fallbackcopytexttoclipboard\",children:(0,n.jsx)(e.strong,{children:\"fallbackCopyTextToClipboard:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This below code snippet is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/code-hike/codehike/blob/next/packages/mdx/src/smooth-code/copy-button.tsx#L62C1-L84C2\",children:\"Codehike source code\"}),\". This function is just under the copyToClipboard.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function fallbackCopyTextToClipboard(text: string) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  var textArea = document.createElement(\"textarea\")'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  textArea.value = text\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Avoid scrolling to bottom\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  textArea.style.top = \"0\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  textArea.style.left = \"0\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  textArea.style.position = \"fixed\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  document.body.appendChild(textArea)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  textArea.focus()\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  textArea.select()\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  try {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    var successful = document.execCommand(\"copy\")'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    // var msg = successful ? \"successful\" : \"unsuccessful\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    // console.log(\"Fallback: Copying text command was \" + msg)'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  } catch (err) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    // console.error(\"Fallback: Oops, unable to copy\", err)'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  document.body.removeChild(textArea)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"conclusion\",children:(0,n.jsx)(e.strong,{children:\"Conclusion:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"If I were to implement a copyToClipboard functionality, I would also add a fallback in case the navigator.clipboard is not available in a given browser like in Codehike and if you also use Vercel analytics in your application, you might as well record your analytics like in shadcn-ui/ui.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:(0,n.jsx)(e.em,{children:\"Get free courses inspired by the best practices used in open source.\"})})}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/code-hike/codehike/blob/next/packages/mdx/src/mini-editor/editor-tween.tsx\",children:\"https://github.com/code-hike/codehike/blob/next/packages/mdx/src/mini-editor/editor-tween.tsx\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/code-hike/codehike/blob/next/packages/mdx/src/smooth-code/copy-button.tsx#L3\",children:\"https://github.com/code-hike/codehike/blob/next/packages/mdx/src/smooth-code/copy-button.tsx#L3\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L31\",children:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L31\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L24\",children:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/components/copy-button.tsx#L24\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/lib/events.ts#L27\",children:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/lib/events.ts#L27\"})}),`\n`]}),`\n`]})]})}function d(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return k(v);})();\n;return Component;"
        },
        "_id": "blog/Comparing-the-copyToClipboard.mdx",
        "_raw": {
          "sourceFilePath": "blog/Comparing-the-copyToClipboard.mdx",
          "sourceFileName": "Comparing-the-copyToClipboard.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Comparing-the-copyToClipboard"
        },
        "type": "Doc",
        "slug": "/blog/Comparing-the-copyToClipboard",
        "slugAsParams": "Comparing-the-copyToClipboard"
      },
      "documentHash": "1741941169335",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Comparison-of-file.mdx": {
      "document": {
        "title": "Comparison of file and component structures among Shadcn-ui, Plane.so and Gitroom.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will look at folder structures in Shadcn-ui, Plane.so and Gitroom used to organise a Next.js project.\r\n\r\n# **Shadcn-ui file and component structures:**\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*pCqjxDyfuMNk-GmBPj-t4g.png)\r\n\r\n## **File structure**\r\n\r\n[Shadcn-ui/ui](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/\\(app\\)/examples/dashboard/page.tsx) uses app router and has a [Router group named (app)](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/\\(app\\)).\r\n\r\nIn the (app) folder, you will find a folder with page.tsx and/or layout.tsx in some routes such as [colors](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/\\(app\\)/colors), [blocks](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/\\(app\\)/blocks), [docs](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/\\(app\\)/docs).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:770/1*cK-HH4G8egQoW9YljjvC8w.png)\r\n\r\n## **Component structure**\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*_Qy97sLxno32IYajJEOFog.png)\r\n\r\nIn [blocks/page.tsx](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/\\(app\\)/blocks/page.tsx), you will find that it imports components that are generic or that can be reused in other pages.\r\n\r\nBut wait, there’s other kind of components.\r\n\r\nIf you look at [examples route](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/\\(app\\)/examples), each example has its own component that is specific to an example.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:873/1*uxEJQYKxq_75VeduDBsacw.png)\r\n\r\nso there’s components available at [examples/card/components](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/\\(app\\)/examples/cards/components) and then there are also [generic components](https://github.com/shadcn-ui/ui/tree/main/apps/www/components) that can be reused.\r\n\r\n# **Plane.so file and component structures:**\r\n\r\n[plane.so](https://github.com/makeplane/plane/tree/preview) has similar structure to that shadcn-ui/ui where you will find components specific to features by their names as shown below.\r\n\r\n## **File structure**\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*PJCDz83kmZevh91TErHNAw.png)\r\n\r\nThe file structure in [plane.so](https://plane.so/) uses nested routes but it does have a header.tsx specific to a route defined in all the folders along with page.tsx or layout.tsx\r\n\r\n## **Component structure**\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*T_TgRfFwPFkbXYC5Wbw8Kw.png)\r\n\r\nAll the components used in the app router are placed inside [core folder](https://github.com/makeplane/plane/tree/preview/web/core).\r\n\r\nSo now comes the question, how come we see the imports as “@/components” in a router as shown below:\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*SEr4u4d9ckp2s7TuEJ9t7A.png)\r\n\r\nwhen there is no components folder at app folder level:\r\n\r\n![](https://miro.medium.com/v2/resize:fit:853/1*DbYeDx_b3hK6eyDYg7tSCg.png)\r\n\r\nWell, the components are inside core folder and tsconfig.json has the paths defined to locate the folders in core as base.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*WtGvBiOrJOqvRg7igslhFg.png)\r\n\r\n# **Gitroom file and component structures:**\r\n\r\nGitroom has a straight forward structure. Routes have page.tsx and each page.tsx uses components from components folder and this components folder contains files specific to features.\r\n\r\n## **File structure:**\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*lOM1G3JZiWbRDfsCYc0gbQ.png)\r\n\r\nAs you can see, router only has one file name page.tsx and that’s it. We see in shadcn-ui where it contains components specific to a route that are scoped to that route, similarly in plane.so, it has route specific header.tsx along with page.tsx however, one commonality in all of these projects is that there is a components folder that can be reused or specific to a feature depending on the folder name.\r\n\r\n## **Component structure:**\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*EtGQ4CdVtOy25qsu5zluiw.png)\r\n\r\nNotice how the route/file structures has the folder names that match with some of the folders names in component structure.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png)\r\n\r\n> [*Get free courses inspired by the best practices used in open source.*](https://app.thinkthroo.com/best-practices)\r\n\r\n# About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/cards/components](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/\\(app\\)/examples/cards/components)\r\n    \r\n2. [https://github.com/makeplane/plane/tree/preview](https://github.com/makeplane/plane/tree/preview)\r\n    \r\n3. [https://github.com/gitroomhq/gitroom/blob/main/apps/frontend/src/app/(site)/launches/page.tsx](https://github.com/gitroomhq/gitroom/blob/main/apps/frontend/src/app/\\(site\\)/launches/page.tsx)",
          "code": "var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var w=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var r in e)o(n,r,{get:e[r],enumerable:!0})},a=(n,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!f.call(n,i)&&i!==r&&o(n,i,{get:()=>e[i],enumerable:!(s=m(e,i))||s.enumerable});return n};var x=(n,e,r)=>(r=n!=null?d(g(n)):{},a(e||!n||!n.__esModule?o(r,\"default\",{value:n,enumerable:!0}):r,n)),k=n=>a(o({},\"__esModule\",{value:!0}),n);var h=w((z,c)=>{c.exports=_jsx_runtime});var y={};b(y,{default:()=>l,frontmatter:()=>v});var t=x(h()),v={title:\"Comparison of file and component structures among Shadcn-ui, Plane.so and Gitroom.\"};function p(n){let e={a:\"a\",blockquote:\"blockquote\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",strong:\"strong\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:\"In this article, we will look at folder structures in Shadcn-ui, Plane.so and Gitroom used to organise a Next.js project.\"}),`\n`,(0,t.jsx)(e.h1,{id:\"shadcn-ui-file-and-component-structures\",children:(0,t.jsx)(e.strong,{children:\"Shadcn-ui file and component structures:\"})}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*pCqjxDyfuMNk-GmBPj-t4g.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.h2,{id:\"file-structure\",children:(0,t.jsx)(e.strong,{children:\"File structure\"})}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/examples/dashboard/page.tsx\",children:\"Shadcn-ui/ui\"}),\" uses app router and has a \",(0,t.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)\",children:\"Router group named (app)\"}),\".\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"In the (app) folder, you will find a folder with page.tsx and/or layout.tsx in some routes such as \",(0,t.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/colors\",children:\"colors\"}),\", \",(0,t.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/blocks\",children:\"blocks\"}),\", \",(0,t.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/docs\",children:\"docs\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:770/1*cK-HH4G8egQoW9YljjvC8w.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.h2,{id:\"component-structure\",children:(0,t.jsx)(e.strong,{children:\"Component structure\"})}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*_Qy97sLxno32IYajJEOFog.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"In \",(0,t.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/blocks/page.tsx\",children:\"blocks/page.tsx\"}),\", you will find that it imports components that are generic or that can be reused in other pages.\"]}),`\n`,(0,t.jsx)(e.p,{children:\"But wait, there\\u2019s other kind of components.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"If you look at \",(0,t.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples\",children:\"examples route\"}),\", each example has its own component that is specific to an example.\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:873/1*uxEJQYKxq_75VeduDBsacw.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"so there\\u2019s components available at \",(0,t.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/cards/components\",children:\"examples/card/components\"}),\" and then there are also \",(0,t.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/components\",children:\"generic components\"}),\" that can be reused.\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"planeso-file-and-component-structures\",children:(0,t.jsx)(e.strong,{children:\"Plane.so file and component structures:\"})}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.a,{href:\"https://github.com/makeplane/plane/tree/preview\",children:\"plane.so\"}),\" has similar structure to that shadcn-ui/ui where you will find components specific to features by their names as shown below.\"]}),`\n`,(0,t.jsx)(e.h2,{id:\"file-structure-1\",children:(0,t.jsx)(e.strong,{children:\"File structure\"})}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*PJCDz83kmZevh91TErHNAw.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"The file structure in \",(0,t.jsx)(e.a,{href:\"https://plane.so/\",children:\"plane.so\"}),\" uses nested routes but it does have a header.tsx specific to a route defined in all the folders along with page.tsx or layout.tsx\"]}),`\n`,(0,t.jsx)(e.h2,{id:\"component-structure-1\",children:(0,t.jsx)(e.strong,{children:\"Component structure\"})}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*T_TgRfFwPFkbXYC5Wbw8Kw.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"All the components used in the app router are placed inside \",(0,t.jsx)(e.a,{href:\"https://github.com/makeplane/plane/tree/preview/web/core\",children:\"core folder\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:\"So now comes the question, how come we see the imports as \\u201C@/components\\u201D in a router as shown below:\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*SEr4u4d9ckp2s7TuEJ9t7A.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"when there is no components folder at app folder level:\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:853/1*DbYeDx_b3hK6eyDYg7tSCg.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Well, the components are inside core folder and tsconfig.json has the paths defined to locate the folders in core as base.\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*WtGvBiOrJOqvRg7igslhFg.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.h1,{id:\"gitroom-file-and-component-structures\",children:(0,t.jsx)(e.strong,{children:\"Gitroom file and component structures:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Gitroom has a straight forward structure. Routes have page.tsx and each page.tsx uses components from components folder and this components folder contains files specific to features.\"}),`\n`,(0,t.jsx)(e.h2,{id:\"file-structure-2\",children:(0,t.jsx)(e.strong,{children:\"File structure:\"})}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*lOM1G3JZiWbRDfsCYc0gbQ.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"As you can see, router only has one file name page.tsx and that\\u2019s it. We see in shadcn-ui where it contains components specific to a route that are scoped to that route, similarly in plane.so, it has route specific header.tsx along with page.tsx however, one commonality in all of these projects is that there is a components folder that can be reused or specific to a feature depending on the folder name.\"}),`\n`,(0,t.jsx)(e.h2,{id:\"component-structure-2\",children:(0,t.jsx)(e.strong,{children:\"Component structure:\"})}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*EtGQ4CdVtOy25qsu5zluiw.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Notice how the route/file structures has the folder names that match with some of the folders names in component structure.\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.blockquote,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:(0,t.jsx)(e.em,{children:\"Get free courses inspired by the best practices used in open source.\"})})}),`\n`]}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Hey, my name is \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.em,{children:(0,t.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h1,{id:\"references\",children:(0,t.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/cards/components\",children:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/cards/components\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/makeplane/plane/tree/preview\",children:\"https://github.com/makeplane/plane/tree/preview\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/gitroomhq/gitroom/blob/main/apps/frontend/src/app/(site)/launches/page.tsx\",children:\"https://github.com/gitroomhq/gitroom/blob/main/apps/frontend/src/app/(site)/launches/page.tsx\"})}),`\n`]}),`\n`]})]})}function l(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(p,{...n})}):p(n)}return k(y);})();\n;return Component;"
        },
        "_id": "blog/Comparison-of-file.mdx",
        "_raw": {
          "sourceFilePath": "blog/Comparison-of-file.mdx",
          "sourceFileName": "Comparison-of-file.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Comparison-of-file"
        },
        "type": "Doc",
        "slug": "/blog/Comparison-of-file",
        "slugAsParams": "Comparison-of-file"
      },
      "documentHash": "1742022979909",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/component-decorator-in-typedoc.mdx": {
      "document": {
        "title": "Component decorator in TypeDoc\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse the [Component decorator in TypeDoc](https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L100).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*mqWB0bYQCHmQ6Si3hqKxNw.png)\r\n\r\nLet’s take a step back and first understand what’s a decorator in TypeScript.\r\n\r\n# **Decorator in TypeScript**\r\n\r\nA *Decorator* is a special kind of declaration that can be attached to a [class declaration](https://www.typescriptlang.org/docs/handbook/decorators.html#class-decorators), [method](https://www.typescriptlang.org/docs/handbook/decorators.html#method-decorators), [accessor](https://www.typescriptlang.org/docs/handbook/decorators.html#accessor-decorators), [property](https://www.typescriptlang.org/docs/handbook/decorators.html#property-decorators), or [parameter](https://www.typescriptlang.org/docs/handbook/decorators.html#parameter-decorators). Decorators use the form `@expression`, where `expression` must evaluate to a function that will be called at runtime with information about the decorated declaration. — [Source](https://www.typescriptlang.org/docs/handbook/decorators.html).\r\n\r\nFor example, given the decorator `@sealed` we might write the `sealed` function as follows:\r\n\r\n```plaintext\r\nfunction sealed(target) {\r\n  // do something with 'target' ...\r\n}\r\n```\r\n\r\n# **Class decorator in TypeScript**\r\n\r\nLet’s pick a simple and easy to understand example from [TypeScript documentation](https://www.typescriptlang.org/docs/handbook/decorators.html#class-decorators) about how to use class decorator.\r\n\r\n```plaintext\r\n@sealed\r\nclass BugReport {\r\n  type = \"report\";\r\n  title: string;\r\n \r\n  constructor(t: string) {\r\n    this.title = t;\r\n  }\r\n}\r\n```\r\n\r\nHere @sealed is a class decorator applied just above the class declaration. This @sealed is a decorator that is applied at run time.\r\n\r\nIf you want to prevent any modifications to the class BugReport, you could define sealed function as below:\r\n\r\n```plaintext\r\nfunction sealed(constructor: Function) {\r\n  Object.seal(constructor);\r\n  Object.seal(constructor.prototype);\r\n}\r\n```\r\n\r\nWhen `@sealed` is executed, it will seal both the constructor and its prototype, and will therefore prevent any further functionality from being added to or removed from this class during runtime by accessing `BugReport.prototype` or by defining properties on `BugReport` itself — [Source](https://www.typescriptlang.org/docs/handbook/decorators.html#class-decorators)\r\n\r\nWith this knowledge, we are now prepared to understand the [@Component decorator in TypeDoc code base](https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L100).\r\n\r\n# **@Component Decorator in TypeDoc**\r\n\r\n@Component decorator is imported from [lib/utils/components.ts](https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/component.ts#L39)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*xCq0764M6aNzpEdn48DYCg.png)\r\n\r\nThis is a decorator factory that returns an arrow function that is executed at run time. You can read more about [decorator factory in TS docs.](https://www.typescriptlang.org/docs/handbook/decorators.html#decorator-factories)\r\n\r\n```plaintext\r\nexport function Component(options: ComponentOptions) {\r\n    // _context is ClassDecoratorContext, but that then requires a public constructor\r\n    // which Application does not have.\r\n    return (target: Function, _context: unknown) => {\r\n        const proto = target.prototype;\r\n        if (!(proto instanceof AbstractComponent)) {\r\n            throw new Error(\r\n                \"The `Component` decorator can only be used with a subclass of `AbstractComponent`.\",\r\n            );\r\n        }\r\n\r\n        if (options.childClass) {\r\n            if (!(proto instanceof ChildableComponent)) {\r\n                throw new Error(\r\n                    \"The `Component` decorator accepts the parameter `childClass` only when used with a subclass of `ChildableComponent`.\",\r\n                );\r\n            }\r\n\r\n            childMappings.push({\r\n                host: proto,\r\n                child: options.childClass,\r\n            });\r\n        }\r\n\r\n        const name = options.name;\r\n        if (name) {\r\n            proto.componentName = name;\r\n        }\r\n\r\n        // If not marked internal, and if we are a subclass of another component T's declared\r\n        // childClass, then register ourselves as a _defaultComponents of T.\r\n        const internal = !!options.internal;\r\n        if (name && !internal) {\r\n            for (const childMapping of childMappings) {\r\n                if (!(proto instanceof childMapping.child)) {\r\n                    continue;\r\n                }\r\n\r\n                const host = childMapping.host;\r\n                host[\"_defaultComponents\"] = host[\"_defaultComponents\"] || {};\r\n                host[\"_defaultComponents\"][name] = target as any;\r\n                break;\r\n            }\r\n        }\r\n    };\r\n}\r\n```\r\n\r\nThere is a lot happening in this Component decorator, instead of trying to understand it all, let’s pick up on the easy ones we can deduce.\r\n\r\n1. proto instanceOf\r\n    \r\n\r\nThis check is used to throw an error in case the instance is not supported.\r\n\r\n2\\. proto.componentName\r\n\r\nproto.componentName is updated based on name passed to the decorator. In this case, the name is set to “application”.\r\n\r\n3\\. childMappings\r\n\r\n```plaintext\r\n// If not marked internal, and if we are a subclass of \r\n// another component T's declared\r\n// childClass, then register ourselves as a _defaultComponents of T.\r\nconst internal = !!options.internal;\r\nif (name && !internal) {\r\n    for (const childMapping of childMappings) {\r\n        if (!(proto instanceof childMapping.child)) {\r\n            continue;\r\n        }\r\n\r\n        const host = childMapping.host;\r\n        host[\"_defaultComponents\"] = host[\"_defaultComponents\"] || {};\r\n        host[\"_defaultComponents\"][name] = target as any;\r\n        break;\r\n    }\r\n}\r\n```\r\n\r\nThere are some updates made to childMapping.host\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L100](https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L100)\r\n    \r\n2. [https://www.typescriptlang.org/docs/handbook/decorators.html](https://www.typescriptlang.org/docs/handbook/decorators.html)\r\n    \r\n3. [https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/component.ts#L39](https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/component.ts#L39)\r\n    \r\n4. [https://www.typescriptlang.org/docs/handbook/decorators.html#decorator-factories](https://www.typescriptlang.org/docs/handbook/decorators.html#decorator-factories)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----818818d52623--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),N=(a,n)=>{for(var t in n)r(a,t,{get:n[t],enumerable:!0})},i=(a,n,t,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let s of u(n))!f.call(a,s)&&s!==t&&r(a,s,{get:()=>n[s],enumerable:!(c=m(n,s))||c.enumerable});return a};var y=(a,n,t)=>(t=a!=null?p(g(a)):{},i(n||!a||!a.__esModule?r(t,\"default\",{value:a,enumerable:!0}):t,a)),w=a=>i(r({},\"__esModule\",{value:!0}),a);var o=b((T,l)=>{l.exports=_jsx_runtime});var k={};N(k,{default:()=>h,frontmatter:()=>C});var e=y(o()),C={title:\"Component decorator in TypeDoc\"};function d(a){let n={a:\"a\",br:\"br\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"In this article, we analyse the \",(0,e.jsx)(n.a,{href:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L100\",children:\"Component decorator in TypeDoc\"}),\".\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*mqWB0bYQCHmQ6Si3hqKxNw.png\",alt:\"\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Let\\u2019s take a step back and first understand what\\u2019s a decorator in TypeScript.\"}),`\n`,(0,e.jsx)(n.h1,{id:\"decorator-in-typescript\",children:(0,e.jsx)(n.strong,{children:\"Decorator in TypeScript\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"A \",(0,e.jsx)(n.em,{children:\"Decorator\"}),\" is a special kind of declaration that can be attached to a \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html#class-decorators\",children:\"class declaration\"}),\", \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html#method-decorators\",children:\"method\"}),\", \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html#accessor-decorators\",children:\"accessor\"}),\", \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html#property-decorators\",children:\"property\"}),\", or \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html#parameter-decorators\",children:\"parameter\"}),\". Decorators use the form \",(0,e.jsx)(n.code,{children:\"@expression\"}),\", where \",(0,e.jsx)(n.code,{children:\"expression\"}),\" must evaluate to a function that will be called at runtime with information about the decorated declaration. \\u2014 \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html\",children:\"Source\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"For example, given the decorator \",(0,e.jsx)(n.code,{children:\"@sealed\"}),\" we might write the \",(0,e.jsx)(n.code,{children:\"sealed\"}),\" function as follows:\"]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"function sealed(target) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  // do something with 'target' ...\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})}),`\n`,(0,e.jsx)(n.h1,{id:\"class-decorator-in-typescript\",children:(0,e.jsx)(n.strong,{children:\"Class decorator in TypeScript\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Let\\u2019s pick a simple and easy to understand example from \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html#class-decorators\",children:\"TypeScript documentation\"}),\" about how to use class decorator.\"]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"@sealed\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"class BugReport {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'  type = \"report\";'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  title: string;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" \"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  constructor(t: string) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    this.title = t;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"Here @sealed is a class decorator applied just above the class declaration. This @sealed is a decorator that is applied at run time.\"}),`\n`,(0,e.jsx)(n.p,{children:\"If you want to prevent any modifications to the class BugReport, you could define sealed function as below:\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"function sealed(constructor: Function) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  Object.seal(constructor);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  Object.seal(constructor.prototype);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"When \",(0,e.jsx)(n.code,{children:\"@sealed\"}),\" is executed, it will seal both the constructor and its prototype, and will therefore prevent any further functionality from being added to or removed from this class during runtime by accessing \",(0,e.jsx)(n.code,{children:\"BugReport.prototype\"}),\" or by defining properties on \",(0,e.jsx)(n.code,{children:\"BugReport\"}),\" itself \\u2014 \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html#class-decorators\",children:\"Source\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"With this knowledge, we are now prepared to understand the \",(0,e.jsx)(n.a,{href:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L100\",children:\"@Component decorator in TypeDoc code base\"}),\".\"]}),`\n`,(0,e.jsx)(n.h1,{id:\"component-decorator-in-typedoc\",children:(0,e.jsx)(n.strong,{children:\"@Component Decorator in TypeDoc\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"@Component decorator is imported from \",(0,e.jsx)(n.a,{href:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/component.ts#L39\",children:\"lib/utils/components.ts\"})]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*xCq0764M6aNzpEdn48DYCg.png\",alt:\"\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"This is a decorator factory that returns an arrow function that is executed at run time. You can read more about \",(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html#decorator-factories\",children:\"decorator factory in TS docs.\"})]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"export function Component(options: ComponentOptions) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    // _context is ClassDecoratorContext, but that then requires a public constructor\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    // which Application does not have.\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    return (target: Function, _context: unknown) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        const proto = target.prototype;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        if (!(proto instanceof AbstractComponent)) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"            throw new Error(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'                \"The `Component` decorator can only be used with a subclass of `AbstractComponent`.\",'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"            );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        if (options.childClass) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"            if (!(proto instanceof ChildableComponent)) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"                throw new Error(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'                    \"The `Component` decorator accepts the parameter `childClass` only when used with a subclass of `ChildableComponent`.\",'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"                );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"            }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"            childMappings.push({\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"                host: proto,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"                child: options.childClass,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"            });\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        const name = options.name;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        if (name) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"            proto.componentName = name;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        // If not marked internal, and if we are a subclass of another component T's declared\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        // childClass, then register ourselves as a _defaultComponents of T.\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        const internal = !!options.internal;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        if (name && !internal) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"            for (const childMapping of childMappings) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"                if (!(proto instanceof childMapping.child)) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"                    continue;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"                }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"                const host = childMapping.host;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'                host[\"_defaultComponents\"] = host[\"_defaultComponents\"] || {};'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'                host[\"_defaultComponents\"][name] = target as any;'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"                break;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"            }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    };\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"There is a lot happening in this Component decorator, instead of trying to understand it all, let\\u2019s pick up on the easy ones we can deduce.\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsx)(n.li,{children:\"proto instanceOf\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:\"This check is used to throw an error in case the instance is not supported.\"}),`\n`,(0,e.jsx)(n.p,{children:\"2. proto.componentName\"}),`\n`,(0,e.jsx)(n.p,{children:\"proto.componentName is updated based on name passed to the decorator. In this case, the name is set to \\u201Capplication\\u201D.\"}),`\n`,(0,e.jsx)(n.p,{children:\"3. childMappings\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// If not marked internal, and if we are a subclass of \"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// another component T's declared\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// childClass, then register ourselves as a _defaultComponents of T.\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const internal = !!options.internal;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"if (name && !internal) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    for (const childMapping of childMappings) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        if (!(proto instanceof childMapping.child)) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"            continue;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        const host = childMapping.host;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'        host[\"_defaultComponents\"] = host[\"_defaultComponents\"] || {};'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'        host[\"_defaultComponents\"][name] = target as any;'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        break;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"There are some updates made to childMapping.host\"}),`\n`,(0,e.jsx)(n.h1,{id:\"about-me\",children:(0,e.jsx)(n.strong,{children:\"About me:\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(n.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Github \\u2014 \",(0,e.jsx)(n.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My website \\u2014 \",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Youtube channel \\u2014 \",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Learning platform \\u2014 \",(0,e.jsx)(n.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Codebase Architecture \\u2014 \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Best practices \\u2014 \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Production-grade projects \\u2014 \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(n.h1,{id:\"references\",children:(0,e.jsx)(n.strong,{children:\"References:\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L100\",children:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L100\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html\",children:\"https://www.typescriptlang.org/docs/handbook/decorators.html\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/component.ts#L39\",children:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/component.ts#L39\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/decorators.html#decorator-factories\",children:\"https://www.typescriptlang.org/docs/handbook/decorators.html#decorator-factories\"})}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsxs)(n.a,{href:\"https://medium.com/tag/javascript?source=post_page-----818818d52623--------------------------------\",children:[(0,e.jsx)(n.br,{}),`\n`]})})]})}function h(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(d,{...a})}):d(a)}return w(k);})();\n;return Component;"
        },
        "_id": "blog/component-decorator-in-typedoc.mdx",
        "_raw": {
          "sourceFilePath": "blog/component-decorator-in-typedoc.mdx",
          "sourceFileName": "component-decorator-in-typedoc.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/component-decorator-in-typedoc"
        },
        "type": "Doc",
        "slug": "/blog/component-decorator-in-typedoc",
        "slugAsParams": "component-decorator-in-typedoc"
      },
      "documentHash": "1740489186266",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/configure-devtools-for-zustand.mdx": {
      "document": {
        "title": "How to configure DevTools for your Zustand store?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, you will learn how to configure DevTools for your Zustand store. We will use the Lobechat [source code](https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts#L24) and [Zustand documentation](https://zustand.docs.pmnd.rs/middlewares/devtools) as our reference.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*Ya-10RsM-QMMpFnP0I7x9A.png)\r\n\r\n### Debugging a store\r\n\r\nIn the docs, [Debugging a store](https://zustand.docs.pmnd.rs/middlewares/devtools#debugging-a-store) provides this below code as an example:\r\n\r\n```js\r\nimport { create, StateCreator } from 'zustand'\r\nimport { devtools } from 'zustand/middleware'\r\n\r\ntype JungleStore = {\r\n  bears: number\r\n  addBear: () => void\r\n  fishes: number\r\n  addFish: () => void\r\n}\r\n\r\nconst useJungleStore = create<JungleStore>()(\r\n devtools((…args) => ({\r\n   bears: 0,\r\n   addBear: () =>\r\n     set((state) => ({ bears: state.bears + 1 }), undefined, 'jungle/addBear'),\r\n   fishes: 0,\r\n   addFish: () => set(\r\n     (state) => ({ fishes: state.fishes + 1 }),\r\n     undefined,\r\n     'jungle/addFish',\r\n     ),\r\n   })),\r\n)\r\n```\r\n\r\nThe question to ask here is how is this different from the simple `createStore` API without DevTools. In the [Create a store documentation](https://zustand.docs.pmnd.rs/getting-started/introduction#first-create-a-store),  \r\nyou will see this below code snippet:\r\n\r\n```js\r\nimport { create } from 'zustand'\r\nconst useStore = create((set) => ({\r\n bears: 0,\r\n increasePopulation: () => set((state) => ({ bears: state.bears + 1 })),\r\n removeAllBears: () => set({ bears: 0 }),\r\n updateBears: (newBears) => set({ bears: newBears }),\r\n}))\r\n```\r\n\r\nWell, can you tell the difference between these two?\r\n\r\n1\\. Debug example has better types.\r\n\r\n```js\r\ntype JungleStore = {\r\n bears: number\r\n addBear: () => void\r\n fishes: number\r\n addFish: () => void\r\n}\r\nconst useJungleStore = create<JungleStore>()(\r\n```\r\n\r\n2\\. The function passed to `create` is wrapped over by `devTools` function in the Debug example.\r\n\r\n```js\r\n// Debugging enabled\r\nconst useJungleStore = create<JungleStore>()(\r\n devtools((…args) => ({\r\n// Without debugging\r\nconst useStore = create((set) => ({\r\n bears: 0,\r\n```\r\n\r\n3\\. There are three parameters passed into the `set` function when the debug is enabled.\r\n\r\n```js\r\n// Debugging enabled\r\naddBear: () =>\r\n set((state) => ({ bears: state.bears + 1 }), undefined, 'jungle/addBear'),\r\n// Without debugging\r\nincreasePopulation: () => set((state) => ({ bears: state.bears + 1 })),\r\n```\r\n\r\nIt is easy to understand that the third parameter is the action name, but why is the second parameter above is defined as `undefined`. I found the below statements about this `undefined` parameter in the documentation.\r\n\r\n> Additionally, to preserve the default behavior of the replacement logic, the second parameter should be set to undefined.\r\n\r\n> Do not set the second parameter to true or false unless you want to override the   \r\n> default replacement logic\r\n\r\nNow that we understand the basics of configuring DevTools for a Zustand store. Let’s review the code in [Lobechat Zustand store](https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts).\r\n\r\n### DevTools configuration in Lobechat\r\n\r\nLobechat’s state management is complex, but for simplicity purposes, let’s choose [store/session/store.ts](https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts)\r\n\r\n#### devTools\r\n\r\nThe way devTools is implemented is [different in LobeChat](https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts#L24C1-L33C3).\r\n\r\n```js\r\nconst devtools = createDevtools('session');\r\n\r\nexport const useSessionStore = createWithEqualityFn<SessionStore>()(\r\n subscribeWithSelector(\r\n devtools(createStore, {\r\n   name: 'LobeChat_Session' + (isDev ? '_DEV' : ''),\r\n }),\r\n ),\r\n shallow,\r\n);\r\n```\r\n\r\nInstead of directly importing `devtools` from `zustand/middleware`. `createDevTools` is a function imported from [createDevTools.ts](https://github.com/lobehub/lobe-chat/blob/main/src/store/middleware/createDevtools.ts#L6) and has the below code:\r\n\r\n```js\r\nimport { optionalDevtools } from 'zustand-utils';\r\nimport { devtools as _devtools } from 'zustand/middleware';\r\n\r\nimport { isDev } from '@/utils/env';\r\n\r\nexport const createDevtools =\r\n  (name: string): typeof _devtools =>\r\n  (initializer) => {\r\n    let showDevtools = false;\r\n\r\n    // check url to show devtools\r\n    if (typeof window !== 'undefined') {\r\n      const url = new URL(window.location.href);\r\n      const debug = url.searchParams.get('debug');\r\n      if (debug?.includes(name)) {\r\n        showDevtools = true;\r\n      }\r\n    }\r\n\r\n    return optionalDevtools(showDevtools)(initializer, {\r\n      name: `LobeChat_${name}` + (isDev ? '_DEV' : ''),\r\n    });\r\n  };\r\n```\r\n\r\nThis code tells us that if the url contains a query param named showDevtools and is true, only then show DevTools and uses `optionalDevTools` imported from `zustand-utils`.\r\n\r\nOften times, concepts found in documentation are not implemented as is in the open-source, this above way of configuring debugging demonstrates that developers at LobeChat are extremely good at what they do.\r\n\r\n#### Action labels in the DevTools\r\n\r\nEven the action labels are done differently. [At line 167 in session slice action](https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L167), you will find this below code snippet:\r\n\r\n```js\r\nswitchSession: (sessionId) => {\r\n if (get().activeId === sessionId) return;\r\nset({ activeId: sessionId }, false, n(`activeSession/${sessionId}`));\r\n},\r\n```\r\n\r\nWhat’s the ’n’ here? [Line 31 indicates](https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L31C1-L31C35) its got something to do with Namespace.\r\n\r\n```js\r\nconst n = setNamespace('session');\r\n```\r\n\r\nThis namespace concept deserves its own article and you can find it on our [blog](https://thinkthroo.com/blog).\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts](https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts)\r\n    \r\n2. h[ttps://zustand.docs.pmnd.rs/middlewares/devtools](https://zustand.docs.pmnd.rs/middlewares/devtools)\r\n    \r\n3. [https://redux.js.org/style-guide/#use-the-redux-devtools-extension-for-debugging](https://redux.js.org/style-guide/#use-the-redux-devtools-extension-for-debugging)\r\n    \r\n4. [https://zustand.docs.pmnd.rs/getting-started/introduction#first-create-a-store](https://zustand.docs.pmnd.rs/getting-started/introduction#first-create-a-store)\r\n    \r\n5. [https://github.com/lobehub/lobe-chat/blob/main/src/store/middleware/createDevtools.ts#L6](https://github.com/lobehub/lobe-chat/blob/main/src/store/middleware/createDevtools.ts#L6)",
          "code": "var Component=(()=>{var h=Object.create;var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var s in e)o(n,s,{get:e[s],enumerable:!0})},F=(n,e,s,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(n,r)&&r!==s&&o(n,r,{get:()=>e[r],enumerable:!(c=p(e,r))||c.enumerable});return n};var f=(n,e,s)=>(s=n!=null?h(m(n)):{},F(e||!n||!n.__esModule?o(s,\"default\",{value:n,enumerable:!0}):s,n)),N=n=>F(o({},\"__esModule\",{value:!0}),n);var t=g((j,a)=>{a.exports=_jsx_runtime});var w={};b(w,{default:()=>d,frontmatter:()=>v});var l=f(t()),v={title:\"How to configure DevTools for your Zustand\\xA0store?\"};function i(n){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, you will learn how to configure DevTools for your Zustand store. We will use the Lobechat \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts#L24\",children:\"source code\"}),\" and \",(0,l.jsx)(e.a,{href:\"https://zustand.docs.pmnd.rs/middlewares/devtools\",children:\"Zustand documentation\"}),\" as our reference.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*Ya-10RsM-QMMpFnP0I7x9A.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"debugging-astore\",children:\"Debugging a\\xA0store\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"In the docs, \",(0,l.jsx)(e.a,{href:\"https://zustand.docs.pmnd.rs/middlewares/devtools#debugging-a-store\",children:\"Debugging a store\"}),\" provides this below code as an example:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" StateCreator \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'zustand'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" devtools \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'zustand/middleware'\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" JungleStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" number\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  addBear\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  fishes\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" number\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  addFish\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useJungleStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"JungleStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">()(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" devtools\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"\\u2026args\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"   bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"   addBear\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"     set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"bears \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }),\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" undefined,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'jungle/addBear'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"   fishes\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"   addFish\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fishes\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fishes \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     undefined,\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     'jungle/addFish'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     ),\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   })),\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"The question to ask here is how is this different from the simple \",(0,l.jsx)(e.code,{children:\"createStore\"}),\" API without DevTools. In the \",(0,l.jsx)(e.a,{href:\"https://zustand.docs.pmnd.rs/getting-started/introduction#first-create-a-store\",children:\"Create a store documentation\"}),\",\",(0,l.jsx)(e.br,{}),`\n`,\"you will see this below code snippet:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'zustand'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" increasePopulation\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"bears \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })),\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" removeAllBears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }),\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" updateBears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"newBears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" newBears \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}))\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Well, can you tell the difference between these two?\"}),`\n`,(0,l.jsx)(e.p,{children:\"1. Debug example has better types.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" JungleStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" number\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" addBear\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fishes\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" number\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" addFish\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useJungleStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"JungleStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">()(\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"2. The function passed to \",(0,l.jsx)(e.code,{children:\"create\"}),\" is wrapped over by \",(0,l.jsx)(e.code,{children:\"devTools\"}),\" function in the Debug example.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Debugging enabled\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useJungleStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"JungleStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">()(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" devtools\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"\\u2026args\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Without debugging\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"const useStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"3. There are three parameters passed into the \",(0,l.jsx)(e.code,{children:\"set\"}),\" function when the debug is enabled.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Debugging enabled\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"addBear\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"bears \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }),\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" undefined,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'jungle/addBear'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Without debugging\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"increasePopulation\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" bears\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"bears \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })),\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"It is easy to understand that the third parameter is the action name, but why is the second parameter above is defined as \",(0,l.jsx)(e.code,{children:\"undefined\"}),\". I found the below statements about this \",(0,l.jsx)(e.code,{children:\"undefined\"}),\" parameter in the documentation.\"]}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsx)(e.p,{children:\"Additionally, to preserve the default behavior of the replacement logic, the second parameter should be set to undefined.\"}),`\n`]}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsxs)(e.p,{children:[\"Do not set the second parameter to true or false unless you want to override the\\xA0\",(0,l.jsx)(e.br,{}),`\n`,\"default replacement logic\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Now that we understand the basics of configuring DevTools for a Zustand store. Let\\u2019s review the code in \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts\",children:\"Lobechat Zustand store\"}),\".\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"devtools-configuration-inlobechat\",children:\"DevTools configuration in\\xA0Lobechat\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"Lobechat\\u2019s state management is complex, but for simplicity purposes, let\\u2019s choose \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts\",children:\"store/session/store.ts\"})]}),`\n`,(0,l.jsx)(e.h4,{id:\"devtools\",children:\"devTools\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"The way devTools is implemented is \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts#L24C1-L33C3\",children:\"different in LobeChat\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" devtools \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createDevtools\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'session'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useSessionStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createWithEqualityFn\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"SessionStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">()(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" subscribeWithSelector\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" devtools\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"   name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'LobeChat_Session'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" +\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isDev \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '_DEV'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ''\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }),\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ),\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" shallow\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Instead of directly importing \",(0,l.jsx)(e.code,{children:\"devtools\"}),\" from \",(0,l.jsx)(e.code,{children:\"zustand/middleware\"}),\". \",(0,l.jsx)(e.code,{children:\"createDevTools\"}),\" is a function imported from \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/middleware/createDevtools.ts#L6\",children:\"createDevTools.ts\"}),\" and has the below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" optionalDevtools \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'zustand-utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" devtools \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" _devtools \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'zustand/middleware'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" isDev \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/utils/env'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createDevtools \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" _devtools \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"initializer\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    let\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" showDevtools \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false;\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" check url to show devtools\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" window \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'undefined'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" url \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"window\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"location\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"href\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" debug \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" url\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"searchParams\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'debug'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"debug\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        showDevtools \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true;\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" optionalDevtools\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"showDevtools\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"initializer\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `LobeChat_${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" +\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isDev \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '_DEV'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ''\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  };\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"This code tells us that if the url contains a query param named showDevtools and is true, only then show DevTools and uses \",(0,l.jsx)(e.code,{children:\"optionalDevTools\"}),\" imported from \",(0,l.jsx)(e.code,{children:\"zustand-utils\"}),\".\"]}),`\n`,(0,l.jsx)(e.p,{children:\"Often times, concepts found in documentation are not implemented as is in the open-source, this above way of configuring debugging demonstrates that developers at LobeChat are extremely good at what they do.\"}),`\n`,(0,l.jsx)(e.h4,{id:\"action-labels-in-thedevtools\",children:\"Action labels in the\\xA0DevTools\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"Even the action labels are done differently. \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L167\",children:\"At line 167 in session slice action\"}),\", you will find this below code snippet:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"switchSession\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"sessionId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"activeId \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" sessionId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" return;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" activeId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" sessionId \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"},\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" n\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`activeSession/${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"sessionId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"},\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"What\\u2019s the \\u2019n\\u2019 here? \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L31C1-L31C35\",children:\"Line 31 indicates\"}),\" its got something to do with Namespace.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" n \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setNamespace\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'session'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"This namespace concept deserves its own article and you can find it on our \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/blog\",children:\"blog\"}),\".\"]}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/store.ts\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[\"h\",(0,l.jsx)(e.a,{href:\"https://zustand.docs.pmnd.rs/middlewares/devtools\",children:\"ttps://zustand.docs.pmnd.rs/middlewares/devtools\"})]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://redux.js.org/style-guide/#use-the-redux-devtools-extension-for-debugging\",children:\"https://redux.js.org/style-guide/#use-the-redux-devtools-extension-for-debugging\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://zustand.docs.pmnd.rs/getting-started/introduction#first-create-a-store\",children:\"https://zustand.docs.pmnd.rs/getting-started/introduction#first-create-a-store\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/middleware/createDevtools.ts#L6\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/middleware/createDevtools.ts#L6\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return N(w);})();\n;return Component;"
        },
        "_id": "blog/configure-devtools-for-zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/configure-devtools-for-zustand.mdx",
          "sourceFileName": "configure-devtools-for-zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/configure-devtools-for-zustand"
        },
        "type": "Doc",
        "slug": "/blog/configure-devtools-for-zustand",
        "slugAsParams": "configure-devtools-for-zustand"
      },
      "documentHash": "1740489186268",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Convert-string-to-camelCase.mdx": {
      "document": {
        "title": "Convert a string to camelCase using this function in Javascript.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nEver needed to convert a string to camelCase? I found an interesting code snippet while exploring the open-source [Supabase repository](https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L16). Here’s the method they use:\r\n\r\n```plaintext\r\nfunction featureToCamelCase(feature: Feature) {\r\n  return feature\r\n    .replace(/:/g, '_')\r\n    .split('_')\r\n    .map((word, index) => (index === 0 ? word : word[0].toUpperCase() + word.slice(1)))\r\n    .join('') as FeatureToCamelCase<typeof feature>\r\n}\r\n```\r\n\r\nThis function is pretty neat. It replaces colons with underscores, splits the string into words, and then maps through each word to convert it to camelCase. The first word is kept in lowercase, and the subsequent words have their first character capitalized before being joined back together. Simple yet effective!\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*Vlc1Hh_zkfO6TsdqUQEEog.png)\r\n\r\nI came across another approach on Stack Overflow that doesn’t use regular expressions. Here’s the alternative:\r\n\r\n```plaintext\r\nfunction toCamelCase(str) {\r\n  return str.split(' ').map(function(word, index) {\r\n    // If it is the first word make sure to lowercase all the chars.\r\n    if (index == 0) {\r\n      return word.toLowerCase();\r\n    }\r\n    // If it is not the first word only upper case the first char and lowercase the rest.\r\n    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\r\n  }).join('');\r\n}\r\n```\r\n\r\nThis [code snippet from SO](https://stackoverflow.com/a/35976812) has comments explaining what this code does except it does not use any sort of regex. The code found in Supabase’s way of converting a string to camelCase is very similar to this [SO answer](https://stackoverflow.com/a/35976812), except for the comments and the regex used.\r\n\r\n```plaintext\r\n.replace(/:/g, '_')\r\n```\r\n\r\nThis method splits the string by spaces and then maps over each word. The first word is entirely lowercased, while the subsequent words are capitalized at the first character and lowercased for the rest. Finally, the words are joined back together to form a camelCase string.\r\n\r\nOne interesting comment from a Stack Overflow user mentioned the performance advantage of this approach:\r\n\r\n> *“+1 for not using regular expressions, even if the question asked for a solution using them. This is a much clearer solution, and also a clear win for performance (because processing complex regular expressions is a much harder task than just iterating over a bunch of strings and joining bits of them together). See jsperf.com/camel-casing-regexp-or-character-manipulation/1 where I’ve taken some of the examples here along with this one (and also my own modest improvement of it for performance, although I would probably prefer this version for clarity’s sake in most cases).”*\r\n\r\nBoth methods have their merits. The regex approach in the Supabase code is concise and leverages powerful string manipulation techniques. On the other hand, the non-regex approach is praised for its clarity and performance, as it avoids the computational overhead associated with regular expressions.\r\n\r\nHere’s how you can choose between them:\r\n\r\n* **Use the regex approach** if you need a compact, one-liner solution that leverages JavaScript’s powerful regex capabilities. Also be sure to add comments explaining what your regex does, so that your future self or next dev working with your code can understand.\r\n    \r\n* **Opt for the non-regex method** if you prioritize readability and performance, especially when dealing with longer strings or running this conversion multiple times.\r\n    \r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png)\r\n\r\n> [*Get free courses inspired by the best practices used in open source.*](https://app.thinkthroo.com/best-practices)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L16](https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L16)\r\n    \r\n2. [https://stackoverflow.com/a/35976812](https://stackoverflow.com/a/35976812)",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var w=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),b=(a,e)=>{for(var t in e)s(a,t,{get:e[t],enumerable:!0})},o=(a,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!f.call(a,r)&&r!==t&&s(a,r,{get:()=>e[r],enumerable:!(i=m(e,r))||i.enumerable});return a};var x=(a,e,t)=>(t=a!=null?p(g(a)):{},o(e||!a||!a.__esModule?s(t,\"default\",{value:a,enumerable:!0}):t,a)),y=a=>o(s({},\"__esModule\",{value:!0}),a);var h=w((N,c)=>{c.exports=_jsx_runtime});var k={};b(k,{default:()=>d,frontmatter:()=>v});var n=x(h()),v={title:\"Convert a string to camelCase using this function in Javascript.\"};function l(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"Ever needed to convert a string to camelCase? I found an interesting code snippet while exploring the open-source \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L16\",children:\"Supabase repository\"}),\". Here\\u2019s the method they use:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function featureToCamelCase(feature: Feature) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return feature\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    .replace(/:/g, '_')\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    .split('_')\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    .map((word, index) => (index === 0 ? word : word[0].toUpperCase() + word.slice(1)))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    .join('') as FeatureToCamelCase<typeof feature>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This function is pretty neat. It replaces colons with underscores, splits the string into words, and then maps through each word to convert it to camelCase. The first word is kept in lowercase, and the subsequent words have their first character capitalized before being joined back together. Simple yet effective!\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*Vlc1Hh_zkfO6TsdqUQEEog.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"I came across another approach on Stack Overflow that doesn\\u2019t use regular expressions. Here\\u2019s the alternative:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function toCamelCase(str) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return str.split(' ').map(function(word, index) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    // If it is the first word make sure to lowercase all the chars.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    if (index == 0) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return word.toLowerCase();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    // If it is not the first word only upper case the first char and lowercase the rest.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }).join('');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This \",(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/a/35976812\",children:\"code snippet from SO\"}),\" has comments explaining what this code does except it does not use any sort of regex. The code found in Supabase\\u2019s way of converting a string to camelCase is very similar to this \",(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/a/35976812\",children:\"SO answer\"}),\", except for the comments and the regex used.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\".replace(/:/g, '_')\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"This method splits the string by spaces and then maps over each word. The first word is entirely lowercased, while the subsequent words are capitalized at the first character and lowercased for the rest. Finally, the words are joined back together to form a camelCase string.\"}),`\n`,(0,n.jsx)(e.p,{children:\"One interesting comment from a Stack Overflow user mentioned the performance advantage of this approach:\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:\"\\u201C+1 for not using regular expressions, even if the question asked for a solution using them. This is a much clearer solution, and also a clear win for performance (because processing complex regular expressions is a much harder task than just iterating over a bunch of strings and joining bits of them together). See jsperf.com/camel-casing-regexp-or-character-manipulation/1 where I\\u2019ve taken some of the examples here along with this one (and also my own modest improvement of it for performance, although I would probably prefer this version for clarity\\u2019s sake in most cases).\\u201D\"})}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Both methods have their merits. The regex approach in the Supabase code is concise and leverages powerful string manipulation techniques. On the other hand, the non-regex approach is praised for its clarity and performance, as it avoids the computational overhead associated with regular expressions.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Here\\u2019s how you can choose between them:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Use the regex approach\"}),\" if you need a compact, one-liner solution that leverages JavaScript\\u2019s powerful regex capabilities. Also be sure to add comments explaining what your regex does, so that your future self or next dev working with your code can understand.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Opt for the non-regex method\"}),\" if you prioritize readability and performance, especially when dealing with longer strings or running this conversion multiple times.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:(0,n.jsx)(e.em,{children:\"Get free courses inspired by the best practices used in open source.\"})})}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L16\",children:\"https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L16\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/a/35976812\",children:\"https://stackoverflow.com/a/35976812\"})}),`\n`]}),`\n`]})]})}function d(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(l,{...a})}):l(a)}return y(k);})();\n;return Component;"
        },
        "_id": "blog/Convert-string-to-camelCase.mdx",
        "_raw": {
          "sourceFilePath": "blog/Convert-string-to-camelCase.mdx",
          "sourceFileName": "Convert-string-to-camelCase.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Convert-string-to-camelCase"
        },
        "type": "Doc",
        "slug": "/blog/Convert-string-to-camelCase",
        "slugAsParams": "Convert-string-to-camelCase"
      },
      "documentHash": "1741940421240",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/copilotkit-usage-in-postiz.mdx": {
      "document": {
        "title": "Copilotkit usage in Postiz\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse [CopilotTextArea](https://docs.copilotkit.ai/reference/components/CopilotTextarea) usage in [Postiz](https://github.com/gitroomhq/postiz-app). [Postiz](https://github.com/gitroomhq/postiz-app) is an open-source social media scheduling tool. As I was reading through its source code, I wanted to find out what sort of editor Postiz uses to let you write content and that is when I came across a file named [editor.tsx](https://github.com/gitroomhq/postiz-app/blob/e4ac191aad8bfc93c56f430f336ef179d80d475a/apps/frontend/src/components/launches/editor.tsx#L45)\r\n\r\nThere’s two kinds of editor in this `editor.tsx` file based on `user.tier.ai` flag.\r\n\r\n* CopilotTextarea\r\n    \r\n* MDEditor\r\n    \r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*LqUrrIXheoSKGJ47Uzi7OQ.png)\r\n\r\n### CopilotTextarea\r\n\r\nCopilotTextarea is an AI-powered textarea component for your application, which serves as a drop-in replacement for any textarea.\r\n\r\n[Read more about CopilotTextarea](https://docs.copilotkit.ai/reference/components/CopilotTextarea).\r\n\r\n#### Example provided in the documentation:\r\n\r\n```plaintext\r\nimport { CopilotTextarea } from '@copilotkit/react-textarea';\r\nimport \"@copilotkit/react-textarea/styles.css\";\r\n \r\n<CopilotTextarea\r\n autosuggestionsConfig={{\r\n textareaPurpose:\r\n \"the body of an email message\",\r\n chatApiConfigs: {},\r\n }}\r\n/>\r\n```\r\n\r\nLet’s compare this with the code snippet from [Postiz editor.tsx](https://github.com/gitroomhq/postiz-app/blob/e4ac191aad8bfc93c56f430f336ef179d80d475a/apps/frontend/src/components/launches/editor.tsx#L44). This is how Postiz has configured its CopilotTextarea.\r\n\r\n```plaintext\r\n<CopilotTextarea\r\n   disableBranding={true}\r\n   className={clsx(\r\n   '!min-h-40 !max-h-80 p-2 overflow-hidden bg-customColor2 outline-none'\r\n   )}\r\n   value={props.value}\r\n   onChange={(e) => props?.onChange?.(e.target.value)}\r\n   placeholder=\"Write your reply…\"\r\n   autosuggestionsConfig={{\r\n   textareaPurpose: `Assist me in writing social media posts.`,\r\n   chatApiConfigs: {},\r\n   }}\r\n />\r\n```\r\n\r\nAttributes used in Postiz are:\r\n\r\n* disableBranding\r\n    \r\n* className\r\n    \r\n* value\r\n    \r\n* onChange\r\n    \r\n* placeholder\r\n    \r\n* autosuggestionsConfig\r\n    \r\n\r\n[Read the documentation](https://docs.copilotkit.ai/reference/components/CopilotTextarea) to find out more about these attributes.\r\n\r\n### MDEditor\r\n\r\nIf you do not have AI tier enabled, you will be using MDEditor by [@uiw/react-md-editor](https://www.npmjs.com/package/@uiw/react-md-editor) \r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*MvdFhVXdofSZBT5kebVy4g.png)\r\n\r\nMDEditor is a simple markdown editor with preview, implemented with React.js and TypeScript. This React Component aims to provide a simple Markdown editor with syntax highlighting support. This is based on textarea encapsulation, so it does not depend on any modern code editors such as Acs, CodeMirror, Monaco etc.\r\n\r\nMDEditor has 115k weekly downloads in the npm registry.\r\n\r\n#### Example usage\r\n\r\nThis below code is picked from MDEditor documentation.\r\n\r\n```plaintext\r\nimport React from \"react\";\r\nimport MDEditor from '@uiw/react-md-editor';\r\n\r\nexport default function App() {\r\n  \r\n  const [value, setValue] = React.useState(\"**Hello world!!!**\");\r\n \r\n  return (\r\n   <div className=\"container\">\r\n     <MDEditor\r\n     value={value}\r\n     onChange={setValue}\r\n     />\r\n     <MDEditor.Markdown source={value} style={{ whiteSpace: 'pre-wrap' }} />\r\n   </div>\r\n );\r\n}\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/gitroomhq/postiz-app/blob/e4ac191aad8bfc93c56f430f336ef179d80d475a/apps/frontend/src/components/launches/editor.tsx#L45](https://github.com/gitroomhq/postiz-app/blob/e4ac191aad8bfc93c56f430f336ef179d80d475a/apps/frontend/src/components/launches/editor.tsx#L45)\r\n    \r\n2. [https://docs.copilotkit.ai/reference/components/CopilotTextarea](https://docs.copilotkit.ai/reference/components/CopilotTextarea)\r\n    \r\n3. [https://docs.copilotkit.ai/quickstart](https://docs.copilotkit.ai/quickstart)\r\n    \r\n4. [https://www.npmjs.com/package/@uiw/react-md-editor](https://www.npmjs.com/package/@uiw/react-md-editor)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var x=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),w=(a,e)=>{for(var i in e)r(a,i,{get:e[i],enumerable:!0})},c=(a,e,i,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of u(e))!f.call(a,t)&&t!==i&&r(a,t,{get:()=>e[t],enumerable:!(s=m(e,t))||s.enumerable});return a};var b=(a,e,i)=>(i=a!=null?p(g(a)):{},c(e||!a||!a.__esModule?r(i,\"default\",{value:a,enumerable:!0}):i,a)),N=a=>c(r({},\"__esModule\",{value:!0}),a);var o=x((v,l)=>{l.exports=_jsx_runtime});var y={};w(y,{default:()=>h,frontmatter:()=>k});var n=b(o()),k={title:\"Copilotkit usage in Postiz\"};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse \",(0,n.jsx)(e.a,{href:\"https://docs.copilotkit.ai/reference/components/CopilotTextarea\",children:\"CopilotTextArea\"}),\" usage in \",(0,n.jsx)(e.a,{href:\"https://github.com/gitroomhq/postiz-app\",children:\"Postiz\"}),\". \",(0,n.jsx)(e.a,{href:\"https://github.com/gitroomhq/postiz-app\",children:\"Postiz\"}),\" is an open-source social media scheduling tool. As I was reading through its source code, I wanted to find out what sort of editor Postiz uses to let you write content and that is when I came across a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/gitroomhq/postiz-app/blob/e4ac191aad8bfc93c56f430f336ef179d80d475a/apps/frontend/src/components/launches/editor.tsx#L45\",children:\"editor.tsx\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"There\\u2019s two kinds of editor in this \",(0,n.jsx)(e.code,{children:\"editor.tsx\"}),\" file based on \",(0,n.jsx)(e.code,{children:\"user.tier.ai\"}),\" flag.\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"CopilotTextarea\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"MDEditor\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*LqUrrIXheoSKGJ47Uzi7OQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"copilottextarea\",children:\"CopilotTextarea\"}),`\n`,(0,n.jsx)(e.p,{children:\"CopilotTextarea is an AI-powered textarea component for your application, which serves as a drop-in replacement for any textarea.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://docs.copilotkit.ai/reference/components/CopilotTextarea\",children:\"Read more about CopilotTextarea\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"example-provided-in-the-documentation\",children:\"Example provided in the documentation:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { CopilotTextarea } from '@copilotkit/react-textarea';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import \"@copilotkit/react-textarea/styles.css\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"<CopilotTextarea\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" autosuggestionsConfig={{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" textareaPurpose:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"the body of an email message\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" chatApiConfigs: {},\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/>\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s compare this with the code snippet from \",(0,n.jsx)(e.a,{href:\"https://github.com/gitroomhq/postiz-app/blob/e4ac191aad8bfc93c56f430f336ef179d80d475a/apps/frontend/src/components/launches/editor.tsx#L44\",children:\"Postiz editor.tsx\"}),\". This is how Postiz has configured its CopilotTextarea.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"<CopilotTextarea\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   disableBranding={true}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   className={clsx(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   '!min-h-40 !max-h-80 p-2 overflow-hidden bg-customColor2 outline-none'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   )}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   value={props.value}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   onChange={(e) => props?.onChange?.(e.target.value)}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'   placeholder=\"Write your reply\\u2026\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   autosuggestionsConfig={{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   textareaPurpose: `Assist me in writing social media posts.`,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   chatApiConfigs: {},\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   }}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" />\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Attributes used in Postiz are:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"disableBranding\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"className\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"value\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"onChange\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"placeholder\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"autosuggestionsConfig\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://docs.copilotkit.ai/reference/components/CopilotTextarea\",children:\"Read the documentation\"}),\" to find out more about these attributes.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"mdeditor\",children:\"MDEditor\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you do not have AI tier enabled, you will be using MDEditor by \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/@uiw/react-md-editor\",children:\"@uiw/react-md-editor\"}),\"\\xA0\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*MvdFhVXdofSZBT5kebVy4g.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"MDEditor is a simple markdown editor with preview, implemented with React.js and TypeScript. This React Component aims to provide a simple Markdown editor with syntax highlighting support. This is based on textarea encapsulation, so it does not depend on any modern code editors such as Acs, CodeMirror, Monaco etc.\"}),`\n`,(0,n.jsx)(e.p,{children:\"MDEditor has 115k weekly downloads in the npm registry.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"example-usage\",children:\"Example usage\"}),`\n`,(0,n.jsx)(e.p,{children:\"This below code is picked from MDEditor documentation.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import React from \"react\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import MDEditor from '@uiw/react-md-editor';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export default function App() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  const [value, setValue] = React.useState(\"**Hello world!!!**\");'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'   <div className=\"container\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     <MDEditor\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     value={value}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     onChange={setValue}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     <MDEditor.Markdown source={value} style={{ whiteSpace: 'pre-wrap' }} />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   </div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/gitroomhq/postiz-app/blob/e4ac191aad8bfc93c56f430f336ef179d80d475a/apps/frontend/src/components/launches/editor.tsx#L45\",children:\"https://github.com/gitroomhq/postiz-app/blob/e4ac191aad8bfc93c56f430f336ef179d80d475a/apps/frontend/src/components/launches/editor.tsx#L45\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://docs.copilotkit.ai/reference/components/CopilotTextarea\",children:\"https://docs.copilotkit.ai/reference/components/CopilotTextarea\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://docs.copilotkit.ai/quickstart\",children:\"https://docs.copilotkit.ai/quickstart\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/@uiw/react-md-editor\",children:\"https://www.npmjs.com/package/@uiw/react-md-editor\"})}),`\n`]}),`\n`]})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return N(y);})();\n;return Component;"
        },
        "_id": "blog/copilotkit-usage-in-postiz.mdx",
        "_raw": {
          "sourceFilePath": "blog/copilotkit-usage-in-postiz.mdx",
          "sourceFileName": "copilotkit-usage-in-postiz.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/copilotkit-usage-in-postiz"
        },
        "type": "Doc",
        "slug": "/blog/copilotkit-usage-in-postiz",
        "slugAsParams": "copilotkit-usage-in-postiz"
      },
      "documentHash": "1740489186270",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Create-a-unique-array.mdx": {
      "document": {
        "title": "Create a unique array using Set() in JavaScript.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze how you can create a unique array using new set in JavaScript, inspired by a code reference from TypeDoc.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*MzrmYwdlNUyOcOHcMELp1A.png)\r\n\r\nLet’s first understand this unique function in the above image with an example and then we will look at how this is used in TypeDoc source code.\r\n\r\n# **unique function**\r\n\r\n```plaintext\r\nexport function unique<T>(arr: Iterable<T> | undefined): T[] {\r\n    return Array.from(new Set(arr));\r\n}\r\n```\r\n\r\nThis function is picked from [typedoc/src/lib/utils/array.ts](https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/array.ts#L98C8-L100C2).\r\n\r\n[Array.from](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from) static method creates a new, shallow-copied `Array` instance from an [iterable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterable_protocol) or [array-like](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Indexed_collections#working_with_array-like_objects) object.\r\n\r\n`Array.from()` lets you create `Array`s from:\r\n\r\n* [iterable objects](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols) (objects such as [`Map`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map) and [`Set`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)); or, if the object is not iterable,\r\n    \r\n* array-like objects (objects with a `length` property and indexed elements).\r\n    \r\n\r\nIf you were to run this below code in your browser’s console, you will quickly realise that Set removes duplicate values.\r\n\r\n```plaintext\r\nnew Set([1,2,3,1,2,5,4,3,])\r\n// result: Set(5) {1, 2, 3, 5, 4}\r\n```\r\n\r\nCombining these two concepts, you can now create a unique array using new Set(), simple and easy.\r\n\r\n# **How TypeDoc uses unique function**\r\n\r\nTypeDoc imports unique function into [lib/application.ts at L366](https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L366).\r\n\r\nThere is a similar approach suggestion in this [Stackoverflow answer](https://stackoverflow.com/a/35951971).\r\n\r\n```plaintext\r\nconst unique = (list) => {\r\n  return [...new Set(list)];\r\n}\r\n```\r\n\r\nThis is picked from Stackoverflow and uses spread operator instead of Array.from method.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L366](https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L366)\r\n    \r\n2. [https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/array.ts#L98C8-L100C2](https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/array.ts#L98C8-L100C2)\r\n    \r\n3. [https://stackoverflow.com/questions/6940103/how-do-i-make-an-array-with-unique-elements-i-e-remove-duplicates](https://stackoverflow.com/questions/6940103/how-do-i-make-an-array-with-unique-elements-i-e-remove-duplicates)\r\n    \r\n4. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Array/from](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----4f4998f1f9f9--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),y=(n,e)=>{for(var t in e)i(n,t,{get:e[t],enumerable:!0})},o=(n,e,t,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of m(e))!b.call(n,a)&&a!==t&&i(n,a,{get:()=>e[a],enumerable:!(c=u(e,a))||c.enumerable});return n};var w=(n,e,t)=>(t=n!=null?p(f(n)):{},o(e||!n||!n.__esModule?i(t,\"default\",{value:n,enumerable:!0}):t,n)),v=n=>o(i({},\"__esModule\",{value:!0}),n);var s=g((_,l)=>{l.exports=_jsx_runtime});var k={};y(k,{default:()=>d,frontmatter:()=>S});var r=w(s()),S={title:\"Create a unique array using Set() in JavaScript.\"};function h(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:\"In this article, we analyze how you can create a unique array using new set in JavaScript, inspired by a code reference from TypeDoc.\"}),`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*MzrmYwdlNUyOcOHcMELp1A.png\",alt:\"\"})}),`\n`,(0,r.jsx)(e.p,{children:\"Let\\u2019s first understand this unique function in the above image with an example and then we will look at how this is used in TypeDoc source code.\"}),`\n`,(0,r.jsx)(e.h1,{id:\"unique-function\",children:(0,r.jsx)(e.strong,{children:\"unique function\"})}),`\n`,(0,r.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,r.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,r.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"export function unique<T>(arr: Iterable<T> | undefined): T[] {\"})}),`\n`,(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"    return Array.from(new Set(arr));\"})}),`\n`,(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,r.jsxs)(e.p,{children:[\"This function is picked from \",(0,r.jsx)(e.a,{href:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/array.ts#L98C8-L100C2\",children:\"typedoc/src/lib/utils/array.ts\"}),\".\"]}),`\n`,(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from\",children:\"Array.from\"}),\" static method creates a new, shallow-copied \",(0,r.jsx)(e.code,{children:\"Array\"}),\" instance from an \",(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#the_iterable_protocol\",children:\"iterable\"}),\" or \",(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Indexed_collections#working_with_array-like_objects\",children:\"array-like\"}),\" object.\"]}),`\n`,(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:\"Array.from()\"}),\" lets you create \",(0,r.jsx)(e.code,{children:\"Array\"}),\"s from:\"]}),`\n`,(0,r.jsxs)(e.ul,{children:[`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols\",children:\"iterable objects\"}),\" (objects such as \",(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\",children:(0,r.jsx)(e.code,{children:\"Map\"})}),\" and \",(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\",children:(0,r.jsx)(e.code,{children:\"Set\"})}),\"); or, if the object is not iterable,\"]}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsxs)(e.p,{children:[\"array-like objects (objects with a \",(0,r.jsx)(e.code,{children:\"length\"}),\" property and indexed elements).\"]}),`\n`]}),`\n`]}),`\n`,(0,r.jsx)(e.p,{children:\"If you were to run this below code in your browser\\u2019s console, you will quickly realise that Set removes duplicate values.\"}),`\n`,(0,r.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,r.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,r.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"new Set([1,2,3,1,2,5,4,3,])\"})}),`\n`,(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"// result: Set(5) {1, 2, 3, 5, 4}\"})})]})})}),`\n`,(0,r.jsx)(e.p,{children:\"Combining these two concepts, you can now create a unique array using new Set(), simple and easy.\"}),`\n`,(0,r.jsx)(e.h1,{id:\"how-typedoc-uses-unique-function\",children:(0,r.jsx)(e.strong,{children:\"How TypeDoc uses unique function\"})}),`\n`,(0,r.jsxs)(e.p,{children:[\"TypeDoc imports unique function into \",(0,r.jsx)(e.a,{href:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L366\",children:\"lib/application.ts at L366\"}),\".\"]}),`\n`,(0,r.jsxs)(e.p,{children:[\"There is a similar approach suggestion in this \",(0,r.jsx)(e.a,{href:\"https://stackoverflow.com/a/35951971\",children:\"Stackoverflow answer\"}),\".\"]}),`\n`,(0,r.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,r.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,r.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"const unique = (list) => {\"})}),`\n`,(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"  return [...new Set(list)];\"})}),`\n`,(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,r.jsx)(e.p,{children:\"This is picked from Stackoverflow and uses spread operator instead of Array.from method.\"}),`\n`,(0,r.jsx)(e.h1,{id:\"about-me\",children:(0,r.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,r.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,r.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,r.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,r.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,r.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,r.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,r.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,r.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,r.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,r.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,r.jsx)(e.h1,{id:\"references\",children:(0,r.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,r.jsxs)(e.ol,{children:[`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L366\",children:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/application.ts#L366\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/array.ts#L98C8-L100C2\",children:\"https://github.com/TypeStrong/typedoc/blob/master/src/lib/utils/array.ts#L98C8-L100C2\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://stackoverflow.com/questions/6940103/how-do-i-make-an-array-with-unique-elements-i-e-remove-duplicates\",children:\"https://stackoverflow.com/questions/6940103/how-do-i-make-an-array-with-unique-elements-i-e-remove-duplicates\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/from\"})}),`\n`]}),`\n`]}),`\n`,(0,r.jsx)(e.p,{children:(0,r.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----4f4998f1f9f9--------------------------------\",children:[(0,r.jsx)(e.br,{}),`\n`]})})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(h,{...n})}):h(n)}return v(k);})();\n;return Component;"
        },
        "_id": "blog/Create-a-unique-array.mdx",
        "_raw": {
          "sourceFilePath": "blog/Create-a-unique-array.mdx",
          "sourceFileName": "Create-a-unique-array.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Create-a-unique-array"
        },
        "type": "Doc",
        "slug": "/blog/Create-a-unique-array",
        "slugAsParams": "Create-a-unique-array"
      },
      "documentHash": "1740489186191",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/create-next-app-validates.mdx": {
      "document": {
        "title": "create-next-app validates your app name using this package\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze how [create-next-app](https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162) validates your project name.\r\n\r\n```plaintext\r\nvalidate: (name) => {\r\n const validation = validateNpmName(basename(resolve(name)))\r\n if (validation.valid) {\r\n   return true\r\n }\r\n return 'Invalid project name: ' + validation.problems[0]\r\n},\r\n```\r\n\r\nHave you tried naming your project with spaces in it when using create-next-app command? if you have done so, it won’t allow spaces in your project because it follows certain principles when it comes to naming your project.\r\n\r\nSo what are these naming convention rules?\r\n\r\n# **validateNpmName function**\r\n\r\nIf you check this [create-next-app/index.ts](https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162), it calls a function named `validateNpmName`. This is imported from [helpers/validate-pkg.ts](https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*uzCKGZ-Gfwx3WXrbSvLILw.png)\r\n\r\nThis function is straight forward, calls a function named `validateProjectName` that is imported from [validate-npm-package-name](https://www.npmjs.com/package/validate-npm-package-name).\r\n\r\n[Documentation](https://www.npmjs.com/package/validate-npm-package-name) says that if a name is valid, you will get the below object back:\r\n\r\n```plaintext\r\n{\r\n validForNewPackages: true,\r\n validForOldPackages: true\r\n}\r\n```\r\n\r\nWhat makes a name valid? let’s check the documentation again. Documentataion provides these Naming rules:\r\n\r\n1. package name length should be greater than zero\r\n    \r\n2. all the characters in the package name must be lowercase i.e., no uppercase or mixed case names are allowed\r\n    \r\n3. package name can consist of hyphens\r\n    \r\n4. package name must not contain any non-url-safe characters (since name ends up being part of a URL)\r\n    \r\n5. package name should not start with . or \\_\r\n    \r\n6. package name should not contain any spaces\r\n    \r\n7. package name should not contain any of the following characters: ~)(‘!\\*\r\n    \r\n8. package name cannot be the same as a node.js/io.js core module nor a reserved/blacklisted name. For example, the following names are invalid:  \r\n    — http  \r\n    — stream  \r\n    — node\\_modules  \r\n    — favicon.ico\r\n    \r\n9. package name length cannot exceed 214\r\n    \r\n\r\nThese are the rules you should keep in mind when naming your Next.js project.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1\\. [https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162](https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162)  \r\n2\\. [https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13](https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13)  \r\n3\\. [https://www.npmjs.com/package/validate-npm-package-name](https://www.npmjs.com/package/validate-npm-package-name)  \r\n4\\. [https://github.com/npm/validate-npm-package-name/tree/main](https://github.com/npm/validate-npm-package-name/tree/main)\r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----a97f7c8d44c4--------------------------------)\r\n",
          "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),k=(a,e)=>{for(var t in e)c(a,t,{get:e[t],enumerable:!0})},l=(a,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of g(e))!b.call(a,r)&&r!==t&&c(a,r,{get:()=>e[r],enumerable:!(i=m(e,r))||i.enumerable});return a};var v=(a,e,t)=>(t=a!=null?d(u(a)):{},l(e||!a||!a.__esModule?c(t,\"default\",{value:a,enumerable:!0}):t,a)),w=a=>l(c({},\"__esModule\",{value:!0}),a);var s=f((N,h)=>{h.exports=_jsx_runtime});var y={};k(y,{default:()=>o,frontmatter:()=>x});var n=v(s()),x={title:\"create-next-app validates your app name using this package\"};function p(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze how \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162\",children:\"create-next-app\"}),\" validates your project name.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"validate: (name) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const validation = validateNpmName(basename(resolve(name)))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (validation.valid) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   return true\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" return 'Invalid project name: ' + validation.problems[0]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Have you tried naming your project with spaces in it when using create-next-app command? if you have done so, it won\\u2019t allow spaces in your project because it follows certain principles when it comes to naming your project.\"}),`\n`,(0,n.jsx)(e.p,{children:\"So what are these naming convention rules?\"}),`\n`,(0,n.jsx)(e.h1,{id:\"validatenpmname-function\",children:(0,n.jsx)(e.strong,{children:\"validateNpmName function\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you check this \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162\",children:\"create-next-app/index.ts\"}),\", it calls a function named \",(0,n.jsx)(e.code,{children:\"validateNpmName\"}),\". This is imported from \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13\",children:\"helpers/validate-pkg.ts\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*uzCKGZ-Gfwx3WXrbSvLILw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This function is straight forward, calls a function named \",(0,n.jsx)(e.code,{children:\"validateProjectName\"}),\" that is imported from \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/validate-npm-package-name\",children:\"validate-npm-package-name\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/validate-npm-package-name\",children:\"Documentation\"}),\" says that if a name is valid, you will get the below object back:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" validForNewPackages: true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" validForOldPackages: true\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"What makes a name valid? let\\u2019s check the documentation again. Documentataion provides these Naming rules:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name length should be greater than zero\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"all the characters in the package name must be lowercase i.e., no uppercase or mixed case names are allowed\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name can consist of hyphens\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name must not contain any non-url-safe characters (since name ends up being part of a URL)\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name should not start with . or _\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name should not contain any spaces\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name should not contain any of the following characters: ~)(\\u2018!*\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"package name cannot be the same as a node.js/io.js core module nor a reserved/blacklisted name. For example, the following names are invalid:\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2014 http\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2014 stream\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2014 node_modules\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2014 favicon.ico\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"package name length cannot exceed 214\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"These are the rules you should keep in mind when naming your Next.js project.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162\",children:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/index.ts#L162\"}),(0,n.jsx)(e.br,{}),`\n`,\"2. \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13\",children:\"https://github.com/vercel/next.js/blob/canary/packages/create-next-app/helpers/validate-pkg.ts#L13\"}),(0,n.jsx)(e.br,{}),`\n`,\"3. \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/validate-npm-package-name\",children:\"https://www.npmjs.com/package/validate-npm-package-name\"}),(0,n.jsx)(e.br,{}),`\n`,\"4. \",(0,n.jsx)(e.a,{href:\"https://github.com/npm/validate-npm-package-name/tree/main\",children:\"https://github.com/npm/validate-npm-package-name/tree/main\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----a97f7c8d44c4--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(p,{...a})}):p(a)}return w(y);})();\n;return Component;"
        },
        "_id": "blog/create-next-app-validates.mdx",
        "_raw": {
          "sourceFilePath": "blog/create-next-app-validates.mdx",
          "sourceFileName": "create-next-app-validates.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/create-next-app-validates"
        },
        "type": "Doc",
        "slug": "/blog/create-next-app-validates",
        "slugAsParams": "create-next-app-validates"
      },
      "documentHash": "1740489186272",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/createHighlightCanvas-function.mdx": {
      "document": {
        "title": "createHighlightCanvas function in react-scan source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review the below [code snippet from react-scan source code](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L156).\r\n\r\n```plaintext\r\nexport const createHighlightCanvas = (root: HTMLElement) => {\r\n  highlightCanvas = document.createElement('canvas');\r\n  highlightCtx = highlightCanvas.getContext('2d', { alpha: true });\r\n  if (!highlightCtx) return null;\r\n\r\n  const dpr = window.devicePixelRatio || 1;\r\n  const { innerWidth, innerHeight } = window;\r\n\r\n  highlightCanvas.style.width = `${innerWidth}px`;\r\n  highlightCanvas.style.height = `${innerHeight}px`;\r\n  highlightCanvas.width = innerWidth * dpr;\r\n  highlightCanvas.height = innerHeight * dpr;\r\n  highlightCanvas.style.position = 'fixed';\r\n  highlightCanvas.style.left = '0';\r\n  highlightCanvas.style.top = '0';\r\n  highlightCanvas.style.pointerEvents = 'none';\r\n  highlightCanvas.style.zIndex = '2147483600';\r\n\r\n  highlightCtx.scale(dpr, dpr);\r\n\r\n  root.appendChild(highlightCanvas);\r\n\r\n  if (handleResizeListener) {\r\n    window.removeEventListener('resize', handleResizeListener);\r\n  }\r\n\r\n  const handleResize = () => {\r\n    ...\r\n  };\r\n  handleResizeListener = handleResize;\r\n\r\n  window.addEventListener('resize', handleResize);\r\n\r\n  HighlightStore.subscribe(() => {\r\n    requestAnimationFrame(() => {\r\n      drawHighlights();\r\n    });\r\n  });\r\n\r\n  return cleanup;\r\n};\r\n```\r\n\r\nThat’s actually a lot of things happening in there, we will go over the code in chunks to get an overview of what it does.\r\n\r\n```plaintext\r\nhighlightCanvas = document.createElement('canvas');\r\nhighlightCtx = highlightCanvas.getContext('2d', { alpha: true });\r\nif (!highlightCtx) return null;\r\n```\r\n\r\n“canvas” element is created and context is assigned to a variable named highlightCtx.\r\n\r\n```plaintext\r\nconst dpr = window.devicePixelRatio || 1;\r\nconst { innerWidth, innerHeight } = window;\r\n\r\nhighlightCanvas.style.width = `${innerWidth}px`;\r\nhighlightCanvas.style.height = `${innerHeight}px`;\r\nhighlightCanvas.width = innerWidth * dpr;\r\nhighlightCanvas.height = innerHeight * dpr;\r\nhighlightCanvas.style.position = 'fixed';\r\nhighlightCanvas.style.left = '0';\r\nhighlightCanvas.style.top = '0';\r\nhighlightCanvas.style.pointerEvents = 'none';\r\nhighlightCanvas.style.zIndex = '2147483600';\r\nhighlightCtx.scale(dpr, dpr);\r\nroot.appendChild(highlightCanvas);\r\n```\r\n\r\nThe `devicePixelRatio` of [`Window`](https://developer.mozilla.org/en-US/docs/Web/API/Window) interface returns the ratio of the resolution in *physical pixels* to the resolution in *CSS pixels* for the current display device. Read more about [devicePixelRatio](https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio). Style is updated here and appended to the rootContainer \r\n\r\n```plaintext\r\nif (handleResizeListener) {\r\n  window.removeEventListener('resize', handleResizeListener);\r\n}\r\n\r\nconst handleResize = () => {\r\n};\r\nhandleResizeListener = handleResize;\r\n\r\nwindow.addEventListener('resize', handleResize);\r\n```\r\n\r\n> If there is one thing that I noticed, it is the cleanup involved across the react-scan codebase to avoid memory leaks.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*RkHLdHv-O47Q-Heu-r8c7Q.png)\r\n\r\nThis is what you will see in the above code snippet, if the resize listener is already registered, it is first removed and then added. This is done so to avoid adding the duplicate resize listeners.\r\n\r\n### handleResize function\r\n\r\n```plaintext\r\nconst handleResize = () => {\r\n  if (!highlightCanvas || !highlightCtx) return;\r\n  const dpr = window.devicePixelRatio || 1;\r\n  const { innerWidth, innerHeight } = window;\r\n  \r\n  highlightCanvas.style.width = `${innerWidth}px`;\r\n  highlightCanvas.style.height = `${innerHeight}px`;\r\n  highlightCanvas.width = innerWidth * dpr;\r\n  highlightCanvas.height = innerHeight * dpr;\r\n  highlightCtx.scale(dpr, dpr);\r\n  \r\n  drawHighlights();\r\n};\r\n```\r\n\r\ndrawHighlights function is called and the canvas style is updated.\r\n\r\nYou can find the drawHighlights function in [outline-overlay.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L52)\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L156](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L156)\r\n    \r\n2. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L560](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L560)\r\n    \r\n3. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L541](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L541)\r\n    \r\n4. [https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio](https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio)\r\n    \r\n5. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L52](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L52)",
          "code": "var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var i in e)l(a,i,{get:e[i],enumerable:!0})},t=(a,e,i,h)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of m(e))!v.call(a,s)&&s!==i&&l(a,s,{get:()=>e[s],enumerable:!(h=g(e,s))||h.enumerable});return a};var b=(a,e,i)=>(i=a!=null?o(u(a)):{},t(e||!a||!a.__esModule?l(i,\"default\",{value:a,enumerable:!0}):i,a)),y=a=>t(l({},\"__esModule\",{value:!0}),a);var r=N((k,c)=>{c.exports=_jsx_runtime});var w={};f(w,{default:()=>p,frontmatter:()=>x});var n=b(r()),x={title:\"createHighlightCanvas function in react-scan source\\xA0code.\"};function d(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will review the below \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L156\",children:\"code snippet from react-scan source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const createHighlightCanvas = (root: HTMLElement) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas = document.createElement('canvas');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCtx = highlightCanvas.getContext('2d', { alpha: true });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (!highlightCtx) return null;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const dpr = window.devicePixelRatio || 1;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { innerWidth, innerHeight } = window;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.style.width = `${innerWidth}px`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.style.height = `${innerHeight}px`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.width = innerWidth * dpr;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.height = innerHeight * dpr;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.style.position = 'fixed';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.style.left = '0';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.style.top = '0';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.style.pointerEvents = 'none';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.style.zIndex = '2147483600';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCtx.scale(dpr, dpr);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  root.appendChild(highlightCanvas);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (handleResizeListener) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    window.removeEventListener('resize', handleResizeListener);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const handleResize = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    ...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  handleResizeListener = handleResize;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  window.addEventListener('resize', handleResize);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  HighlightStore.subscribe(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    requestAnimationFrame(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      drawHighlights();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return cleanup;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"That\\u2019s actually a lot of things happening in there, we will go over the code in chunks to get an overview of what it does.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCanvas = document.createElement('canvas');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCtx = highlightCanvas.getContext('2d', { alpha: true });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (!highlightCtx) return null;\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"\\u201Ccanvas\\u201D element is created and context is assigned to a variable named highlightCtx.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const dpr = window.devicePixelRatio || 1;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const { innerWidth, innerHeight } = window;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCanvas.style.width = `${innerWidth}px`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCanvas.style.height = `${innerHeight}px`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCanvas.width = innerWidth * dpr;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCanvas.height = innerHeight * dpr;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCanvas.style.position = 'fixed';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCanvas.style.left = '0';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCanvas.style.top = '0';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCanvas.style.pointerEvents = 'none';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCanvas.style.zIndex = '2147483600';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"highlightCtx.scale(dpr, dpr);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"root.appendChild(highlightCanvas);\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"devicePixelRatio\"}),\" of \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Window\",children:(0,n.jsx)(e.code,{children:\"Window\"})}),\" interface returns the ratio of the resolution in \",(0,n.jsx)(e.em,{children:\"physical pixels\"}),\" to the resolution in \",(0,n.jsx)(e.em,{children:\"CSS pixels\"}),\" for the current display device. Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio\",children:\"devicePixelRatio\"}),\". Style is updated here and appended to the rootContainer\\xA0\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (handleResizeListener) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  window.removeEventListener('resize', handleResizeListener);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const handleResize = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"handleResizeListener = handleResize;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"window.addEventListener('resize', handleResize);\"})})]})})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"If there is one thing that I noticed, it is the cleanup involved across the react-scan codebase to avoid memory leaks.\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*RkHLdHv-O47Q-Heu-r8c7Q.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"This is what you will see in the above code snippet, if the resize listener is already registered, it is first removed and then added. This is done so to avoid adding the duplicate resize listeners.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"handleresize-function\",children:\"handleResize function\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const handleResize = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (!highlightCanvas || !highlightCtx) return;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const dpr = window.devicePixelRatio || 1;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { innerWidth, innerHeight } = window;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.style.width = `${innerWidth}px`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.style.height = `${innerHeight}px`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.width = innerWidth * dpr;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCanvas.height = innerHeight * dpr;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  highlightCtx.scale(dpr, dpr);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  drawHighlights();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"drawHighlights function is called and the canvas style is updated.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can find the drawHighlights function in \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L52\",children:\"outline-overlay.ts\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L156\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L156\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L560\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L560\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L541\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L541\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L52\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/outline-overlay.ts#L52\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return y(w);})();\n;return Component;"
        },
        "_id": "blog/createHighlightCanvas-function.mdx",
        "_raw": {
          "sourceFilePath": "blog/createHighlightCanvas-function.mdx",
          "sourceFileName": "createHighlightCanvas-function.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/createHighlightCanvas-function"
        },
        "type": "Doc",
        "slug": "/blog/createHighlightCanvas-function",
        "slugAsParams": "createHighlightCanvas-function"
      },
      "documentHash": "1741594611100",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/createstore-in-zustand-source.mdx": {
      "document": {
        "title": "createStore in Zustand source code explained.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will understand how createStore in Zustand’s source code is written/works.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*DZYFn7JU3OzQk9DOEIExXA.png)\r\n\r\ncreateStore is exported from [vanilla.ts](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L9) and you will find this at the end of the file.\r\n\r\n```javascript\r\nexport const createStore = ((createState) =>\r\n  createState ? createStoreImpl(createState) : createStoreImpl) as CreateStore\r\n```\r\n\r\ncreateStore is arrow function that accepts a parameter called createState. if createState exists, createStoreImpl(createState) is called.\r\n\r\n### createStoreImpl\r\n\r\n```javascript\r\nconst createStoreImpl: CreateStoreImpl = (createState) => {\r\n  type TState = ReturnType<typeof createState>\r\n  type Listener = (state: TState, prevState: TState) => void\r\n  let state: TState\r\n  const listeners: Set<Listener> = new Set()\r\n\r\n  const setState: StoreApi<TState>['setState'] = (partial, replace) => {\r\n    // TODO: Remove type assertion once https://github.com/microsoft/TypeScript/issues/37663 is resolved\r\n    // https://github.com/microsoft/TypeScript/issues/37663#issuecomment-759728342\r\n    const nextState =\r\n      typeof partial === 'function'\r\n        ? (partial as (state: TState) => TState)(state)\r\n        : partial\r\n    if (!Object.is(nextState, state)) {\r\n      const previousState = state\r\n      state =\r\n        (replace ?? (typeof nextState !== 'object' || nextState === null))\r\n          ? (nextState as TState)\r\n          : Object.assign({}, state, nextState)\r\n      listeners.forEach((listener) => listener(state, previousState))\r\n    }\r\n  }\r\n\r\n  const getState: StoreApi<TState>['getState'] = () => state\r\n\r\n  const getInitialState: StoreApi<TState>['getInitialState'] = () =>\r\n    initialState\r\n\r\n  const subscribe: StoreApi<TState>['subscribe'] = (listener) => {\r\n    listeners.add(listener)\r\n    // Unsubscribe\r\n    return () => listeners.delete(listener)\r\n  }\r\n\r\n  const api = { setState, getState, getInitialState, subscribe }\r\n  const initialState = (state = createState(setState, getState, api))\r\n  return api as any\r\n}\r\n```\r\n\r\nIn our previous articles, I have written about how setState, subscribe work. We will cover the remaining functions such as getState, getInitialState, createState.\r\n\r\n#### getState\r\n\r\ngetState simply returns the state that is declared at the top of this createStoreImpl function.\r\n\r\n```javascript\r\nconst getState: StoreApi<TState>['getState'] = () => state\r\n```\r\n\r\n#### getInitialState\r\n\r\ngetInitialState returns the initialState.\r\n\r\n```javascript\r\nconst getInitialState: StoreApi<TState>['getInitialState'] = () =>\r\n    initialState\r\n```\r\n\r\n#### createState\r\n\r\ncreateState is used to initialise the state variable.\r\n\r\n```javascript\r\nconst createStoreImpl: CreateStoreImpl = (createState) => {\r\n```\r\n\r\ncreateState is a parameter in createStoreImpl. Let’s run some experiments using the demo example provided in the Zustand’s repo.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*4O0mYmQi7Iwg9bFdoHdUJg.png)\r\n\r\nThis is basically just what you pass into “create”\r\n\r\n```javascript\r\n// Create the store using Zustand\r\nconst useStore = create((set) => ({\r\n  count: 1,\r\n  inc: () => set((state) => ({ count: state.count + 1 })),\r\n}));\r\n```\r\n\r\nState initialisation happens in [vanilla.ts at L93](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L93C3-L93C70), even though create is originally exported from React, [react.ts](https://github.com/pmndrs/zustand/blob/main/src/react.ts) internally calls createStore in vanilla.ts.\r\n\r\nSo how does calling createState initializes the state?\r\n\r\n```javascript\r\n  const initialState = (state = createState(setState, getState, api))\r\n```\r\n\r\nThe trick lies in calling the arrow function, createState. From the above code snippet, you can see that createState is called with setState, getState, api\r\n\r\nLet’s run some experiments with this information. Let’s pass a custom function named test as the parameter without the original parameters.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*sk5a2f94XnAA6iD3ohCQ5g.png)\r\n\r\nThe above image shows the custom test function I added to demonstrate how the parameters are passed to createState function.\r\n\r\nlet’s now see this internal test function in action. For us to access this test function, the following example shows how createStore can be initialised with this newly added test parameter.\r\n\r\n```javascript\r\n// Create the store using Zustand\r\nconst useStore = create((set, get, api, test) => ({\r\n  count: 1,\r\n  inc: () => set((state) => ({ count: state.count + 1 })),\r\n  test: () => test() \r\n}));\r\n```\r\n\r\nBecause we exposed test in vanilla.mjs as shown below, you will have access to this function when you initialise the create function\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*en9fBc6yZO8U0IHmnWMmPg.png)\r\n\r\nI am triggering this test function when the button in the demo example is clicked.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*lGrFilrA51cudi_SAoCIXQ.png)\r\n\r\nThis, in turn, calls the test function.\r\n\r\nThis is some advanced JavaScript arrow functions usage and oh, we also just added a custom test function and used in the demo app. That is cool.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L97](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L97)\r\n",
          "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var s in e)r(n,s,{get:e[s],enumerable:!0})},F=(n,e,s,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of y(e))!g.call(n,t)&&t!==s&&r(n,t,{get:()=>e[t],enumerable:!(c=p(e,t))||c.enumerable});return n};var S=(n,e,s)=>(s=n!=null?h(m(n)):{},F(e||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),b=n=>F(r({},\"__esModule\",{value:!0}),n);var o=u((W,a)=>{a.exports=_jsx_runtime});var v={};f(v,{default:()=>d,frontmatter:()=>N});var l=S(o()),N={title:\"createStore in Zustand source code explained.\"};function i(n){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:\"In this article, we will understand how createStore in Zustand\\u2019s source code is written/works.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*DZYFn7JU3OzQk9DOEIExXA.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"createStore is exported from \",(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L9\",children:\"vanilla.ts\"}),\" and you will find this at the end of the file.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  createState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CreateStore\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"createStore is arrow function that accepts a parameter called createState. if createState exists, createStoreImpl(createState) is called.\"}),`\n`,(0,l.jsx)(e.h3,{id:\"createstoreimpl\",children:\"createStoreImpl\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CreateStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ReturnType\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" prevState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" listeners\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" setState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'setState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"partial\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" replace\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" TODO: Remove type assertion once https://github.com/microsoft/TypeScript/issues/37663 is resolved\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://github.com/microsoft/TypeScript/issues/37663#issuecomment-759728342\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'function'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"partial \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" previousState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      state \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"replace \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'object'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null))\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          ?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"assign\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({},\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      listeners\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"forEach\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" previousState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'getState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getInitialState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'getInitialState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    initialState\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" subscribe\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'subscribe'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    listeners\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Unsubscribe\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" listeners\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"delete\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getInitialState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" subscribe \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" initialState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"setState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"In our previous articles, I have written about how setState, subscribe work. We will cover the remaining functions such as getState, getInitialState, createState.\"}),`\n`,(0,l.jsx)(e.h4,{id:\"getstate\",children:\"getState\"}),`\n`,(0,l.jsx)(e.p,{children:\"getState simply returns the state that is declared at the top of this createStoreImpl function.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'getState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"})]})})})}),`\n`,(0,l.jsx)(e.h4,{id:\"getinitialstate\",children:\"getInitialState\"}),`\n`,(0,l.jsx)(e.p,{children:\"getInitialState returns the initialState.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getInitialState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'getInitialState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    initialState\"})})]})})}),`\n`,(0,l.jsx)(e.h4,{id:\"createstate\",children:\"createState\"}),`\n`,(0,l.jsx)(e.p,{children:\"createState is used to initialise the state variable.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CreateStoreImpl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]})})})}),`\n`,(0,l.jsx)(e.p,{children:\"createState is a parameter in createStoreImpl. Let\\u2019s run some experiments using the demo example provided in the Zustand\\u2019s repo.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*4O0mYmQi7Iwg9bFdoHdUJg.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"This is basically just what you pass into \\u201Ccreate\\u201D\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Create the store using Zustand\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  inc\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"count \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}));\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"State initialisation happens in \",(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L93C3-L93C70\",children:\"vanilla.ts at L93\"}),\", even though create is originally exported from React, \",(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/react.ts\",children:\"react.ts\"}),\" internally calls createStore in vanilla.ts.\"]}),`\n`,(0,l.jsx)(e.p,{children:\"So how does calling createState initializes the state?\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" initialState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"setState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]})})})}),`\n`,(0,l.jsx)(e.p,{children:\"The trick lies in calling the arrow function, createState. From the above code snippet, you can see that createState is called with setState, getState, api\"}),`\n`,(0,l.jsx)(e.p,{children:\"Let\\u2019s run some experiments with this information. Let\\u2019s pass a custom function named test as the parameter without the original parameters.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*sk5a2f94XnAA6iD3ohCQ5g.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"The above image shows the custom test function I added to demonstrate how the parameters are passed to createState function.\"}),`\n`,(0,l.jsx)(e.p,{children:\"let\\u2019s now see this internal test function in action. For us to access this test function, the following example shows how createStore can be initialised with this newly added test parameter.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Create the store using Zustand\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" get\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" test\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  inc\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"count \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })),\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  test\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" test\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}));\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Because we exposed test in vanilla.mjs as shown below, you will have access to this function when you initialise the create function\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*en9fBc6yZO8U0IHmnWMmPg.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"I am triggering this test function when the button in the demo example is clicked.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*lGrFilrA51cudi_SAoCIXQ.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"This, in turn, calls the test function.\"}),`\n`,(0,l.jsx)(e.p,{children:\"This is some advanced JavaScript arrow functions usage and oh, we also just added a custom test function and used in the demo app. That is cool.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L97\",children:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L97\"})}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return b(v);})();\n;return Component;"
        },
        "_id": "blog/createstore-in-zustand-source.mdx",
        "_raw": {
          "sourceFilePath": "blog/createstore-in-zustand-source.mdx",
          "sourceFileName": "createstore-in-zustand-source.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/createstore-in-zustand-source"
        },
        "type": "Doc",
        "slug": "/blog/createstore-in-zustand-source",
        "slugAsParams": "createstore-in-zustand-source"
      },
      "documentHash": "1740489186279",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/createWithEqualityFn-test-case.mdx": {
      "document": {
        "title": "createWithEqualityFn test case in Zustand explained.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will understand the test case written to validate the createWithEqualityFn that prevents re-render based on a condition and an equality function that you can pass.\r\n\r\nThe below code is picked from [basic.test.ts](https://github.com/pmndrs/zustand/blob/main/tests/basic.test.tsx#L92)\r\n\r\n```plaintext\r\nit('uses the store with a selector and equality checker', async () => {\r\n  const useBoundStore = createWithEqualityFn(\r\n    () => ({ item: { value: 0 } }),\r\n    Object.is,\r\n  )\r\n  const { setState } = useBoundStore\r\n  let renderCount = 0\r\n\r\n  function Component() {\r\n    // Prevent re-render if new value === 1.\r\n    const item = useBoundStore(\r\n      (s) => s.item,\r\n      (_, newItem) => newItem.value === 1,\r\n    )\r\n    return (\r\n      <div>\r\n        renderCount: {++renderCount}, value: {item.value}\r\n      </div>\r\n    )\r\n  }\r\n\r\n  const { findByText } = render(\r\n    <>\r\n      <Component />\r\n    </>,\r\n  )\r\n\r\n  await findByText('renderCount: 1, value: 0')\r\n\r\n  // This will not cause a re-render.\r\n  act(() => setState({ item: { value: 1 } }))\r\n  await findByText('renderCount: 1, value: 0')\r\n\r\n  // This will cause a re-render.\r\n  act(() => setState({ item: { value: 2 } }))\r\n  await findByText('renderCount: 2, value: 2')\r\n})\r\n```\r\n\r\nZustand uses [Vitest](https://vitest.dev/guide/) for its testing needs. Let’s go through the above code snippet.\r\n\r\n# **Initialiize createWithEqualityFn**\r\n\r\n```plaintext\r\nconst useBoundStore = createWithEqualityFn(\r\n    () => ({ item: { value: 0 } }),\r\n    Object.is,\r\n  )\r\n```\r\n\r\ncreateWithEqualityFn is initialized with the state `() => ({ item: { value: 0 } })` and the equality function is `Object.is`\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*oPW9jEWE8rl-g1LMMnquBw.png)\r\n\r\ncreateWithEqualityFn accepts two variables, createState and defaultEqualityFn.\r\n\r\n# **Prevent re-render**\r\n\r\n```plaintext\r\n// Prevent re-render if new value === 1.\r\n    const item = useBoundStore(\r\n      (s) => s.item,\r\n      (_, newItem) => newItem.value === 1,\r\n    )\r\n```\r\n\r\nuseBoundStore accepts the selector and the equality function that is used to prevent re-render based on the matching value.\r\n\r\nThe above example in the basic.test is used to prevent re-render when the value is 1.\r\n\r\n```plaintext\r\nawait findByText('renderCount: 1, value: 0')\r\n\r\n// This will not cause a re-render.\r\nact(() => setState({ item: { value: 1 } }))\r\nawait findByText('renderCount: 1, value: 0')\r\n\r\n// This will cause a re-render.\r\nact(() => setState({ item: { value: 2 } }))\r\nawait findByText('renderCount: 2, value: 2')\r\n```\r\n\r\nThese assertions validate that state update does not cause any re-render.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/tests/basic.test.tsx#L92](https://github.com/pmndrs/zustand/blob/main/tests/basic.test.tsx#L92)\r\n    \r\n2. [https://vitest.dev/guide/](https://vitest.dev/guide/)\r\n",
          "code": "var Component=(()=>{var o=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),v=(a,e)=>{for(var t in e)s(a,t,{get:e[t],enumerable:!0})},r=(a,e,t,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!N.call(a,i)&&i!==t&&s(a,i,{get:()=>e[i],enumerable:!(l=m(e,i))||l.enumerable});return a};var y=(a,e,t)=>(t=a!=null?o(g(a)):{},r(e||!a||!a.__esModule?s(t,\"default\",{value:a,enumerable:!0}):t,a)),b=a=>r(s({},\"__esModule\",{value:!0}),a);var d=f((j,c)=>{c.exports=_jsx_runtime});var x={};v(x,{default:()=>p,frontmatter:()=>w});var n=y(d()),w={title:\"createWithEqualityFn test case in Zustand explained.\"};function h(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this article, we will understand the test case written to validate the createWithEqualityFn that prevents re-render based on a condition and an equality function that you can pass.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/tests/basic.test.tsx#L92\",children:\"basic.test.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"it('uses the store with a selector and equality checker', async () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const useBoundStore = createWithEqualityFn(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    () => ({ item: { value: 0 } }),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    Object.is,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { setState } = useBoundStore\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  let renderCount = 0\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function Component() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    // Prevent re-render if new value === 1.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const item = useBoundStore(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      (s) => s.item,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      (_, newItem) => newItem.value === 1,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        renderCount: {++renderCount}, value: {item.value}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      </div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { findByText } = render(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <Component />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  await findByText('renderCount: 1, value: 0')\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // This will not cause a re-render.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  act(() => setState({ item: { value: 1 } }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  await findByText('renderCount: 1, value: 0')\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // This will cause a re-render.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  act(() => setState({ item: { value: 2 } }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  await findByText('renderCount: 2, value: 2')\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"})\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Zustand uses \",(0,n.jsx)(e.a,{href:\"https://vitest.dev/guide/\",children:\"Vitest\"}),\" for its testing needs. Let\\u2019s go through the above code snippet.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"initialiize-createwithequalityfn\",children:(0,n.jsx)(e.strong,{children:\"Initialiize createWithEqualityFn\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const useBoundStore = createWithEqualityFn(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    () => ({ item: { value: 0 } }),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    Object.is,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"createWithEqualityFn is initialized with the state \",(0,n.jsx)(e.code,{children:\"() => ({ item: { value: 0 } })\"}),\" and the equality function is \",(0,n.jsx)(e.code,{children:\"Object.is\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*oPW9jEWE8rl-g1LMMnquBw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"createWithEqualityFn accepts two variables, createState and defaultEqualityFn.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"prevent-re-render\",children:(0,n.jsx)(e.strong,{children:\"Prevent re-render\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Prevent re-render if new value === 1.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const item = useBoundStore(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      (s) => s.item,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      (_, newItem) => newItem.value === 1,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    )\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"useBoundStore accepts the selector and the equality function that is used to prevent re-render based on the matching value.\"}),`\n`,(0,n.jsx)(e.p,{children:\"The above example in the basic.test is used to prevent re-render when the value is 1.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"await findByText('renderCount: 1, value: 0')\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// This will not cause a re-render.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"act(() => setState({ item: { value: 1 } }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"await findByText('renderCount: 1, value: 0')\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// This will cause a re-render.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"act(() => setState({ item: { value: 2 } }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"await findByText('renderCount: 2, value: 2')\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"These assertions validate that state update does not cause any re-render.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/tests/basic.test.tsx#L92\",children:\"https://github.com/pmndrs/zustand/blob/main/tests/basic.test.tsx#L92\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://vitest.dev/guide/\",children:\"https://vitest.dev/guide/\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return b(x);})();\n;return Component;"
        },
        "_id": "blog/createWithEqualityFn-test-case.mdx",
        "_raw": {
          "sourceFilePath": "blog/createWithEqualityFn-test-case.mdx",
          "sourceFileName": "createWithEqualityFn-test-case.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/createWithEqualityFn-test-case"
        },
        "type": "Doc",
        "slug": "/blog/createWithEqualityFn-test-case",
        "slugAsParams": "createWithEqualityFn-test-case"
      },
      "documentHash": "1740489186275",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/createWithEqualityFnImpl-in-zustand.mdx": {
      "document": {
        "title": "createWithEqualityFnImpl in Zustand source code explained.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will analyse how the [createWithEqualityFnImpl](https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L74) is implemented by logging some of its value to get a better understanding.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*t2aYkuCeF0AGVfR0vRG1pA.png)\r\n\r\nAs you can tell from the above image, createWithEqualityFn calls the function createWithEqualityFnImpl. This pattern is used in [vanilla.ts](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts) as well as demonstrated below:\r\n\r\n```plaintext\r\nexport const createStore = ((createState) =>\r\n  createState ? createStoreImpl(createState) : createStoreImpl) as CreateStore\r\n```\r\n\r\ncreateStore calls createStoreImpl and createWithEqualityFn calls createWithhEqualityFnImpl.\r\n\r\nBefore we jump into the execution of createWithEqualityFn, let’s first understand the purpose of using createWithEqualityFn.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*nHutJ49cqYhbqHX2GVVF_A.png)\r\n\r\nThe above screenshot is from [https://github.com/pmndrs/zustand/tree/main](https://github.com/pmndrs/zustand/tree/main)\r\n\r\nYou can use createWithEqualityFn to have more control over re-rendering.\r\n\r\n## **createWithEqualityFn**\r\n\r\n```plaintext\r\nconst createWithEqualityFnImpl = <T>(\r\n  createState: StateCreator<T, [], []>,\r\n  defaultEqualityFn?: <U>(a: U, b: U) => boolean,\r\n) => {\r\n  const api = createStore(createState)\r\n\r\n  const useBoundStoreWithEqualityFn: any = (\r\n    selector?: any,\r\n    equalityFn = defaultEqualityFn,\r\n  ) => useStoreWithEqualityFn(api, selector, equalityFn)\r\n\r\n  Object.assign(useBoundStoreWithEqualityFn, api)\r\n\r\n  return useBoundStoreWithEqualityFn\r\n}\r\n```\r\n\r\n## **useStoreWithEqualityFn**\r\n\r\n```plaintext\r\nexport function useStoreWithEqualityFn<S extends ReadonlyStoreApi<unknown>>(\r\n  api: S,\r\n): ExtractState<S>\r\n\r\nexport function useStoreWithEqualityFn<S extends ReadonlyStoreApi<unknown>, U>(\r\n  api: S,\r\n  selector: (state: ExtractState<S>) => U,\r\n  equalityFn?: (a: U, b: U) => boolean,\r\n): U\r\n\r\nexport function useStoreWithEqualityFn<TState, StateSlice>(\r\n  api: ReadonlyStoreApi<TState>,\r\n  selector: (state: TState) => StateSlice = identity as any,\r\n  equalityFn?: (a: StateSlice, b: StateSlice) => boolean,\r\n) {\r\n  const slice = useSyncExternalStoreWithSelector(\r\n    api.subscribe,\r\n    api.getState,\r\n    api.getInitialState,\r\n    selector,\r\n    equalityFn,\r\n  )\r\n  useDebugValue(slice)\r\n  return slice\r\n}\r\n```\r\n\r\nThis is an overloading function. useStoreWithEqualityFn has 3 definitions:\r\n\r\n```plaintext\r\nexport function useStoreWithEqualityFn<S extends ReadonlyStoreApi<unknown>>(\r\n  api: S,\r\n): ExtractState<S>\r\n\r\nexport function useStoreWithEqualityFn<S extends ReadonlyStoreApi<unknown>, U>(\r\n  api: S,\r\n  selector: (state: ExtractState<S>) => U,\r\n  equalityFn?: (a: U, b: U) => boolean,\r\n): U\r\n\r\nexport function useStoreWithEqualityFn<TState, StateSlice>(\r\n  api: ReadonlyStoreApi<TState>,\r\n  selector: (state: TState) => StateSlice = identity as any,\r\n  equalityFn?: (a: StateSlice, b: StateSlice) => boolean,\r\n) {\r\n```\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*svt_ucTCpyNOGTCnKmMoPw.png)\r\n\r\nLet’s see how the slice value looks like:\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*GrB9UBQDkm3c_hBzkmq8iQ.png)\r\n\r\nvalue: 1 is skipped because we set the code to avoid re-render when the value is 1 as shown below:\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*jyi-JX5AZmFx9KhplHD6hw.png)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L74](https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L74)\r\n    \r\n2. [https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L39](https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L39)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----2bd444f4ea88--------------------------------)\r\n",
          "code": "var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var y=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),b=(a,e)=>{for(var t in e)l(a,t,{get:e[t],enumerable:!0})},r=(a,e,t,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!S.call(a,i)&&i!==t&&l(a,i,{get:()=>e[i],enumerable:!(s=m(e,i))||s.enumerable});return a};var f=(a,e,t)=>(t=a!=null?o(g(a)):{},r(e||!a||!a.__esModule?l(t,\"default\",{value:a,enumerable:!0}):t,a)),N=a=>r(l({},\"__esModule\",{value:!0}),a);var h=y((E,c)=>{c.exports=_jsx_runtime});var F={};b(F,{default:()=>p,frontmatter:()=>q});var n=f(h()),q={title:\"createWithEqualityFnImpl in Zustand source code explained.\"};function d(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will analyse how the \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L74\",children:\"createWithEqualityFnImpl\"}),\" is implemented by logging some of its value to get a better understanding.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*t2aYkuCeF0AGVfR0vRG1pA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"As you can tell from the above image, createWithEqualityFn calls the function createWithEqualityFnImpl. This pattern is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts\",children:\"vanilla.ts\"}),\" as well as demonstrated below:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const createStore = ((createState) =>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  createState ? createStoreImpl(createState) : createStoreImpl) as CreateStore\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"createStore calls createStoreImpl and createWithEqualityFn calls createWithhEqualityFnImpl.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Before we jump into the execution of createWithEqualityFn, let\\u2019s first understand the purpose of using createWithEqualityFn.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*nHutJ49cqYhbqHX2GVVF_A.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The above screenshot is from \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/tree/main\",children:\"https://github.com/pmndrs/zustand/tree/main\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"You can use createWithEqualityFn to have more control over re-rendering.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"createwithequalityfn\",children:(0,n.jsx)(e.strong,{children:\"createWithEqualityFn\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const createWithEqualityFnImpl = <T>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  createState: StateCreator<T, [], []>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  defaultEqualityFn?: <U>(a: U, b: U) => boolean,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\") => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const api = createStore(createState)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const useBoundStoreWithEqualityFn: any = (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    selector?: any,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    equalityFn = defaultEqualityFn,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  ) => useStoreWithEqualityFn(api, selector, equalityFn)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  Object.assign(useBoundStoreWithEqualityFn, api)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return useBoundStoreWithEqualityFn\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h2,{id:\"usestorewithequalityfn\",children:(0,n.jsx)(e.strong,{children:\"useStoreWithEqualityFn\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function useStoreWithEqualityFn<S extends ReadonlyStoreApi<unknown>>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api: S,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"): ExtractState<S>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function useStoreWithEqualityFn<S extends ReadonlyStoreApi<unknown>, U>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api: S,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  selector: (state: ExtractState<S>) => U,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  equalityFn?: (a: U, b: U) => boolean,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"): U\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function useStoreWithEqualityFn<TState, StateSlice>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api: ReadonlyStoreApi<TState>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  selector: (state: TState) => StateSlice = identity as any,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  equalityFn?: (a: StateSlice, b: StateSlice) => boolean,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\") {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const slice = useSyncExternalStoreWithSelector(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.subscribe,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.getState,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.getInitialState,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    selector,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    equalityFn,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  useDebugValue(slice)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return slice\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This is an overloading function. useStoreWithEqualityFn has 3 definitions:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function useStoreWithEqualityFn<S extends ReadonlyStoreApi<unknown>>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api: S,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"): ExtractState<S>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function useStoreWithEqualityFn<S extends ReadonlyStoreApi<unknown>, U>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api: S,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  selector: (state: ExtractState<S>) => U,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  equalityFn?: (a: U, b: U) => boolean,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"): U\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function useStoreWithEqualityFn<TState, StateSlice>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api: ReadonlyStoreApi<TState>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  selector: (state: TState) => StateSlice = identity as any,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  equalityFn?: (a: StateSlice, b: StateSlice) => boolean,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\") {\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*svt_ucTCpyNOGTCnKmMoPw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Let\\u2019s see how the slice value looks like:\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*GrB9UBQDkm3c_hBzkmq8iQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"value: 1 is skipped because we set the code to avoid re-render when the value is 1 as shown below:\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*jyi-JX5AZmFx9KhplHD6hw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L74\",children:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L74\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L39\",children:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L39\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----2bd444f4ea88--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return N(F);})();\n;return Component;"
        },
        "_id": "blog/createWithEqualityFnImpl-in-zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/createWithEqualityFnImpl-in-zustand.mdx",
          "sourceFileName": "createWithEqualityFnImpl-in-zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/createWithEqualityFnImpl-in-zustand"
        },
        "type": "Doc",
        "slug": "/blog/createWithEqualityFnImpl-in-zustand",
        "slugAsParams": "createWithEqualityFnImpl-in-zustand"
      },
      "documentHash": "1740489186277",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/DefaultMap-class-in-TailwindCSS.mdx": {
      "document": {
        "title": "DefaultMap class in TailwindCSS source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse [DefaultMap class](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utils/default-map.ts#L5) in Tailwind CSS source code. This is a map that can generate default values for keys that don’t exist. Generated default values are added to the map to avoid re-computation.\r\n\r\n```plaintext\r\n\r\n/**\r\n * A Map that can generate default values for keys that don't exist.\r\n * Generated default values are added to the map to avoid recomputation.\r\n */\r\nexport class DefaultMap<T = string, V = any> extends Map<T, V> {\r\n  constructor(private factory: (key: T, self: DefaultMap<T, V>) => V) {\r\n    super()\r\n  }\r\n\r\n  get(key: T): V {\r\n    let value = super.get(key)\r\n\r\n    if (value === undefined) {\r\n      value = this.factory(key, this)\r\n      this.set(key, value)\r\n    }\r\n\r\n    return value\r\n  }\r\n}\r\n```\r\n\r\nIn JavaScript, we have a [Map API](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map) but there is no DefaultMap. This DefaultMap is a custom class that extends Map in [Tailwind CSS source code](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utils/default-map.ts#L5).\r\n\r\nLet’s understand this code.\r\n\r\n```plaintext\r\nconstructor(private factory: (key: T, self: DefaultMap<T, V>) => V) {\r\n    super()\r\n}\r\n```\r\n\r\nDefaultMap is a class that has a constructor that expects a factory function. super() calls the parent class’s constructor, in this case, this is Map API and factory function’s second parameter is self: DefaultMap&lt;T, V&gt; which means it has access to `Map` instance.\r\n\r\n# **How DefaultMap is initialized?**\r\n\r\nLet’s find an example where this DefaultMap is initialised. [design-system.ts](https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/design-system.ts#L40) desmonstrates usage of DefaultMap.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*UatBnuEnp1OsRHJnMUQj9Q.png)\r\n\r\n```plaintext\r\nlet parsedVariants = new DefaultMap(\r\n                        (variant) => parseVariant(variant, designSystem)\r\n                     );\r\n```\r\n\r\nHere `(variant) => parseVariant(variant, designSystem)` becomes our factory method that adds a default if a key does not exist.\r\n\r\n```plaintext\r\nreturn {\r\n      kind: 'arbitrary',\r\n      selector,\r\n      compounds: true,\r\n      relative,\r\n  }\r\n```\r\n\r\nThis is the value returned by [parseVariant function](https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/candidate.ts#L511-L516).\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utils/default-map.ts#L5](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utils/default-map.ts#L5)\r\n    \r\n2. [https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/design-system.ts#L40](https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/design-system.ts#L40)\r\n    \r\n3. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)\r\n    \r\n4. [https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/candidate.ts#L511-L516](https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/candidate.ts#L511-L516)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----dce5edc88a29--------------------------------)\r\n",
          "code": "var Component=(()=>{var o=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),w=(n,e)=>{for(var t in e)i(n,t,{get:e[t],enumerable:!0})},c=(n,e,t,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of u(e))!g.call(n,s)&&s!==t&&i(n,s,{get:()=>e[s],enumerable:!(l=m(e,s))||l.enumerable});return n};var y=(n,e,t)=>(t=n!=null?o(f(n)):{},c(e||!n||!n.__esModule?i(t,\"default\",{value:n,enumerable:!0}):t,n)),v=n=>c(i({},\"__esModule\",{value:!0}),n);var d=b((M,r)=>{r.exports=_jsx_runtime});var k={};w(k,{default:()=>p,frontmatter:()=>N});var a=y(d()),N={title:\"DefaultMap class in TailwindCSS source code.\"};function h(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:[\"In this article, we analyse \",(0,a.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utils/default-map.ts#L5\",children:\"DefaultMap class\"}),\" in Tailwind CSS source code. This is a map that can generate default values for keys that don\\u2019t exist. Generated default values are added to the map to avoid re-computation.\"]}),`\n`,(0,a.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"/**\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\" * A Map that can generate default values for keys that don't exist.\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\" * Generated default values are added to the map to avoid recomputation.\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\" */\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"export class DefaultMap<T = string, V = any> extends Map<T, V> {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  constructor(private factory: (key: T, self: DefaultMap<T, V>) => V) {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    super()\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  get(key: T): V {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    let value = super.get(key)\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    if (value === undefined) {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"      value = this.factory(key, this)\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"      this.set(key, value)\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    return value\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,a.jsxs)(e.p,{children:[\"In JavaScript, we have a \",(0,a.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\",children:\"Map API\"}),\" but there is no DefaultMap. This DefaultMap is a custom class that extends Map in \",(0,a.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utils/default-map.ts#L5\",children:\"Tailwind CSS source code\"}),\".\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Let\\u2019s understand this code.\"}),`\n`,(0,a.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"constructor(private factory: (key: T, self: DefaultMap<T, V>) => V) {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    super()\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,a.jsxs)(e.p,{children:[\"DefaultMap is a class that has a constructor that expects a factory function. super() calls the parent class\\u2019s constructor, in this case, this is Map API and factory function\\u2019s second parameter is self: DefaultMap<T, V> which means it has access to \",(0,a.jsx)(e.code,{children:\"Map\"}),\" instance.\"]}),`\n`,(0,a.jsx)(e.h1,{id:\"how-defaultmap-is-initialized\",children:(0,a.jsx)(e.strong,{children:\"How DefaultMap is initialized?\"})}),`\n`,(0,a.jsxs)(e.p,{children:[\"Let\\u2019s find an example where this DefaultMap is initialised. \",(0,a.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/design-system.ts#L40\",children:\"design-system.ts\"}),\" desmonstrates usage of DefaultMap.\"]}),`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*UatBnuEnp1OsRHJnMUQj9Q.png\",alt:\"\"})}),`\n`,(0,a.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"let parsedVariants = new DefaultMap(\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"                        (variant) => parseVariant(variant, designSystem)\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"                     );\"})})]})})}),`\n`,(0,a.jsxs)(e.p,{children:[\"Here \",(0,a.jsx)(e.code,{children:\"(variant) => parseVariant(variant, designSystem)\"}),\" becomes our factory method that adds a default if a key does not exist.\"]}),`\n`,(0,a.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"return {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"      kind: 'arbitrary',\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"      selector,\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"      compounds: true,\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"      relative,\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  }\"})})]})})}),`\n`,(0,a.jsxs)(e.p,{children:[\"This is the value returned by \",(0,a.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/candidate.ts#L511-L516\",children:\"parseVariant function\"}),\".\"]}),`\n`,(0,a.jsx)(e.h1,{id:\"about-me\",children:(0,a.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,a.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,a.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,a.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,a.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,a.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,a.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,a.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,a.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,a.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,a.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,a.jsx)(e.h1,{id:\"references\",children:(0,a.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,a.jsxs)(e.ol,{children:[`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utils/default-map.ts#L5\",children:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utils/default-map.ts#L5\"})}),`\n`]}),`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/design-system.ts#L40\",children:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/design-system.ts#L40\"})}),`\n`]}),`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map\"})}),`\n`]}),`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/candidate.ts#L511-L516\",children:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/candidate.ts#L511-L516\"})}),`\n`]}),`\n`]}),`\n`,(0,a.jsx)(e.p,{children:(0,a.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----dce5edc88a29--------------------------------\",children:[(0,a.jsx)(e.br,{}),`\n`]})})]})}function p(n={}){let{wrapper:e}=n.components||{};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(h,{...n})}):h(n)}return v(k);})();\n;return Component;"
        },
        "_id": "blog/DefaultMap-class-in-TailwindCSS.mdx",
        "_raw": {
          "sourceFilePath": "blog/DefaultMap-class-in-TailwindCSS.mdx",
          "sourceFileName": "DefaultMap-class-in-TailwindCSS.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/DefaultMap-class-in-TailwindCSS"
        },
        "type": "Doc",
        "slug": "/blog/DefaultMap-class-in-TailwindCSS",
        "slugAsParams": "DefaultMap-class-in-TailwindCSS"
      },
      "documentHash": "1740489186193",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/deferExecution-in-Refine-source.mdx": {
      "document": {
        "title": "deferExecution() in Refine source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review a function named [deferExecution() in Refine source code](https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.ts#L8).\r\n\r\n```plaintext\r\n/**\r\n * Delays the execution of a callback function asynchronously.\r\n * This utility function is used to defer the execution of the provided\r\n * callback, allowing the current call stack to clear before the callback\r\n * is invoked. It is particularly useful for ensuring non-blocking behavior\r\n * and providing a clear intent when a 0 ms timeout is used.\r\n */\r\nexport const deferExecution = (fn: Function) => {\r\n  setTimeout(fn, 0);\r\n};\r\n```\r\n\r\nThis above code snippet is picked from [refinedev/refine/packages/core/src/definitions/helpers/defer-execution/index.ts](https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.ts#L8)\r\n\r\nThis code is inside a folder named [defer-execution](https://github.com/refinedev/refine/tree/main/packages/core/src/definitions/helpers/defer-execution). It contains the files shown in the below image.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*fUrq8GXn00S9HrI9ZQcShw.png)\r\n\r\nso what is deferExecution used for?\r\n\r\n> /\\*\\*  \r\n>   *Delays the execution of a callback function asynchronously.*  This utility function is used to defer the execution of the provided  \r\n>   *callback, allowing the current call stack to clear before the callback*  is invoked. It is particularly useful for ensuring non-blocking behavior  \r\n>   *and providing a clear intent when a 0 ms timeout is used.* /\r\n\r\nThis comment above the function explains clearly what this function is about. \r\n\r\nThe time, in milliseconds that the timer should wait before the specified function or code is executed. If this parameter is omitted, a value of 0 is used, meaning execute “immediately”, or more accurately, the next event cycle. Read more about [setTimeout](https://medium.com/p/7caad71ec87d/edit).\r\n\r\nWait, what is event cycle? For that, you need to read about [Job queue and event loop in JavaScript Execution Model documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Execution_model#job_queue_and_event_loop)\r\n\r\n> A job is considered completed when the [stack](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Execution_model#stack_and_execution_contexts) is empty; then, the next job is pulled from the queue. Jobs might not be pulled with uniform priority — for example, HTML event loops split jobs into two categories: *tasks* and *microtasks*. Microtasks have higher priority and the microtask queue is drained first before the task queue is pulled.\r\n\r\nOkay, at this point, let’s go find out how this deferExecution is used in the Refine codebase.\r\n\r\n### deferExecution usage\r\n\r\n```plaintext\r\nif (!isPessimistic && !isAutosave) {\r\n  // If the mutation mode is not pessimistic, handle the redirect immediately in an async manner\r\n  // `setWarnWhen` blocks the redirects until set to `false`\r\n  // If redirect is done before the value is properly set, it will be blocked.\r\n  // We're deferring the execution of the redirect to ensure that the value is set properly.\r\n  deferExecution(() => onSuccessRedirect());\r\n  // Resolve the promise immediately\r\n  resolve();\r\n}\r\n```\r\n\r\nThis code snippet is one instance picked from [hooks/form/index.ts](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/form/index.ts#L246)\r\n\r\n> But I am surprised there is no clean up in the sense that timeout is not cleared\r\n\r\n### Testing deferExecution()\r\n\r\nYou will find a file named [defer-execution/index.spec.ts](https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.spec.ts) containing the below code:\r\n\r\n```plaintext\r\nimport { waitFor } from \"@testing-library/react\";\r\nimport { deferExecution } from \".\";\r\n\r\ndescribe(\"deferExecution\", () => {\r\n  beforeEach(() => {\r\n    jest.useRealTimers();\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.useFakeTimers();\r\n  });\r\n\r\n  it(\"should defer the call after caller returns\", async () => {\r\n    const array: number[] = [];\r\n\r\n    const fn = () => {\r\n      array.push(1);\r\n\r\n      deferExecution(() => {\r\n        array.push(3);\r\n      });\r\n\r\n      array.push(2);\r\n    };\r\n\r\n    fn();\r\n\r\n    await waitFor(() => {\r\n      expect(array).toEqual([1, 2, 3]);\r\n    });\r\n  });\r\n});\r\n```\r\n\r\narr.push(3) is called inside deferExecution and the result is validated to \\[1, 2, 3\\]. \r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.ts#L8](https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.ts#L8)\r\n    \r\n2. [https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/form/index.ts#L292](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/form/index.ts#L292)\r\n    \r\n3. [https://github.com/refinedev/refine/tree/main/packages/core/src/definitions/helpers/defer-execution](https://github.com/refinedev/refine/tree/main/packages/core/src/definitions/helpers/defer-execution)\r\n    \r\n4. [https://developer.mozilla.org/en-US/docs/Web/API/Window/setTimeout](https://developer.mozilla.org/en-US/docs/Web/API/Window/setTimeout)\r\n    \r\n5. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Execution\\_model#job\\_queue\\_and\\_event\\_loop](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Execution_model#job_queue_and_event_loop)\r\n    \r\n6. [https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.spec.ts](https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.spec.ts)",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var g=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),x=(i,e)=>{for(var a in e)s(i,a,{get:e[a],enumerable:!0})},t=(i,e,a,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!b.call(i,r)&&r!==a&&s(i,r,{get:()=>e[r],enumerable:!(c=m(e,r))||c.enumerable});return i};var k=(i,e,a)=>(a=i!=null?p(f(i)):{},t(e||!i||!i.__esModule?s(a,\"default\",{value:i,enumerable:!0}):a,i)),v=i=>t(s({},\"__esModule\",{value:!0}),i);var d=g((_,l)=>{l.exports=_jsx_runtime});var y={};x(y,{default:()=>h,frontmatter:()=>N});var n=k(d()),N={title:\"deferExecution() in Refine source\\xA0code.\"};function o(i){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...i.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will review a function named \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.ts#L8\",children:\"deferExecution() in Refine source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Delays the execution of a callback function asynchronously.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * This utility function is used to defer the execution of the provided\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * callback, allowing the current call stack to clear before the callback\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * is invoked. It is particularly useful for ensuring non-blocking behavior\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * and providing a clear intent when a 0 ms timeout is used.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const deferExecution = (fn: Function) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  setTimeout(fn, 0);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This above code snippet is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.ts#L8\",children:\"refinedev/refine/packages/core/src/definitions/helpers/defer-execution/index.ts\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"This code is inside a folder named \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/tree/main/packages/core/src/definitions/helpers/defer-execution\",children:\"defer-execution\"}),\". It contains the files shown in the below image.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*fUrq8GXn00S9HrI9ZQcShw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"so what is deferExecution used for?\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"/**\",(0,n.jsx)(e.br,{}),`\n`,\"\\xA0 \",(0,n.jsx)(e.em,{children:\"Delays the execution of a callback function asynchronously.\"}),\"\\xA0 This utility function is used to defer the execution of the provided\",(0,n.jsx)(e.br,{}),`\n`,\"\\xA0 \",(0,n.jsx)(e.em,{children:\"callback, allowing the current call stack to clear before the callback\"}),\"\\xA0 is invoked. It is particularly useful for ensuring non-blocking behavior\",(0,n.jsx)(e.br,{}),`\n`,\"\\xA0 \",(0,n.jsx)(e.em,{children:\"and providing a clear intent when a 0 ms timeout is used.\"}),\"\\xA0/\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"This comment above the function explains clearly what this function is about.\\xA0\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The time, in milliseconds that the timer should wait before the specified function or code is executed. If this parameter is omitted, a value of 0 is used, meaning execute \\u201Cimmediately\\u201D, or more accurately, the next event cycle. Read more about \",(0,n.jsx)(e.a,{href:\"https://medium.com/p/7caad71ec87d/edit\",children:\"setTimeout\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Wait, what is event cycle? For that, you need to read about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Execution_model#job_queue_and_event_loop\",children:\"Job queue and event loop in JavaScript Execution Model documentation\"})]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"A job is considered completed when the \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Execution_model#stack_and_execution_contexts\",children:\"stack\"}),\" is empty; then, the next job is pulled from the queue. Jobs might not be pulled with uniform priority\\u200A\\u2014\\u200Afor example, HTML event loops split jobs into two categories: \",(0,n.jsx)(e.em,{children:\"tasks\"}),\" and \",(0,n.jsx)(e.em,{children:\"microtasks\"}),\". Microtasks have higher priority and the microtask queue is drained first before the task queue is pulled.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Okay, at this point, let\\u2019s go find out how this deferExecution is used in the Refine codebase.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"deferexecution-usage\",children:\"deferExecution usage\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (!isPessimistic && !isAutosave) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // If the mutation mode is not pessimistic, handle the redirect immediately in an async manner\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // `setWarnWhen` blocks the redirects until set to `false`\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // If redirect is done before the value is properly set, it will be blocked.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // We're deferring the execution of the redirect to ensure that the value is set properly.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  deferExecution(() => onSuccessRedirect());\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Resolve the promise immediately\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  resolve();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This code snippet is one instance picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/form/index.ts#L246\",children:\"hooks/form/index.ts\"})]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"But I am surprised there is no clean up in the sense that timeout is not cleared\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"testing-deferexecution\",children:\"Testing deferExecution()\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.spec.ts\",children:\"defer-execution/index.spec.ts\"}),\" containing the below code:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { waitFor } from \"@testing-library/react\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { deferExecution } from \".\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'describe(\"deferExecution\", () => {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  beforeEach(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    jest.useRealTimers();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  afterEach(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    jest.useFakeTimers();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  it(\"should defer the call after caller returns\", async () => {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const array: number[] = [];\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const fn = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      array.push(1);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      deferExecution(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        array.push(3);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      array.push(2);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    await waitFor(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      expect(array).toEqual([1, 2, 3]);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"arr.push(3) is called inside deferExecution and the result is validated to [1, 2, 3].\\xA0\"}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.ts#L8\",children:\"https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.ts#L8\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/form/index.ts#L292\",children:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/form/index.ts#L292\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/tree/main/packages/core/src/definitions/helpers/defer-execution\",children:\"https://github.com/refinedev/refine/tree/main/packages/core/src/definitions/helpers/defer-execution\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/setTimeout\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/setTimeout\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Execution_model#job_queue_and_event_loop\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Execution_model#job_queue_and_event_loop\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.spec.ts\",children:\"https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/defer-execution/index.spec.ts\"})}),`\n`]}),`\n`]})]})}function h(i={}){let{wrapper:e}=i.components||{};return e?(0,n.jsx)(e,{...i,children:(0,n.jsx)(o,{...i})}):o(i)}return v(y);})();\n;return Component;"
        },
        "_id": "blog/deferExecution-in-Refine-source.mdx",
        "_raw": {
          "sourceFilePath": "blog/deferExecution-in-Refine-source.mdx",
          "sourceFileName": "deferExecution-in-Refine-source.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/deferExecution-in-Refine-source"
        },
        "type": "Doc",
        "slug": "/blog/deferExecution-in-Refine-source",
        "slugAsParams": "deferExecution-in-Refine-source"
      },
      "documentHash": "1742201727605",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/defu-usage-in-unbuild.mdx": {
      "document": {
        "title": "Defu usage in unbuild source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nFor this week, I have been reading [unbuild](https://github.com/unjs/unbuild) source code and found few packages that I have never seen before or used. I wanted to share some interesting packages that are used in these OSS projects so we can learn a thing or two ;)\r\n\r\nThe following are discussed in this article:\r\n\r\n1. What is Defu?\r\n    \r\n2. Defu’s usage in unbuild\r\n    \r\n\r\n### What is Defu?\r\n\r\nDefu is a package built by [authors at Unjs](https://github.com/unjs). Unjs provides JS tools, libraries and has about 63 npm packages and [421m downloads per month](https://unjs.io/packages?q=&order=1&orderBy=title). Sheesh, that’s a lot.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*AmoWOAIoUQj1n4jby_uhRg.png)\r\n\r\n[Defu repository](https://github.com/unjs/defu#readme) has this description “Assign default properties recursively”.\r\n\r\nThis package is straightforward to use:\r\n\r\n#### Install\r\n\r\n```js\r\n# yarn\r\nyarn add defu\r\n# npm\r\nnpm install defu\r\n# pnpm\r\npnpm install defu\r\n```\r\n\r\n#### Usage\r\n\r\n```js\r\nimport { defu } from \"defu\";\r\n\r\nconsole.log(defu({ a: { b: 2 } }, { a: { b: 1, c: 3 } }));\r\n// => { a: { b: 2, c: 3 } }\r\n```\r\n\r\nLeftmost arguments have more priority when assigning defaults.\r\n\r\nDefu is used to merge objects and the leftmost arguments have precedence as shown in the above example, picked from [Readme](https://github.com/unjs/defu?tab=readme-ov-file#usage).\r\n\r\n### Defu’s usage in unbuild\r\n\r\n[At line 93 in build.ts](https://github.com/unjs/unbuild/blob/main/src/build.ts#L93), you will find this below code snippet:\r\n\r\n```js\r\n// Merge options\r\n  const options = defu(\r\n    buildConfig,\r\n    pkg.unbuild || pkg.build,\r\n    inputConfig,\r\n    preset,\r\n    <BuildOptions>{\r\n      name: (pkg?.name || \"\").split(\"/\").pop() || \"default\",\r\n      rootDir,\r\n      entries: [],\r\n      clean: true,\r\n      declaration: undefined,\r\n      outDir: \"dist\",\r\n      stub: _stubMode,\r\n      stubOptions: {\r\n        /**\r\n         * See https://github.com/unjs/jiti#%EF%B8%8F-options\r\n         */\r\n        jiti: {\r\n          interopDefault: true,\r\n          alias: {},\r\n        },\r\n      },\r\n      watch: _watchMode,\r\n      watchOptions: _watchMode\r\n        ? {\r\n            exclude: \"node_modules/**\",\r\n            include: \"src/**\",\r\n          }\r\n        : undefined,\r\n      externals: [\r\n        ...Module.builtinModules,\r\n        ...Module.builtinModules.map((m) => \"node:\" + m),\r\n      ],\r\n      dependencies: [],\r\n      devDependencies: [],\r\n      peerDependencies: [],\r\n      alias: {},\r\n      replace: {},\r\n      failOnWarn: true,\r\n      sourcemap: false,\r\n      rollup: {\r\n        emitCJS: false,\r\n        watch: false,\r\n        cjsBridge: false,\r\n        inlineDependencies: false,\r\n        preserveDynamicImports: true,\r\n        output: {\r\n          // https://v8.dev/features/import-attributes\r\n          importAttributesKey: \"with\",\r\n        },\r\n        // Plugins\r\n        replace: {\r\n          preventAssignment: true,\r\n        },\r\n        alias: {},\r\n        resolve: {\r\n          preferBuiltins: true,\r\n        },\r\n        json: {\r\n          preferConst: true,\r\n        },\r\n        commonjs: {\r\n          ignoreTryCatch: true,\r\n        },\r\n        esbuild: { target: \"esnext\" },\r\n        dts: {\r\n          // https://github.com/Swatinem/rollup-plugin-dts/issues/143\r\n          compilerOptions: { preserveSymlinks: false },\r\n          respectExternal: true,\r\n        },\r\n      },\r\n      parallel: false,\r\n    },\r\n  ) as BuildOptions;\r\n```\r\n\r\nthis `options` object is large and following the Defu’s definition, all these objects are merged recursively with leftmost arguments taking precedence.\r\n\r\nI wonder how this package is different from [lodash.\\_merge](https://lodash.com/docs/#merge). Something to explore, I guess.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L93](https://github.com/unjs/unbuild/blob/main/src/build.ts#L93)\r\n    \r\n2. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L8](https://github.com/unjs/unbuild/blob/main/src/build.ts#L8)\r\n    \r\n3. [https://www.npmjs.com/package/defu](https://www.npmjs.com/package/defu)",
          "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var s in e)r(n,s,{get:e[s],enumerable:!0})},F=(n,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(n,c)&&c!==s&&r(n,c,{get:()=>e[c],enumerable:!(a=p(e,c))||a.enumerable});return n};var N=(n,e,s)=>(s=n!=null?h(m(n)):{},F(e||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),b=n=>F(r({},\"__esModule\",{value:!0}),n);var i=g((v,o)=>{o.exports=_jsx_runtime});var w={};f(w,{default:()=>d,frontmatter:()=>j});var l=N(i()),j={title:\"Defu usage in unbuild source\\xA0code.\"};function t(n){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"For this week, I have been reading \",(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild\",children:\"unbuild\"}),\" source code and found few packages that I have never seen before or used. I wanted to share some interesting packages that are used in these OSS projects so we can learn a thing or two\\xA0;)\"]}),`\n`,(0,l.jsx)(e.p,{children:\"The following are discussed in this article:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"What is Defu?\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"Defu\\u2019s usage in unbuild\"}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(e.h3,{id:\"what-isdefu\",children:\"What is\\xA0Defu?\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"Defu is a package built by \",(0,l.jsx)(e.a,{href:\"https://github.com/unjs\",children:\"authors at Unjs\"}),\". Unjs provides JS tools, libraries and has about 63 npm packages and \",(0,l.jsx)(e.a,{href:\"https://unjs.io/packages?q=&order=1&orderBy=title\",children:\"421m downloads per month\"}),\". Sheesh, that\\u2019s a lot.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*AmoWOAIoUQj1n4jby_uhRg.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/unjs/defu#readme\",children:\"Defu repository\"}),\" has this description \\u201CAssign default properties recursively\\u201D.\"]}),`\n`,(0,l.jsx)(e.p,{children:\"This package is straightforward to use:\"}),`\n`,(0,l.jsx)(e.h4,{id:\"install\",children:\"Install\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"# yarn\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"yarn add defu\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"# npm\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"npm install defu\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"# pnpm\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"pnpm install defu\"})})]})})}),`\n`,(0,l.jsx)(e.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defu \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"defu\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"defu\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" a\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 2\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" a\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" c\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 3\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" => { a: { b: 2, c: 3 } }\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Leftmost arguments have more priority when assigning defaults.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"Defu is used to merge objects and the leftmost arguments have precedence as shown in the above example, picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/unjs/defu?tab=readme-ov-file#usage\",children:\"Readme\"}),\".\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"defus-usage-inunbuild\",children:\"Defu\\u2019s usage in\\xA0unbuild\"}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\",children:\"At line 93 in build.ts\"}),\", you will find this below code snippet:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Merge options\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defu\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    buildConfig\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    pkg\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"unbuild \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" pkg\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"build\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    inputConfig\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    preset\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"BuildOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">{\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      name: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"pkg\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"split\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"/\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"pop\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"default\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      rootDir\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      entries: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[],\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      clean: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      declaration: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"undefined,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      outDir: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"dist\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      stub: _stubMode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      stubOptions: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        /**\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"         * See https://github.com/unjs/jiti#%EF%B8%8F-options\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"         */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        jiti\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          interopDefault\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          alias\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {},\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      watch: _watchMode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      watchOptions: _watchMode\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            exclude\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"node_modules/**\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            include\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"src/**\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          }\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" undefined,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      externals: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Module\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"builtinModules\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Module\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"builtinModules\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"map\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"m\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"node:\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" +\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" m\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ],\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      dependencies: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[],\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      devDependencies: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[],\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      peerDependencies: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[],\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      alias: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{},\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      replace: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{},\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      failOnWarn: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      sourcemap: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      rollup: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        emitCJS\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        watch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        cjsBridge\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        inlineDependencies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        preserveDynamicImports\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        output\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://v8.dev/features/import-attributes\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          importAttributesKey\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"with\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Plugins\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        replace\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          preventAssignment\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        alias\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {},\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        resolve\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          preferBuiltins\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        json\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          preferConst\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        commonjs\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          ignoreTryCatch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        esbuild\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" target\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"esnext\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        dts\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://github.com/Swatinem/rollup-plugin-dts/issues/143\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          compilerOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" preserveSymlinks\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          respectExternal\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      parallel: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  ) as BuildOptions;\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"this \",(0,l.jsx)(e.code,{children:\"options\"}),\" object is large and following the Defu\\u2019s definition, all these objects are merged recursively with leftmost arguments taking precedence.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"I wonder how this package is different from \",(0,l.jsx)(e.a,{href:\"https://lodash.com/docs/#merge\",children:\"lodash._merge\"}),\". Something to explore, I guess.\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L8\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L8\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://www.npmjs.com/package/defu\",children:\"https://www.npmjs.com/package/defu\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return b(w);})();\n;return Component;"
        },
        "_id": "blog/defu-usage-in-unbuild.mdx",
        "_raw": {
          "sourceFilePath": "blog/defu-usage-in-unbuild.mdx",
          "sourceFileName": "defu-usage-in-unbuild.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/defu-usage-in-unbuild"
        },
        "type": "Doc",
        "slug": "/blog/defu-usage-in-unbuild",
        "slugAsParams": "defu-usage-in-unbuild"
      },
      "documentHash": "1740489186282",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/degit-to-download-CLI.mdx": {
      "document": {
        "title": "Use degit to download a template in your CLI tool.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI found a file named “degit” in the [Remotion source code](https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts). [Remotion](https://www.remotion.dev/) helps you make videos programatically.\r\n\r\nIn this article, we will look at the following concepts:\r\n\r\n1. What is Degit?\r\n    \r\n2. Build a simple degit function inspired by [Remotion’s degit file](https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts)\r\n    \r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*9HJbUD4G5M4MLeAI3WZ8rA.png)\r\n\r\n# **What is Degit?**\r\n\r\nI do remember seeing “degit” mentioned in one of the Readmes in the open source, but I could not recall which repository it was so I googled what a degit means and found this [degit npm package](https://github.com/Rich-Harris/degit).\r\n\r\nIn simple terms, You can use degit to quickly make a copy of a Github repository by only downloading the latest commit  \r\ninstead of the entire git history.\r\n\r\nVisit the official [npm package for degit](https://github.com/Rich-Harris/degit) to read more about this package.\r\n\r\nYou can use this degit package to download repos from Gitlab or Bitbucket as well so its not just limited to Github repositories.\r\n\r\n```plaintext\r\n# download from GitLab\r\ndegit gitlab:user/repo\r\n# download from BitBucket\r\ndegit bitbucket:user/repo\r\ndegit user/repo\r\n# these commands are equivalent\r\ndegit github:user/repo\r\n```\r\n\r\nHere’s a sample usage in Javascript:\r\n\r\n```plaintext\r\nconst degit = require('degit');\r\nconst emitter = degit('user/repo', {\r\n    cache: true,\r\n    force: true,\r\n    verbose: true,\r\n});\r\nemitter.on('info', info => {\r\n    console.log(info.message);\r\n});\r\nemitter.clone('path/to/dest').then(() => {\r\n    console.log('done');\r\n});\r\n```\r\n\r\n# **Build a simple degit function inspired by Remotion’s degit file**\r\n\r\nTo understand how to build a simple degit function, let’s break down the code from Remotion’s degit.ts file. This file implements a basic version of what the degit npm package does: fetching a GitHub repository’s latest state without downloading the full history.\r\n\r\n# **1\\. Imports used**\r\n\r\n```plaintext\r\nimport https from 'https';\r\nimport fs from 'node:fs';\r\nimport {tmpdir} from 'node:os';\r\nimport path from 'node:path';\r\nimport tar from 'tar';\r\nimport {mkdirp} from './mkdirp';\r\n```\r\n\r\n* https: Used to make a network request to fetch the repository.\r\n    \r\n* fs: Interacts with the file system, such as writing the downloaded files.\r\n    \r\n* tmpdir: Provides the system’s temporary directory path.\r\n    \r\n* path: Handles and transforms file paths.\r\n    \r\n* tar: Extracts the contents of the tarball (compressed file).\r\n    \r\n* mkdirp: A helper function to create directories recursively, provided in a separate file.\r\n    \r\n\r\n# **2: Fetching the Repository**\r\n\r\n```plaintext\r\nexport function fetch(url: string, dest: string) {\r\n    return new Promise<void>((resolve, reject) => {\r\n        https.get(url, (response) => {\r\n            const code = response.statusCode as number;\r\n            if (code >= 400) {\r\n                reject(\r\n                    new Error(\r\n                        `Network request to ${url} failed with code ${code} (${response.statusMessage})`,\r\n                    ),\r\n                );\r\n            } else if (code >= 300) {\r\n                fetch(response.headers.location as string, dest)\r\n                    .then(resolve)\r\n                    .catch(reject);\r\n            } else {\r\n                response\r\n                    .pipe(fs.createWriteStream(dest))\r\n                    .on('finish', () => resolve())\r\n                    .on('error', reject);\r\n            }\r\n        }).on('error', reject);\r\n    });\r\n}\r\n```\r\n\r\n* URL Handling: The function checks if the request is successful (status codes below 300). If it’s a redirect (codes between 300 and 399), it follows the new URL. If it’s an error (codes 400+), it rejects the promise.\r\n    \r\n* File Saving: The repository is downloaded and saved to the dest path using fs.createWriteStream.\r\n    \r\n\r\n# **3: Extracting the Repository**\r\n\r\nAfter downloading the repository, it’s necessary to extract the contents of the tarball:\r\n\r\n```plaintext\r\nfunction untar(file: string, dest: string) {\r\n    return tar.extract(\r\n        {\r\n            file,\r\n            strip: 1,\r\n            C: dest,\r\n        },\r\n        [],\r\n    );\r\n}\r\n```\r\n\r\n* Tar Extraction: This function extracts the contents of the .tar.gz file into the specified destination directory.\r\n    \r\n\r\n# **4: Putting It All Together**\r\n\r\nThe main degit function ties everything together, handling directory creation, fetching, and extracting the repository:\r\n\r\n```plaintext\r\nexport const degit = async ({\r\n    repoOrg,\r\n    repoName,\r\n    dest,\r\n}: {\r\n    repoOrg: string;\r\n    repoName: string;\r\n    dest: string;\r\n}) => {\r\n    const base = path.join(tmpdir(), '.degit');\r\n    const dir = path.join(base, repoOrg, repoName);\r\n    const file = `${dir}/HEAD.tar.gz`;\r\n    const url = `https://github.com/${repoOrg}/${repoName}/archive/HEAD.tar.gz`;\r\n    mkdirp(path.dirname(file));\r\n    await fetch(url, file);\r\n    mkdirp(dest);\r\n    await untar(file, dest);\r\n    fs.unlinkSync(file);\r\n};\r\n```\r\n\r\n[mkdirp](https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/mkdirp.ts) is used to create a directories recursively.\r\n\r\n# **Conclusion:**\r\n\r\nI found that remotion uses degit to download templates when you run their installation commmand:\r\n\r\n```plaintext\r\nnpx create-video@latest\r\n```\r\n\r\nThis command asks you to choose a template, this is where degit comes into action to download the latest commit of the selected template\r\n\r\nYou can check this code from [create-video package](https://github.com/remotion-dev/remotion/blob/c535e676badd055187d1ea8007f9ac76ab0ad315/packages/create-video/src/init.ts#L109) for proof.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/0*7vT8QgWHKCJj4eCF)\r\n\r\n> [*Get free courses inspired by the best practices used in open source.*](https://app.thinkthroo.com/best-practices)\r\n\r\n# About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/Rich-Harris/degit](https://github.com/Rich-Harris/degit)\r\n    \r\n2. [https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts](https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts)\r\n    \r\n3. [https://github.com/remotion-dev/remotion/blob/c535e676badd055187d1ea8007f9ac76ab0ad315/packages/create-video/src/init.ts#L109](https://github.com/remotion-dev/remotion/blob/c535e676badd055187d1ea8007f9ac76ab0ad315/packages/create-video/src/init.ts#L109)\r\n    \r\n4. [https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/mkdirp.ts](https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/mkdirp.ts)",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),N=(i,e)=>{for(var a in e)r(i,a,{get:e[a],enumerable:!0})},l=(i,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of g(e))!f.call(i,t)&&t!==a&&r(i,t,{get:()=>e[t],enumerable:!(s=m(e,t))||s.enumerable});return i};var y=(i,e,a)=>(a=i!=null?p(u(i)):{},l(e||!i||!i.__esModule?r(a,\"default\",{value:i,enumerable:!0}):a,i)),k=i=>l(r({},\"__esModule\",{value:!0}),i);var d=b((j,c)=>{c.exports=_jsx_runtime});var w={};N(w,{default:()=>o,frontmatter:()=>v});var n=y(d()),v={title:\"Use degit to download a template in your CLI tool.\"};function h(i){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...i.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I found a file named \\u201Cdegit\\u201D in the \",(0,n.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts\",children:\"Remotion source code\"}),\". \",(0,n.jsx)(e.a,{href:\"https://www.remotion.dev/\",children:\"Remotion\"}),\" helps you make videos programatically.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"In this article, we will look at the following concepts:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What is Degit?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Build a simple degit function inspired by \",(0,n.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts\",children:\"Remotion\\u2019s degit file\"})]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*9HJbUD4G5M4MLeAI3WZ8rA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"what-is-degit\",children:(0,n.jsx)(e.strong,{children:\"What is Degit?\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I do remember seeing \\u201Cdegit\\u201D mentioned in one of the Readmes in the open source, but I could not recall which repository it was so I googled what a degit means and found this \",(0,n.jsx)(e.a,{href:\"https://github.com/Rich-Harris/degit\",children:\"degit npm package\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"In simple terms, You can use degit to quickly make a copy of a Github repository by only downloading the latest commit\",(0,n.jsx)(e.br,{}),`\n`,\"instead of the entire git history.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Visit the official \",(0,n.jsx)(e.a,{href:\"https://github.com/Rich-Harris/degit\",children:\"npm package for degit\"}),\" to read more about this package.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"You can use this degit package to download repos from Gitlab or Bitbucket as well so its not just limited to Github repositories.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# download from GitLab\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"degit gitlab:user/repo\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# download from BitBucket\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"degit bitbucket:user/repo\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"degit user/repo\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# these commands are equivalent\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"degit github:user/repo\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Here\\u2019s a sample usage in Javascript:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const degit = require('degit');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const emitter = degit('user/repo', {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    cache: true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    force: true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    verbose: true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"emitter.on('info', info => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    console.log(info.message);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"emitter.clone('path/to/dest').then(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    console.log('done');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"build-a-simple-degit-function-inspired-by-remotions-degit-file\",children:(0,n.jsx)(e.strong,{children:\"Build a simple degit function inspired by Remotion\\u2019s degit file\"})}),`\n`,(0,n.jsx)(e.p,{children:\"To understand how to build a simple degit function, let\\u2019s break down the code from Remotion\\u2019s degit.ts file. This file implements a basic version of what the degit npm package does: fetching a GitHub repository\\u2019s latest state without downloading the full history.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"1-imports-used\",children:(0,n.jsx)(e.strong,{children:\"1. Imports used\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import https from 'https';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import fs from 'node:fs';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import {tmpdir} from 'node:os';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import path from 'node:path';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import tar from 'tar';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import {mkdirp} from './mkdirp';\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"https: Used to make a network request to fetch the repository.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"fs: Interacts with the file system, such as writing the downloaded files.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"tmpdir: Provides the system\\u2019s temporary directory path.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"path: Handles and transforms file paths.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"tar: Extracts the contents of the tarball (compressed file).\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"mkdirp: A helper function to create directories recursively, provided in a separate file.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"2-fetching-the-repository\",children:(0,n.jsx)(e.strong,{children:\"2: Fetching the Repository\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function fetch(url: string, dest: string) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return new Promise<void>((resolve, reject) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        https.get(url, (response) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            const code = response.statusCode as number;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            if (code >= 400) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                reject(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                    new Error(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                        `Network request to ${url} failed with code ${code} (${response.statusMessage})`,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                    ),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            } else if (code >= 300) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                fetch(response.headers.location as string, dest)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                    .then(resolve)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                    .catch(reject);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            } else {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                response\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                    .pipe(fs.createWriteStream(dest))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                    .on('finish', () => resolve())\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"                    .on('error', reject);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        }).on('error', reject);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"URL Handling: The function checks if the request is successful (status codes below 300). If it\\u2019s a redirect (codes between 300 and 399), it follows the new URL. If it\\u2019s an error (codes 400+), it rejects the promise.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"File Saving: The repository is downloaded and saved to the dest path using fs.createWriteStream.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"3-extracting-the-repository\",children:(0,n.jsx)(e.strong,{children:\"3: Extracting the Repository\"})}),`\n`,(0,n.jsx)(e.p,{children:\"After downloading the repository, it\\u2019s necessary to extract the contents of the tarball:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function untar(file: string, dest: string) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return tar.extract(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            file,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            strip: 1,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            C: dest,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        [],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Tar Extraction: This function extracts the contents of the .tar.gz file into the specified destination directory.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"4-putting-it-all-together\",children:(0,n.jsx)(e.strong,{children:\"4: Putting It All Together\"})}),`\n`,(0,n.jsx)(e.p,{children:\"The main degit function ties everything together, handling directory creation, fetching, and extracting the repository:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const degit = async ({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    repoOrg,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    repoName,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    dest,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    repoOrg: string;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    repoName: string;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    dest: string;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const base = path.join(tmpdir(), '.degit');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const dir = path.join(base, repoOrg, repoName);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const file = `${dir}/HEAD.tar.gz`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const url = `https://github.com/${repoOrg}/${repoName}/archive/HEAD.tar.gz`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    mkdirp(path.dirname(file));\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    await fetch(url, file);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    mkdirp(dest);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    await untar(file, dest);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    fs.unlinkSync(file);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/mkdirp.ts\",children:\"mkdirp\"}),\" is used to create a directories recursively.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"conclusion\",children:(0,n.jsx)(e.strong,{children:\"Conclusion:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"I found that remotion uses degit to download templates when you run their installation commmand:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npx create-video@latest\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"This command asks you to choose a template, this is where degit comes into action to download the latest commit of the selected template\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can check this code from \",(0,n.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/c535e676badd055187d1ea8007f9ac76ab0ad315/packages/create-video/src/init.ts#L109\",children:\"create-video package\"}),\" for proof.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/0*7vT8QgWHKCJj4eCF\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:(0,n.jsx)(e.em,{children:\"Get free courses inspired by the best practices used in open source.\"})})}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/Rich-Harris/degit\",children:\"https://github.com/Rich-Harris/degit\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts\",children:\"https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/degit.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/c535e676badd055187d1ea8007f9ac76ab0ad315/packages/create-video/src/init.ts#L109\",children:\"https://github.com/remotion-dev/remotion/blob/c535e676badd055187d1ea8007f9ac76ab0ad315/packages/create-video/src/init.ts#L109\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/mkdirp.ts\",children:\"https://github.com/remotion-dev/remotion/blob/main/packages/create-video/src/mkdirp.ts\"})}),`\n`]}),`\n`]})]})}function o(i={}){let{wrapper:e}=i.components||{};return e?(0,n.jsx)(e,{...i,children:(0,n.jsx)(h,{...i})}):h(i)}return k(w);})();\n;return Component;"
        },
        "_id": "blog/degit-to-download-CLI.mdx",
        "_raw": {
          "sourceFilePath": "blog/degit-to-download-CLI.mdx",
          "sourceFileName": "degit-to-download-CLI.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/degit-to-download-CLI"
        },
        "type": "Doc",
        "slug": "/blog/degit-to-download-CLI",
        "slugAsParams": "degit-to-download-CLI"
      },
      "documentHash": "1741944637356",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/dosu-bot-usage-in-lobechat.mdx": {
      "document": {
        "title": "Dosu bot usage in Lobechat\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze Dosu bot usage in Lobechat pull requests. As I was studying the lobechat code, for some reason I ended up on this [pull request](https://github.com/lobehub/lobe-chat/issues/4395) and found that there is a comment from [dosubot](https://github.com/apps/dosubot).\r\n\r\n![image](https://miro.medium.com/v2/resize:fit:875/1*Q_bkJ_gaCKxcMM3ImK448g.png)\r\n\r\n# **Dosu**\r\n\r\nDosu lets engineers focus on value-add work by answering questions, triaging issues, and maintaining documentation for them.\r\n\r\nRead [Dosu documentation](https://docs.dosu.dev/pages/onboarding-quickstart) to learn how you can use Dosu in your projects.\r\n\r\n## **Dosu community reactions:**\r\n\r\n1\\. [“The bot is right!”](https://github.com/run-llama/llama_index/issues/7684#issuecomment-1721430612)  \r\n2\\. [“Yes, that was the problem, I can confirm it works fine now!”](https://github.com/langchain-ai/langchain/issues/13115#issuecomment-1803510213)  \r\n3\\. [“Thanks jinja2 worked perfectly.”](https://github.com/langchain-ai/langchain/issues/13055#issuecomment-1801778473)  \r\n4\\. [“Thank you, you have been very helpful.”](https://github.com/astronomer/astronomer-cosmos/issues/670#issuecomment-1809333870)\r\n\r\n## **Limited Access Beta**\r\n\r\nAt the time of writing this article, Dosu is in Beta. If you’re interesting in trying out Dosu, join their waiting list at [https://dosu.dev](https://dosu.dev/) or reach out to dosu team at hi@dosu.dev\r\n\r\nDosu can be installed on any repository, but it will not do anything until you’re taken off the waitlist.\r\n\r\n# **Dosu’s comment on Lobechat repo:**\r\n\r\n1. [Failed to locate the entry point in lobechat code](https://github.com/lobehub/lobe-chat/issues/4395)\r\n    \r\n2. [Too many requests, please wait before trying again.](https://github.com/lobehub/lobe-chat/issues/3994)\r\n    \r\n\r\n![image](https://miro.medium.com/v2/resize:fit:875/1*Q_bkJ_gaCKxcMM3ImK448g.png)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/lobehub/lobe-chat/issues/4395](https://github.com/lobehub/lobe-chat/issues/4395)\r\n    \r\n2. [https://github.com/apps/dosubot](https://github.com/apps/dosubot)\r\n    \r\n3. [https://github.com/devstein](https://github.com/devstein)\r\n    \r\n4. [https://dosu.dev/](https://dosu.dev/)\r\n    \r\n5. [https://docs.dosu.dev/pages/onboarding-quickstart](https://docs.dosu.dev/pages/onboarding-quickstart)",
          "code": "var Component=(()=>{var u=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),y=(n,e)=>{for(var i in e)r(n,i,{get:e[i],enumerable:!0})},s=(n,e,i,h)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of m(e))!b.call(n,o)&&o!==i&&r(n,o,{get:()=>e[o],enumerable:!(h=p(e,o))||h.enumerable});return n};var w=(n,e,i)=>(i=n!=null?u(g(n)):{},s(e||!n||!n.__esModule?r(i,\"default\",{value:n,enumerable:!0}):i,n)),k=n=>s(r({},\"__esModule\",{value:!0}),n);var c=f((x,a)=>{a.exports=_jsx_runtime});var j={};y(j,{default:()=>l,frontmatter:()=>v});var t=w(c()),v={title:\"Dosu bot usage in Lobechat\"};function d(n){let e={a:\"a\",br:\"br\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",strong:\"strong\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"In this article, we analyze Dosu bot usage in Lobechat pull requests. As I was studying the lobechat code, for some reason I ended up on this \",(0,t.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/issues/4395\",children:\"pull request\"}),\" and found that there is a comment from \",(0,t.jsx)(e.a,{href:\"https://github.com/apps/dosubot\",children:\"dosubot\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*Q_bkJ_gaCKxcMM3ImK448g.png\",alt:\"image\"})}),`\n`,(0,t.jsx)(e.h1,{id:\"dosu\",children:(0,t.jsx)(e.strong,{children:\"Dosu\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Dosu lets engineers focus on value-add work by answering questions, triaging issues, and maintaining documentation for them.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Read \",(0,t.jsx)(e.a,{href:\"https://docs.dosu.dev/pages/onboarding-quickstart\",children:\"Dosu documentation\"}),\" to learn how you can use Dosu in your projects.\"]}),`\n`,(0,t.jsx)(e.h2,{id:\"dosu-community-reactions\",children:(0,t.jsx)(e.strong,{children:\"Dosu community reactions:\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"1. \",(0,t.jsx)(e.a,{href:\"https://github.com/run-llama/llama_index/issues/7684#issuecomment-1721430612\",children:\"\\u201CThe bot is right!\\u201D\"}),(0,t.jsx)(e.br,{}),`\n`,\"2. \",(0,t.jsx)(e.a,{href:\"https://github.com/langchain-ai/langchain/issues/13115#issuecomment-1803510213\",children:\"\\u201CYes, that was the problem, I can confirm it works fine now!\\u201D\"}),(0,t.jsx)(e.br,{}),`\n`,\"3. \",(0,t.jsx)(e.a,{href:\"https://github.com/langchain-ai/langchain/issues/13055#issuecomment-1801778473\",children:\"\\u201CThanks jinja2 worked perfectly.\\u201D\"}),(0,t.jsx)(e.br,{}),`\n`,\"4. \",(0,t.jsx)(e.a,{href:\"https://github.com/astronomer/astronomer-cosmos/issues/670#issuecomment-1809333870\",children:\"\\u201CThank you, you have been very helpful.\\u201D\"})]}),`\n`,(0,t.jsx)(e.h2,{id:\"limited-access-beta\",children:(0,t.jsx)(e.strong,{children:\"Limited Access Beta\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"At the time of writing this article, Dosu is in Beta. If you\\u2019re interesting in trying out Dosu, join their waiting list at \",(0,t.jsx)(e.a,{href:\"https://dosu.dev/\",children:\"https://dosu.dev\"}),\" or reach out to dosu team at \",(0,t.jsx)(e.a,{href:\"mailto:hi@dosu.dev\",children:\"hi@dosu.dev\"})]}),`\n`,(0,t.jsx)(e.p,{children:\"Dosu can be installed on any repository, but it will not do anything until you\\u2019re taken off the waitlist.\"}),`\n`,(0,t.jsx)(e.h1,{id:\"dosus-comment-on-lobechat-repo\",children:(0,t.jsx)(e.strong,{children:\"Dosu\\u2019s comment on Lobechat repo:\"})}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/issues/4395\",children:\"Failed to locate the entry point in lobechat code\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/issues/3994\",children:\"Too many requests, please wait before trying again.\"})}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*Q_bkJ_gaCKxcMM3ImK448g.png\",alt:\"image\"})}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h1,{id:\"references\",children:(0,t.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/issues/4395\",children:\"https://github.com/lobehub/lobe-chat/issues/4395\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/apps/dosubot\",children:\"https://github.com/apps/dosubot\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/devstein\",children:\"https://github.com/devstein\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://dosu.dev/\",children:\"https://dosu.dev/\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://docs.dosu.dev/pages/onboarding-quickstart\",children:\"https://docs.dosu.dev/pages/onboarding-quickstart\"})}),`\n`]}),`\n`]})]})}function l(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}return k(j);})();\n;return Component;"
        },
        "_id": "blog/dosu-bot-usage-in-lobechat.mdx",
        "_raw": {
          "sourceFilePath": "blog/dosu-bot-usage-in-lobechat.mdx",
          "sourceFileName": "dosu-bot-usage-in-lobechat.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/dosu-bot-usage-in-lobechat"
        },
        "type": "Doc",
        "slug": "/blog/dosu-bot-usage-in-lobechat",
        "slugAsParams": "dosu-bot-usage-in-lobechat"
      },
      "documentHash": "1741254924715",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/dynamic-form-in-lobechat.mdx": {
      "document": {
        "title": "Dynamic form in LobeChat source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse `Settings` modal that renders the form fields dynamically by reviewing the [Lobechat source code](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28main%29/settings/common/features/Common.tsx).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*KnDcySokBqRqiG-hYhbXMA.png)\r\n\r\nThere’s a catch here, when you refresh the page, the settings no longer appears as a form, instead it appears as a page as shown in the below image.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*sZYortgO21NDgIvSW36wMg.png)\r\n\r\n### Code that renders this Settings form\r\n\r\nIn this file named [Common.tsx](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28main%29/settings/common/features/Common.tsx), you will find the code that renders this settings form. Ideally, you would just write the code for form that has all these fields written in HTML, but LobeChat does it differently.\r\n\r\n```js\r\nreturn (\r\n    <Form\r\n      form={form}\r\n      initialValues={settings}\r\n      items={[system]}\r\n      itemsType={'group'}\r\n      onValuesChange={setSettings}\r\n      variant={'pure'}\r\n      {...FORM_STYLE}\r\n    />\r\n  );\r\n```\r\n\r\nThis Form element has a property called items that is a assigned a value named `system`\r\n\r\nWhere is this Form element imported from? At the top of this file, you will find this below import:\r\n\r\n```js\r\nimport { Form, type ItemGroup } from '@lobehub/ui';\r\n```\r\n\r\n[Lobe-ui](https://github.com/lobehub/lobe-ui) is an open-source UI component library for building AIGC (artificial intelligence generated content) web apps.\r\n\r\n#### Form fields:\r\n\r\nForm fields are assigned to a variable named system.\r\n\r\n```js\r\nconst system: SettingItemGroup = {\r\n    children: [\r\n      {\r\n        children: (\r\n          <Input.Password\r\n            autoComplete={'new-password'}\r\n            placeholder={t('settingSystem.accessCode.placeholder')}\r\n          />\r\n        ),\r\n        desc: t('settingSystem.accessCode.desc'),\r\n        hidden: !showAccessCodeConfig,\r\n        label: t('settingSystem.accessCode.title'),\r\n        name: ['keyVaults', 'password'],\r\n      },\r\n      {\r\n        children: (\r\n          <Button danger onClick={handleReset} type=\"primary\">\r\n            {t('danger.reset.action')}\r\n          </Button>\r\n        ),\r\n        desc: t('danger.reset.desc'),\r\n        label: t('danger.reset.title'),\r\n        minWidth: undefined,\r\n      },\r\n      {\r\n        children: (\r\n          <Button danger onClick={handleClear} type=\"primary\">\r\n            {t('danger.clear.action')}\r\n          </Button>\r\n        ),\r\n        desc: t('danger.clear.desc'),\r\n        label: t('danger.clear.title'),\r\n        minWidth: undefined,\r\n      },\r\n    ],\r\n    title: t('settingSystem.title'),\r\n  };\r\n```\r\n\r\nJust by looking at this source code, you can see how the fields are configured here. For example, the first field is an input with password type and the rest of them are buttons.\r\n\r\nThese elements have properties such as desc, label in common. Read more about [Forms in Lobe-ui](https://ui.lobehub.com/components/form).\r\n\r\nThese Button and Input elements are imported from antd, found at the top of the [Common.tsx](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28main%29/settings/common/features/Common.tsx#L4)\r\n\r\n```plaintext\r\nimport { App, Button, Input } from 'antd';\r\n```\r\n\r\nLobeChat uses components provided by [ant.design](https://ant.design/components/button).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*IIGzs36pONW-MeNfMyofcQ.png)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/lobehub/lobe-chat/blob/main/src/app/(main)/settings/common/features/Common.tsx](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28main%29/settings/common/features/Common.tsx)\r\n    \r\n2. [https://github.com/lobehub/lobe-ui](https://github.com/lobehub/lobe-ui)\r\n    \r\n3. [https://ui.lobehub.com/components/form](https://ui.lobehub.com/components/form)\r\n    \r\n4. [https://ant.design/components/overview/](https://ant.design/components/overview/)",
          "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),b=(l,e)=>{for(var s in e)c(l,s,{get:e[s],enumerable:!0})},a=(l,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!u.call(l,r)&&r!==s&&c(l,r,{get:()=>e[r],enumerable:!(o=p(e,r))||o.enumerable});return l};var f=(l,e,s)=>(s=l!=null?d(y(l)):{},a(e||!l||!l.__esModule?c(s,\"default\",{value:l,enumerable:!0}):s,l)),N=l=>a(c({},\"__esModule\",{value:!0}),l);var i=g((v,t)=>{t.exports=_jsx_runtime});var C={};b(C,{default:()=>h,frontmatter:()=>w});var n=f(i()),w={title:\"Dynamic form in LobeChat source code.\"};function F(l){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse \",(0,n.jsx)(e.code,{children:\"Settings\"}),\" modal that renders the form fields dynamically by reviewing the \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28main%29/settings/common/features/Common.tsx\",children:\"Lobechat source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*KnDcySokBqRqiG-hYhbXMA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"There\\u2019s a catch here, when you refresh the page, the settings no longer appears as a form, instead it appears as a page as shown in the below image.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*sZYortgO21NDgIvSW36wMg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"code-that-renders-this-settingsform\",children:\"Code that renders this Settings\\xA0form\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In this file named \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28main%29/settings/common/features/Common.tsx\",children:\"Common.tsx\"}),\", you will find the code that renders this settings form. Ideally, you would just write the code for form that has all these fields written in HTML, but LobeChat does it differently.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Form\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      form\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"form\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      initialValues\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"settings\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      items\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"system\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      itemsType\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'group'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      onValuesChange\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"setSettings\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      variant\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'pure'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      {...\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"FORM_STYLE\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  );\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This Form element has a property called items that is a assigned a value named \",(0,n.jsx)(e.code,{children:\"system\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"Where is this Form element imported from? At the top of this file, you will find this below import:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Form\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ItemGroup \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@lobehub/ui'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-ui\",children:\"Lobe-ui\"}),\" is an open-source UI component library for building AIGC (artificial intelligence generated content) web apps.\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"form-fields\",children:\"Form fields:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Form fields are assigned to a variable named system.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" system\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" SettingItemGroup\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    children\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        children\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Input.Password\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            autoComplete\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'new-password'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            placeholder\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'settingSystem.accessCode.placeholder'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")}\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ),\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        desc\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'settingSystem.accessCode.desc'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        hidden\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" !\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"showAccessCodeConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        label\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'settingSystem.accessCode.title'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        name\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'keyVaults'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'password'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"],\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        children\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Button danger onClick\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"handleReset\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"primary\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'danger.reset.action'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          </\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Button\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ),\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        desc\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'danger.reset.desc'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        label\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'danger.reset.title'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        minWidth\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" undefined,\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        children\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Button danger onClick\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"handleClear\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"primary\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'danger.clear.action'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          </\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Button\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ),\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        desc\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'danger.clear.desc'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        label\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'danger.clear.title'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        minWidth\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" undefined,\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ],\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    title\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'settingSystem.title'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  };\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Just by looking at this source code, you can see how the fields are configured here. For example, the first field is an input with password type and the rest of them are buttons.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"These elements have properties such as desc, label in common. Read more about \",(0,n.jsx)(e.a,{href:\"https://ui.lobehub.com/components/form\",children:\"Forms in Lobe-ui\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"These Button and Input elements are imported from antd, found at the top of the \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28main%29/settings/common/features/Common.tsx#L4\",children:\"Common.tsx\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { App, Button, Input } from 'antd';\"})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"LobeChat uses components provided by \",(0,n.jsx)(e.a,{href:\"https://ant.design/components/button\",children:\"ant.design\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*IIGzs36pONW-MeNfMyofcQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28main%29/settings/common/features/Common.tsx\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/(main)/settings/common/features/Common.tsx\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-ui\",children:\"https://github.com/lobehub/lobe-ui\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://ui.lobehub.com/components/form\",children:\"https://ui.lobehub.com/components/form\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://ant.design/components/overview/\",children:\"https://ant.design/components/overview/\"})}),`\n`]}),`\n`]})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(F,{...l})}):F(l)}return N(C);})();\n;return Component;"
        },
        "_id": "blog/dynamic-form-in-lobechat.mdx",
        "_raw": {
          "sourceFilePath": "blog/dynamic-form-in-lobechat.mdx",
          "sourceFileName": "dynamic-form-in-lobechat.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/dynamic-form-in-lobechat"
        },
        "type": "Doc",
        "slug": "/blog/dynamic-form-in-lobechat",
        "slugAsParams": "dynamic-form-in-lobechat"
      },
      "documentHash": "1740489186285",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/ee-folder-in-oss.mdx": {
      "document": {
        "title": "What's the `ee` folder in open-source projects?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse the ee folder found in open-source projects. This is closely linked to the open-source licensing. There’s a difference between Open source and source code available. You will find a [better explanation in this article](https://danb.me/blog/open-source-available-distinction/).\r\n\r\nOpen-source/source code available project licenses must be adhered to. An open-source/source code available project’s license is decided by the original author/team who built their project. It takes a lot of time and efforts to produce these open-source projects, hence you must respect the licensing in place.\r\n\r\nI am going to provide a couple of projects that contain ee folder that has a different license compared to the rest of the other parts of those projects.\r\n\r\n### Enterprise Edition\r\n\r\nee stands for Enterprise Edition.\r\n\r\n#### ee folder in Cal.com\r\n\r\nCal.com is a great example for this. In [api/v2/ee folder](https://github.com/calcom/cal.com/blob/d6fe955ea8826c8a426fe2b6fdf9b48a8d290dd5/apps/api/v2/src/ee/README.md?plain=1#L12), you will find the below content:\r\n\r\n“  \r\n\\# Enterprise Edition of API\r\n\r\nWelcome to the Enterprise Edition (“/ee”) of the Cal.com API.\r\n\r\nOur philosophy is simple, all “Singleplayer APIs” are open-source under AGPLv3.   \r\nAll “Multiplayer APIs” are under a commercial license.\r\n\r\nThe \\[/ee\\]([https://github.com/calcom/cal.com/tree/main/apps/api/v2/ee](https://github.com/calcom/cal.com/tree/main/apps/api/v2/ee)) subfolder is the place  \r\nfor all the **Enterprise Edition** features from our \\[hosted\\]([https://cal.com/pricing](https://cal.com/pricing)) plan   \r\nand enterprise-grade features for \\[Enterprise\\]([https://cal.com/enterprise](https://cal.com/enterprise)) such as SSO,   \r\nSAML, OIDC, SCIM, SIEM and much more or \\[Platform\\]([https://cal.com/platform](https://cal.com/platform)) plan to build   \r\na marketplace.\r\n\r\n\\&gt; *❗ WARNING: This repository is copyrighted (unlike our \\[main repo\\](*[*https://github.com/calcom/cal.com*](https://github.com/calcom/cal.com)*)).   \r\nYou are not allowed to use this code to host your own version of app.cal.com without obtaining a   \r\nproper \\[license\\](*[*https://console.cal.com/*](https://console.cal.com/)*) first❗*  \r\n“\r\n\r\n> You are not allowed to use this code to host your own version of app.cal.com without obtaining a proper \\[license\\]([https://console.cal.com/](https://console.cal.com/)) first❗\r\n\r\nYou have to tread carefully when you see such type of warnings, the right thing to do here would be to just contact cal.com if you decide to host your own version.\r\n\r\n#### ee folder in Documenso\r\n\r\nI will provide some excerpts found in [packages/ee/LICENSE](https://github.com/documenso/documenso/blob/e6d4005cd14599c3a5571edd43182cb2b2f34b40/packages/ee/LICENSE) regaridng ee licensing. Be sure to check that LICENSE.\r\n\r\n“  \r\nThe Documenso Commercial License (the “Commercial License”)  \r\nCopyright © 2023 Documenso, Inc\r\n\r\nThis software and associated documentation files (the “Software”) may only be  \r\nused in production, if you (and any entity that you represent) have agreed to,  \r\nand are in compliance with, an agreement governing  \r\nthe use of the Software, as mutually agreed by you and Documenso, Inc (“Documenso”),  \r\nand otherwise have a valid Documenso Enterprise Edition subscription (“Commercial Subscription”).\r\n\r\nThis Commercial License applies only to the part of this Software that is not distributed under  \r\nthe AGPLv3 license.  \r\n“\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### Reference:\r\n\r\n1. [https://github.com/calcom/cal.com/blob/d6fe955ea8826c8a426fe2b6fdf9b48a8d290dd5/apps/api/v2/src/ee/README.md?plain=1#L12](https://github.com/calcom/cal.com/blob/d6fe955ea8826c8a426fe2b6fdf9b48a8d290dd5/apps/api/v2/src/ee/README.md?plain=1#L12)\r\n    \r\n2. [https://github.com/calcom/cal.com/blob/d6fe955ea8826c8a426fe2b6fdf9b48a8d290dd5/packages/features/ee/teams/api/upgrade.ts#L7](https://github.com/calcom/cal.com/blob/d6fe955ea8826c8a426fe2b6fdf9b48a8d290dd5/packages/features/ee/teams/api/upgrade.ts#L7)\r\n    \r\n3. [https://github.com/search?q=repo%3Acalcom%2Fcal.com%20ee&type=code](https://github.com/search?q=repo%3Acalcom%2Fcal.com%20ee&type=code)\r\n    \r\n4. [https://github.com/documenso/documenso/blob/e6d4005cd14599c3a5571edd43182cb2b2f34b40/packages/ee/LICENSE](https://github.com/documenso/documenso/blob/e6d4005cd14599c3a5571edd43182cb2b2f34b40/packages/ee/LICENSE)\r\n    \r\n5. [https://github.com/search?q=repo%3Adocumenso%2Fdocumenso%20ee&type=code](https://github.com/search?q=repo%3Adocumenso%2Fdocumenso%20ee&type=code)\r\n    \r\n6. [https://danb.me/blog/open-source-available-distinction/](https://danb.me/blog/open-source-available-distinction/)",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var n in e)r(t,n,{get:e[n],enumerable:!0})},a=(t,e,n,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of u(e))!f.call(t,c)&&c!==n&&r(t,c,{get:()=>e[c],enumerable:!(i=m(e,c))||i.enumerable});return t};var w=(t,e,n)=>(n=t!=null?p(b(t)):{},a(e||!t||!t.__esModule?r(n,\"default\",{value:t,enumerable:!0}):n,t)),E=t=>a(r({},\"__esModule\",{value:!0}),t);var s=g((j,h)=>{h.exports=_jsx_runtime});var v={};y(v,{default:()=>d,frontmatter:()=>k});var o=w(s()),k={title:\"What's the `ee` folder in open-source projects?\"};function l(t){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",em:\"em\",h1:\"h1\",h3:\"h3\",h4:\"h4\",li:\"li\",ol:\"ol\",p:\"p\",strong:\"strong\",...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(e.p,{children:[\"In this article, we analyse the ee folder found in open-source projects. This is closely linked to the open-source licensing. There\\u2019s a difference between Open source and source code available. You will find a \",(0,o.jsx)(e.a,{href:\"https://danb.me/blog/open-source-available-distinction/\",children:\"better explanation in this article\"}),\".\"]}),`\n`,(0,o.jsx)(e.p,{children:\"Open-source/source code available project licenses must be adhered to. An open-source/source code available project\\u2019s license is decided by the original author/team who built their project. It takes a lot of time and efforts to produce these open-source projects, hence you must respect the licensing in place.\"}),`\n`,(0,o.jsx)(e.p,{children:\"I am going to provide a couple of projects that contain ee folder that has a different license compared to the rest of the other parts of those projects.\"}),`\n`,(0,o.jsx)(e.h3,{id:\"enterprise-edition\",children:\"Enterprise Edition\"}),`\n`,(0,o.jsx)(e.p,{children:\"ee stands for Enterprise Edition.\"}),`\n`,(0,o.jsx)(e.h4,{id:\"ee-folder-incalcom\",children:\"ee folder in\\xA0Cal.com\"}),`\n`,(0,o.jsxs)(e.p,{children:[\"Cal.com is a great example for this. In \",(0,o.jsx)(e.a,{href:\"https://github.com/calcom/cal.com/blob/d6fe955ea8826c8a426fe2b6fdf9b48a8d290dd5/apps/api/v2/src/ee/README.md?plain=1#L12\",children:\"api/v2/ee folder\"}),\", you will find the below content:\"]}),`\n`,(0,o.jsxs)(e.p,{children:[\"\\u201C\",(0,o.jsx)(e.br,{}),`\n`,\"# Enterprise Edition of API\"]}),`\n`,(0,o.jsx)(e.p,{children:\"Welcome to the Enterprise Edition (\\u201C/ee\\u201D) of the Cal.com API.\"}),`\n`,(0,o.jsxs)(e.p,{children:[\"Our philosophy is simple, all \\u201CSingleplayer APIs\\u201D are open-source under AGPLv3.\\xA0\",(0,o.jsx)(e.br,{}),`\n`,\"All \\u201CMultiplayer APIs\\u201D are under a commercial license.\"]}),`\n`,(0,o.jsxs)(e.p,{children:[\"The [/ee](\",(0,o.jsx)(e.a,{href:\"https://github.com/calcom/cal.com/tree/main/apps/api/v2/ee\",children:\"https://github.com/calcom/cal.com/tree/main/apps/api/v2/ee\"}),\") subfolder is the place\",(0,o.jsx)(e.br,{}),`\n`,\"for all the \",(0,o.jsx)(e.strong,{children:\"Enterprise Edition\"}),\" features from our [hosted](\",(0,o.jsx)(e.a,{href:\"https://cal.com/pricing\",children:\"https://cal.com/pricing\"}),\") plan\\xA0\",(0,o.jsx)(e.br,{}),`\n`,\"and enterprise-grade features for [Enterprise](\",(0,o.jsx)(e.a,{href:\"https://cal.com/enterprise\",children:\"https://cal.com/enterprise\"}),\") such as SSO,\\xA0\",(0,o.jsx)(e.br,{}),`\n`,\"SAML, OIDC, SCIM, SIEM and much more or [Platform](\",(0,o.jsx)(e.a,{href:\"https://cal.com/platform\",children:\"https://cal.com/platform\"}),\") plan to build\\xA0\",(0,o.jsx)(e.br,{}),`\n`,\"a marketplace.\"]}),`\n`,(0,o.jsxs)(e.p,{children:[\"&gt; \",(0,o.jsx)(e.em,{children:\"\\u2757 WARNING: This repository is copyrighted (unlike our [main repo](\"}),(0,o.jsx)(e.a,{href:\"https://github.com/calcom/cal.com\",children:(0,o.jsx)(e.em,{children:\"https://github.com/calcom/cal.com\"})}),(0,o.jsxs)(e.em,{children:[\")).\\xA0\",(0,o.jsx)(e.br,{}),`\n`,\"You are not allowed to use this code to host your own version of app.cal.com without obtaining a\\xA0\",(0,o.jsx)(e.br,{}),`\n`,\"proper [license](\"]}),(0,o.jsx)(e.a,{href:\"https://console.cal.com/\",children:(0,o.jsx)(e.em,{children:\"https://console.cal.com/\"})}),(0,o.jsx)(e.em,{children:\") first\\u2757\"}),(0,o.jsx)(e.br,{}),`\n`,\"\\u201C\"]}),`\n`,(0,o.jsxs)(e.blockquote,{children:[`\n`,(0,o.jsxs)(e.p,{children:[\"You are not allowed to use this code to host your own version of app.cal.com without obtaining a proper [license](\",(0,o.jsx)(e.a,{href:\"https://console.cal.com/\",children:\"https://console.cal.com/\"}),\") first\\u2757\"]}),`\n`]}),`\n`,(0,o.jsx)(e.p,{children:\"You have to tread carefully when you see such type of warnings, the right thing to do here would be to just contact cal.com if you decide to host your own version.\"}),`\n`,(0,o.jsx)(e.h4,{id:\"ee-folder-in-documenso\",children:\"ee folder in Documenso\"}),`\n`,(0,o.jsxs)(e.p,{children:[\"I will provide some excerpts found in \",(0,o.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/e6d4005cd14599c3a5571edd43182cb2b2f34b40/packages/ee/LICENSE\",children:\"packages/ee/LICENSE\"}),\" regaridng ee licensing. Be sure to check that LICENSE.\"]}),`\n`,(0,o.jsxs)(e.p,{children:[\"\\u201C\",(0,o.jsx)(e.br,{}),`\n`,\"The Documenso Commercial License (the \\u201CCommercial License\\u201D)\",(0,o.jsx)(e.br,{}),`\n`,\"Copyright \\xA9 2023 Documenso, Inc\"]}),`\n`,(0,o.jsxs)(e.p,{children:[\"This software and associated documentation files (the \\u201CSoftware\\u201D) may only be\",(0,o.jsx)(e.br,{}),`\n`,\"used in production, if you (and any entity that you represent) have agreed to,\",(0,o.jsx)(e.br,{}),`\n`,\"and are in compliance with, an agreement governing\",(0,o.jsx)(e.br,{}),`\n`,\"the use of the Software, as mutually agreed by you and Documenso, Inc (\\u201CDocumenso\\u201D),\",(0,o.jsx)(e.br,{}),`\n`,\"and otherwise have a valid Documenso Enterprise Edition subscription (\\u201CCommercial Subscription\\u201D).\"]}),`\n`,(0,o.jsxs)(e.p,{children:[\"This Commercial License applies only to the part of this Software that is not distributed under\",(0,o.jsx)(e.br,{}),`\n`,\"the AGPLv3 license.\",(0,o.jsx)(e.br,{}),`\n`,\"\\u201C\"]}),`\n`,(0,o.jsx)(e.h1,{id:\"about-me\",children:(0,o.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,o.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,o.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,o.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,o.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,o.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,o.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,o.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,o.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,o.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,o.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,o.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,o.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,o.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,o.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,o.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,o.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,o.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,o.jsx)(e.h3,{id:\"reference\",children:\"Reference:\"}),`\n`,(0,o.jsxs)(e.ol,{children:[`\n`,(0,o.jsxs)(e.li,{children:[`\n`,(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:\"https://github.com/calcom/cal.com/blob/d6fe955ea8826c8a426fe2b6fdf9b48a8d290dd5/apps/api/v2/src/ee/README.md?plain=1#L12\",children:\"https://github.com/calcom/cal.com/blob/d6fe955ea8826c8a426fe2b6fdf9b48a8d290dd5/apps/api/v2/src/ee/README.md?plain=1#L12\"})}),`\n`]}),`\n`,(0,o.jsxs)(e.li,{children:[`\n`,(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:\"https://github.com/calcom/cal.com/blob/d6fe955ea8826c8a426fe2b6fdf9b48a8d290dd5/packages/features/ee/teams/api/upgrade.ts#L7\",children:\"https://github.com/calcom/cal.com/blob/d6fe955ea8826c8a426fe2b6fdf9b48a8d290dd5/packages/features/ee/teams/api/upgrade.ts#L7\"})}),`\n`]}),`\n`,(0,o.jsxs)(e.li,{children:[`\n`,(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Acalcom%2Fcal.com%20ee&type=code\",children:\"https://github.com/search?q=repo%3Acalcom%2Fcal.com%20ee&type=code\"})}),`\n`]}),`\n`,(0,o.jsxs)(e.li,{children:[`\n`,(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/e6d4005cd14599c3a5571edd43182cb2b2f34b40/packages/ee/LICENSE\",children:\"https://github.com/documenso/documenso/blob/e6d4005cd14599c3a5571edd43182cb2b2f34b40/packages/ee/LICENSE\"})}),`\n`]}),`\n`,(0,o.jsxs)(e.li,{children:[`\n`,(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Adocumenso%2Fdocumenso%20ee&type=code\",children:\"https://github.com/search?q=repo%3Adocumenso%2Fdocumenso%20ee&type=code\"})}),`\n`]}),`\n`,(0,o.jsxs)(e.li,{children:[`\n`,(0,o.jsx)(e.p,{children:(0,o.jsx)(e.a,{href:\"https://danb.me/blog/open-source-available-distinction/\",children:\"https://danb.me/blog/open-source-available-distinction/\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,o.jsx)(e,{...t,children:(0,o.jsx)(l,{...t})}):l(t)}return E(v);})();\n;return Component;"
        },
        "_id": "blog/ee-folder-in-oss.mdx",
        "_raw": {
          "sourceFilePath": "blog/ee-folder-in-oss.mdx",
          "sourceFileName": "ee-folder-in-oss.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/ee-folder-in-oss"
        },
        "type": "Doc",
        "slug": "/blog/ee-folder-in-oss",
        "slugAsParams": "ee-folder-in-oss"
      },
      "documentHash": "1740489186287",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/envoptions-type.mdx": {
      "document": {
        "title": "EnvOptions type in T3 Env source code explained\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we are going to examine the EnvOptions type in T3 Env source code. In case you are wondering what’s T3 Env or EnvOptions,  \r\n[T3 Env](https://env.t3.gg/) provides validation for type-safe environment variables using zod. you use createEnv function and provide zod validation for your server and client env variables as shown in [below example](https://github.com/t3-oss/t3-env/tree/main?tab=readme-ov-file#define-your-schema).\r\n\r\n```plaintext\r\n// src/env.mjs\r\nimport { createEnv } from \"@t3-oss/env-nextjs\";\r\nimport { z } from \"zod\";\r\nexport const env = createEnv({\r\n /*\r\n * Serverside Environment variables, not available on the client.\r\n * Will throw if you access these variables on the client.\r\n */\r\n server: {\r\n DATABASE_URL: z.string().url(),\r\n OPEN_AI_API_KEY: z.string().min(1),\r\n },\r\n /*\r\n * Environment variables available on the client (and server).\r\n *\r\n * 💡 You'll get type errors if these are not prefixed with NEXT_PUBLIC_.\r\n */\r\n client: {\r\n NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\r\n },\r\n /*\r\n * Due to how Next.js bundles environment variables on Edge and Client,\r\n * we need to manually destructure them to make sure all are included in bundle.\r\n *\r\n * 💡 You'll get type errors if not all variables from `server` & `client` are included here.\r\n */\r\n runtimeEnv: {\r\n DATABASE_URL: process.env.DATABASE_URL,\r\n OPEN_AI_API_KEY: process.env.OPEN_AI_API_KEY,\r\n NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:\r\n process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY,\r\n },\r\n});\r\n```\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*BI5Clc06_rBCUHB7ePscyQ.png)\r\n\r\nThis createEnv has the below type shown defined in T3 Env source code:\r\n\r\n```plaintext\r\nexport function createEnv<\r\n TPrefix extends TPrefixFormat,\r\n TServer extends TServerFormat = NonNullable<unknown>,\r\n TClient extends TClientFormat = NonNullable<unknown>,\r\n TShared extends TSharedFormat = NonNullable<unknown>,\r\n const TExtends extends TExtendsFormat = [],\r\n>(\r\n opts: EnvOptions<TPrefix, TServer, TClient, TShared, TExtends>,\r\n): CreateEnv<TServer, TClient, TShared, TExtends> {\r\n const runtimeEnv = opts.runtimeEnvStrict ?? opts.runtimeEnv ?? process.env;\r\n```\r\n\r\nFunction parameter here is opts with type `EnvOptions<TPrefix, TServer, TClient, TShared, TExtends>`\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*DSCX5g68ONas_tAXK_cP6A.png)\r\n\r\n```plaintext\r\nexport type EnvOptions<\r\n TPrefix extends string | undefined,\r\n TServer extends Record<string, ZodType>,\r\n TClient extends Record<string, ZodType>,\r\n TShared extends Record<string, ZodType>,\r\n TExtends extends Array<Record<string, unknown>>,\r\n> =\r\n | (LooseOptions<TShared, TExtends> &\r\n ServerClientOptions<TPrefix, TServer, TClient>)\r\n | (StrictOptions<TPrefix, TServer, TClient, TShared, TExtends> &\r\n ServerClientOptions<TPrefix, TServer, TClient>);\r\n```\r\n\r\nEnvOptions is a generic type. Server object in opts passed has the generic type — TServer extends Record&lt;string, ZodType&gt;\r\n\r\n```plaintext\r\n// server type is TServer that is a Record with key being string \r\n// and value being ZodType\r\nserver: {\r\n DATABASE_URL: z.string().url(),\r\n OPEN_AI_API_KEY: z.string().min(1),\r\n},\r\n// client type is TClient that is a Record with key being string \r\n// and value being ZodType\r\nclient: {\r\n NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\r\n},\r\n```\r\n\r\nI barely scratched the surface here, this feels like an advanced Typescript usecase as this EnvOptions type returns:\r\n\r\n```plaintext\r\n| (LooseOptions<TShared, TExtends> &\r\n ServerClientOptions<TPrefix, TServer, TClient>)\r\n| (StrictOptions<TPrefix, TServer, TClient, TShared, TExtends> &\r\n ServerClientOptions<TPrefix, TServer, TClient>);\r\n```\r\n\r\nCheck out the [LooseOptions](https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L82) and [ServerClientOptions](https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L96) in t3-env source code.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1\\. [https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L222](https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L222)  \r\n2\\. [https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L183](https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L183)  \r\n3\\. [https://env.t3.gg/](https://env.t3.gg/)",
          "code": "var Component=(()=>{var o=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,v=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),T=(a,e)=>{for(var s in e)i(a,s,{get:e[s],enumerable:!0})},t=(a,e,s,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!v.call(a,r)&&r!==s&&i(a,r,{get:()=>e[r],enumerable:!(l=m(e,r))||l.enumerable});return a};var x=(a,e,s)=>(s=a!=null?o(g(a)):{},t(e||!a||!a.__esModule?i(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=>t(i({},\"__esModule\",{value:!0}),a);var d=N((S,c)=>{c.exports=_jsx_runtime});var b={};T(b,{default:()=>p,frontmatter:()=>E});var n=x(d()),E={title:\"EnvOptions type in T3 Env source code explained\"};function h(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we are going to examine the EnvOptions type in T3 Env source code. In case you are wondering what\\u2019s T3 Env or EnvOptions,\",(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(e.a,{href:\"https://env.t3.gg/\",children:\"T3 Env\"}),\" provides validation for type-safe environment variables using zod. you use createEnv function and provide zod validation for your server and client env variables as shown in \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/tree/main?tab=readme-ov-file#define-your-schema\",children:\"below example\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// src/env.mjs\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { createEnv } from \"@t3-oss/env-nextjs\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { z } from \"zod\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const env = createEnv({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Serverside Environment variables, not available on the client.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Will throw if you access these variables on the client.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" server: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: z.string().url(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" OPEN_AI_API_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Environment variables available on the client (and server).\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * \\u{1F4A1} You'll get type errors if these are not prefixed with NEXT_PUBLIC_.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" client: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Due to how Next.js bundles environment variables on Edge and Client,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * we need to manually destructure them to make sure all are included in bundle.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * \\u{1F4A1} You'll get type errors if not all variables from `server` & `client` are included here.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" runtimeEnv: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: process.env.DATABASE_URL,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" OPEN_AI_API_KEY: process.env.OPEN_AI_API_KEY,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*BI5Clc06_rBCUHB7ePscyQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"This createEnv has the below type shown defined in T3 Env source code:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function createEnv<\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TPrefix extends TPrefixFormat,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TServer extends TServerFormat = NonNullable<unknown>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TClient extends TClientFormat = NonNullable<unknown>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TShared extends TSharedFormat = NonNullable<unknown>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const TExtends extends TExtendsFormat = [],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\">(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" opts: EnvOptions<TPrefix, TServer, TClient, TShared, TExtends>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"): CreateEnv<TServer, TClient, TShared, TExtends> {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const runtimeEnv = opts.runtimeEnvStrict ?? opts.runtimeEnv ?? process.env;\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Function parameter here is opts with type \",(0,n.jsx)(e.code,{children:\"EnvOptions<TPrefix, TServer, TClient, TShared, TExtends>\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*DSCX5g68ONas_tAXK_cP6A.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export type EnvOptions<\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TPrefix extends string | undefined,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TServer extends Record<string, ZodType>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TClient extends Record<string, ZodType>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TShared extends Record<string, ZodType>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" TExtends extends Array<Record<string, unknown>>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"> =\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" | (LooseOptions<TShared, TExtends> &\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ServerClientOptions<TPrefix, TServer, TClient>)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" | (StrictOptions<TPrefix, TServer, TClient, TShared, TExtends> &\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ServerClientOptions<TPrefix, TServer, TClient>);\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"EnvOptions is a generic type. Server object in opts passed has the generic type\\u200A\\u2014\\u200ATServer extends Record<string, ZodType>\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// server type is TServer that is a Record with key being string \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// and value being ZodType\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"server: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: z.string().url(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" OPEN_AI_API_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// client type is TClient that is a Record with key being string \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// and value being ZodType\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"client: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"I barely scratched the surface here, this feels like an advanced Typescript usecase as this EnvOptions type returns:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"| (LooseOptions<TShared, TExtends> &\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ServerClientOptions<TPrefix, TServer, TClient>)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"| (StrictOptions<TPrefix, TServer, TClient, TShared, TExtends> &\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ServerClientOptions<TPrefix, TServer, TClient>);\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Check out the \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L82\",children:\"LooseOptions\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L96\",children:\"ServerClientOptions\"}),\" in t3-env source code.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L222\",children:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L222\"}),(0,n.jsx)(e.br,{}),`\n`,\"2. \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L183\",children:\"https://github.com/t3-oss/t3-env/blob/main/packages/core/src/index.ts#L183\"}),(0,n.jsx)(e.br,{}),`\n`,\"3. \",(0,n.jsx)(e.a,{href:\"https://env.t3.gg/\",children:\"https://env.t3.gg/\"})]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return f(b);})();\n;return Component;"
        },
        "_id": "blog/envoptions-type.mdx",
        "_raw": {
          "sourceFilePath": "blog/envoptions-type.mdx",
          "sourceFileName": "envoptions-type.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/envoptions-type"
        },
        "type": "Doc",
        "slug": "/blog/envoptions-type",
        "slugAsParams": "envoptions-type"
      },
      "documentHash": "1740489186289",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/error-codes-in-shadcn.mdx": {
      "document": {
        "title": "How Shadcn CLI uses error constants to improve code readability\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze how a file named [error.ts](https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts) is used across the shadcn/ui code base.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*O1GAhUUbgxAOetFrCt9yTQ.png)\r\n\r\n# **utils/errors.ts**\r\n\r\n`error.ts` contains 12 variables:\r\n\r\n```plaintext\r\nexport const MISSING_DIR_OR_EMPTY_PROJECT = \"1\"\r\nexport const EXISTING_CONFIG = \"2\"\r\nexport const MISSING_CONFIG = \"3\"\r\nexport const FAILED_CONFIG_READ = \"4\"\r\nexport const TAILWIND_NOT_CONFIGURED = \"5\"\r\nexport const IMPORT_ALIAS_MISSING = \"6\"\r\nexport const UNSUPPORTED_FRAMEWORK = \"7\"\r\nexport const COMPONENT_URL_NOT_FOUND = \"8\"\r\nexport const COMPONENT_URL_UNAUTHORIZED = \"9\"\r\nexport const COMPONENT_URL_FORBIDDEN = \"10\"\r\nexport const COMPONENT_URL_BAD_REQUEST = \"11\"\r\nexport const COMPONENT_URL_INTERNAL_SERVER_ERROR = \"12\"\r\n```\r\n\r\nThese are descriptive and explain the kind of error being handled, for example, MISSING\\_DIR\\_OR\\_EMPTY\\_PROJECT is likely used in a scenario where there is missing directory or empty project.\r\n\r\nIs there any special meaning to these variable values? they are just numbers assigned as strings. It makes more sense once we understand how these variables are used.\r\n\r\n# **Usage in preflight-init.ts:**\r\n\r\nIf you open this [preflight-init.ts](https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22), you will find the below code snippet in there.\r\n\r\n```plaintext\r\n// Ensure target directory exists.\r\n // Check for empty project. We assume if no package.json exists, the project is empty.\r\n if (\r\n   !fs.existsSync(options.cwd) ||\r\n   !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\r\n ) {\r\n   errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\r\n   return {\r\n     errors,\r\n     projectInfo: null,\r\n   }\r\n }\r\n```\r\n\r\nPay attention to this `errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]=true`, here errors is an object. What’s the value of MISSING\\_DIR\\_OR\\_EMPTY\\_PROJECT? it was “1” as explained earlier.\r\n\r\nThis mean errors object would look like below:\r\n\r\n```plaintext\r\n{\r\n \"1\": true\r\n}\r\n```\r\n\r\nThis is fine, but how’s this error object used and where? The answer is in [init.ts](https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91).\r\n\r\n# **errors object in init.ts**\r\n\r\nAt line 91, in [init.ts](https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91), you will find the below `if` block.\r\n\r\n```plaintext\r\nif (preflight.errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\r\n \r\n const { projectPath } = await createProject(options)\r\n \r\n if (!projectPath) {\r\n   process.exit(1)\r\n }\r\n \r\n  options.cwd = projectPath\r\n options.isNewProject = true\r\n}\r\n```\r\n\r\nif this check was something like preflight.error\\[“1”\\], your next thought immediately is what’s this mysterious value here. This means, these constants in error.ts are used to improve code readability\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22](https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22)\r\n    \r\n2. [https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts](https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts)\r\n    \r\n3. [https://github.com/search?q=repo%3Ashadcn-ui%2Fui%20ERRORS&type=code](https://github.com/search?q=repo%3Ashadcn-ui%2Fui+ERRORS&type=code)\r\n    \r\n4. https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91\r\n",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var i in e)r(a,i,{get:e[i],enumerable:!0})},c=(a,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of u(e))!b.call(a,s)&&s!==i&&r(a,s,{get:()=>e[s],enumerable:!(t=m(e,s))||t.enumerable});return a};var R=(a,e,i)=>(i=a!=null?p(g(a)):{},c(e||!a||!a.__esModule?r(i,\"default\",{value:a,enumerable:!0}):i,a)),_=a=>c(r({},\"__esModule\",{value:!0}),a);var l=N((x,h)=>{h.exports=_jsx_runtime});var O={};f(O,{default:()=>o,frontmatter:()=>I});var n=R(l()),I={title:\"How Shadcn CLI uses error constants to improve code readability\"};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze how a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts\",children:\"error.ts\"}),\" is used across the shadcn/ui code base.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*O1GAhUUbgxAOetFrCt9yTQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"utilserrorsts\",children:(0,n.jsx)(e.strong,{children:\"utils/errors.ts\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"error.ts\"}),\" contains 12 variables:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const MISSING_DIR_OR_EMPTY_PROJECT = \"1\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const EXISTING_CONFIG = \"2\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const MISSING_CONFIG = \"3\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const FAILED_CONFIG_READ = \"4\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const TAILWIND_NOT_CONFIGURED = \"5\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const IMPORT_ALIAS_MISSING = \"6\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const UNSUPPORTED_FRAMEWORK = \"7\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const COMPONENT_URL_NOT_FOUND = \"8\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const COMPONENT_URL_UNAUTHORIZED = \"9\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const COMPONENT_URL_FORBIDDEN = \"10\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const COMPONENT_URL_BAD_REQUEST = \"11\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const COMPONENT_URL_INTERNAL_SERVER_ERROR = \"12\"'})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"These are descriptive and explain the kind of error being handled, for example, MISSING_DIR_OR_EMPTY_PROJECT is likely used in a scenario where there is missing directory or empty project.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Is there any special meaning to these variable values? they are just numbers assigned as strings. It makes more sense once we understand how these variables are used.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"usage-in-preflight-initts\",children:(0,n.jsx)(e.strong,{children:\"Usage in preflight-init.ts:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you open this \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22\",children:\"preflight-init.ts\"}),\", you will find the below code snippet in there.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Ensure target directory exists.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Check for empty project. We assume if no package.json exists, the project is empty.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   !fs.existsSync(options.cwd) ||\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'   !fs.existsSync(path.resolve(options.cwd, \"package.json\"))'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   return {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     errors,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     projectInfo: null,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pay attention to this \",(0,n.jsx)(e.code,{children:\"errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]=true\"}),\", here errors is an object. What\\u2019s the value of MISSING_DIR_OR_EMPTY_PROJECT? it was \\u201C1\\u201D as explained earlier.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"This mean errors object would look like below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"1\": true'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This is fine, but how\\u2019s this error object used and where? The answer is in \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91\",children:\"init.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"errors-object-in-initts\",children:(0,n.jsx)(e.strong,{children:\"errors object in init.ts\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"At line 91, in \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91\",children:\"init.ts\"}),\", you will find the below \",(0,n.jsx)(e.code,{children:\"if\"}),\" block.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (preflight.errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const { projectPath } = await createProject(options)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (!projectPath) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   process.exit(1)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  options.cwd = projectPath\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" options.isNewProject = true\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"if this check was something like preflight.error[\\u201C1\\u201D], your next thought immediately is what\\u2019s this mysterious value here. This means, these constants in error.ts are used to improve code readability\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22\",children:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts\",children:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Ashadcn-ui%2Fui+ERRORS&type=code\",children:\"https://github.com/search?q=repo%3Ashadcn-ui%2Fui%20ERRORS&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91\",children:\"https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91\"})}),`\n`]}),`\n`]})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return _(O);})();\n;return Component;"
        },
        "_id": "blog/error-codes-in-shadcn.mdx",
        "_raw": {
          "sourceFilePath": "blog/error-codes-in-shadcn.mdx",
          "sourceFileName": "error-codes-in-shadcn.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/error-codes-in-shadcn"
        },
        "type": "Doc",
        "slug": "/blog/error-codes-in-shadcn",
        "slugAsParams": "error-codes-in-shadcn"
      },
      "documentHash": "1740489186290",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/execa-child-process-examples.mdx": {
      "document": {
        "title": "Execa vs using child_process to execute CLI commands programmatically.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse two ways to execute CLI commands programmatically found in Shadcn/ui and CodeMirror.\r\n\r\nHave you ever wondered if it is possible to run CLI commands programmatically? We are going to look at how Shadcn/ui uses execa and how CodeMirror uses child\\_process to execute CLI programmaticaly.\r\n\r\n### child\\_process usage in CodeMirror\r\n\r\nCodeMirror is found to be using a Node.js API called `child_process.execFileSync`. [Read more](https://nodejs.org/api/child_process.html#child_processexecfilesyncfile-args-options)\r\n\r\n```plaintext\r\nfunction run(cmd, args, wd = root, { shell = false } = {}) {\r\n  return child.execFileSync(cmd, args, {shell, cwd: wd, encoding: \"utf8\", stdio: [\"ignore\", \"pipe\", process.stderr]})\r\n}\r\n```\r\n\r\nJust to provide a bit more context, this run gets called inside a function called install in CodeMirror source code.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*Zzj1E6r43pSxrXPWoEYF-Q.png)\r\n\r\nCheck the [CodeMirror v6 Readme](https://github.com/codemirror/dev?tab=readme-ov-file#codemirror) to understand what this install is for.\r\n\r\nOne of the first steps to set up the development environment for CodeMirror is to execute the below command, this is mentioned in [CodeMirror’s Readme.md](https://github.com/codemirror/dev?tab=readme-ov-file#codemirror).\r\n\r\n```plaintext\r\nnode bin/cm.js install\r\n```\r\n\r\ninstall is parsed using process.argv\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*VReYQmOQka77UpfXduP2HQ.png)\r\n\r\n### Execa usage in Shadcn/ui\r\n\r\nExeca runs commands in your script, application or library. Unlike shells, it is [optimized](https://github.com/sindresorhus/execa/blob/HEAD/docs/bash.md) for programmatic usage. Built on top of the [`child_process`](https://nodejs.org/api/child_process.html) core module.\r\n\r\nShadcn/ui’s add command is found to be execa to install packages\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*PGqlCr-IK3rC_aVkfZWGJQ.png)\r\n\r\nCheck out these search results for [Execa usage in Shadcn/ui repository](https://github.com/search?q=repo%3Ashadcn-ui%2Fui%20execa&type=code)\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*Ayrs1obk2c1P95suZeybSg.png)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1. [https://www.npmjs.com/package/execa](https://www.npmjs.com/package/execa)\r\n    \r\n2. [https://nodejs.org/api/child\\_process.html#child\\_processexecfilesyncfile-args-options](https://nodejs.org/api/child_process.html#child_processexecfilesyncfile-args-options)\r\n    \r\n3. [https://nodejs.org/api/child\\_process.html#child\\_processexecfilefile-args-options-callback](https://nodejs.org/api/child_process.html#child_processexecfilefile-args-options-callback)\r\n    \r\n4. [https://github.com/codemirror/dev/blob/main/bin/cm.js#L14](https://github.com/codemirror/dev/blob/main/bin/cm.js#L14)\r\n    \r\n5. [https://github.com/codemirror/dev?tab=readme-ov-file#codemirror](https://github.com/codemirror/dev?tab=readme-ov-file#codemirror)\r\n    \r\n6. [https://github.com/search?q=repo%3Ashadcn-ui%2Fui%20execa&type=code](https://github.com/search?q=repo%3Ashadcn-ui%2Fui%20execa&type=code)",
          "code": "var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),x=(n,e)=>{for(var i in e)t(n,i,{get:e[i],enumerable:!0})},o=(n,e,i,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of u(e))!f.call(n,c)&&c!==i&&t(n,c,{get:()=>e[c],enumerable:!(a=m(e,c))||a.enumerable});return n};var y=(n,e,i)=>(i=n!=null?p(g(n)):{},o(e||!n||!n.__esModule?t(i,\"default\",{value:n,enumerable:!0}):i,n)),w=n=>o(t({},\"__esModule\",{value:!0}),n);var h=b((v,s)=>{s.exports=_jsx_runtime});var j={};x(j,{default:()=>l,frontmatter:()=>_});var r=y(h()),_={title:\"Execa vs using child_process to execute CLI commands programmatically.\"};function d(n){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:\"In this article, we analyse two ways to execute CLI commands programmatically found in Shadcn/ui and CodeMirror.\"}),`\n`,(0,r.jsx)(e.p,{children:\"Have you ever wondered if it is possible to run CLI commands programmatically? We are going to look at how Shadcn/ui uses execa and how CodeMirror uses child_process to execute CLI programmaticaly.\"}),`\n`,(0,r.jsx)(e.h3,{id:\"child_process-usage-in-codemirror\",children:\"child_process usage in CodeMirror\"}),`\n`,(0,r.jsxs)(e.p,{children:[\"CodeMirror is found to be using a Node.js API called \",(0,r.jsx)(e.code,{children:\"child_process.execFileSync\"}),\". \",(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/child_process.html#child_processexecfilesyncfile-args-options\",children:\"Read more\"})]}),`\n`,(0,r.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,r.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,r.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"function run(cmd, args, wd = root, { shell = false } = {}) {\"})}),`\n`,(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:'  return child.execFileSync(cmd, args, {shell, cwd: wd, encoding: \"utf8\", stdio: [\"ignore\", \"pipe\", process.stderr]})'})}),`\n`,(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,r.jsx)(e.p,{children:\"Just to provide a bit more context, this run gets called inside a function called install in CodeMirror source code.\"}),`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*Zzj1E6r43pSxrXPWoEYF-Q.png\",alt:\"\"})}),`\n`,(0,r.jsxs)(e.p,{children:[\"Check the \",(0,r.jsx)(e.a,{href:\"https://github.com/codemirror/dev?tab=readme-ov-file#codemirror\",children:\"CodeMirror v6 Readme\"}),\" to understand what this install is for.\"]}),`\n`,(0,r.jsxs)(e.p,{children:[\"One of the first steps to set up the development environment for CodeMirror is to execute the below command, this is mentioned in \",(0,r.jsx)(e.a,{href:\"https://github.com/codemirror/dev?tab=readme-ov-file#codemirror\",children:\"CodeMirror\\u2019s Readme.md\"}),\".\"]}),`\n`,(0,r.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,r.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,r.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,r.jsx)(e.span,{className:\"line\",children:(0,r.jsx)(e.span,{children:\"node bin/cm.js install\"})})})})}),`\n`,(0,r.jsx)(e.p,{children:\"install is parsed using process.argv\"}),`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*VReYQmOQka77UpfXduP2HQ.png\",alt:\"\"})}),`\n`,(0,r.jsx)(e.h3,{id:\"execa-usage-in-shadcnui\",children:\"Execa usage in Shadcn/ui\"}),`\n`,(0,r.jsxs)(e.p,{children:[\"Execa runs commands in your script, application or library. Unlike shells, it is \",(0,r.jsx)(e.a,{href:\"https://github.com/sindresorhus/execa/blob/HEAD/docs/bash.md\",children:\"optimized\"}),\" for programmatic usage. Built on top of the \",(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/child_process.html\",children:(0,r.jsx)(e.code,{children:\"child_process\"})}),\" core module.\"]}),`\n`,(0,r.jsx)(e.p,{children:\"Shadcn/ui\\u2019s add command is found to be execa to install packages\"}),`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*PGqlCr-IK3rC_aVkfZWGJQ.png\",alt:\"\"})}),`\n`,(0,r.jsxs)(e.p,{children:[\"Check out these search results for \",(0,r.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Ashadcn-ui%2Fui%20execa&type=code\",children:\"Execa usage in Shadcn/ui repository\"})]}),`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*Ayrs1obk2c1P95suZeybSg.png\",alt:\"\"})}),`\n`,(0,r.jsx)(e.h1,{id:\"about-me\",children:(0,r.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,r.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,r.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,r.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,r.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,r.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,r.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,r.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,r.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,r.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,r.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,r.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,r.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,r.jsxs)(e.ol,{children:[`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://www.npmjs.com/package/execa\",children:\"https://www.npmjs.com/package/execa\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/child_process.html#child_processexecfilesyncfile-args-options\",children:\"https://nodejs.org/api/child_process.html#child_processexecfilesyncfile-args-options\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://nodejs.org/api/child_process.html#child_processexecfilefile-args-options-callback\",children:\"https://nodejs.org/api/child_process.html#child_processexecfilefile-args-options-callback\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L14\",children:\"https://github.com/codemirror/dev/blob/main/bin/cm.js#L14\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://github.com/codemirror/dev?tab=readme-ov-file#codemirror\",children:\"https://github.com/codemirror/dev?tab=readme-ov-file#codemirror\"})}),`\n`]}),`\n`,(0,r.jsxs)(e.li,{children:[`\n`,(0,r.jsx)(e.p,{children:(0,r.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Ashadcn-ui%2Fui%20execa&type=code\",children:\"https://github.com/search?q=repo%3Ashadcn-ui%2Fui%20execa&type=code\"})}),`\n`]}),`\n`]})]})}function l(n={}){let{wrapper:e}=n.components||{};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(d,{...n})}):d(n)}return w(j);})();\n;return Component;"
        },
        "_id": "blog/execa-child-process-examples.mdx",
        "_raw": {
          "sourceFilePath": "blog/execa-child-process-examples.mdx",
          "sourceFileName": "execa-child-process-examples.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/execa-child-process-examples"
        },
        "type": "Doc",
        "slug": "/blog/execa-child-process-examples",
        "slugAsParams": "execa-child-process-examples"
      },
      "documentHash": "1740489186292",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/extendable-error-changesets.mdx": {
      "document": {
        "title": "ExtendableError usage in changesets errors package\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nThere is this import found at line#2 in [Changesets CLI package source code](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L2)\r\n\r\n```plaintext\r\nimport { ExitError, InternalError } from \"@changesets/errors\";\r\n```\r\n\r\nYou will learn the below concepts:\r\n\r\n1\\. ExtendableError package  \r\n2\\. ExitError  \r\n3\\. InternalError\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*SA2xkYrnuswJA-fbxCrKCQ.png)\r\n\r\n### ExtendableError\r\n\r\nYou will find that [ExitError](https://github.com/changesets/changesets/blob/main/packages/errors/src/index.ts#L13) extends ExtendableError.\r\n\r\nI assumed ExtendableError is probably another class defined within the same file, that was not the case.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*em1h2IDQy5dD5SKF-wVVgw.png)\r\n\r\nIt is imported from [extendable-error](https://www.npmjs.com/package/extendable-error). What’s this?\r\n\r\nA simple abstract extendable error class that extends Error, which handles the error name, message and stack property.\r\n\r\n#### Install\r\n\r\n```plaintext\r\nnpm install extendable-error - save\r\n```\r\n\r\n#### Usage\r\n\r\nThis usage example from the docs.\r\n\r\n```plaintext\r\nimport ExtendableError from 'extendable-error';\r\n \r\nclass SomeError extends ExtendableError {\r\n constructor(\r\n message: string,\r\n public code: number\r\n ) {\r\n super(message);\r\n }\r\n}\r\n \r\nlet someError = new SomeError('Some error', 0x0001);\r\n```\r\n\r\nPurpose of ExtendableError is to create custom error classes in JavaScript   \r\nwith consistent behavior for error handling. ExtendableError preserves the error stack and name.\r\n\r\n### Extending ExtendableError vs Extending Error\r\n\r\nI asked ChatGPT to list the differences between extending ExtendableError and extending Error directly and below is picked from the ChatGPT answer:\r\n\r\n1. name Property Mismatch (In Some Environments):\r\n    \r\n\r\n* Direct Error Inheritance: In some older JavaScript environments (e.g., older versions of Node.js or some non-browser environments), if you extend Error directly, the name property might not always be correctly set to the name of the error class (e.g., ValidationError).\r\n    \r\n* ExtendableError: It explicitly sets this.name = this.constructor.name;, which ensures that the name property is set correctly across all environments, even if the environment doesn’t behave correctly  \r\n    with Error inheritance.\r\n    \r\n\r\n2\\. Stack Trace Reliability:\r\n\r\n* Direct Error Inheritance: In some environments, especially Node.js, using Error.captureStackTrace directly in your custom error class ensures the stack trace points to the custom error class. If you   \r\n    don’t use this, the stack trace might not behave as expected and could potentially show the wrong location in the call stack.\r\n    \r\n* ExtendableError: By using Error.captureStackTrace, ExtendableError ensures that the stack trace is correctly generated, pointing to the location where the error was thrown. This is critical in environments   \r\n    like Node.js where debugging is more reliant on stack traces.\r\n    \r\n\r\n### ExitError\r\n\r\nThe below code is picked from [Changesets errors package](https://github.com/changesets/changesets/blob/main/packages/errors/src/index.ts#L13)\r\n\r\n```plaintext\r\nexport class ExitError extends ExtendableError {\r\n code: number;\r\n constructor(code: number) {\r\n super(`The process exited with code: ${code}`);\r\n this.code = code;\r\n }\r\n}\r\n```\r\n\r\n### InternalError\r\n\r\nThe below code is picked from [Changets errors package](https://github.com/changesets/changesets/blob/main/packages/errors/src/index.ts#L13)\r\n\r\n```plaintext\r\nexport class InternalError extends ExtendableError {\r\n constructor(message: string) {\r\n super(message);\r\n }\r\n}\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L9](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L9)\r\n    \r\n2. [https://github.com/changesets/changesets/blob/main/packages/errors/src/index.ts#L13](https://github.com/changesets/changesets/blob/main/packages/errors/src/index.ts#L13)\r\n    \r\n3. [https://www.npmjs.com/package/extendable-error](https://www.npmjs.com/package/extendable-error)",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var x=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),E=(r,e)=>{for(var a in e)s(r,a,{get:e[a],enumerable:!0})},c=(r,e,a,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of g(e))!b.call(r,t)&&t!==a&&s(r,t,{get:()=>e[t],enumerable:!(i=m(e,t))||i.enumerable});return r};var f=(r,e,a)=>(a=r!=null?p(u(r)):{},c(e||!r||!r.__esModule?s(a,\"default\",{value:r,enumerable:!0}):a,r)),w=r=>c(s({},\"__esModule\",{value:!0}),r);var h=x((v,l)=>{l.exports=_jsx_runtime});var y={};E(y,{default:()=>o,frontmatter:()=>k});var n=f(h()),k={title:\"ExtendableError usage in changesets errors\\xA0package\"};function d(r){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"There is this import found at line#2 in \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L2\",children:\"Changesets CLI package source code\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { ExitError, InternalError } from \"@changesets/errors\";'})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"You will learn the below concepts:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. ExtendableError package\",(0,n.jsx)(e.br,{}),`\n`,\"2. ExitError\",(0,n.jsx)(e.br,{}),`\n`,\"3. InternalError\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*SA2xkYrnuswJA-fbxCrKCQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"extendableerror\",children:\"ExtendableError\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find that \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/errors/src/index.ts#L13\",children:\"ExitError\"}),\" extends ExtendableError.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"I assumed ExtendableError is probably another class defined within the same file, that was not the case.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*em1h2IDQy5dD5SKF-wVVgw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"It is imported from \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/extendable-error\",children:\"extendable-error\"}),\". What\\u2019s this?\"]}),`\n`,(0,n.jsx)(e.p,{children:\"A simple abstract extendable error class that extends Error, which handles the error name, message and stack property.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"install\",children:\"Install\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npm install extendable-error - save\"})})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,n.jsx)(e.p,{children:\"This usage example from the docs.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import ExtendableError from 'extendable-error';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"class SomeError extends ExtendableError {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" constructor(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" message: string,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" public code: number\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" super(message);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let someError = new SomeError('Some error', 0x0001);\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Purpose of ExtendableError is to create custom error classes in JavaScript\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"with consistent behavior for error handling. ExtendableError preserves the error stack and name.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"extending-extendableerror-vs-extending-error\",children:\"Extending ExtendableError vs Extending Error\"}),`\n`,(0,n.jsx)(e.p,{children:\"I asked ChatGPT to list the differences between extending ExtendableError and extending Error directly and below is picked from the ChatGPT answer:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"name Property Mismatch (In Some Environments):\"}),`\n`]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Direct Error Inheritance: In some older JavaScript environments (e.g., older versions of Node.js or some non-browser environments), if you extend Error directly, the name property might not always be correctly set to the name of the error class (e.g., ValidationError).\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"ExtendableError: It explicitly sets this.name = this.constructor.name;, which ensures that the name property is set correctly across all environments, even if the environment doesn\\u2019t behave correctly\",(0,n.jsx)(e.br,{}),`\n`,\"with Error inheritance.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"2. Stack Trace Reliability:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Direct Error Inheritance: In some environments, especially Node.js, using Error.captureStackTrace directly in your custom error class ensures the stack trace points to the custom error class. If you\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"don\\u2019t use this, the stack trace might not behave as expected and could potentially show the wrong location in the call stack.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"ExtendableError: By using Error.captureStackTrace, ExtendableError ensures that the stack trace is correctly generated, pointing to the location where the error was thrown. This is critical in environments\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"like Node.js where debugging is more reliant on stack traces.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"exiterror\",children:\"ExitError\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/errors/src/index.ts#L13\",children:\"Changesets errors package\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export class ExitError extends ExtendableError {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" code: number;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" constructor(code: number) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" super(`The process exited with code: ${code}`);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" this.code = code;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"internalerror\",children:\"InternalError\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/errors/src/index.ts#L13\",children:\"Changets errors package\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export class InternalError extends ExtendableError {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" constructor(message: string) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" super(message);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L9\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L9\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/errors/src/index.ts#L13\",children:\"https://github.com/changesets/changesets/blob/main/packages/errors/src/index.ts#L13\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/extendable-error\",children:\"https://www.npmjs.com/package/extendable-error\"})}),`\n`]}),`\n`]})]})}function o(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(d,{...r})}):d(r)}return w(y);})();\n;return Component;"
        },
        "_id": "blog/extendable-error-changesets.mdx",
        "_raw": {
          "sourceFilePath": "blog/extendable-error-changesets.mdx",
          "sourceFileName": "extendable-error-changesets.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/extendable-error-changesets"
        },
        "type": "Doc",
        "slug": "/blog/extendable-error-changesets",
        "slugAsParams": "extendable-error-changesets"
      },
      "documentHash": "1740489186294",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/father-npm-tool.mdx": {
      "document": {
        "title": "Father, an NPM package development tool.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we review a tool called [Father](https://github.com/umijs/father). I pulled this below information from the Father repository [README.md](https://github.com/umijs/father). Although, their README is in Chinese, I will be submitting a PR with a docs translation in the near future.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*BqRhdJLZjdW8GaXfobNChA.png)\r\n\r\nI found a file named [.fatherrc.ts](https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts) in a package named [zustand-utils](https://www.npmjs.com/package/zustand-utils). This zustand-utils is used in [Lobechat source code](https://github.com/lobehub/lobe-chat/blob/446db7a203dc81082aac8ac0a4a6a604453eb7c0/src/store/serverConfig/store.ts#L2).\r\n\r\nThe below code is picked from [.fatherrc.ts](https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts)\r\n\r\n```javascript\r\nimport { defineConfig } from 'father';\r\n\r\nexport default defineConfig({\r\n  esm: { output: 'es' },\r\n  cjs: { output: 'lib', platform: 'browser' },\r\n});\r\n```\r\n\r\ndefineConfig is imported from ‘father’. This is even when I had to search for “father” npm package.\r\n\r\n# **What is “Father” package?**\r\n\r\nFather is an NPM package development tool that helps developers efficiently and reliably develop NPM packages, generate build artifacts, and publish them. It offers the following key features:\r\n\r\n* **Dual-mode Build**: Supports both **Bundless** and **Bundle** build modes — ESModule and CommonJS outputs use Bundless mode, while UMD outputs use Bundle mode.\r\n    \r\n* **Multiple Build Engine**s: Bundle mode uses **Webpac**k as the build engine, while Bundless mode supports **esbuild, Babel, and SW**C, allowing flexible configuration switching.\r\n    \r\n* **Type Generatio**n: Supports generating `.d.t`s type definitions for TypeScript modules, whether for source code builds or dependency pre-bundling.\r\n    \r\n* **Persistent Caching**: All output types support persistent caching, enabling faster incremental builds.\r\n    \r\n* **Project Inspection**: Checks for common pitfalls in NPM package development to ensure more stable releases.\r\n    \r\n* **Micro Generators**: Adds commonly used engineering capabilities to projects, such as setting up Jest for testing.\r\n    \r\n* **Dependency Pre-Bundling**: Provides out-of-the-box dependency pre-bundling to improve the stability of Node.js frameworks/libraries and prevent issues caused by upstream dependency updates (experimental).\r\n    \r\n\r\n# **Quick start guide**\r\n\r\nUse `create-father` to quickly create a new **Father** project:\r\n\r\n```javascript\r\nnpx create-father my-father-project\r\n```\r\n\r\nThis template includes only the basic configuration. For additional configuration options, refer to the **Configuration** documentation.\r\n\r\nTo build the project, run:\r\n\r\n```javascript\r\nnpx father build\r\n```\r\n\r\nAfter the build completes, check the `dist` folder to see the generated output.\r\n\r\n# **Configuration**\r\n\r\nYou could create a file named [.fatherrc.ts](https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts) and set up your configuration. Read more about [father configuration](https://github.com/umijs/father/blob/master/docs/config.md).\r\n\r\n> [*config.md*](https://github.com/umijs/father/blob/master/docs/config.md) *is in Chinese language, I have submitted a PR with English translations.*\r\n\r\n```javascript\r\nimport { defineConfig } from 'father';\r\n\r\nexport default defineConfig({\r\n  esm: { output: 'es' },\r\n  cjs: { output: 'lib', platform: 'browser' },\r\n});\r\n```\r\n\r\nThis above code snippet is picked from [zustand-utils/.fatherrc.ts](https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts)\r\n\r\n`output` is used to specify the prebundle output directory. `platform` is used to specify the target platform for the build output.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://www.npmjs.com/package/zustand-utils](https://www.npmjs.com/package/zustand-utils)\r\n    \r\n2. [https://github.com/arvinxx/zustand-utils](https://github.com/arvinxx/zustand-utils)\r\n    \r\n3. [https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts](https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts)\r\n    \r\n4. [https://github.com/umijs/father](https://github.com/umijs/father)\r\n    \r\n5. [https://www.npmjs.com/package/zustand-utils](https://www.npmjs.com/package/zustand-utils)\r\n    \r\n6. [https://github.com/lobehub/lobe-chat/blob/446db7a203dc81082aac8ac0a4a6a604453eb7c0/src/store/serverConfig/store.ts#L2](https://github.com/lobehub/lobe-chat/blob/446db7a203dc81082aac8ac0a4a6a604453eb7c0/src/store/serverConfig/store.ts#L2)",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),b=(r,e)=>{for(var t in e)i(r,t,{get:e[t],enumerable:!0})},c=(r,e,t,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of F(e))!g.call(r,l)&&l!==t&&i(r,l,{get:()=>e[l],enumerable:!(a=u(e,l))||a.enumerable});return r};var y=(r,e,t)=>(t=r!=null?p(m(r)):{},c(e||!r||!r.__esModule?i(t,\"default\",{value:r,enumerable:!0}):t,r)),w=r=>c(i({},\"__esModule\",{value:!0}),r);var o=f((x,s)=>{s.exports=_jsx_runtime});var j={};b(j,{default:()=>d,frontmatter:()=>v});var n=y(o()),v={title:\"Father, an NPM package development tool.\"};function h(r){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we review a tool called \",(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father\",children:\"Father\"}),\". I pulled this below information from the Father repository \",(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father\",children:\"README.md\"}),\". Although, their README is in Chinese, I will be submitting a PR with a docs translation in the near future.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*BqRhdJLZjdW8GaXfobNChA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I found a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts\",children:\".fatherrc.ts\"}),\" in a package named \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/zustand-utils\",children:\"zustand-utils\"}),\". This zustand-utils is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/446db7a203dc81082aac8ac0a4a6a604453eb7c0/src/store/serverConfig/store.ts#L2\",children:\"Lobechat source code\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts\",children:\".fatherrc.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defineConfig \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'father'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defineConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  esm\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" output\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'es'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  cjs\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" output\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'lib'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" platform\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'browser'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"defineConfig is imported from \\u2018father\\u2019. This is even when I had to search for \\u201Cfather\\u201D npm package.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"what-is-father-package\",children:(0,n.jsx)(e.strong,{children:\"What is \\u201CFather\\u201D package?\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Father is an NPM package development tool that helps developers efficiently and reliably develop NPM packages, generate build artifacts, and publish them. It offers the following key features:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Dual-mode Build\"}),\": Supports both \",(0,n.jsx)(e.strong,{children:\"Bundless\"}),\" and \",(0,n.jsx)(e.strong,{children:\"Bundle\"}),\" build modes \\u2014 ESModule and CommonJS outputs use Bundless mode, while UMD outputs use Bundle mode.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Multiple Build Engine\"}),\"s: Bundle mode uses \",(0,n.jsx)(e.strong,{children:\"Webpac\"}),\"k as the build engine, while Bundless mode supports \",(0,n.jsx)(e.strong,{children:\"esbuild, Babel, and SW\"}),\"C, allowing flexible configuration switching.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Type Generatio\"}),\"n: Supports generating \",(0,n.jsx)(e.code,{children:\".d.t\"}),\"s type definitions for TypeScript modules, whether for source code builds or dependency pre-bundling.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Persistent Caching\"}),\": All output types support persistent caching, enabling faster incremental builds.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Project Inspection\"}),\": Checks for common pitfalls in NPM package development to ensure more stable releases.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Micro Generators\"}),\": Adds commonly used engineering capabilities to projects, such as setting up Jest for testing.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Dependency Pre-Bundling\"}),\": Provides out-of-the-box dependency pre-bundling to improve the stability of Node.js frameworks/libraries and prevent issues caused by upstream dependency updates (experimental).\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"quick-start-guide\",children:(0,n.jsx)(e.strong,{children:\"Quick start guide\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Use \",(0,n.jsx)(e.code,{children:\"create-father\"}),\" to quickly create a new \",(0,n.jsx)(e.strong,{children:\"Father\"}),\" project:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"npx create\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"father my\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"father\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"project\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This template includes only the basic configuration. For additional configuration options, refer to the \",(0,n.jsx)(e.strong,{children:\"Configuration\"}),\" documentation.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"To build the project, run:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"npx father build\"})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"After the build completes, check the \",(0,n.jsx)(e.code,{children:\"dist\"}),\" folder to see the generated output.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"configuration\",children:(0,n.jsx)(e.strong,{children:\"Configuration\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You could create a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts\",children:\".fatherrc.ts\"}),\" and set up your configuration. Read more about \",(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/docs/config.md\",children:\"father configuration\"}),\".\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/docs/config.md\",children:(0,n.jsx)(e.em,{children:\"config.md\"})}),\" \",(0,n.jsx)(e.em,{children:\"is in Chinese language, I have submitted a PR with English translations.\"})]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defineConfig \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'father'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defineConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  esm\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" output\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'es'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  cjs\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" output\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'lib'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" platform\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'browser'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This above code snippet is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts\",children:\"zustand-utils/.fatherrc.ts\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"output\"}),\" is used to specify the prebundle output directory. \",(0,n.jsx)(e.code,{children:\"platform\"}),\" is used to specify the target platform for the build output.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/zustand-utils\",children:\"https://www.npmjs.com/package/zustand-utils\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/arvinxx/zustand-utils\",children:\"https://github.com/arvinxx/zustand-utils\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts\",children:\"https://github.com/arvinxx/zustand-utils/blob/master/.fatherrc.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father\",children:\"https://github.com/umijs/father\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/zustand-utils\",children:\"https://www.npmjs.com/package/zustand-utils\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/446db7a203dc81082aac8ac0a4a6a604453eb7c0/src/store/serverConfig/store.ts#L2\",children:\"https://github.com/lobehub/lobe-chat/blob/446db7a203dc81082aac8ac0a4a6a604453eb7c0/src/store/serverConfig/store.ts#L2\"})}),`\n`]}),`\n`]})]})}function d(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(h,{...r})}):h(r)}return w(j);})();\n;return Component;"
        },
        "_id": "blog/father-npm-tool.mdx",
        "_raw": {
          "sourceFilePath": "blog/father-npm-tool.mdx",
          "sourceFileName": "father-npm-tool.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/father-npm-tool"
        },
        "type": "Doc",
        "slug": "/blog/father-npm-tool",
        "slugAsParams": "father-npm-tool"
      },
      "documentHash": "1740489186296",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/FlowFixMe-in-React-source.mdx": {
      "document": {
        "title": "FlowFixMe in React source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze few instances of [Flow](https://flow.org/) usage  \r\nin [React source code](https://github.com/facebook/react/blob/main/packages/react/src/ReactChildren.js#L45C8-L45C18)\r\n\r\n# **What’s Flow?**\r\n\r\n[Flow](https://flow.org/) is a static type checker for JavaScript. Flow’s installation is easy and straightforward.\r\n\r\nDo checkout [Flow’s Installation docs](https://flow.org/en/docs/install/).\r\n\r\nIt is important to have @flow flag as a comment in the Javascript files where you need static type checking. [Read more](https://flow.org/en/docs/usage/#toc-prepare-your-code-for-flow).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*agJT6ZYais7Eccd32v8BuA.png)\r\n\r\nWe pick few instances of Flow usage in React source code.\r\n\r\n1. [$FlowFixMe](https://github.com/facebook/react/blob/main/packages/react/src/ReactChildren.js#L45C8-L45C18)\r\n    \r\n\r\n```plaintext\r\n$FlowFixMe[invalid-computed-prop]\r\n```\r\n\r\nRead more at [https://flow.org/en/docs/strict/#toc-adoption](https://flow.org/en/docs/strict/#toc-adoption)\r\n\r\n2\\. [Types and Interfaces in packages/shared/ReactTypes.js](https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L22)\r\n\r\n```plaintext\r\n// picked from https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L22\r\n…\r\nexport type ReactPortal = {\r\n $$typeof: symbol | number,\r\n key: null | string,\r\n containerInfo: any,\r\n children: ReactNodeList,\r\n // TODO: figure out the API for cross-renderer implementation.\r\n implementation: any,\r\n};\r\n// The subset of a Promise that React APIs rely on. This resolves a value.\r\n// This doesn't require a return value neither from the handler nor the\r\n// then function.\r\ninterface ThenableImpl<T> {\r\n then(\r\n onFulfill: (value: T) => mixed,\r\n onReject: (error: mixed) => mixed,\r\n ): void | Wakeable;\r\n}\r\n```\r\n\r\nRead more about [interfaces](https://flow.org/en/docs/types/interfaces/) and [types](https://flow.org/en/docs/types/utilities/)\r\n\r\nFlow DX feels very much like TypeScript. Typescript made its first release in Oct, 2012 and Flow made its first release in Nov, 2014.\r\n\r\n# **Check your code:**\r\n\r\nThe great thing about Flow is that you can get near real-time feedback  \r\non the state of your code. At any point that you want to check for errors,  \r\njust run:\r\n\r\n```plaintext\r\n# equivalent to `flow status`\r\nflow\r\n```\r\n\r\nThe first time this is run, the Flow background process will be spawned and all of your Flow files will be checked. Then, as you continue to iterate on your project, the background process will continuously monitor your code such that when you run flow again, the updated result will be near instantaneous.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1\\. [https://flow.org/en/docs/errors/](https://flow.org/en/docs/errors/)  \r\n2.[https://github.com/facebook/react/blob/main/packages/react/src/ReactChildren.js#L45C8-L45C18](https://github.com/facebook/react/blob/main/packages/react/src/ReactChildren.js#L45C8-L45C18)  \r\n3.[https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L22](https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L22)  \r\n4\\. [https://engineering.fb.com/2014/11/18/web/flow-a-new-static-type-checker-for-javascript/](https://engineering.fb.com/2014/11/18/web/flow-a-new-static-type-checker-for-javascript/)  \r\n5\\. [https://flow.org/en/docs/strict/#toc-adoption](https://flow.org/en/docs/strict/#toc-adoption)  \r\n6\\. [https://flow.org/en/docs/errors/](https://flow.org/en/docs/errors/)\r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----89987b466b37--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),w=(a,e)=>{for(var t in e)c(a,t,{get:e[t],enumerable:!0})},s=(a,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!g.call(a,r)&&r!==t&&c(a,r,{get:()=>e[r],enumerable:!(i=m(e,r))||i.enumerable});return a};var y=(a,e,t)=>(t=a!=null?p(f(a)):{},s(e||!a||!a.__esModule?c(t,\"default\",{value:a,enumerable:!0}):t,a)),k=a=>s(c({},\"__esModule\",{value:!0}),a);var l=b((x,o)=>{o.exports=_jsx_runtime});var N={};w(N,{default:()=>d,frontmatter:()=>j});var n=y(l()),j={title:\"FlowFixMe in React source code\"};function h(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze few instances of \",(0,n.jsx)(e.a,{href:\"https://flow.org/\",children:\"Flow\"}),\" usage\",(0,n.jsx)(e.br,{}),`\n`,\"in \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/packages/react/src/ReactChildren.js#L45C8-L45C18\",children:\"React source code\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"whats-flow\",children:(0,n.jsx)(e.strong,{children:\"What\\u2019s Flow?\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://flow.org/\",children:\"Flow\"}),\" is a static type checker for JavaScript. Flow\\u2019s installation is easy and straightforward.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Do checkout \",(0,n.jsx)(e.a,{href:\"https://flow.org/en/docs/install/\",children:\"Flow\\u2019s Installation docs\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"It is important to have @flow flag as a comment in the Javascript files where you need static type checking. \",(0,n.jsx)(e.a,{href:\"https://flow.org/en/docs/usage/#toc-prepare-your-code-for-flow\",children:\"Read more\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*agJT6ZYais7Eccd32v8BuA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"We pick few instances of Flow usage in React source code.\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/packages/react/src/ReactChildren.js#L45C8-L45C18\",children:\"$FlowFixMe\"})}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"$FlowFixMe[invalid-computed-prop]\"})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more at \",(0,n.jsx)(e.a,{href:\"https://flow.org/en/docs/strict/#toc-adoption\",children:\"https://flow.org/en/docs/strict/#toc-adoption\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"2. \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L22\",children:\"Types and Interfaces in packages/shared/ReactTypes.js\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// picked from https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L22\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"\\u2026\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export type ReactPortal = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" $$typeof: symbol | number,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" key: null | string,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" containerInfo: any,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" children: ReactNodeList,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // TODO: figure out the API for cross-renderer implementation.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" implementation: any,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// The subset of a Promise that React APIs rely on. This resolves a value.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// This doesn't require a return value neither from the handler nor the\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// then function.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"interface ThenableImpl<T> {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" then(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" onFulfill: (value: T) => mixed,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" onReject: (error: mixed) => mixed,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ): void | Wakeable;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://flow.org/en/docs/types/interfaces/\",children:\"interfaces\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://flow.org/en/docs/types/utilities/\",children:\"types\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"Flow DX feels very much like TypeScript. Typescript made its first release in Oct, 2012 and Flow made its first release in Nov, 2014.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"check-your-code\",children:(0,n.jsx)(e.strong,{children:\"Check your code:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The great thing about Flow is that you can get near real-time feedback\",(0,n.jsx)(e.br,{}),`\n`,\"on the state of your code. At any point that you want to check for errors,\",(0,n.jsx)(e.br,{}),`\n`,\"just run:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# equivalent to `flow status`\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"flow\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"The first time this is run, the Flow background process will be spawned and all of your Flow files will be checked. Then, as you continue to iterate on your project, the background process will continuously monitor your code such that when you run flow again, the updated result will be near instantaneous.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. \",(0,n.jsx)(e.a,{href:\"https://flow.org/en/docs/errors/\",children:\"https://flow.org/en/docs/errors/\"}),(0,n.jsx)(e.br,{}),`\n`,\"2.\",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/packages/react/src/ReactChildren.js#L45C8-L45C18\",children:\"https://github.com/facebook/react/blob/main/packages/react/src/ReactChildren.js#L45C8-L45C18\"}),(0,n.jsx)(e.br,{}),`\n`,\"3.\",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L22\",children:\"https://github.com/facebook/react/blob/main/packages/shared/ReactTypes.js#L22\"}),(0,n.jsx)(e.br,{}),`\n`,\"4. \",(0,n.jsx)(e.a,{href:\"https://engineering.fb.com/2014/11/18/web/flow-a-new-static-type-checker-for-javascript/\",children:\"https://engineering.fb.com/2014/11/18/web/flow-a-new-static-type-checker-for-javascript/\"}),(0,n.jsx)(e.br,{}),`\n`,\"5. \",(0,n.jsx)(e.a,{href:\"https://flow.org/en/docs/strict/#toc-adoption\",children:\"https://flow.org/en/docs/strict/#toc-adoption\"}),(0,n.jsx)(e.br,{}),`\n`,\"6. \",(0,n.jsx)(e.a,{href:\"https://flow.org/en/docs/errors/\",children:\"https://flow.org/en/docs/errors/\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----89987b466b37--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function d(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return k(N);})();\n;return Component;"
        },
        "_id": "blog/FlowFixMe-in-React-source.mdx",
        "_raw": {
          "sourceFilePath": "blog/FlowFixMe-in-React-source.mdx",
          "sourceFileName": "FlowFixMe-in-React-source.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/FlowFixMe-in-React-source"
        },
        "type": "Doc",
        "slug": "/blog/FlowFixMe-in-React-source",
        "slugAsParams": "FlowFixMe-in-React-source"
      },
      "documentHash": "1740489186195",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/flush-sync-in-tiptap.mdx": {
      "document": {
        "title": "flushSync in TipTap source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review a [code snippet from TipTap source code](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L116).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*Ynx2myANUp__cT1xZbafHg.png)\r\n\r\nAs I was reading through the file, [ReactRenderer.tsx](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L116), I saw a function named `flushSync` in the constructor. This below code snippet is written inside constructor.\r\n\r\n```js\r\nif (this.editor.isInitialized) {\r\n  // On first render, we need to flush the render synchronously\r\n  // Renders afterwards can be async, but this fixes a cursor positioning issue\r\n  flushSync(() => {\r\n    this.render()\r\n  })\r\n} else {\r\n  this.render()\r\n}\r\n```\r\n\r\n### constructor\r\n\r\n```js\r\n  /**\r\n   * Immediately creates element and renders the provided React component.\r\n   */\r\n  constructor(component: ComponentType<R, P>, {\r\n    editor,\r\n    props = {},\r\n    as = 'div',\r\n    className = '',\r\n  }: ReactRendererOptions) {\r\n```\r\n\r\nThis constructor, as the comment indicates, creates element and renders the provided React component.\r\n\r\n#### Creating element\r\n\r\n[At line 106](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L106), `document.createElement` method is used to create the element.\r\n\r\n```js\r\nthis.id = Math.floor(Math.random() * 0xFFFFFFFF).toString()\r\nthis.component = component\r\nthis.editor = editor as EditorWithContentComponent\r\nthis.props = props as P\r\nthis.element = document.createElement(as)\r\nthis.element.classList.add('react-renderer')\r\n\r\nif (className) {\r\n  this.element.classList.add(...className.split(' '))\r\n}\r\n```\r\n\r\n#### Rendering component\r\n\r\n```js\r\nif (this.editor.isInitialized) {\r\n  // On first render, we need to flush the render synchronously\r\n  // Renders afterwards can be async, but this fixes a cursor \r\n  // positioning issue\r\n  flushSync(() => {\r\n    this.render()\r\n  })\r\n} else {\r\n  this.render()\r\n}\r\n```\r\n\r\nThe comment here explains why the flushSync API is used. It is to fix a cursor positioning issue, but what is flushSync?\r\n\r\n### flushSync\r\n\r\n`flushSync` lets you force React to flush any updates inside the provided callback synchronously. This ensures that the DOM is updated immediately.\r\n\r\nRead more about [flushSync](https://react.dev/reference/react-dom/flushSync).\r\n\r\n> Using `flushSync` is uncommon and can hurt the performance of your app.\r\n\r\nThe below example is picked from [React documentation](https://react.dev/reference/react-dom/flushSync#flushing-updates-for-third-party-integrations).\r\n\r\n#### Example\r\n\r\nThe browser `onbeforeprint` API allows you to change the page immediately before the print dialog opens. This is useful for applying custom print styles that allow the document to display better for printing. In the example below, you use `flushSync` inside of the `onbeforeprint` callback to immediately “flush” the React state to the DOM. Then, by the time the print dialog opens, `isPrinting` displays “yes”: — [Source](https://react.dev/reference/react-dom/flushSync#flushing-updates-for-third-party-integrations)\r\n\r\n```js\r\nimport { useState, useEffect } from 'react';\r\nimport { flushSync } from 'react-dom';\r\n\r\nexport default function PrintApp() {\r\n  const [isPrinting, setIsPrinting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    function handleBeforePrint() {\r\n      flushSync(() => {\r\n        setIsPrinting(true);\r\n      })\r\n    }\r\n\r\n    function handleAfterPrint() {\r\n      setIsPrinting(false);\r\n    }\r\n\r\n    window.addEventListener('beforeprint', handleBeforePrint);\r\n    window.addEventListener('afterprint', handleAfterPrint);\r\n    return () => {\r\n      window.removeEventListener('beforeprint', handleBeforePrint);\r\n      window.removeEventListener('afterprint', handleAfterPrint);\r\n    }\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <h1>isPrinting: {isPrinting ? 'yes' : 'no'}</h1>\r\n      <button onClick={() => window.print()}>\r\n        Print\r\n      </button>\r\n    </>\r\n  );\r\n}\r\n```\r\n\r\nWithout `flushSync`, the print dialog will display `isPrinting` as “no”. This is because React batches the updates asynchronously and the print dialog is displayed before the state is updated. — [Source](https://react.dev/reference/react-dom/flushSync#flushing-updates-for-third-party-integrations)\r\n\r\nI tried commenting the flushSync and tested the print example. To my surprise, `isPrinting` is to set to `yes` when the flushSync is commented. I am not sure how flushSync makes a difference at this point.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*AjJ5gH7JAdBfwbE-gs3MCw.png)\r\n\r\n![](https://cdn-images-1.medium.com/max/1200/1*3fQjMvpeCglkVpumSZboYQ.png)\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L116](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L116)\r\n    \r\n2. [https://react.dev/reference/react-dom/flushSync](https://react.dev/reference/react-dom/flushSync)",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var f=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var s in e)c(l,s,{get:e[s],enumerable:!0})},F=(l,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(l,r)&&r!==s&&c(l,r,{get:()=>e[r],enumerable:!(o=p(e,r))||o.enumerable});return l};var N=(l,e,s)=>(s=l!=null?h(m(l)):{},F(e||!l||!l.__esModule?c(s,\"default\",{value:l,enumerable:!0}):s,l)),b=l=>F(c({},\"__esModule\",{value:!0}),l);var t=f((S,a)=>{a.exports=_jsx_runtime});var v={};g(v,{default:()=>d,frontmatter:()=>w});var n=N(t()),w={title:\"flushSync in TipTap source\\xA0code\"};function i(l){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will review a \",(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L116\",children:\"code snippet from TipTap source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*Ynx2myANUp__cT1xZbafHg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"As I was reading through the file, \",(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L116\",children:\"ReactRenderer.tsx\"}),\", I saw a function named \",(0,n.jsx)(e.code,{children:\"flushSync\"}),\" in the constructor. This below code snippet is written inside constructor.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isInitialized\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" On first render, we need to flush the render synchronously\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Renders afterwards can be async, but this fixes a cursor positioning issue\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  flushSync\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"render\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  })\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"render\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"constructor\",children:\"constructor\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  /**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"   * Immediately creates element and renders the provided React component.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   */\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  constructor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"component: ComponentType\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"R\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" P\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">,\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    props \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {},\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    as\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" = \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'div'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    className \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ''\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": ReactRendererOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This constructor, as the comment indicates, creates element and renders the provided React component.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"creating-element\",children:\"Creating element\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L106\",children:\"At line 106\"}),\", \",(0,n.jsx)(e.code,{children:\"document.createElement\"}),\" method is used to create the element.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"id \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Math\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"floor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Math\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"random\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" *\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0xFFFFFFFF).\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"toString\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"component \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" component\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"editor \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" editor \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" EditorWithContentComponent\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"props \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" props \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" P\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"element \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" document\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createElement\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"as\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"element\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"classList\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'react-renderer'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"className\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"element\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"classList\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(...\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"className\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"split\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"' '\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"rendering-component\",children:\"Rendering component\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isInitialized\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" On first render, we need to flush the render synchronously\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Renders afterwards can be async, but this fixes a cursor \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" positioning issue\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  flushSync\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"render\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  })\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"render\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"The comment here explains why the flushSync API is used. It is to fix a cursor positioning issue, but what is flushSync?\"}),`\n`,(0,n.jsx)(e.h3,{id:\"flushsync\",children:\"flushSync\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"flushSync\"}),\" lets you force React to flush any updates inside the provided callback synchronously. This ensures that the DOM is updated immediately.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/flushSync\",children:\"flushSync\"}),\".\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Using \",(0,n.jsx)(e.code,{children:\"flushSync\"}),\" is uncommon and can hurt the performance of your app.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below example is picked from \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/flushSync#flushing-updates-for-third-party-integrations\",children:\"React documentation\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"example\",children:\"Example\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The browser \",(0,n.jsx)(e.code,{children:\"onbeforeprint\"}),\" API allows you to change the page immediately before the print dialog opens. This is useful for applying custom print styles that allow the document to display better for printing. In the example below, you use \",(0,n.jsx)(e.code,{children:\"flushSync\"}),\" inside of the \",(0,n.jsx)(e.code,{children:\"onbeforeprint\"}),\" callback to immediately \\u201Cflush\\u201D the React state to the DOM. Then, by the time the print dialog opens, \",(0,n.jsx)(e.code,{children:\"isPrinting\"}),\" displays \\u201Cyes\\u201D:\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/flushSync#flushing-updates-for-third-party-integrations\",children:\"Source\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useEffect \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'react'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" flushSync \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'react-dom'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" PrintApp\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isPrinting\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setIsPrinting\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(false);\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  useEffect\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" handleBeforePrint\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      flushSync\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        setIsPrinting\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(true);\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      })\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" handleAfterPrint\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      setIsPrinting\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(false);\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    window\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'beforeprint'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" handleBeforePrint\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    window\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"addEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'afterprint'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" handleAfterPrint\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      window\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"removeEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'beforeprint'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" handleBeforePrint\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      window\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"removeEventListener\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'afterprint'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" handleAfterPrint\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" []);\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    <>\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"h1\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isPrinting: \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isPrinting \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'yes'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'no'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}</\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"h1\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"button onClick\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" window\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"print\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()}>\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        Print\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      </\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"button\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    </>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Without \",(0,n.jsx)(e.code,{children:\"flushSync\"}),\", the print dialog will display \",(0,n.jsx)(e.code,{children:\"isPrinting\"}),\" as \\u201Cno\\u201D. This is because React batches the updates asynchronously and the print dialog is displayed before the state is updated.\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/flushSync#flushing-updates-for-third-party-integrations\",children:\"Source\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I tried commenting the flushSync and tested the print example. To my surprise, \",(0,n.jsx)(e.code,{children:\"isPrinting\"}),\" is to set to \",(0,n.jsx)(e.code,{children:\"yes\"}),\" when the flushSync is commented. I am not sure how flushSync makes a difference at this point.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*AjJ5gH7JAdBfwbE-gs3MCw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1200/1*3fQjMvpeCglkVpumSZboYQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L116\",children:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/ReactRenderer.tsx#L116\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/flushSync\",children:\"https://react.dev/reference/react-dom/flushSync\"})}),`\n`]}),`\n`]})]})}function d(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(i,{...l})}):i(l)}return b(v);})();\n;return Component;"
        },
        "_id": "blog/flush-sync-in-tiptap.mdx",
        "_raw": {
          "sourceFilePath": "blog/flush-sync-in-tiptap.mdx",
          "sourceFileName": "flush-sync-in-tiptap.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/flush-sync-in-tiptap"
        },
        "type": "Doc",
        "slug": "/blog/flush-sync-in-tiptap",
        "slugAsParams": "flush-sync-in-tiptap"
      },
      "documentHash": "1740489186299",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Function-overload-in-TypeScript.mdx": {
      "document": {
        "title": "Function overload in TypeScript\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nWhen working with TypeScript, you may encounter situations where a function needs to handle different types of input while maintaining type safety. This is where function overloading comes into play. Let’s look at a practical example of function overloading, inspired by a code snippet from the [Supabase source code](https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L24).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*834BLGxRg7Gwwb4YYAiPrQ.png)\r\n\r\n# **Example: useIsFeatureEnabled**\r\n\r\nThe [`useIsFeatureEnabled`](https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L24) function is a great example of function overloading. It can handle both an array of features and a single feature, returning appropriate results for each case.\r\n\r\nHere’s the overloaded function definition:\r\n\r\n```plaintext\r\nfunction useIsFeatureEnabled<T extends Feature[]>(\r\n  features: T\r\n): { [key in FeatureToCamelCase<T[number]>]: boolean }\r\nfunction useIsFeatureEnabled(features: Feature): boolean\r\nfunction useIsFeatureEnabled<T extends Feature | Feature[]>(features: T) {\r\n  const { profile } = useProfile()\r\n\r\n  if (Array.isArray(features)) {\r\n      return Object.fromEntries(\r\n        features.map((feature) => [\r\n          featureToCamelCase(feature),\r\n          checkFeature(feature, profile?.disabled_features),\r\n        ])\r\n      )\r\n  }\r\n  return checkFeature(features, profile?.disabled_features)\r\n}\r\nexport { useIsFeatureEnabled }\r\n```\r\n\r\n# **How It Works**\r\n\r\n1. **Function Overloads**: The first two declarations are overload signatures. They define the different ways the function can be called. The actual implementation comes last, handling both cases.\r\n    \r\n2. **Implementation**: The function implementation checks if the input `features` is an array. If it is, it processes each feature, converts it to camelCase, and checks if it's enabled. If `features` is a single feature, it directly checks its status.\r\n    \r\n\r\n# **Supporting Functions and Types**\r\n\r\nTo understand this better, let’s look at the supporting `checkFeature` function and the type utility `FeatureToCamelCase`.\r\n\r\n## **checkFeature Function**\r\n\r\nThe `checkFeature` function determines if a given feature is enabled or not:\r\n\r\n```plaintext\r\nfunction checkFeature(feature: Feature, features?: Feature[]) {\r\n  return !features?.includes(feature) ?? true\r\n}\r\n```\r\n\r\nThis function returns `true` if the feature is not in the disabled features list or if no disabled features are provided.\r\n\r\n> *Do watch the* [*Matt Pocock’s Youtube video explanation*](https://www.youtube.com/watch?v=Vr1BUFw6dJM) *about the function overloads in TypeScript.*\r\n\r\n# **Conclusion**\r\n\r\nFunction overloading in TypeScript allows you to define multiple ways to call a function with different types of input while ensuring type safety. The `useIsFeatureEnabled` function from Supabase is an excellent example of this concept in action. It demonstrates how to handle different input types seamlessly, providing both flexibility and strong typing.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png)\r\n\r\n> [*Get free courses inspired by the best practices used in open source.*](https://app.thinkthroo.com/best-practices)\r\n\r\n# About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L24](https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L24)\r\n    \r\n2. [Matt Pocock’s Youtube video explanation.](https://www.youtube.com/watch?v=Vr1BUFw6dJM)",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var a in e)i(t,a,{get:e[a],enumerable:!0})},c=(t,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!b.call(t,r)&&r!==a&&i(t,r,{get:()=>e[r],enumerable:!(s=u(e,r))||s.enumerable});return t};var k=(t,e,a)=>(a=t!=null?p(f(t)):{},c(e||!t||!t.__esModule?i(a,\"default\",{value:t,enumerable:!0}):a,t)),w=t=>c(i({},\"__esModule\",{value:!0}),t);var o=g((T,l)=>{l.exports=_jsx_runtime});var x={};y(x,{default:()=>d,frontmatter:()=>F});var n=k(o()),F={title:\"Function overload in TypeScript\"};function h(t){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"When working with TypeScript, you may encounter situations where a function needs to handle different types of input while maintaining type safety. This is where function overloading comes into play. Let\\u2019s look at a practical example of function overloading, inspired by a code snippet from the \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L24\",children:\"Supabase source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*834BLGxRg7Gwwb4YYAiPrQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"example-useisfeatureenabled\",children:(0,n.jsx)(e.strong,{children:\"Example: useIsFeatureEnabled\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L24\",children:(0,n.jsx)(e.code,{children:\"useIsFeatureEnabled\"})}),\" function is a great example of function overloading. It can handle both an array of features and a single feature, returning appropriate results for each case.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Here\\u2019s the overloaded function definition:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function useIsFeatureEnabled<T extends Feature[]>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  features: T\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"): { [key in FeatureToCamelCase<T[number]>]: boolean }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function useIsFeatureEnabled(features: Feature): boolean\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function useIsFeatureEnabled<T extends Feature | Feature[]>(features: T) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { profile } = useProfile()\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (Array.isArray(features)) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return Object.fromEntries(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        features.map((feature) => [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          featureToCamelCase(feature),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          checkFeature(feature, profile?.disabled_features),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        ])\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return checkFeature(features, profile?.disabled_features)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export { useIsFeatureEnabled }\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"how-it-works\",children:(0,n.jsx)(e.strong,{children:\"How It Works\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Function Overloads\"}),\": The first two declarations are overload signatures. They define the different ways the function can be called. The actual implementation comes last, handling both cases.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Implementation\"}),\": The function implementation checks if the input \",(0,n.jsx)(e.code,{children:\"features\"}),\" is an array. If it is, it processes each feature, converts it to camelCase, and checks if it's enabled. If \",(0,n.jsx)(e.code,{children:\"features\"}),\" is a single feature, it directly checks its status.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"supporting-functions-and-types\",children:(0,n.jsx)(e.strong,{children:\"Supporting Functions and Types\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"To understand this better, let\\u2019s look at the supporting \",(0,n.jsx)(e.code,{children:\"checkFeature\"}),\" function and the type utility \",(0,n.jsx)(e.code,{children:\"FeatureToCamelCase\"}),\".\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"checkfeature-function\",children:(0,n.jsx)(e.strong,{children:\"checkFeature Function\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"checkFeature\"}),\" function determines if a given feature is enabled or not:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function checkFeature(feature: Feature, features?: Feature[]) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return !features?.includes(feature) ?? true\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This function returns \",(0,n.jsx)(e.code,{children:\"true\"}),\" if the feature is not in the disabled features list or if no disabled features are provided.\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"Do watch the\"}),\" \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/watch?v=Vr1BUFw6dJM\",children:(0,n.jsx)(e.em,{children:\"Matt Pocock\\u2019s Youtube video explanation\"})}),\" \",(0,n.jsx)(e.em,{children:\"about the function overloads in TypeScript.\"})]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"conclusion\",children:(0,n.jsx)(e.strong,{children:\"Conclusion\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Function overloading in TypeScript allows you to define multiple ways to call a function with different types of input while ensuring type safety. The \",(0,n.jsx)(e.code,{children:\"useIsFeatureEnabled\"}),\" function from Supabase is an excellent example of this concept in action. It demonstrates how to handle different input types seamlessly, providing both flexibility and strong typing.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:(0,n.jsx)(e.em,{children:\"Get free courses inspired by the best practices used in open source.\"})})}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L24\",children:\"https://github.com/supabase/supabase/blob/master/apps/studio/hooks/misc/useIsFeatureEnabled.ts#L24\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.youtube.com/watch?v=Vr1BUFw6dJM\",children:\"Matt Pocock\\u2019s Youtube video explanation.\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(h,{...t})}):h(t)}return w(x);})();\n;return Component;"
        },
        "_id": "blog/Function-overload-in-TypeScript.mdx",
        "_raw": {
          "sourceFilePath": "blog/Function-overload-in-TypeScript.mdx",
          "sourceFileName": "Function-overload-in-TypeScript.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Function-overload-in-TypeScript"
        },
        "type": "Doc",
        "slug": "/blog/Function-overload-in-TypeScript",
        "slugAsParams": "Function-overload-in-TypeScript"
      },
      "documentHash": "1741940307901",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/generate-doc-with-nextra.mdx": {
      "document": {
        "title": "Generate a documentation site using Nextra\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, you will learn how [Nextra](https://nextra.site/) can be used to generate a static documentation site and we also provide an example.\r\n\r\nUsing Nextra, you can make beautiful websites with Next.js & MDX.\r\n\r\n[Nextra docs](https://nextra.site/docs) provides two options, one for [documentation](https://nextra.site/docs/docs-theme/start) and the other is for [blog](https://nextra.site/docs/blog-theme/start).\r\n\r\n### Using Nextra\r\n\r\nConfiguring Nextra manually is simple. You [install the packages](https://nextra.site/docs/docs-theme/start#install), [update the Next.js config,](https://nextra.site/docs/docs-theme/start#add-nextjs-config) [create themes.config.jsx](https://nextra.site/docs/docs-theme/start#create-docs-theme-config) and finally [create pages/\\_app.jsx](https://nextra.site/docs/docs-theme/start#create-nextjs-app-component)\r\n\r\nThere is an important [FAQ found on Nextra](https://nextra.site/docs#nextra-faq) about using Nextra in app router, it is not supported yet but Next.js supports both app and   \r\npages router in the same app.\r\n\r\n### Unofficial changesets documentation site\r\n\r\nThis [repository](https://github.com/nnecec/changesets-docs) is an unofficial changesets documentation site. It is deployed on Vercel and available at — [https://changesets-docs.vercel.app/](https://changesets-docs.vercel.app/)\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*1ZtgGEo4eLpOvHhvbG1Y7A.png )\r\n\r\n```plaintext\r\n// next.config.mjs\r\nimport nextra from \"nextra\";\r\nconst withNextra = nextra({\r\n theme: \"nextra-theme-docs\",\r\n themeConfig: \"./theme.config.jsx\",\r\n defaultShowCopyCode: true,\r\n});\r\nexport default withNextra({\r\n i18n: {\r\n locales: [\"en-US\", \"zh-CN\"],\r\n defaultLocale: \"en-US\",\r\n },\r\n});\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### Reference:\r\n\r\n1. [https://nextra.site/docs/docs-theme/start](https://nextra.site/docs/docs-theme/start)\r\n    \r\n2. [https://github.com/nnecec/changesets-docs](https://github.com/nnecec/changesets-docs)\r\n    \r\n3. [https://changesets-docs.vercel.app/](https://changesets-docs.vercel.app/)",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),b=(t,e)=>{for(var a in e)s(t,a,{get:e[a],enumerable:!0})},c=(t,e,a,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!f.call(t,r)&&r!==a&&s(t,r,{get:()=>e[r],enumerable:!(i=m(e,r))||i.enumerable});return t};var N=(t,e,a)=>(a=t!=null?p(g(t)):{},c(e||!t||!t.__esModule?s(a,\"default\",{value:t,enumerable:!0}):a,t)),j=t=>c(s({},\"__esModule\",{value:!0}),t);var o=x((v,h)=>{h.exports=_jsx_runtime});var w={};b(w,{default:()=>l,frontmatter:()=>y});var n=N(o()),y={title:\"Generate a documentation site using\\xA0Nextra\"};function d(t){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, you will learn how \",(0,n.jsx)(e.a,{href:\"https://nextra.site/\",children:\"Nextra\"}),\" can be used to generate a static documentation site and we also provide an example.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Using Nextra, you can make beautiful websites with Next.js & MDX.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://nextra.site/docs\",children:\"Nextra docs\"}),\" provides two options, one for \",(0,n.jsx)(e.a,{href:\"https://nextra.site/docs/docs-theme/start\",children:\"documentation\"}),\" and the other is for \",(0,n.jsx)(e.a,{href:\"https://nextra.site/docs/blog-theme/start\",children:\"blog\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"using-nextra\",children:\"Using Nextra\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Configuring Nextra manually is simple. You \",(0,n.jsx)(e.a,{href:\"https://nextra.site/docs/docs-theme/start#install\",children:\"install the packages\"}),\", \",(0,n.jsx)(e.a,{href:\"https://nextra.site/docs/docs-theme/start#add-nextjs-config\",children:\"update the Next.js config,\"}),\" \",(0,n.jsx)(e.a,{href:\"https://nextra.site/docs/docs-theme/start#create-docs-theme-config\",children:\"create themes.config.jsx\"}),\" and finally \",(0,n.jsx)(e.a,{href:\"https://nextra.site/docs/docs-theme/start#create-nextjs-app-component\",children:\"create pages/_app.jsx\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"There is an important \",(0,n.jsx)(e.a,{href:\"https://nextra.site/docs#nextra-faq\",children:\"FAQ found on Nextra\"}),\" about using Nextra in app router, it is not supported yet but Next.js supports both app and\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"pages router in the same app.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"unofficial-changesets-documentation-site\",children:\"Unofficial changesets documentation site\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This \",(0,n.jsx)(e.a,{href:\"https://github.com/nnecec/changesets-docs\",children:\"repository\"}),\" is an unofficial changesets documentation site. It is deployed on Vercel and available at\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://changesets-docs.vercel.app/\",children:\"https://changesets-docs.vercel.app/\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*1ZtgGEo4eLpOvHhvbG1Y7A.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// next.config.mjs\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import nextra from \"nextra\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const withNextra = nextra({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' theme: \"nextra-theme-docs\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' themeConfig: \"./theme.config.jsx\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" defaultShowCopyCode: true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export default withNextra({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" i18n: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' locales: [\"en-US\", \"zh-CN\"],'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' defaultLocale: \"en-US\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"reference\",children:\"Reference:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nextra.site/docs/docs-theme/start\",children:\"https://nextra.site/docs/docs-theme/start\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/nnecec/changesets-docs\",children:\"https://github.com/nnecec/changesets-docs\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://changesets-docs.vercel.app/\",children:\"https://changesets-docs.vercel.app/\"})}),`\n`]}),`\n`]})]})}function l(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(d,{...t})}):d(t)}return j(w);})();\n;return Component;"
        },
        "_id": "blog/generate-doc-with-nextra.mdx",
        "_raw": {
          "sourceFilePath": "blog/generate-doc-with-nextra.mdx",
          "sourceFileName": "generate-doc-with-nextra.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/generate-doc-with-nextra"
        },
        "type": "Doc",
        "slug": "/blog/generate-doc-with-nextra",
        "slugAsParams": "generate-doc-with-nextra"
      },
      "documentHash": "1740489186300",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/generating-a-jsdoc-comment.mdx": {
      "document": {
        "title": "Generating a JSDoc comment for your function using OpenAI.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nThis article is inspired by Remotion’s internal package, [ai-improvements](https://github.com/remotion-dev/remotion/tree/main/packages/ai-improvements). This internal package is used to improve/generate JSDoc comment and log in the console for a function in the [Remotion’s source code](https://github.com/remotion-dev/remotion/blob/main/packages/core/src/AbsoluteFill.tsx#L26-L29).\r\n\r\nThis use case is quite different because you would normally use the source code and let OpenAI generate API documentation but instead in Remotion, this internal package uses the OpenAI API to generate JSDoc comment for a function using API documentation and the source code.\r\n\r\n[![](https://miro.medium.com/v2/resize:fit:875/1*ANC_Hz5Shl-L6RVCefINZA.png)](https://thinkthroo.com/)\r\n\r\nWe will look at a high level how this package is configured:\r\n\r\n1. improve-docs.ts\r\n    \r\n2. generate-jsdoc\r\n    \r\n\r\n# **Improve docs**\r\n\r\n```plaintext\r\nimport path from \"path\";\r\nimport { OpenAI } from \"openai\";\r\nimport { getApis } from \"./map-over-api\";\r\nimport { findMistakes } from \"./tasks/find-mistakes\";\r\nimport { generateJSDocTask } from \"./tasks/generate-jsdoc\";\r\n```\r\n\r\n[improve-docs.ts](https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/improve-docs.ts) has the above imports. generateJSDocTask is imported from ‘tasks’ folder.\r\n\r\n[![](https://miro.medium.com/v2/resize:fit:875/1*FSLTVNat9n9PV4DoUS1tJQ.png)](https://thinkthroo.com/)\r\n\r\ndepending on the task, you could either generate a JSDoc or find mistakes.\r\n\r\n# **Generate JSDoc**\r\n\r\n[![](https://miro.medium.com/v2/resize:fit:875/1*Us8-4uQOGWH9c6cDSj-LxA.png)](https://thinkthroo.com/)\r\n\r\n[generate-jsdoc.ts](https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/tasks/generate-jsdoc.ts) uses the openai API and has prompts as shown in the above image.\r\n\r\n[![](https://miro.medium.com/v2/resize:fit:875/1*7PWIWnDYKu4sL4SKmDV-9Q.png)](https://thinkthroo.com/)\r\n\r\nPlease note that this will only write the generated JSDoc to the console. Would it be possible to write these JSDoc comments programatically in the file? Not sure, but it is worth reading the AST documentation to see if there’s any API available to add JSDoc comments just above the function or class name. [ts-morph](https://ts-morph.com/manipulation/) is known to be used in shadcn-ui/ui to manipulate the source code at AST level.\r\n\r\n[![](https://miro.medium.com/v2/resize:fit:875/0*QlUA8-jvrCQnSBIJ.png)](https://thinkthroo.com/)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/remotion-dev/remotion/tree/main/packages/ai-improvements](https://github.com/remotion-dev/remotion/tree/main/packages/ai-improvements)\r\n    \r\n2. [https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/improve-docs.ts](https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/improve-docs.ts)\r\n    \r\n3. [https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/tasks/generate-jsdoc.ts](https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/tasks/generate-jsdoc.ts)\r\n    \r\n4. [https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/tasks/find-mistakes.ts](https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/tasks/find-mistakes.ts)\r\n    \r\n5. [https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/map-over-api.ts](https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/map-over-api.ts)\r\n    \r\n6. [https://github.com/remotion-dev/remotion/blob/main/packages/docs/src/data/articles.ts](https://github.com/remotion-dev/remotion/blob/main/packages/docs/src/data/articles.ts)\r\n",
          "code": "var Component=(()=>{var d=Object.create;var r=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),v=(n,e)=>{for(var i in e)r(n,i,{get:e[i],enumerable:!0})},s=(n,e,i,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of g(e))!b.call(n,o)&&o!==i&&r(n,o,{get:()=>e[o],enumerable:!(a=l(e,o))||a.enumerable});return n};var k=(n,e,i)=>(i=n!=null?d(u(n)):{},s(e||!n||!n.__esModule?r(i,\"default\",{value:n,enumerable:!0}):i,n)),j=n=>s(r({},\"__esModule\",{value:!0}),n);var h=f((w,c)=>{c.exports=_jsx_runtime});var A={};v(A,{default:()=>p,frontmatter:()=>y});var t=k(h()),y={title:\"Generating a JSDoc comment for your function using OpenAI.\"};function m(n){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"This article is inspired by Remotion\\u2019s internal package, \",(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/tree/main/packages/ai-improvements\",children:\"ai-improvements\"}),\". This internal package is used to improve/generate JSDoc comment and log in the console for a function in the \",(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/core/src/AbsoluteFill.tsx#L26-L29\",children:\"Remotion\\u2019s source code\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:\"This use case is quite different because you would normally use the source code and let OpenAI generate API documentation but instead in Remotion, this internal package uses the OpenAI API to generate JSDoc comment for a function using API documentation and the source code.\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*ANC_Hz5Shl-L6RVCefINZA.png\",alt:\"\"})})}),`\n`,(0,t.jsx)(e.p,{children:\"We will look at a high level how this package is configured:\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"improve-docs.ts\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"generate-jsdoc\"}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.h1,{id:\"improve-docs\",children:(0,t.jsx)(e.strong,{children:\"Improve docs\"})}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:'import path from \"path\";'})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:'import { OpenAI } from \"openai\";'})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:'import { getApis } from \"./map-over-api\";'})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:'import { findMistakes } from \"./tasks/find-mistakes\";'})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:'import { generateJSDocTask } from \"./tasks/generate-jsdoc\";'})})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/improve-docs.ts\",children:\"improve-docs.ts\"}),\" has the above imports. generateJSDocTask is imported from \\u2018tasks\\u2019 folder.\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*FSLTVNat9n9PV4DoUS1tJQ.png\",alt:\"\"})})}),`\n`,(0,t.jsx)(e.p,{children:\"depending on the task, you could either generate a JSDoc or find mistakes.\"}),`\n`,(0,t.jsx)(e.h1,{id:\"generate-jsdoc\",children:(0,t.jsx)(e.strong,{children:\"Generate JSDoc\"})}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*Us8-4uQOGWH9c6cDSj-LxA.png\",alt:\"\"})})}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/tasks/generate-jsdoc.ts\",children:\"generate-jsdoc.ts\"}),\" uses the openai API and has prompts as shown in the above image.\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*7PWIWnDYKu4sL4SKmDV-9Q.png\",alt:\"\"})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Please note that this will only write the generated JSDoc to the console. Would it be possible to write these JSDoc comments programatically in the file? Not sure, but it is worth reading the AST documentation to see if there\\u2019s any API available to add JSDoc comments just above the function or class name. \",(0,t.jsx)(e.a,{href:\"https://ts-morph.com/manipulation/\",children:\"ts-morph\"}),\" is known to be used in shadcn-ui/ui to manipulate the source code at AST level.\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/0*QlUA8-jvrCQnSBIJ.png\",alt:\"\"})})}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h1,{id:\"references\",children:(0,t.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/tree/main/packages/ai-improvements\",children:\"https://github.com/remotion-dev/remotion/tree/main/packages/ai-improvements\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/improve-docs.ts\",children:\"https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/improve-docs.ts\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/tasks/generate-jsdoc.ts\",children:\"https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/tasks/generate-jsdoc.ts\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/tasks/find-mistakes.ts\",children:\"https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/tasks/find-mistakes.ts\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/map-over-api.ts\",children:\"https://github.com/remotion-dev/remotion/blob/main/packages/ai-improvements/map-over-api.ts\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/remotion-dev/remotion/blob/main/packages/docs/src/data/articles.ts\",children:\"https://github.com/remotion-dev/remotion/blob/main/packages/docs/src/data/articles.ts\"})}),`\n`]}),`\n`]})]})}function p(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(m,{...n})}):m(n)}return j(A);})();\n;return Component;"
        },
        "_id": "blog/generating-a-jsdoc-comment.mdx",
        "_raw": {
          "sourceFilePath": "blog/generating-a-jsdoc-comment.mdx",
          "sourceFileName": "generating-a-jsdoc-comment.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/generating-a-jsdoc-comment"
        },
        "type": "Doc",
        "slug": "/blog/generating-a-jsdoc-comment",
        "slugAsParams": "generating-a-jsdoc-comment"
      },
      "documentHash": "1740489186302",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/get-packages-usage-changesets.mdx": {
      "document": {
        "title": "manypkg/get-packages usage in Changesets\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse [@manypkg/get-packages](https://www.npmjs.com/package/@manypkg/get-packages) and its usage in [Changesets source code](https://github.com/changesets/changesets/blob/main/packages/should-skip-package/src/index.ts#L4).\r\n\r\n### @manypkg/get-packages\r\n\r\n@manypkg/get-packages is open-source utility written by [Thinkmill](https://www.thinkmill.com.au/). It is a   \r\nsimple utility to get the packages from a monorepo, whether they’re using Yarn, Bolt, Lerna, pnpm or Rush.\r\n\r\nThis library exports getPackages and getPackagesSync. It is intended mostly for use of developers building tools that want to support different kinds of monorepos as an easy way to write tools without having to write   \r\ntool-specific code. It supports Yarn, Bolt, Lerna, pnpm, Rush and single-package repos(where the only package is the the same as the root package). This library uses @manypkg/find-root to search up from the directory   \r\nthat’s passed to getPackages or getPackagesSync to find the project root.\r\n\r\n### @manypkg/get-packages usage in Changesets\r\n\r\nSince Changesets is a monorepo, it has a package named [should-skip-package](https://github.com/changesets/changesets/blob/main/packages/should-skip-package/src/index.ts#L4). In this package, you will find an import from @manypkg/get-packages as shown below.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*o_QKghWDrBGODrgrm9Tb4g.png)\r\n\r\nBut this only imports type — Package\r\n\r\nThere is another example found in [CLI package](https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L40).\r\n\r\n```plaintext\r\nconst packages = await getPackages(cwd);\r\n```\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*y2mudwTOKEX0XcVT0S4DMg.png)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://www.npmjs.com/package/@manypkg/get-packages](https://www.npmjs.com/package/@manypkg/get-packages)\r\n    \r\n2. [https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L5C10-L5C28](https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L5C10-L5C28)\r\n    \r\n3. [https://github.com/changesets/changesets/blob/main/packages/should-skip-package/src/index.ts#L4](https://github.com/changesets/changesets/blob/main/packages/should-skip-package/src/index.ts#L4)\r\n    \r\n4. [https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L156](https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L156)\r\n    \r\n5. [https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L168](https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L168)",
          "code": "var Component=(()=>{var l=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var n in e)c(a,n,{get:e[n],enumerable:!0})},i=(a,e,n,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of m(e))!k.call(a,s)&&s!==n&&c(a,s,{get:()=>e[s],enumerable:!(r=d(e,s))||r.enumerable});return a};var y=(a,e,n)=>(n=a!=null?l(u(a)):{},i(e||!a||!a.__esModule?c(n,\"default\",{value:a,enumerable:!0}):n,a)),w=a=>i(c({},\"__esModule\",{value:!0}),a);var o=b((C,h)=>{h.exports=_jsx_runtime});var L={};f(L,{default:()=>g,frontmatter:()=>x});var t=y(o()),x={title:\"manypkg/get-packages usage in Changesets\"};function p(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"In this article, we analyse \",(0,t.jsx)(e.a,{href:\"https://www.npmjs.com/package/@manypkg/get-packages\",children:\"@manypkg/get-packages\"}),\" and its usage in \",(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/should-skip-package/src/index.ts#L4\",children:\"Changesets source code\"}),\".\"]}),`\n`,(0,t.jsx)(e.h3,{id:\"manypkgget-packages\",children:\"@manypkg/get-packages\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"@manypkg/get-packages is open-source utility written by \",(0,t.jsx)(e.a,{href:\"https://www.thinkmill.com.au/\",children:\"Thinkmill\"}),\". It is a\\xA0\",(0,t.jsx)(e.br,{}),`\n`,\"simple utility to get the packages from a monorepo, whether they\\u2019re using Yarn, Bolt, Lerna, pnpm or Rush.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"This library exports getPackages and getPackagesSync. It is intended mostly for use of developers building tools that want to support different kinds of monorepos as an easy way to write tools without having to write\\xA0\",(0,t.jsx)(e.br,{}),`\n`,\"tool-specific code. It supports Yarn, Bolt, Lerna, pnpm, Rush and single-package repos(where the only package is the the same as the root package). This library uses @manypkg/find-root to search up from the directory\\xA0\",(0,t.jsx)(e.br,{}),`\n`,\"that\\u2019s passed to getPackages or getPackagesSync to find the project root.\"]}),`\n`,(0,t.jsx)(e.h3,{id:\"manypkgget-packages-usage-in-changesets\",children:\"@manypkg/get-packages usage in Changesets\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Since Changesets is a monorepo, it has a package named \",(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/should-skip-package/src/index.ts#L4\",children:\"should-skip-package\"}),\". In this package, you will find an import from @manypkg/get-packages as shown below.\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*o_QKghWDrBGODrgrm9Tb4g.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"But this only imports type\\u200A\\u2014\\u200APackage\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"There is another example found in \",(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L40\",children:\"CLI package\"}),\".\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"const packages = await getPackages(cwd);\"})})})})}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*y2mudwTOKEX0XcVT0S4DMg.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://www.npmjs.com/package/@manypkg/get-packages\",children:\"https://www.npmjs.com/package/@manypkg/get-packages\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L5C10-L5C28\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L5C10-L5C28\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/should-skip-package/src/index.ts#L4\",children:\"https://github.com/changesets/changesets/blob/main/packages/should-skip-package/src/index.ts#L4\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L156\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L156\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L168\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L168\"})}),`\n`]}),`\n`]})]})}function g(a={}){let{wrapper:e}=a.components||{};return e?(0,t.jsx)(e,{...a,children:(0,t.jsx)(p,{...a})}):p(a)}return w(L);})();\n;return Component;"
        },
        "_id": "blog/get-packages-usage-changesets.mdx",
        "_raw": {
          "sourceFilePath": "blog/get-packages-usage-changesets.mdx",
          "sourceFileName": "get-packages-usage-changesets.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/get-packages-usage-changesets"
        },
        "type": "Doc",
        "slug": "/blog/get-packages-usage-changesets",
        "slugAsParams": "get-packages-usage-changesets"
      },
      "documentHash": "1740489186304",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/git-blame-ignore-revs.mdx": {
      "document": {
        "title": ".git-blame-ignore-revs to ignore bulk formatting changes.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\n`.git-blame-ignore-revs` is a Git feature introduced in version 2.23 that allows you to ignore specific commits in `git blame` results. This is particularly useful for bulk commits that change a large number of lines without altering the actual functionality of the code, such as formatting changes, renaming, or applying coding standards across a codebase. By ignoring these non-functional changes, `git blame` can focus on meaningful edits that explain the context and reasoning behind the code.\r\n\r\n# **Why** `.git-blame-ignore-revs` Matters\r\n\r\nWhen you use `git blame` on a file, it shows you which commit last changed each line of the file, along with the author and timestamp. This is useful for tracking down why a particular line was changed. However, if a large commit that makes purely formatting changes, like applying prettier, is part of the history, `git blame` may point to that commit for many lines. This make it difficult to find the actual functional change history.\r\n\r\nFor example, if your team uses a tool like Prettier or ESLint to reformat the entire codebase, the resulting commit might touch thousands of lines of code. Without `.git-blame-ignore-revs`, `git blame` would show this commit as responsible for every affected line, which could obscure the more meaningful history behind each line.\r\n\r\nBy using `.git-blame-ignore-revs`, you can tell `git blame` to skip over these commits and focus on the changes that matter.\r\n\r\n# **How to Use** `.git-blame-ignore-revs`\r\n\r\nTo understand how to use this feature, let’s walk through an example from the React repository.\r\n\r\n## **Step 1: Identify the Bulk Formatting Commits**\r\n\r\nThe React source code includes bulk commits where tools like Prettier were run across the entire project. Here are two such commits:\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*n9p1gqHavAqRdztyy-xH9g.png)\r\n\r\n1. **Commit:** [**c998bb1**](https://github.com/facebook/react/commit/c998bb1ed4b3285398c9c7797135d3f060243c6a)  \r\n    Message: *\\[compiler\\] Run prettier, fix snap*  \r\n    This commit applies Prettier formatting across the codebase, altering many lines without changing the functionality.\r\n    \r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*_G35OKwbF7NN1hxtPKq9ug.png)\r\n\r\n**2\\. Commit:** [**fd2b3e1**](https://github.com/facebook/react/commit/fd2b3e13d330a4559f5aa21462e1cb2cbbcf144b)  \r\nMessage: [*Compiler: Unfork prettier config*](https://github.com/facebook/react/commit/fd2b3e13d330a4559f5aa21462e1cb2cbbcf144b)  \r\nThis commit contains further updates to the Prettier configuration, affecting all `.ts` and `.tsx` files in the repository.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*7Mkt1Lad2YSzi3lNS2auCA.png)\r\n\r\nThese commits only deal with formatting and don’t provide meaningful context when investigating why a line of code was written the way it was.\r\n\r\n## **Step 2: Create the** `.git-blame-ignore-revs` File\r\n\r\nTo make `git blame` ignore these bulk formatting commits, we can create a `.git-blame-ignore-revs` file in the root of the repository.\r\n\r\n1. Create the `.git-blame-ignore-revs` file:\r\n    \r\n\r\n```plaintext\r\ntouch .git-blame-ignore-revs\r\n```\r\n\r\n2\\. Add the relevant commit hashes to the file, explaining why each commit is being ignored. In this case, we’ll add the two commits we identified earlier:\r\n\r\n```plaintext\r\n# Prettier formatting changes \r\nc998bb1ed4b3285398c9c7797135d3f060243c6a \r\nfd2b3e13d330a4559f5aa21462e1cb2cbbcf144b\r\n```\r\n\r\n3\\. Save the `.git-blame-ignore-revs` file in the repository. This file can be versioned alongside your code, allowing the entire team to use the same list of ignored commits.\r\n\r\n## **Step 3: Configure Git to Use** `.git-blame-ignore-revs`\r\n\r\nTo avoid typing the `--ignore-revs-file` option every time you use `git blame`, you can configure Git to automatically use the `.git-blame-ignore-revs` file.\r\n\r\n1. Set up the configuration at the repository level:\r\n    \r\n\r\n```plaintext\r\ngit config blame.ignoreRevsFile .git-blame-ignore-revs\r\n```\r\n\r\nThis ensures that every time someone runs `git blame` in this repository, Git will automatically ignore the commits listed in `.git-blame-ignore-revs`.\r\n\r\n## **Step 4: Run** `git blame` with the Ignored Commits\r\n\r\nLet’s see how this works in practice. Without ignoring the bulk formatting commits, `git blame` might show:\r\n\r\n```plaintext\r\n$ git blame src/someFile.tsx\r\nc998bb1e (Joe Bloggs 2023-03-15 10:00:00 +0200 1) import React from 'react';\r\nfd2b3e13 (Alan 2023-04-01 14:15:30 +0200 2) function App() {\r\nc998bb1e (Joe Bloggs 2023-03-15 10:00:00 +0200 3)     return <div>Hello, world!</div>;\r\nfd2b3e13 (Ben 2023-04-01 14:15:30 +0200 4) }\r\n```\r\n\r\nThis output indicates that the last change to lines 1 and 3 was due to the Prettier formatting commit (`c998bb1e`), and lines 2 and 4 were modified in another bulk commit (`fd2b3e13`). Since these are formatting changes, this is not helpful for understanding who introduced the actual logic behind these lines.\r\n\r\nAfter configuring `.git-blame-ignore-revs`, running `git blame` will skip the bulk commits and show the real history:\r\n\r\n```plaintext\r\n$ git blame src/someFile.tsx\r\na23d9b34 (May 2022-12-01 09:30:00 +0200 1) import React from 'react';\r\nb12e45a6 (JJ 2022-12-05 11:45:15 +0200 2) function App() {\r\na23d9b34 (Joe 2022-12-01 09:30:00 +0200 3)     return <div>Hello, world!</div>;\r\nb12e45a6 (Ram 2022-12-05 11:45:15 +0200 4) }\r\n```\r\n\r\nNow, `git blame` attributes the lines to the correct commits, ignoring the unimportant formatting changes. This gives us useful information, showing who made the actual functional changes.\r\n\r\n# **Conclusion**\r\n\r\nThe `.git-blame-ignore-revs` feature in Git 2.23 is a game-changer for projects with bulk formatting or style changes. By setting up a `.git-blame-ignore-revs` file and configuring your repository, you can apply coding standards, run tools like Prettier, or refactor code without worrying about polluting the blame history.\r\n\r\nWith this approach, your team can confidently improve code quality and formatting without sacrificing the ability to track meaningful changes, ensuring that `git blame` remains a valuable tool for understanding the history and reasoning behind each line of code.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/facebook/react/blob/main/.git-blame-ignore-revs](https://github.com/facebook/react/blob/main/.git-blame-ignore-revs)\r\n    \r\n2. [https://gist.github.com/kateinoigakukun/b0bc920e587851bfffa98b9e279175f2](https://gist.github.com/kateinoigakukun/b0bc920e587851bfffa98b9e279175f2)\r\n    \r\n3. [https://github.com/facebook/react/commit/c998bb1ed4b3285398c9c7797135d3f060243c6a](https://github.com/facebook/react/commit/c998bb1ed4b3285398c9c7797135d3f060243c6a)\r\n    \r\n4. [https://moxio.com/blog/ignoring-bulk-change-commits-with-git-blame/](https://moxio.com/blog/ignoring-bulk-change-commits-with-git-blame/)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----f20ac23e6155--------------------------------)\r\n",
          "code": "var Component=(()=>{var m=Object.create;var a=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports),y=(i,e)=>{for(var n in e)a(i,n,{get:e[n],enumerable:!0})},c=(i,e,n,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of p(e))!f.call(i,r)&&r!==n&&a(i,r,{get:()=>e[r],enumerable:!(o=g(e,r))||o.enumerable});return i};var w=(i,e,n)=>(n=i!=null?m(u(i)):{},c(e||!i||!i.__esModule?a(n,\"default\",{value:i,enumerable:!0}):n,i)),v=i=>c(a({},\"__esModule\",{value:!0}),i);var l=b((T,h)=>{h.exports=_jsx_runtime});var x={};y(x,{default:()=>d,frontmatter:()=>k});var t=w(l()),k={title:\".git-blame-ignore-revs to ignore bulk formatting changes.\"};function s(i){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...i.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\" is a Git feature introduced in version 2.23 that allows you to ignore specific commits in \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" results. This is particularly useful for bulk commits that change a large number of lines without altering the actual functionality of the code, such as formatting changes, renaming, or applying coding standards across a codebase. By ignoring these non-functional changes, \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" can focus on meaningful edits that explain the context and reasoning behind the code.\"]}),`\n`,(0,t.jsxs)(e.h1,{id:\"why-git-blame-ignore-revs-matters\",children:[(0,t.jsx)(e.strong,{children:\"Why\"}),\" \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\" Matters\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"When you use \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" on a file, it shows you which commit last changed each line of the file, along with the author and timestamp. This is useful for tracking down why a particular line was changed. However, if a large commit that makes purely formatting changes, like applying prettier, is part of the history, \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" may point to that commit for many lines. This make it difficult to find the actual functional change history.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"For example, if your team uses a tool like Prettier or ESLint to reformat the entire codebase, the resulting commit might touch thousands of lines of code. Without \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\", \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" would show this commit as responsible for every affected line, which could obscure the more meaningful history behind each line.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"By using \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\", you can tell \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" to skip over these commits and focus on the changes that matter.\"]}),`\n`,(0,t.jsxs)(e.h1,{id:\"how-to-use-git-blame-ignore-revs\",children:[(0,t.jsx)(e.strong,{children:\"How to Use\"}),\" \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"})]}),`\n`,(0,t.jsx)(e.p,{children:\"To understand how to use this feature, let\\u2019s walk through an example from the React repository.\"}),`\n`,(0,t.jsx)(e.h2,{id:\"step-1-identify-the-bulk-formatting-commits\",children:(0,t.jsx)(e.strong,{children:\"Step 1: Identify the Bulk Formatting Commits\"})}),`\n`,(0,t.jsx)(e.p,{children:\"The React source code includes bulk commits where tools like Prettier were run across the entire project. Here are two such commits:\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*n9p1gqHavAqRdztyy-xH9g.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:\"Commit:\"}),\" \",(0,t.jsx)(e.a,{href:\"https://github.com/facebook/react/commit/c998bb1ed4b3285398c9c7797135d3f060243c6a\",children:(0,t.jsx)(e.strong,{children:\"c998bb1\"})}),(0,t.jsx)(e.br,{}),`\n`,\"Message: \",(0,t.jsx)(e.em,{children:\"[compiler] Run prettier, fix snap\"}),(0,t.jsx)(e.br,{}),`\n`,\"This commit applies Prettier formatting across the codebase, altering many lines without changing the functionality.\"]}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*_G35OKwbF7NN1hxtPKq9ug.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"2. Commit:\"}),\" \",(0,t.jsx)(e.a,{href:\"https://github.com/facebook/react/commit/fd2b3e13d330a4559f5aa21462e1cb2cbbcf144b\",children:(0,t.jsx)(e.strong,{children:\"fd2b3e1\"})}),(0,t.jsx)(e.br,{}),`\n`,\"Message: \",(0,t.jsx)(e.a,{href:\"https://github.com/facebook/react/commit/fd2b3e13d330a4559f5aa21462e1cb2cbbcf144b\",children:(0,t.jsx)(e.em,{children:\"Compiler: Unfork prettier config\"})}),(0,t.jsx)(e.br,{}),`\n`,\"This commit contains further updates to the Prettier configuration, affecting all \",(0,t.jsx)(e.code,{children:\".ts\"}),\" and \",(0,t.jsx)(e.code,{children:\".tsx\"}),\" files in the repository.\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*7Mkt1Lad2YSzi3lNS2auCA.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"These commits only deal with formatting and don\\u2019t provide meaningful context when investigating why a line of code was written the way it was.\"}),`\n`,(0,t.jsxs)(e.h2,{id:\"step-2-create-the-git-blame-ignore-revs-file\",children:[(0,t.jsx)(e.strong,{children:\"Step 2: Create the\"}),\" \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\" File\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"To make \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" ignore these bulk formatting commits, we can create a \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\" file in the root of the repository.\"]}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[\"Create the \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\" file:\"]}),`\n`]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"touch .git-blame-ignore-revs\"})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"2. Add the relevant commit hashes to the file, explaining why each commit is being ignored. In this case, we\\u2019ll add the two commits we identified earlier:\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"# Prettier formatting changes \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"c998bb1ed4b3285398c9c7797135d3f060243c6a \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"fd2b3e13d330a4559f5aa21462e1cb2cbbcf144b\"})})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"3. Save the \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\" file in the repository. This file can be versioned alongside your code, allowing the entire team to use the same list of ignored commits.\"]}),`\n`,(0,t.jsxs)(e.h2,{id:\"step-3-configure-git-to-use-git-blame-ignore-revs\",children:[(0,t.jsx)(e.strong,{children:\"Step 3: Configure Git to Use\"}),\" \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"To avoid typing the \",(0,t.jsx)(e.code,{children:\"--ignore-revs-file\"}),\" option every time you use \",(0,t.jsx)(e.code,{children:\"git blame\"}),\", you can configure Git to automatically use the \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\" file.\"]}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsx)(e.li,{children:\"Set up the configuration at the repository level:\"}),`\n`]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"git config blame.ignoreRevsFile .git-blame-ignore-revs\"})})})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"This ensures that every time someone runs \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" in this repository, Git will automatically ignore the commits listed in \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\".\"]}),`\n`,(0,t.jsxs)(e.h2,{id:\"step-4-run-git-blame-with-the-ignored-commits\",children:[(0,t.jsx)(e.strong,{children:\"Step 4: Run\"}),\" \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" with the Ignored Commits\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Let\\u2019s see how this works in practice. Without ignoring the bulk formatting commits, \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" might show:\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"$ git blame src/someFile.tsx\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"c998bb1e (Joe Bloggs 2023-03-15 10:00:00 +0200 1) import React from 'react';\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"fd2b3e13 (Alan 2023-04-01 14:15:30 +0200 2) function App() {\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"c998bb1e (Joe Bloggs 2023-03-15 10:00:00 +0200 3)     return <div>Hello, world!</div>;\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"fd2b3e13 (Ben 2023-04-01 14:15:30 +0200 4) }\"})})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"This output indicates that the last change to lines 1 and 3 was due to the Prettier formatting commit (\",(0,t.jsx)(e.code,{children:\"c998bb1e\"}),\"), and lines 2 and 4 were modified in another bulk commit (\",(0,t.jsx)(e.code,{children:\"fd2b3e13\"}),\"). Since these are formatting changes, this is not helpful for understanding who introduced the actual logic behind these lines.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"After configuring \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\", running \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" will skip the bulk commits and show the real history:\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"$ git blame src/someFile.tsx\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"a23d9b34 (May 2022-12-01 09:30:00 +0200 1) import React from 'react';\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"b12e45a6 (JJ 2022-12-05 11:45:15 +0200 2) function App() {\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"a23d9b34 (Joe 2022-12-01 09:30:00 +0200 3)     return <div>Hello, world!</div>;\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"b12e45a6 (Ram 2022-12-05 11:45:15 +0200 4) }\"})})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Now, \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" attributes the lines to the correct commits, ignoring the unimportant formatting changes. This gives us useful information, showing who made the actual functional changes.\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"conclusion\",children:(0,t.jsx)(e.strong,{children:\"Conclusion\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"The \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\" feature in Git 2.23 is a game-changer for projects with bulk formatting or style changes. By setting up a \",(0,t.jsx)(e.code,{children:\".git-blame-ignore-revs\"}),\" file and configuring your repository, you can apply coding standards, run tools like Prettier, or refactor code without worrying about polluting the blame history.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"With this approach, your team can confidently improve code quality and formatting without sacrificing the ability to track meaningful changes, ensuring that \",(0,t.jsx)(e.code,{children:\"git blame\"}),\" remains a valuable tool for understanding the history and reasoning behind each line of code.\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h1,{id:\"references\",children:(0,t.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/.git-blame-ignore-revs\",children:\"https://github.com/facebook/react/blob/main/.git-blame-ignore-revs\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://gist.github.com/kateinoigakukun/b0bc920e587851bfffa98b9e279175f2\",children:\"https://gist.github.com/kateinoigakukun/b0bc920e587851bfffa98b9e279175f2\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/facebook/react/commit/c998bb1ed4b3285398c9c7797135d3f060243c6a\",children:\"https://github.com/facebook/react/commit/c998bb1ed4b3285398c9c7797135d3f060243c6a\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://moxio.com/blog/ignoring-bulk-change-commits-with-git-blame/\",children:\"https://moxio.com/blog/ignoring-bulk-change-commits-with-git-blame/\"})}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----f20ac23e6155--------------------------------\",children:[(0,t.jsx)(e.br,{}),`\n`]})})]})}function d(i={}){let{wrapper:e}=i.components||{};return e?(0,t.jsx)(e,{...i,children:(0,t.jsx)(s,{...i})}):s(i)}return v(x);})();\n;return Component;"
        },
        "_id": "blog/git-blame-ignore-revs.mdx",
        "_raw": {
          "sourceFilePath": "blog/git-blame-ignore-revs.mdx",
          "sourceFileName": "git-blame-ignore-revs.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/git-blame-ignore-revs"
        },
        "type": "Doc",
        "slug": "/blog/git-blame-ignore-revs",
        "slugAsParams": "git-blame-ignore-revs"
      },
      "documentHash": "1740489186305",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/gitkeep-in-shadcn.mdx": {
      "document": {
        "title": ".gitkeep file in Shadcn/ui source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI came across a file named .gitkeep whille studying Shadcn/ui source code and I wanted to share what it is about in this article.\r\n\r\nWe look at the following:\r\n\r\n1. What is .gitkeep file?\r\n    \r\n2. Where do you find .gitkeep in shadcn/ui codebase?\r\n    \r\n\r\n### What is .gitkeep file?\r\n\r\nGit only tracks files not directories, so when you create empty directories and push, these empty directories are not pushed to your repository unless you have some file in it.\r\n\r\nTo solve this problem, you could simple add a dummy file in your directories and push it and have the latest directory structure reflected on your Github repo or you could simple just add a .gitkeep file and leave this file blank.\r\n\r\nThere is no special meaning to this .gitkeep file than to just sync your local directory structure with your Github repository.\r\n\r\n#### Further reading:\r\n\r\n1. [https://www.freecodecamp.org/news/what-is-gitkeep/](https://www.freecodecamp.org/news/what-is-gitkeep/)\r\n    \r\n2. [https://adamj.eu/tech/2023/09/18/git-dont-create-gitkeep/](https://adamj.eu/tech/2023/09/18/git-dont-create-gitkeep/)\r\n    \r\n3. [https://gist.github.com/jlollis/54d3b3a7ed12776ac9f0d4bc13e63ed9](https://gist.github.com/jlollis/54d3b3a7ed12776ac9f0d4bc13e63ed9)\r\n    \r\n\r\nNow that we understand what a .gitkeep is, let’s find out where you could find this file in Shadcn/ui codebase.\r\n\r\n### Where do you find .gitkeep in shadcn/ui codebase?\r\n\r\nThere are few directories in which I found this .gitkeep file.\r\n\r\n#### pages/api\r\n\r\nIn this [pages/api](https://github.com/shadcn-ui/ui/tree/main/apps/www/pages/api), it has this below shown structure\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*4PdcyS2XwkLVCSKUqnUqlw.png)\r\n\r\n#### pages \r\n\r\nIn the [pages folder](https://github.com/shadcn-ui/ui/blob/main/apps/www/pages), you will find the below structure\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*cyKeIp_lOZCKHCnUmVqDNQ.png)\r\n\r\n#### **registry**\r\n\r\nAlthough this directory is automatically generated using scripts in the shadcn/ui codebase, it still has this .gitkeep\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*3DHK2P3t-wbNxsV3CRINhw.png)\r\n\r\nLet’s go back to the original definition of .gitkeep. When there’s an empty directory, to sync the folder structure with your Github repo, you create this file .gitkeep but after the initial push with empty dirs would you still need to have this .gitkeep folder? I personally don’t think its needed to have .gitkeep file even though your directory is no longer empty.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/shadcn-ui/ui/blob/main/apps/www/pages/api/.gitkeep](https://github.com/shadcn-ui/ui/blob/main/apps/www/pages/api/.gitkeep)\r\n    \r\n2. [https://github.com/shadcn-ui/ui/blob/main/apps/www/pages/.gitkeep](https://github.com/shadcn-ui/ui/blob/main/apps/www/pages/.gitkeep) \r\n    \r\n3. [https://github.com/shadcn-ui/ui/blob/main/apps/www/\\_\\_registry\\_\\_/.gitkeep](https://github.com/shadcn-ui/ui/blob/main/apps/www/__registry__/.gitkeep)\r\n    \r\n4. [https://www.freecodecamp.org/news/what-is-gitkeep/](https://www.freecodecamp.org/news/what-is-gitkeep/)\r\n    \r\n5. [https://adamj.eu/tech/2023/09/18/git-dont-create-gitkeep/](https://adamj.eu/tech/2023/09/18/git-dont-create-gitkeep/)\r\n    \r\n6. [https://gist.github.com/jlollis/54d3b3a7ed12776ac9f0d4bc13e63ed9](https://gist.github.com/jlollis/54d3b3a7ed12776ac9f0d4bc13e63ed9)",
          "code": "var Component=(()=>{var l=Object.create;var r=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty;var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),b=(t,e)=>{for(var n in e)r(t,n,{get:e[n],enumerable:!0})},c=(t,e,n,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let h of g(e))!w.call(t,h)&&h!==n&&r(t,h,{get:()=>e[h],enumerable:!(a=u(e,h))||a.enumerable});return t};var y=(t,e,n)=>(n=t!=null?l(m(t)):{},c(e||!t||!t.__esModule?r(n,\"default\",{value:t,enumerable:!0}):n,t)),k=t=>c(r({},\"__esModule\",{value:!0}),t);var s=f((I,o)=>{o.exports=_jsx_runtime});var _={};b(_,{default:()=>p,frontmatter:()=>j});var i=y(s()),j={title:\".gitkeep file in Shadcn/ui source\\xA0code\"};function d(t){let e={a:\"a\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",strong:\"strong\",...t.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:\"I came across a file named\\xA0.gitkeep whille studying Shadcn/ui source code and I wanted to share what it is about in this article.\"}),`\n`,(0,i.jsx)(e.p,{children:\"We look at the following:\"}),`\n`,(0,i.jsxs)(e.ol,{children:[`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsx)(e.p,{children:\"What is\\xA0.gitkeep file?\"}),`\n`]}),`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsx)(e.p,{children:\"Where do you find\\xA0.gitkeep in shadcn/ui codebase?\"}),`\n`]}),`\n`]}),`\n`,(0,i.jsx)(e.h3,{id:\"what-isgitkeepfile\",children:\"What is\\xA0.gitkeep\\xA0file?\"}),`\n`,(0,i.jsx)(e.p,{children:\"Git only tracks files not directories, so when you create empty directories and push, these empty directories are not pushed to your repository unless you have some file in it.\"}),`\n`,(0,i.jsx)(e.p,{children:\"To solve this problem, you could simple add a dummy file in your directories and push it and have the latest directory structure reflected on your Github repo or you could simple just add a\\xA0.gitkeep file and leave this file blank.\"}),`\n`,(0,i.jsx)(e.p,{children:\"There is no special meaning to this\\xA0.gitkeep file than to just sync your local directory structure with your Github repository.\"}),`\n`,(0,i.jsx)(e.h4,{id:\"further-reading\",children:\"Further reading:\"}),`\n`,(0,i.jsxs)(e.ol,{children:[`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:\"https://www.freecodecamp.org/news/what-is-gitkeep/\",children:\"https://www.freecodecamp.org/news/what-is-gitkeep/\"})}),`\n`]}),`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:\"https://adamj.eu/tech/2023/09/18/git-dont-create-gitkeep/\",children:\"https://adamj.eu/tech/2023/09/18/git-dont-create-gitkeep/\"})}),`\n`]}),`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:\"https://gist.github.com/jlollis/54d3b3a7ed12776ac9f0d4bc13e63ed9\",children:\"https://gist.github.com/jlollis/54d3b3a7ed12776ac9f0d4bc13e63ed9\"})}),`\n`]}),`\n`]}),`\n`,(0,i.jsx)(e.p,{children:\"Now that we understand what a\\xA0.gitkeep is, let\\u2019s find out where you could find this file in Shadcn/ui codebase.\"}),`\n`,(0,i.jsx)(e.h3,{id:\"where-do-you-findgitkeep-in-shadcnui-codebase\",children:\"Where do you find\\xA0.gitkeep in shadcn/ui codebase?\"}),`\n`,(0,i.jsx)(e.p,{children:\"There are few directories in which I found this\\xA0.gitkeep file.\"}),`\n`,(0,i.jsx)(e.h4,{id:\"pagesapi\",children:\"pages/api\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"In this \",(0,i.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/pages/api\",children:\"pages/api\"}),\", it has this below shown structure\"]}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*4PdcyS2XwkLVCSKUqnUqlw.png\",alt:\"\"})}),`\n`,(0,i.jsx)(e.h4,{id:\"pages\",children:\"pages\\xA0\"}),`\n`,(0,i.jsxs)(e.p,{children:[\"In the \",(0,i.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/pages\",children:\"pages folder\"}),\", you will find the below structure\"]}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*cyKeIp_lOZCKHCnUmVqDNQ.png\",alt:\"\"})}),`\n`,(0,i.jsx)(e.h4,{id:\"registry\",children:(0,i.jsx)(e.strong,{children:\"registry\"})}),`\n`,(0,i.jsx)(e.p,{children:\"Although this directory is automatically generated using scripts in the shadcn/ui codebase, it still has this\\xA0.gitkeep\"}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*3DHK2P3t-wbNxsV3CRINhw.png\",alt:\"\"})}),`\n`,(0,i.jsx)(e.p,{children:\"Let\\u2019s go back to the original definition of\\xA0.gitkeep. When there\\u2019s an empty directory, to sync the folder structure with your Github repo, you create this file\\xA0.gitkeep but after the initial push with empty dirs would you still need to have this\\xA0.gitkeep folder? I personally don\\u2019t think its needed to have\\xA0.gitkeep file even though your directory is no longer empty.\"}),`\n`,(0,i.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,i.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.em,{children:(0,i.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,i.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,i.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,i.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,i.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,i.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,i.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,i.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,i.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,i.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,i.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,i.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,i.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,i.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,i.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,i.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,i.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,i.jsxs)(e.ol,{children:[`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/pages/api/.gitkeep\",children:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/pages/api/.gitkeep\"})}),`\n`]}),`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/pages/.gitkeep\",children:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/pages/.gitkeep\"}),\"\\xA0\"]}),`\n`]}),`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/__registry__/.gitkeep\",children:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/__registry__/.gitkeep\"})}),`\n`]}),`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:\"https://www.freecodecamp.org/news/what-is-gitkeep/\",children:\"https://www.freecodecamp.org/news/what-is-gitkeep/\"})}),`\n`]}),`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:\"https://adamj.eu/tech/2023/09/18/git-dont-create-gitkeep/\",children:\"https://adamj.eu/tech/2023/09/18/git-dont-create-gitkeep/\"})}),`\n`]}),`\n`,(0,i.jsxs)(e.li,{children:[`\n`,(0,i.jsx)(e.p,{children:(0,i.jsx)(e.a,{href:\"https://gist.github.com/jlollis/54d3b3a7ed12776ac9f0d4bc13e63ed9\",children:\"https://gist.github.com/jlollis/54d3b3a7ed12776ac9f0d4bc13e63ed9\"})}),`\n`]}),`\n`]})]})}function p(t={}){let{wrapper:e}=t.components||{};return e?(0,i.jsx)(e,{...t,children:(0,i.jsx)(d,{...t})}):d(t)}return k(_);})();\n;return Component;"
        },
        "_id": "blog/gitkeep-in-shadcn.mdx",
        "_raw": {
          "sourceFilePath": "blog/gitkeep-in-shadcn.mdx",
          "sourceFileName": "gitkeep-in-shadcn.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/gitkeep-in-shadcn"
        },
        "type": "Doc",
        "slug": "/blog/gitkeep-in-shadcn",
        "slugAsParams": "gitkeep-in-shadcn"
      },
      "documentHash": "1740489186307",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/gitmoji-uses-unbuild.mdx": {
      "document": {
        "title": "Gitmoji uses unbuild to bundle its package\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we review how Gitmoji uses unbuild to bundle its package. The following concepts are discussed:\r\n\r\n* What is Gitmoji?\r\n    \r\n* How I came across Gitmoji?\r\n    \r\n* What is unbuild?\r\n    \r\n* unbuild configuration in Gitmoji package\r\n    \r\n\r\n### What is Gitmoji?\r\n\r\nGitmoji is an emoji guide for GitHub commit messages. Aims to be a standarization cheatsheet - guide for using emojis on GitHub’s commit messages.\r\n\r\nUsing emojis on commit messages provides an easy way of identifying the purpose or intention of a commit with only looking at the emojis used.\r\n\r\nRead more about [Gitmoji](https://gitmoji.dev/about).\r\n\r\n### How I came across Gitmoji?\r\n\r\nI read open-source code a lot and share the insights via this articles. I saw emojis in [Lobechat commit history](https://github.com/lobehub/lobe-chat).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*mdbm3Qp2yNOAMmm5u_YQMw.png)\r\n\r\nIt got me thinking why is there an emoji in a commit message? for example, the following are commit messages copied from [Lobechat](https://github.com/lobehub/lobe-chat).\r\n\r\n```js\r\n🐛 fix: remove orphan chunks if there is no related file\r\n✨ feat: support TTS & STT\r\n📝 docs: update docs\r\n```\r\n\r\nAnd then I recalled a [mention of Gitmoji in the Lobechat contribution](https://github.com/lobehub/lobe-chat/blob/0533150f586e0c0c00b61dcb2f1cc4df9860993f/contributing/Basic/Intro.md?plain=1#L89)\r\n\r\n### What is unbuild?\r\n\r\n[unbuild](https://github.com/unjs/unbuild) is a unified JavaScript build system. Features include\r\n\r\n* [Optimized bundler](https://github.com/unjs/unbuild?tab=readme-ov-file#-optimized-bundler)\r\n    \r\n* [Automated config](https://github.com/unjs/unbuild?tab=readme-ov-file#-automated-config)\r\n    \r\n* [Bundleless build](https://github.com/unjs/unbuild?tab=readme-ov-file#-automated-config)\r\n    \r\n* [Passive watcher](https://github.com/unjs/unbuild?tab=readme-ov-file#-passive-watcher)\r\n    \r\n* [Untype Generator](https://github.com/unjs/unbuild?tab=readme-ov-file#-untype-generator)\r\n    \r\n* [Secure builds](https://github.com/unjs/unbuild?tab=readme-ov-file#%EF%B8%8F-secure-builds)\r\n    \r\n\r\nRead more about [unbuild](https://github.com/unjs/unbuild).\r\n\r\n#### Usage\r\n\r\nUnbuild usage is quite straightforward. You create your files inside src/index.ts. The below code is picked from [docs](https://github.com/unjs/unbuild?tab=readme-ov-file#usage).\r\n\r\n```js\r\n// inside src/index.ts\r\nexport const log = (…args) => {\r\n console.log(…args);\r\n};\r\n```\r\n\r\nNext step is to update package.json as shown below:\r\n\r\n```js\r\n{\r\n \"type\": \"module\",\r\n \"scripts\": {\r\n \"build\": \"unbuild\",\r\n \"prepack\": \"unbuild\"\r\n },\r\n \"exports\": {\r\n \".\": {\r\n \"import\": \"./dist/index.mjs\",\r\n \"require\": \"./dist/index.cjs\"\r\n }\r\n },\r\n \"main\": \"./dist/index.cjs\",\r\n \"types\": \"./dist/index.d.ts\",\r\n \"files\": [\"dist\"]\r\n}\r\n```\r\n\r\nYou can configure unbuild to meet your needs. Read more about [configuration](https://github.com/unjs/unbuild?tab=readme-ov-file#configuration).\r\n\r\n### unbuild configuration in Gitmoji package\r\n\r\nBased on the usage described above, Gitmoji has the same unbuild setup, the below is the [Gitmoji package.json](https://github.com/carloscuesta/gitmoji/blob/master/packages/gitmojis/package.json)\r\n\r\n```js\r\n{\r\n  \"name\": \"gitmojis\",\r\n  \"type\": \"module\",\r\n  \"version\": \"3.14.0\",\r\n  \"description\": \"An emoji guide for your commit messages.\",\r\n  \"main\": \"./dist/index.cjs\",\r\n  \"types\": \"./dist/index.d.ts\",\r\n  \"exports\": {\r\n    \".\": {\r\n      \"import\": \"./dist/index.mjs\",\r\n      \"require\": \"./dist/index.cjs\"\r\n    }\r\n  },\r\n  \"files\": [\r\n    \"dist\"\r\n  ],\r\n  \"scripts\": {\r\n    \"dev\": \"nodemon --exec 'pnpm run build' --watch ./src\",\r\n    \"build\": \"unbuild\",\r\n    \"lint:json\": \"ajv --spec=draft2020 validate -s ./src/schema.json -d ./src/gitmojis.json\",\r\n    \"lint\": \"pnpm run lint:json && prettier --check ./src/**/*.{js,json,ts}\",\r\n    \"publishPackage\": \"npm publish\"\r\n  },\r\n...\r\n```\r\n\r\nThere is no build.config.ts found in [Gitmoji package](https://github.com/carloscuesta/gitmoji/tree/master/packages/gitmojis).\r\n\r\nTo build this package, you just have to run `npm run build`.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/carloscuesta/gitmoji/blob/master/packages/gitmojis/package.json#L19](https://github.com/carloscuesta/gitmoji/blob/master/packages/gitmojis/package.json#L19)\r\n    \r\n2. [https://www.npmjs.com/package/unbuild](https://www.npmjs.com/package/unbuild)\r\n    \r\n3. [https://gitmoji.dev/about](https://gitmoji.dev/about)\r\n    \r\n4. [https://github.com/lobehub/lobe-chat](https://github.com/lobehub/lobe-chat)\r\n    \r\n5. [https://github.com/lobehub/lobe-chat/blob/0533150f586e0c0c00b61dcb2f1cc4df9860993f/contributing/Basic/Intro.md?plain=1#L89](https://github.com/lobehub/lobe-chat/blob/0533150f586e0c0c00b61dcb2f1cc4df9860993f/contributing/Basic/Intro.md?plain=1#L89)",
          "code": "var Component=(()=>{var F=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var b=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var s in e)c(l,s,{get:e[s],enumerable:!0})},a=(l,e,s,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!y.call(l,i)&&i!==s&&c(l,i,{get:()=>e[i],enumerable:!(r=p(e,i))||r.enumerable});return l};var f=(l,e,s)=>(s=l!=null?F(u(l)):{},a(e||!l||!l.__esModule?c(s,\"default\",{value:l,enumerable:!0}):s,l)),j=l=>a(c({},\"__esModule\",{value:!0}),l);var t=b((v,o)=>{o.exports=_jsx_runtime});var w={};g(w,{default:()=>d,frontmatter:()=>N});var n=f(t()),N={title:\"Gitmoji uses unbuild to bundle its\\xA0package\"};function h(l){let e={a:\"a\",code:\"code\",div:\"div\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this article, we review how Gitmoji uses unbuild to bundle its package. The following concepts are discussed:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What is Gitmoji?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"How I came across Gitmoji?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What is unbuild?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"unbuild configuration in Gitmoji package\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"what-isgitmoji\",children:\"What is\\xA0Gitmoji?\"}),`\n`,(0,n.jsx)(e.p,{children:\"Gitmoji is an emoji guide for GitHub commit messages. Aims to be a standarization cheatsheet - guide for using emojis on GitHub\\u2019s commit messages.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Using emojis on commit messages provides an easy way of identifying the purpose or intention of a commit with only looking at the emojis used.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://gitmoji.dev/about\",children:\"Gitmoji\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"how-i-came-acrossgitmoji\",children:\"How I came across\\xA0Gitmoji?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I read open-source code a lot and share the insights via this articles. I saw emojis in \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat\",children:\"Lobechat commit history\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*mdbm3Qp2yNOAMmm5u_YQMw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"It got me thinking why is there an emoji in a commit message? for example, the following are commit messages copied from \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat\",children:\"Lobechat\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"\\u{1F41B} fix\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" remove orphan chunks \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" there is no related file\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"\\u2728 feat\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" support TTS \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"&\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" STT\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"\\u{1F4DD} docs\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" update docs\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"And then I recalled a \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/0533150f586e0c0c00b61dcb2f1cc4df9860993f/contributing/Basic/Intro.md?plain=1#L89\",children:\"mention of Gitmoji in the Lobechat contribution\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"what-isunbuild\",children:\"What is\\xA0unbuild?\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild\",children:\"unbuild\"}),\" is a unified JavaScript build system. Features include\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild?tab=readme-ov-file#-optimized-bundler\",children:\"Optimized bundler\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild?tab=readme-ov-file#-automated-config\",children:\"Automated config\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild?tab=readme-ov-file#-automated-config\",children:\"Bundleless build\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild?tab=readme-ov-file#-passive-watcher\",children:\"Passive watcher\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild?tab=readme-ov-file#-untype-generator\",children:\"Untype Generator\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild?tab=readme-ov-file#%EF%B8%8F-secure-builds\",children:\"Secure builds\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild\",children:\"unbuild\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Unbuild usage is quite straightforward. You create your files inside src/index.ts. The below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild?tab=readme-ov-file#usage\",children:\"docs\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" inside src/index.ts\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" log \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"\\u2026args\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" console\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"\\u2026args\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Next step is to update package.json as shown below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"type\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"module\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"scripts\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"build\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"unbuild\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"prepack\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"unbuild\"'})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"exports\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \".\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"import\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"./dist/index.mjs\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"require\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"./dist/index.cjs\"'})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"main\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"./dist/index.cjs\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"types\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"./dist/index.d.ts\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"files\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"dist\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can configure unbuild to meet your needs. Read more about \",(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild?tab=readme-ov-file#configuration\",children:\"configuration\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"unbuild-configuration-in-gitmojipackage\",children:\"unbuild configuration in Gitmoji\\xA0package\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Based on the usage described above, Gitmoji has the same unbuild setup, the below is the \",(0,n.jsx)(e.a,{href:\"https://github.com/carloscuesta/gitmoji/blob/master/packages/gitmojis/package.json\",children:\"Gitmoji package.json\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"name\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"gitmojis\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"type\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"module\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"version\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"3.14.0\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"description\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"An emoji guide for your commit messages.\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"main\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"./dist/index.cjs\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"types\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"./dist/index.d.ts\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"exports\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    \".\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'      \"import\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"./dist/index.mjs\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'      \"require\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"./dist/index.cjs\"'})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"files\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    \"dist\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ],\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"scripts\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    \"dev\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:` \"nodemon --exec 'pnpm run build' --watch ./src\"`}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    \"build\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"unbuild\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    \"lint:json\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"ajv --spec=draft2020 validate -s ./src/schema.json -d ./src/gitmojis.json\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    \"lint\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"pnpm run lint:json && prettier --check ./src/**/*.{js,json,ts}\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    \"publishPackage\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"npm publish\"'})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"...\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"There is no build.config.ts found in \",(0,n.jsx)(e.a,{href:\"https://github.com/carloscuesta/gitmoji/tree/master/packages/gitmojis\",children:\"Gitmoji package\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"To build this package, you just have to run \",(0,n.jsx)(e.code,{children:\"npm run build\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/carloscuesta/gitmoji/blob/master/packages/gitmojis/package.json#L19\",children:\"https://github.com/carloscuesta/gitmoji/blob/master/packages/gitmojis/package.json#L19\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/unbuild\",children:\"https://www.npmjs.com/package/unbuild\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://gitmoji.dev/about\",children:\"https://gitmoji.dev/about\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat\",children:\"https://github.com/lobehub/lobe-chat\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/0533150f586e0c0c00b61dcb2f1cc4df9860993f/contributing/Basic/Intro.md?plain=1#L89\",children:\"https://github.com/lobehub/lobe-chat/blob/0533150f586e0c0c00b61dcb2f1cc4df9860993f/contributing/Basic/Intro.md?plain=1#L89\"})}),`\n`]}),`\n`]})]})}function d(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(h,{...l})}):h(l)}return j(w);})();\n;return Component;"
        },
        "_id": "blog/gitmoji-uses-unbuild.mdx",
        "_raw": {
          "sourceFilePath": "blog/gitmoji-uses-unbuild.mdx",
          "sourceFileName": "gitmoji-uses-unbuild.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/gitmoji-uses-unbuild"
        },
        "type": "Doc",
        "slug": "/blog/gitmoji-uses-unbuild",
        "slugAsParams": "gitmoji-uses-unbuild"
      },
      "documentHash": "1740489186309",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/grida-custom-schema-server-client.mdx": {
      "document": {
        "title": "Custom schema specific Supabase Server Component clients in Grida Form workspace\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we review the code in [server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17) in Grida. Well, what’s so special about this file? let’s find out.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*XZ1SgtGtKbE0wQ2lfxILWA.png)\r\n\r\n# **Server Component Client**\r\n\r\nBefore we look at [Grida Forms server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17), Let’s first understand what a Server Component Client means.\r\n\r\nIn the [Supabase Auth guides](https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app), at step 3, you will find the information about Server Component Client and it has the below code.\r\n\r\n```javascript\r\nimport { createServerClient } from '@supabase/ssr'\r\nimport { cookies } from 'next/headers'\r\n\r\nexport async function createClient() {\r\n  const cookieStore = await cookies()\r\n\r\n  return createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        getAll() {\r\n          return cookieStore.getAll()\r\n        },\r\n        setAll(cookiesToSet) {\r\n          try {\r\n            cookiesToSet.forEach(({ name, value, options }) =>\r\n              cookieStore.set(name, value, options)\r\n            )\r\n          } catch {\r\n            // The `setAll` method was called from a Server Component.\r\n            // This can be ignored if you have middleware refreshing\r\n            // user sessions.\r\n          }\r\n        },\r\n      },\r\n    }\r\n  )\r\n}\r\n```\r\n\r\n> *Server Component client — To access Supabase from Server Components, Server Actions, and Route Handlers, which run only on the server.*\r\n\r\nSo far, I have reviewed Supabase Server Component Client in Nextjs-Subscription-Payments example and Midday.ai but I have never seen multiple Server components clients defined in the same file like in [Grida Form server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17)\r\n\r\n# **Grida Form server.ts**\r\n\r\n[Grida Form server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17) has multiple Server Component clients defined.\r\n\r\n## **workspace client**\r\n\r\nAt [line 7](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L7C1-L15C3), you will find the below code:\r\n\r\n```javascript\r\nexport const workspaceclient = createClient<Database, \"public\">(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_KEY!,\r\n  {\r\n    db: {\r\n      schema: \"public\",\r\n    },\r\n  }\r\n);\r\n```\r\n\r\n## **Grida Forms Client**\r\n\r\nAt [line 17](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17C1-L25C3), you will find the below code:\r\n\r\n```javascript\r\nexport const grida_forms_client = createClient<Database, \"grida_forms\">(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_KEY!,\r\n  {\r\n    db: {\r\n      schema: \"grida_forms\",\r\n    },\r\n  }\r\n);\r\n```\r\n\r\n## **Grida Sites Client**\r\n\r\nAt [line 27](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L27C1-L35C3), you will find this below code:\r\n\r\n```javascript\r\nexport const grida_sites_client = createClient<Database, \"grida_sites\">(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_KEY!,\r\n  {\r\n    db: {\r\n      schema: \"grida_sites\",\r\n    },\r\n  }\r\n);\r\n```\r\n\r\n## **Grida Commerce Client**\r\n\r\nAt [line 37](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L37C1-L46C1), you will find the below code:\r\n\r\n```javascript\r\nexport const grida_commerce_client = createClient<Database, \"grida_commerce\">(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_KEY!,\r\n  {\r\n    db: {\r\n      schema: \"grida_commerce\",\r\n    },\r\n  }\r\n);\r\n```\r\n\r\n## **Grida XSupabase Client**\r\n\r\nAt [line 47](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L47C1-L54C4), you will find the below code:\r\n\r\n```javascript\r\nexport const grida_xsupabase_client = createClient<\r\n  Database,\r\n  \"grida_x_supabase\"\r\n>(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.SUPABASE_SERVICE_KEY!, {\r\n  db: {\r\n    schema: \"grida_x_supabase\",\r\n  },\r\n});\r\n```\r\n\r\nAll these clients are located in a single file — [grida/apps/forms/lib/supabase/server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L47C1-L54C4)\r\n\r\n# **createClient imported**\r\n\r\nAt [line 4 in server.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L4), you will find the below import\r\n\r\n```javascript\r\nimport { createClient } from \"@supabase/supabase-js\";\r\n```\r\n\r\nBut is this same as what is provided in the Supabase Auth Documentation? Nope. You will find the below import in Supabase Auth Docs.\r\n\r\n```javascript\r\nimport { createServerClient } from '@supabase/ssr'\r\n```\r\n\r\nWait, so Supabase Auth Docs tells us to use [`@supabase/ssr`](http://twitter.com/supabase/ssr) and Grida Forms workspace uses [`@supabase/supabase-js`](http://twitter.com/supabase/supabase-js). Do you know why?\r\n\r\nIn order to configure your Supabase client with a custom schema, you will have to use [@supabase/supabase-js](http://twitter.com/supabase/supabase-js). [Using Custom Schema Guide](https://supabase.com/docs/guides/api/using-custom-schemas) has the following example code snippet provided:\r\n\r\n```javascript\r\n// Initialize the JS client\r\nimport { createClient } from '@supabase/supabase-js'\r\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY, { db: { schema: 'myschema' } })\r\n// Make a request\r\nconst { data: todos, error } = await supabase.from('todos').select('*')\r\n// You can also change the target schema on a per-query basis\r\nconst { data: todos, error } = await supabase.schema('myschema').from('todos').select('*')\r\n```\r\n\r\nYou will find the clients in Grida Form server.ts have the same syntax for defining the db schema.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17)\r\n    \r\n2. [https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app](https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app)\r\n    \r\n3. [https://supabase.com/docs/guides/api/using-custom-schemas](https://supabase.com/docs/guides/api/using-custom-schemas)",
          "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},o=(n,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(n,r)&&r!==s&&c(n,r,{get:()=>e[r],enumerable:!(a=p(e,r))||a.enumerable});return n};var f=(n,e,s)=>(s=n!=null?d(m(n)):{},o(e||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),v=n=>o(c({},\"__esModule\",{value:!0}),n);var F=g((C,i)=>{i.exports=_jsx_runtime});var S={};b(S,{default:()=>h,frontmatter:()=>N});var l=f(F()),N={title:\"Custom schema specific Supabase Server Component clients in Grida Form workspace\"};function t(n){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we review the code in \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\",children:\"server.ts\"}),\" in Grida. Well, what\\u2019s so special about this file? let\\u2019s find out.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*XZ1SgtGtKbE0wQ2lfxILWA.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h1,{id:\"server-component-client\",children:(0,l.jsx)(e.strong,{children:\"Server Component Client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Before we look at \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\",children:\"Grida Forms server.ts\"}),\", Let\\u2019s first understand what a Server Component Client means.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"In the \",(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app\",children:\"Supabase Auth guides\"}),\", at step 3, you will find the information about Server Component Client and it has the below code.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createServerClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/ssr'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookies \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next/headers'\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookieStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createServerClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_ANON_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        getAll\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookieStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getAll\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        setAll\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cookiesToSet\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          try\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            cookiesToSet\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"forEach\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              cookieStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            )\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" catch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" The `setAll` method was called from a Server Component.\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" This can be ignored if you have middleware refreshing\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" user sessions.\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:\"Server Component client \\u2014 To access Supabase from Server Components, Server Actions, and Route Handlers, which run only on the server.\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[\"So far, I have reviewed Supabase Server Component Client in Nextjs-Subscription-Payments example and Midday.ai but I have never seen multiple Server components clients defined in the same file like in \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\",children:\"Grida Form server.ts\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"grida-form-serverts\",children:(0,l.jsx)(e.strong,{children:\"Grida Form server.ts\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\",children:\"Grida Form server.ts\"}),\" has multiple Server Component clients defined.\"]}),`\n`,(0,l.jsx)(e.h2,{id:\"workspace-client\",children:(0,l.jsx)(e.strong,{children:\"workspace client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L7C1-L15C3\",children:\"line 7\"}),\", you will find the below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" workspaceclient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"public\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_SERVICE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"public\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"grida-forms-client\",children:(0,l.jsx)(e.strong,{children:\"Grida Forms Client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17C1-L25C3\",children:\"line 17\"}),\", you will find the below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" grida_forms_client \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_forms\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_SERVICE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_forms\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"grida-sites-client\",children:(0,l.jsx)(e.strong,{children:\"Grida Sites Client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L27C1-L35C3\",children:\"line 27\"}),\", you will find this below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" grida_sites_client \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_sites\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_SERVICE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_sites\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"grida-commerce-client\",children:(0,l.jsx)(e.strong,{children:\"Grida Commerce Client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L37C1-L46C1\",children:\"line 37\"}),\", you will find the below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" grida_commerce_client \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_commerce\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_SERVICE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_commerce\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"grida-xsupabase-client\",children:(0,l.jsx)(e.strong,{children:\"Grida XSupabase Client\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L47C1-L54C4\",children:\"line 47\"}),\", you will find the below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" grida_xsupabase_client \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  Database\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  \"grida_x_supabase\"'})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_SERVICE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_x_supabase\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"All these clients are located in a single file \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L47C1-L54C4\",children:\"grida/apps/forms/lib/supabase/server.ts\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"createclient-imported\",children:(0,l.jsx)(e.strong,{children:\"createClient imported\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L4\",children:\"line 4 in server.ts\"}),\", you will find the below import\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@supabase/supabase-js\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,l.jsx)(e.p,{children:\"But is this same as what is provided in the Supabase Auth Documentation? Nope. You will find the below import in Supabase Auth Docs.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createServerClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/ssr'\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Wait, so Supabase Auth Docs tells us to use \",(0,l.jsx)(e.a,{href:\"http://twitter.com/supabase/ssr\",children:(0,l.jsx)(e.code,{children:\"@supabase/ssr\"})}),\" and Grida Forms workspace uses \",(0,l.jsx)(e.a,{href:\"http://twitter.com/supabase/supabase-js\",children:(0,l.jsx)(e.code,{children:\"@supabase/supabase-js\"})}),\". Do you know why?\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"In order to configure your Supabase client with a custom schema, you will have to use \",(0,l.jsx)(e.a,{href:\"http://twitter.com/supabase/supabase-js\",children:\"@supabase/supabase-js\"}),\". \",(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/api/using-custom-schemas\",children:\"Using Custom Schema Guide\"}),\" has the following example code snippet provided:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Initialize the JS client\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/supabase-js'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" SUPABASE_ANON_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'myschema'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Make a request\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" todos\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" error \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'todos'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"select\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'*'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" You can also change the target schema on a per-query basis\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" todos\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" error \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"schema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'myschema'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'todos'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"select\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'*'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"You will find the clients in Grida Form server.ts have the same syntax for defining the db schema.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me-1\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"references\",children:(0,l.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/server.ts#L17\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app\",children:\"https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/api/using-custom-schemas\",children:\"https://supabase.com/docs/guides/api/using-custom-schemas\"})}),`\n`]}),`\n`]})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return v(S);})();\n;return Component;"
        },
        "_id": "blog/grida-custom-schema-server-client.mdx",
        "_raw": {
          "sourceFilePath": "blog/grida-custom-schema-server-client.mdx",
          "sourceFileName": "grida-custom-schema-server-client.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/grida-custom-schema-server-client"
        },
        "type": "Doc",
        "slug": "/blog/grida-custom-schema-server-client",
        "slugAsParams": "grida-custom-schema-server-client"
      },
      "documentHash": "1740489186311",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/grida-custom-schema-supabase-client.mdx": {
      "document": {
        "title": "Custom schema specific Supabase Client Component clients in Grida Form workspace\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review the Supabase Client Component clients in [Grida Form workspace](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts). In case you are wondering what a Supabase Client Component client is, Read the [Supabase docs](https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app).\r\n\r\n> Client Component client — To access Supabase from Client Components, which run in the browser.\r\n\r\nIn the [lib/supabase/client.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts), you have multiple clients defined depending on the schema.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*Xzq4rsma5wZZb-bp30uCsg.png)\r\n\r\n### Client Component\r\n\r\n#### createClientFormsClient\r\n\r\nYou will find the below code at [line 4](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts#L4C1-L12C1)\r\n\r\n```js\r\nexport const createClientFormsClient = () =>\r\n  createClientComponentClient<Database, \"grida_forms\">({\r\n    options: {\r\n      db: {\r\n        schema: \"grida_forms\",\r\n      },\r\n    },\r\n  });\r\n```\r\n\r\n#### createClientCommerceClient\r\n\r\nYou will find the below code at [line 13](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts#L13C1-L21C6)\r\n\r\n```js\r\nexport const createClientCommerceClient = () =>\r\n  createClientComponentClient<Database, \"grida_commerce\">({\r\n    options: {\r\n      db: {\r\n        schema: \"grida_commerce\",\r\n      },\r\n    },\r\n    isSingleton: false,\r\n  });\r\n```\r\n\r\n#### createClientWorkspaceClient\r\n\r\nYou will find the below code at [line 23](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts#L23).\r\n\r\n```js\r\nexport const createClientWorkspaceClient = () =>\r\n  createClientComponentClient<Database, \"public\">({\r\n    options: {\r\n      db: {\r\n        schema: \"public\",\r\n      },\r\n    },\r\n    isSingleton: false,\r\n  });\r\n```\r\n\r\ncreateClientComponentClient is imported from as shown below [@supabase/auth-helpers-nextjs](http://twitter.com/supabase/auth-helpers-nextjs):\r\n\r\n```js\r\nimport { createClientComponentClient } from \"@supabase/auth-helpers-nextjs\";\r\n```\r\n\r\n### @supabase/auth-helpers-nextjs\r\n\r\nYou will find this package on npm registry — [https://www.npmjs.com/package/@supabase/auth-helpers-nextjs](https://www.npmjs.com/package/@supabase/auth-helpers-nextjs)  \r\nThis below note is from npm registry:\r\n\r\n> This package is now deprecated — please use the [@supabase/ssr](http://twitter.com/supabase/ssr) package instead.  \r\n>    \r\n> There is also \\[legacy documentation\\]([https://supabase.com/docs/guides/auth/auth-helpers/nextjs](https://supabase.com/docs/guides/auth/auth-helpers/nextjs)), showing   \r\n> a usage example.\r\n\r\nAPI changes over time, You have to accommodate these changes by bumping the dependency package and updating the relevant API. In this case, I would make a major release in my project that involves migration to [@supabase/ssr](http://twitter.com/supabase/ssr) instead of [@supabase/auth-helpers-nextjs](http://twitter.com/supabase/auth-helpers-nextjs) as this is deprecated, but I wouldn’t rush though unless it is breaking production, otherwise I would rather have some more updates along with  \r\nthis version bump.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1. [https://supabase.com/docs/guides/api/using-custom-schemas](https://supabase.com/docs/guides/api/using-custom-schemas)\r\n    \r\n2. [https://github.com/orgs/supabase/discussions/21511](https://github.com/orgs/supabase/discussions/21511)\r\n    \r\n3. [https://supabase.com/docs/guides/auth/auth-helpers/nextjs](https://supabase.com/docs/guides/auth/auth-helpers/nextjs)\r\n    \r\n4. [https://www.npmjs.com/package/@supabase/auth-helpers-nextjs](https://www.npmjs.com/package/@supabase/auth-helpers-nextjs)\r\n    \r\n5. [https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts](https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts)\r\n    \r\n6. [https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app](https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app)",
          "code": "var Component=(()=>{var d=Object.create;var r=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var g=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),y=(s,e)=>{for(var l in e)r(s,l,{get:e[l],enumerable:!0})},c=(s,e,l,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of m(e))!b.call(s,a)&&a!==l&&r(s,a,{get:()=>e[a],enumerable:!(t=F(e,a))||t.enumerable});return s};var f=(s,e,l)=>(l=s!=null?d(u(s)):{},c(e||!s||!s.__esModule?r(l,\"default\",{value:s,enumerable:!0}):l,s)),w=s=>c(r({},\"__esModule\",{value:!0}),s);var o=g((k,i)=>{i.exports=_jsx_runtime});var j={};y(j,{default:()=>p,frontmatter:()=>C});var n=f(o()),C={title:\"Custom schema specific Supabase Client Component clients in Grida Form workspace\"};function h(s){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",...s.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will review the Supabase Client Component clients in \",(0,n.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts\",children:\"Grida Form workspace\"}),\". In case you are wondering what a Supabase Client Component client is, Read the \",(0,n.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app\",children:\"Supabase docs\"}),\".\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Client Component client\\u200A\\u2014\\u200ATo access Supabase from Client Components, which run in the browser.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts\",children:\"lib/supabase/client.ts\"}),\", you have multiple clients defined depending on the schema.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*Xzq4rsma5wZZb-bp30uCsg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"client-component\",children:\"Client Component\"}),`\n`,(0,n.jsx)(e.h4,{id:\"createclientformsclient\",children:\"createClientFormsClient\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find the below code at \",(0,n.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts#L4C1-L12C1\",children:\"line 4\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createClientFormsClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  createClientComponentClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_forms\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      db\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        schema\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_forms\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"createclientcommerceclient\",children:\"createClientCommerceClient\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find the below code at \",(0,n.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts#L13C1-L21C6\",children:\"line 13\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createClientCommerceClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  createClientComponentClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_commerce\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      db\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        schema\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"grida_commerce\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    isSingleton\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"createclientworkspaceclient\",children:\"createClientWorkspaceClient\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find the below code at \",(0,n.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts#L23\",children:\"line 23\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createClientWorkspaceClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  createClientComponentClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Database\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"public\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      db\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        schema\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"public\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    isSingleton\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"createClientComponentClient is imported from as shown below \",(0,n.jsx)(e.a,{href:\"http://twitter.com/supabase/auth-helpers-nextjs\",children:\"@supabase/auth-helpers-nextjs\"}),\":\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClientComponentClient \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@supabase/auth-helpers-nextjs\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,n.jsx)(e.h3,{id:\"supabaseauth-helpers-nextjs\",children:\"@supabase/auth-helpers-nextjs\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find this package on npm registry\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/@supabase/auth-helpers-nextjs\",children:\"https://www.npmjs.com/package/@supabase/auth-helpers-nextjs\"}),(0,n.jsx)(e.br,{}),`\n`,\"This below note is from npm registry:\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"This package is now deprecated\\u200A\\u2014\\u200Aplease use the \",(0,n.jsx)(e.a,{href:\"http://twitter.com/supabase/ssr\",children:\"@supabase/ssr\"}),\" package instead.\",(0,n.jsx)(e.br,{}),`\n`,\"\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"There is also [legacy documentation](\",(0,n.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/auth-helpers/nextjs\",children:\"https://supabase.com/docs/guides/auth/auth-helpers/nextjs\"}),\"), showing\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"a usage example.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"API changes over time, You have to accommodate these changes by bumping the dependency package and updating the relevant API. In this case, I would make a major release in my project that involves migration to \",(0,n.jsx)(e.a,{href:\"http://twitter.com/supabase/ssr\",children:\"@supabase/ssr\"}),\" instead of \",(0,n.jsx)(e.a,{href:\"http://twitter.com/supabase/auth-helpers-nextjs\",children:\"@supabase/auth-helpers-nextjs\"}),\" as this is deprecated, but I wouldn\\u2019t rush though unless it is breaking production, otherwise I would rather have some more updates along with\",(0,n.jsx)(e.br,{}),`\n`,\"this version bump.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://supabase.com/docs/guides/api/using-custom-schemas\",children:\"https://supabase.com/docs/guides/api/using-custom-schemas\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/orgs/supabase/discussions/21511\",children:\"https://github.com/orgs/supabase/discussions/21511\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/auth-helpers/nextjs\",children:\"https://supabase.com/docs/guides/auth/auth-helpers/nextjs\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/@supabase/auth-helpers-nextjs\",children:\"https://www.npmjs.com/package/@supabase/auth-helpers-nextjs\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/lib/supabase/client.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app\",children:\"https://supabase.com/docs/guides/auth/server-side/nextjs?queryGroups=router&router=app\"})}),`\n`]}),`\n`]})]})}function p(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(h,{...s})}):h(s)}return w(j);})();\n;return Component;"
        },
        "_id": "blog/grida-custom-schema-supabase-client.mdx",
        "_raw": {
          "sourceFilePath": "blog/grida-custom-schema-supabase-client.mdx",
          "sourceFileName": "grida-custom-schema-supabase-client.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/grida-custom-schema-supabase-client"
        },
        "type": "Doc",
        "slug": "/blog/grida-custom-schema-supabase-client",
        "slugAsParams": "grida-custom-schema-supabase-client"
      },
      "documentHash": "1740489186312",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/have-you-used-git-submodules.mdx": {
      "document": {
        "title": "Have you ever used `git submodules`?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI am currently contributing to an open-source project called [Grida](https://github.com/gridaco/grida), specifically working on building a [canvas](https://app.grida.co/canvas) with a figma like interface. In order to setup the Grida’s development environment, you need to use `git submodules`. I didn’t know this, got a hint from the authors at Grida and I decided to share what is a `git submodules` command in this article.\r\n\r\n### Git Submodules\r\n\r\nI am quoting below what I found in the [git-scm site](https://git-scm.com/book/en/v2/Git-Tools-Submodules).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*xvxfOFYjYMsGLiQgZWHR-A.png)\r\n\r\n> It often happens that while working on one project, you need to use another project from within it. Perhaps it’s a library that a third party developed or that you’re developing separately and using in multiple parent projects. A common issue arises in these scenarios: you want to be able to treat the two projects as separate yet still be able to use one from within the other.\r\n\r\n> Here’s an example. Suppose you’re developing a website and creating Atom feeds. Instead of writing your own Atom-generating code, you decide to use a library. You’re likely to have to either include this code from a shared library like a CPAN install or Ruby gem, or copy the source code into your own project tree. The issue with including the library is that it’s difficult to customize the library in any way and often more difficult to deploy it, because you need to make sure every client has that library available. The issue with copying the code into your own project is that any custom changes you make are difficult to merge when upstream changes become available.\r\n\r\n> Git addresses this issue using submodules. Submodules allow you to keep a Git repository as a subdirectory of another Git repository. This lets you clone another repository into your project and keep your commits separate\r\n\r\nThis documentation provides information on different scenarios such as:\r\n\r\n1. Starting with Submodules\r\n    \r\n2. Cloning a Project with Submodules and so on…\r\n    \r\n\r\nbut what worked for me in setting up the Grida development environment is this — ***Cloning a Project with Submodules***\r\n\r\n> I study large open-source projects and provide insights, give [my repository a star](https://github.com/ramu-narasinga/thinkthroo).\r\n\r\nI initially tried to run the `pnpm install`, but I kept the getting errors about missing package.\r\n\r\nI used the command to below to properly clone the Grida source code in my machine:\r\n\r\n```js\r\ngit clone --recurse-submodules https://github.com/gridaco/grida\r\n```\r\n\r\nThis command is going to clone the submodules that this project is dependent on and these submodules are different repositories themselves.\r\n\r\nExecuting this command only gets you all the submodules required, you would still need to run `pnpm install` and to start the development environment, run `pnpm run dev` \r\n\r\nI highly recommend [reading more about submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules).\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://git-scm.com/book/en/v2/Git-Tools-Submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)\r\n    \r\n2. [https://github.com/gridaco/grida](https://github.com/gridaco/grida)\r\n    \r\n3. [https://app.grida.co/canvas](https://app.grida.co/canvas)",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var y=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var o in e)i(n,o,{get:e[o],enumerable:!0})},s=(n,e,o,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!b.call(n,r)&&r!==o&&i(n,r,{get:()=>e[r],enumerable:!(a=u(e,r))||a.enumerable});return n};var w=(n,e,o)=>(o=n!=null?p(g(n)):{},s(e||!n||!n.__esModule?i(o,\"default\",{value:n,enumerable:!0}):o,n)),k=n=>s(i({},\"__esModule\",{value:!0}),n);var h=y((G,c)=>{c.exports=_jsx_runtime});var F={};f(F,{default:()=>d,frontmatter:()=>v});var t=w(h()),v={title:\"Have you ever used `git submodules`?\"};function l(n){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"I am currently contributing to an open-source project called \",(0,t.jsx)(e.a,{href:\"https://github.com/gridaco/grida\",children:\"Grida\"}),\", specifically working on building a \",(0,t.jsx)(e.a,{href:\"https://app.grida.co/canvas\",children:\"canvas\"}),\" with a figma like interface. In order to setup the Grida\\u2019s development environment, you need to use \",(0,t.jsx)(e.code,{children:\"git submodules\"}),\". I didn\\u2019t know this, got a hint from the authors at Grida and I decided to share what is a \",(0,t.jsx)(e.code,{children:\"git submodules\"}),\" command in this article.\"]}),`\n`,(0,t.jsx)(e.h3,{id:\"git-submodules\",children:\"Git Submodules\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am quoting below what I found in the \",(0,t.jsx)(e.a,{href:\"https://git-scm.com/book/en/v2/Git-Tools-Submodules\",children:\"git-scm site\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*xvxfOFYjYMsGLiQgZWHR-A.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.blockquote,{children:[`\n`,(0,t.jsx)(e.p,{children:\"It often happens that while working on one project, you need to use another project from within it. Perhaps it\\u2019s a library that a third party developed or that you\\u2019re developing separately and using in multiple parent projects. A common issue arises in these scenarios: you want to be able to treat the two projects as separate yet still be able to use one from within the other.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.blockquote,{children:[`\n`,(0,t.jsx)(e.p,{children:\"Here\\u2019s an example. Suppose you\\u2019re developing a website and creating Atom feeds. Instead of writing your own Atom-generating code, you decide to use a library. You\\u2019re likely to have to either include this code from a shared library like a CPAN install or Ruby gem, or copy the source code into your own project tree. The issue with including the library is that it\\u2019s difficult to customize the library in any way and often more difficult to deploy it, because you need to make sure every client has that library available. The issue with copying the code into your own project is that any custom changes you make are difficult to merge when upstream changes become available.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.blockquote,{children:[`\n`,(0,t.jsx)(e.p,{children:\"Git addresses this issue using submodules. Submodules allow you to keep a Git repository as a subdirectory of another Git repository. This lets you clone another repository into your project and keep your commits separate\"}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:\"This documentation provides information on different scenarios such as:\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"Starting with Submodules\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"Cloning a Project with Submodules and so on\\u2026\"}),`\n`]}),`\n`]}),`\n`,(0,t.jsxs)(e.p,{children:[\"but what worked for me in setting up the Grida development environment is this\\u200A\\u2014\\u200A\",(0,t.jsx)(e.em,{children:(0,t.jsx)(e.strong,{children:\"Cloning a Project with Submodules\"})})]}),`\n`,(0,t.jsxs)(e.blockquote,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"I study large open-source projects and provide insights, give \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga/thinkthroo\",children:\"my repository a star\"}),\".\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.p,{children:[\"I initially tried to run the \",(0,t.jsx)(e.code,{children:\"pnpm install\"}),\", but I kept the getting errors about missing package.\"]}),`\n`,(0,t.jsx)(e.p,{children:\"I used the command to below to properly clone the Grida source code in my machine:\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\"git clone \"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"--\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\"recurse\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\"submodules https\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"github.com/gridaco/grida\"})]})})})}),`\n`,(0,t.jsx)(e.p,{children:\"This command is going to clone the submodules that this project is dependent on and these submodules are different repositories themselves.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Executing this command only gets you all the submodules required, you would still need to run \",(0,t.jsx)(e.code,{children:\"pnpm install\"}),\" and to start the development environment, run \",(0,t.jsx)(e.code,{children:\"pnpm run dev\"}),\"\\xA0\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"I highly recommend \",(0,t.jsx)(e.a,{href:\"https://git-scm.com/book/en/v2/Git-Tools-Submodules\",children:\"reading more about submodules\"}),\".\"]}),`\n`,(0,t.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.em,{children:(0,t.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://git-scm.com/book/en/v2/Git-Tools-Submodules\",children:\"https://git-scm.com/book/en/v2/Git-Tools-Submodules\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/gridaco/grida\",children:\"https://github.com/gridaco/grida\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://app.grida.co/canvas\",children:\"https://app.grida.co/canvas\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}return k(F);})();\n;return Component;"
        },
        "_id": "blog/have-you-used-git-submodules.mdx",
        "_raw": {
          "sourceFilePath": "blog/have-you-used-git-submodules.mdx",
          "sourceFileName": "have-you-used-git-submodules.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/have-you-used-git-submodules"
        },
        "type": "Doc",
        "slug": "/blog/have-you-used-git-submodules",
        "slugAsParams": "have-you-used-git-submodules"
      },
      "documentHash": "1740489186314",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/hcaptcha-usage-in-oss-projects.mdx": {
      "document": {
        "title": "hCaptcha, a bot detection tool, usage in Supabase and Chatwoot\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, you will learn what is hCaptcha and its usage in Open Source projects such as [Supabase](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L22) and [Chatwoot](https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L8).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*wktns7TfEzjhqNO8gmU14g.png)\r\n\r\n### What is hCaptcha?\r\n\r\nhCaptcha helps you detect bots. when you have a public facing form such as signin/signup, you could have bots spamming your systems. This is where hCaptcha comes into picture, it provides a captcha for a user to solve the puzzle so bots are not allowed to sign up.\r\n\r\nLink to official website — [https://www.hcaptcha.com/](https://www.hcaptcha.com/)\r\n\r\n#### hCaptcha docs\r\n\r\n[hCaptcha docs](https://docs.hcaptcha.com/) is built using [Docusaurus](https://docusaurus.io/) and [their developer guide](https://docs.hcaptcha.com/) provides a vanilla example, but there’s framework specific examples provided as well.\r\n\r\n* [react-hcaptcha](https://github.com/hCaptcha/react-hcaptcha)\r\n    \r\n* [ng-hcaptcha](https://github.com/hCaptcha/ng-hcaptcha) and more. Refer to the [official documentation](https://docs.hcaptcha.com/) for more.\r\n    \r\n\r\n### hCaptcha usage in Supabase\r\n\r\nIn [Supabase’s SignInForm.tsx](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L22), [at line 124](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L124), you will find the below code:\r\n\r\n```ts\r\n<div className=\"self-center\">\r\n <HCaptcha\r\n   ref={captchaRef}\r\n   sitekey={process.env.NEXT_PUBLIC_HCAPTCHA_SITE_KEY!}\r\n   size=\"invisible\"\r\n   onVerify={(token) => {\r\n     setCaptchaToken(token)\r\n   }}\r\n   onExpire={() => {\r\n     setCaptchaToken(null)\r\n   }}\r\n />\r\n</div>\r\n```\r\n\r\nhCaptcha is imported from react-hcaptcha.\r\n\r\n```ts\r\nimport HCaptcha from '@hcaptcha/react-hcaptcha'\r\n```\r\n\r\nIn the [onSignin function](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L30), hCaptcha is processed as shown below:\r\n\r\n```ts\r\nconst [captchaToken, setCaptchaToken] = useState<string | null>(null)\r\nconst captchaRef = useRef<HCaptcha>(null)\r\n…\r\nlet token = captchaToken\r\n\r\nif (!token) {\r\n const captchaResponse = await captchaRef.current?.execute({ async: true })\r\n token = captchaResponse?.response ?? null\r\n}\r\n\r\nconst { error } = await auth.signInWithPassword({\r\n email,\r\n password,\r\n options: { captchaToken: token ?? undefined },\r\n})\r\n```\r\n\r\n### hCaptcha usage in Chatwoot\r\n\r\nIn the [Chatwoot Signup form](https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L8), you will find the below code [at line 186](https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L186):\r\n\r\n```ts\r\n<div v-if=\"globalConfig.hCaptchaSiteKey\" class=\"mb-3\">\r\n  <VueHcaptcha\r\n    ref=\"hCaptcha\"\r\n    :class=\"{ error: !hasAValidCaptcha && didCaptchaReset }\"\r\n    :sitekey=\"globalConfig.hCaptchaSiteKey\"\r\n    @verify=\"onRecaptchaVerified\"\r\n  />\r\n  <span\r\n    v-if=\"!hasAValidCaptcha && didCaptchaReset\"\r\n    class=\"text-xs text-red-400\"\r\n  >\r\n    {{ $t('SET_NEW_PASSWORD.CAPTCHA.ERROR') }}\r\n  </span>\r\n</div>\r\n```\r\n\r\nThis is in Vue.js, based on [`@verify`](http://twitter.com/verify)`=”onRecaptchaVerified”`, we should be looking for a function named onRecaptchaVerified. In the methods, hcaptcha related functions are found as shown below:\r\n\r\n```ts\r\nmethods: {\r\n    async submit() {\r\n      this.v$.$touch();\r\n      if (this.v$.$invalid) {\r\n        this.resetCaptcha();\r\n        return;\r\n      }\r\n      this.isSignupInProgress = true;\r\n      try {\r\n        await register(this.credentials);\r\n        window.location = DEFAULT_REDIRECT_URL;\r\n      } catch (error) {\r\n        let errorMessage =\r\n          error?.message || this.$t('REGISTER.API.ERROR_MESSAGE');\r\n        this.resetCaptcha();\r\n        useAlert(errorMessage);\r\n      } finally {\r\n        this.isSignupInProgress = false;\r\n      }\r\n    },\r\n    onRecaptchaVerified(token) {\r\n      this.credentials.hCaptchaClientResponse = token;\r\n      this.didCaptchaReset = false;\r\n    },\r\n    resetCaptcha() {\r\n      if (!this.globalConfig.hCaptchaSiteKey) {\r\n        return;\r\n      }\r\n      this.$refs.hCaptcha.reset();\r\n      this.credentials.hCaptchaClientResponse = '';\r\n      this.didCaptchaReset = true;\r\n    },\r\n  },\r\n};\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L22](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L22)\r\n    \r\n2. [https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L8](https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L8)\r\n    \r\n3. [https://www.hcaptcha.com/](https://www.hcaptcha.com/)\r\n    \r\n4. [https://docs.hcaptcha.com/](https://docs.hcaptcha.com/)\r\n    \r\n5. [https://docusaurus.io/](https://docusaurus.io/)\r\n    \r\n6. [https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L124](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L124)\r\n    \r\n7. [https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L30](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L30)\r\n    \r\n8. [https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L186](https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L186)",
          "code": "var Component=(()=>{var p=Object.create;var a=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var s in e)a(l,s,{get:e[s],enumerable:!0})},o=(l,e,s,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(l,c)&&c!==s&&a(l,c,{get:()=>e[c],enumerable:!(r=d(e,c))||r.enumerable});return l};var f=(l,e,s)=>(s=l!=null?p(m(l)):{},o(e||!l||!l.__esModule?a(s,\"default\",{value:l,enumerable:!0}):s,l)),N=l=>o(a({},\"__esModule\",{value:!0}),l);var t=b((S,F)=>{F.exports=_jsx_runtime});var v={};g(v,{default:()=>h,frontmatter:()=>w});var n=f(t()),w={title:\"hCaptcha, a bot detection tool, usage in Supabase and\\xA0Chatwoot\"};function i(l){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, you will learn what is hCaptcha and its usage in Open Source projects such as \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L22\",children:\"Supabase\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L8\",children:\"Chatwoot\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*wktns7TfEzjhqNO8gmU14g.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"what-is-hcaptcha\",children:\"What is hCaptcha?\"}),`\n`,(0,n.jsx)(e.p,{children:\"hCaptcha helps you detect bots. when you have a public facing form such as signin/signup, you could have bots spamming your systems. This is where hCaptcha comes into picture, it provides a captcha for a user to solve the puzzle so bots are not allowed to sign up.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Link to official website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.hcaptcha.com/\",children:\"https://www.hcaptcha.com/\"})]}),`\n`,(0,n.jsx)(e.h4,{id:\"hcaptcha-docs\",children:\"hCaptcha docs\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://docs.hcaptcha.com/\",children:\"hCaptcha docs\"}),\" is built using \",(0,n.jsx)(e.a,{href:\"https://docusaurus.io/\",children:\"Docusaurus\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://docs.hcaptcha.com/\",children:\"their developer guide\"}),\" provides a vanilla example, but there\\u2019s framework specific examples provided as well.\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/hCaptcha/react-hcaptcha\",children:\"react-hcaptcha\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/hCaptcha/ng-hcaptcha\",children:\"ng-hcaptcha\"}),\" and more. Refer to the \",(0,n.jsx)(e.a,{href:\"https://docs.hcaptcha.com/\",children:\"official documentation\"}),\" for more.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"hcaptcha-usage-insupabase\",children:\"hCaptcha usage in\\xA0Supabase\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L22\",children:\"Supabase\\u2019s SignInForm.tsx\"}),\", \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L124\",children:\"at line 124\"}),\", you will find the below code:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div className\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"self-center\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"HCaptcha\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"   ref\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"captchaRef\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"   sitekey\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process.env.NEXT_PUBLIC_HCAPTCHA_SITE_KEY!\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"   size\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"invisible\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"   onVerify\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"(token) => \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"     setCaptchaToken\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"token\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   }}\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"   onExpire\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"() => \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"     setCaptchaToken\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(null)\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   }}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"</\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"hCaptcha is imported from react-hcaptcha.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" HCaptcha \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@hcaptcha/react-hcaptcha'\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L30\",children:\"onSignin function\"}),\", hCaptcha is processed as shown below:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"captchaToken\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setCaptchaToken\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"string \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(null)\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaRef \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useRef\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"HCaptcha\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(null)\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"\\u2026\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"let\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" token \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaToken\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"token\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaResponse \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaRef\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"current\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"execute\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" token \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaResponse\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"response \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" error \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" auth\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"signInWithPassword\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" email\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" password\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaToken\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" token \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" undefined\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"hcaptcha-usage-inchatwoot\",children:\"hCaptcha usage in\\xA0Chatwoot\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.a,{href:\"https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L8\",children:\"Chatwoot Signup form\"}),\", you will find the below code \",(0,n.jsx)(e.a,{href:\"https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L186\",children:\"at line 186\"}),\":\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div v\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"-if=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"globalConfig.hCaptchaSiteKey\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" class\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"mb-3\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"VueHcaptcha\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    ref\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"hCaptcha\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    :class\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"{ error: !hasAValidCaptcha && didCaptchaReset }\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    :sitekey\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"globalConfig.hCaptchaSiteKey\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    @\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"verify\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"onRecaptchaVerified\"'})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  />\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"span\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    v\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"-if=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"!hasAValidCaptcha && didCaptchaReset\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    class\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"text-xs text-red-400\"'})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  >\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {{\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" $t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'SET_NEW_PASSWORD.CAPTCHA.ERROR'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  </\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"span\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"</\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This is in Vue.js, based on \",(0,n.jsx)(e.a,{href:\"http://twitter.com/verify\",children:(0,n.jsx)(e.code,{children:\"@verify\"})}),(0,n.jsx)(e.code,{children:\"=\\u201DonRecaptchaVerified\\u201D\"}),\", we should be looking for a function named onRecaptchaVerified. In the methods, hcaptcha related functions are found as shown below:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"methods\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    async submit\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"v$\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"$touch\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"v$\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"$invalid\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"resetCaptcha\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        return;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isSignupInProgress \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true;\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      try\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" register\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"credentials\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        window\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"location \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" DEFAULT_REDIRECT_URL\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" catch\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        let\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" errorMessage \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          error\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"message \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"||\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"$t\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'REGISTER.API.ERROR_MESSAGE'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"resetCaptcha\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        useAlert\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"errorMessage\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" finally\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isSignupInProgress \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false;\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    onRecaptchaVerified\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"token\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"credentials\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"hCaptchaClientResponse \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" token\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"didCaptchaReset \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false;\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    resetCaptcha\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"globalConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"hCaptchaSiteKey\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        return;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"$refs\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"hCaptcha\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"reset\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"credentials\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"hCaptchaClientResponse \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ''\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      this\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"didCaptchaReset \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true;\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L22\",children:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L22\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L8\",children:\"https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L8\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.hcaptcha.com/\",children:\"https://www.hcaptcha.com/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://docs.hcaptcha.com/\",children:\"https://docs.hcaptcha.com/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://docusaurus.io/\",children:\"https://docusaurus.io/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L124\",children:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L124\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L30\",children:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L30\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L186\",children:\"https://github.com/chatwoot/chatwoot/blob/4fd9bddb9de08666f7b65ba4b3509f02080ea62d/app/javascript/v3/views/auth/signup/components/Signup/Form.vue#L186\"})}),`\n`]}),`\n`]})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(i,{...l})}):i(l)}return N(v);})();\n;return Component;"
        },
        "_id": "blog/hcaptcha-usage-in-oss-projects.mdx",
        "_raw": {
          "sourceFilePath": "blog/hcaptcha-usage-in-oss-projects.mdx",
          "sourceFileName": "hcaptcha-usage-in-oss-projects.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/hcaptcha-usage-in-oss-projects"
        },
        "type": "Doc",
        "slug": "/blog/hcaptcha-usage-in-oss-projects",
        "slugAsParams": "hcaptcha-usage-in-oss-projects"
      },
      "documentHash": "1740489186315",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Here-how-zustand-test.mdx": {
      "document": {
        "title": "Here is how test-case in Zustand uses ErrorBoundary.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will analyze ErrorBoundary class component in [Zustand’s test case](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L378). Error handling is a crucial part of any React application.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*UEYQKkelOaSQQ9GPxuRHBQ.png)\r\n\r\n# **Overview of the Test Case**\r\n\r\nHere’s the test case we’ll be exploring:\r\n\r\n```plaintext\r\n// Picked from https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L378\r\nit('can throw an error in equality checker', async () => {\r\n  console.error = vi.fn()\r\n  type State = { value: string | number }\r\n\r\n  const initialState: State = { value: 'foo' }\r\n  const useBoundStore = createWithEqualityFn(() => initialState, Object.is)\r\n  const { setState } = useBoundStore\r\n  const selector = (s: State) => s\r\n  const equalityFn = (a: State, b: State) =>\r\n    // @ts-expect-error This function is supposed to throw an error\r\n    a.value.trim() === b.value.trim()\r\n\r\n  class ErrorBoundary extends ClassComponent<\r\n    { children?: ReactNode | undefined },\r\n    { hasError: boolean }\r\n  > {\r\n    constructor(props: { children?: ReactNode | undefined }) {\r\n      super(props)\r\n      this.state = { hasError: false }\r\n    }\r\n    static getDerivedStateFromError() {\r\n      return { hasError: true }\r\n    }\r\n    render() {\r\n      return this.state.hasError ? <div>errored</div> : this.props.children\r\n    }\r\n  }\r\n\r\n  function Component() {\r\n    useBoundStore(selector, equalityFn)\r\n    return <div>no error</div>\r\n  }\r\n\r\n  const { findByText } = render(\r\n    <StrictMode>\r\n      <ErrorBoundary>\r\n        <Component />\r\n      </ErrorBoundary>\r\n    </StrictMode>,\r\n  )\r\n  await findByText('no error')\r\n\r\n  act(() => {\r\n    setState({ value: 123 })\r\n  })\r\n  await findByText('errored')\r\n})\r\n```\r\n\r\nThis test verifies that when an error occurs inside an equality checker, the error is caught and handled gracefully by an `ErrorBoundary` component.\r\n\r\n# **Key Concepts in the Test Case**\r\n\r\n## **1\\. Zustand’s** `createWithEqualityFn`\r\n\r\nZustand allows you to define stores with custom equality functions using `createWithEqualityFn`. In this test, the initial state is defined as:\r\n\r\n```plaintext\r\nconst initialState: State = { value: 'foo' }\r\n```\r\n\r\nThe `createWithEqualityFn` function is used to create a store where the equality function is defined to compare states based on whether the `value` property is equal. In this case, the equality checker is intentionally set to throw an error when `value` is of a type other than `string`:\r\n\r\n> *You can intentionally throw errors in your test cases to ensure your code handles errors as expected.*\r\n\r\n```plaintext\r\nconst equalityFn = (a: State, b: State) =>\r\n  a.value.trim() === b.value.trim() // Throws error if 'value' is not a string\r\n```\r\n\r\nThe test case expects this equality function to fail when `value` becomes a `number`, causing the error handler to come into play.\r\n\r\n## **2\\. Custom** `ErrorBoundary` Component\r\n\r\nReact’s `ErrorBoundary` component is a common pattern used to catch JavaScript errors in a component tree, and Zustand has taken this approach to test how errors within their state management are handled. This particular test case defines a custom `ErrorBoundary` component directly inside the test. I mean, how often do you come across a test case that has the custom ErrorBoundary with in a “test case”?\r\n\r\n```plaintext\r\nclass ErrorBoundary extends ClassComponent<\r\n    { children?: ReactNode | undefined },\r\n    { hasError: boolean }\r\n  > {\r\n    constructor(props: { children?: ReactNode | undefined }) {\r\n      super(props)\r\n      this.state = { hasError: false }\r\n    }\r\n    static getDerivedStateFromError() {\r\n      return { hasError: true }\r\n    }\r\n    render() {\r\n      return this.state.hasError ? <div>errored</div> : this.props.children\r\n    }\r\n  }\r\n```\r\n\r\n**How it works:**\r\n\r\n* The component uses the lifecycle method `getDerivedStateFromError()` to catch errors and update its state (`hasError`) to `true`.\r\n    \r\n* If an error is detected, the component renders `<div>errored</div>`. Otherwise, it renders its children.\r\n    \r\n\r\nIn typical production use, `ErrorBoundary` components are created as reusable elements to catch and display errors across the application. However, embedding the `ErrorBoundary` directly inside a test case like this provides fine-grained control over error testing, allowing you to assert that the component reacts correctly when errors occur in specific parts of the application.\r\n\r\n## **3\\. Testing Error Handling with Vitest**\r\n\r\nIn this test case, Vitest is used as the testing framework. Here’s how it works with Zustand:\r\n\r\n* **Rendering the Component:** The `Component` that uses the `useBoundStore` hook is rendered inside the `ErrorBoundary` within a React `StrictMode` block. This ensures that errors inside the equality checker can be caught.\r\n    \r\n\r\n```plaintext\r\nconst { findByText } = render(\r\n    <StrictMode>\r\n      <ErrorBoundary>\r\n        <Component />\r\n      </ErrorBoundary>\r\n    </StrictMode>,\r\n  )\r\n  await findByText('no error')\r\n```\r\n\r\n* At this point, the test verifies that no error has been thrown yet and checks for the text `no error`.\r\n    \r\n* **Triggering the Error:** After the component is initially rendered without errors, the test triggers an error by updating the store’s state to a `number`:\r\n    \r\n\r\n```plaintext\r\nact(() => {   setState({ value: 123 }) })\r\n```\r\n\r\n* This causes the equality function to throw an error, as `value.trim()` is no longer valid for a `number` type.\r\n    \r\n* **Asserting the Error Handling:** Once the error is thrown, the `ErrorBoundary` catches it, and the test waits for the UI to render the `errored` message:\r\n    \r\n\r\n```plaintext\r\nawait findByText('errored')\r\n```\r\n\r\n* This assertion confirms that the error was properly caught and displayed by the `ErrorBoundary`\r\n    \r\n\r\n# **Why This Approach is Unique**\r\n\r\nWhat makes this test case particularly interesting is the use of an inline `ErrorBoundary` component within a unit test. Typically, error boundaries are part of the main React app, wrapping components in the main render tree. However, Zustand's approach to create an error boundary in the test suite itself offers a more flexible and isolated way to test how errors are handled under specific conditions.\r\n\r\nBy directly controlling the boundary within the test, Zustand ensures:\r\n\r\n1. **Granularity:** The test can focus on how errors in a particular part of the application (like the equality checker) are handled, without needing to rely on global error boundaries.\r\n    \r\n2. **Test Isolation:** The `ErrorBoundary` exists only within the scope of this test, reducing potential side effects or dependencies on the app’s broader error-handling logic.\r\n    \r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L378](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L378)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----c033d8a38aa8--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var f=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),N=(r,e)=>{for(var a in e)i(r,a,{get:e[a],enumerable:!0})},c=(r,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of m(e))!y.call(r,t)&&t!==a&&i(r,t,{get:()=>e[t],enumerable:!(s=u(e,t))||s.enumerable});return r};var b=(r,e,a)=>(a=r!=null?p(g(r)):{},c(e||!r||!r.__esModule?i(a,\"default\",{value:r,enumerable:!0}):a,r)),w=r=>c(i({},\"__esModule\",{value:!0}),r);var d=f((B,l)=>{l.exports=_jsx_runtime});var x={};N(x,{default:()=>o,frontmatter:()=>v});var n=b(d()),v={title:\"Here is how test-case in Zustand uses ErrorBoundary.\"};function h(r){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will analyze ErrorBoundary class component in \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L378\",children:\"Zustand\\u2019s test case\"}),\". Error handling is a crucial part of any React application.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*UEYQKkelOaSQQ9GPxuRHBQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"overview-of-the-test-case\",children:(0,n.jsx)(e.strong,{children:\"Overview of the Test Case\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Here\\u2019s the test case we\\u2019ll be exploring:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Picked from https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L378\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"it('can throw an error in equality checker', async () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  console.error = vi.fn()\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  type State = { value: string | number }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const initialState: State = { value: 'foo' }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const useBoundStore = createWithEqualityFn(() => initialState, Object.is)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { setState } = useBoundStore\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const selector = (s: State) => s\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const equalityFn = (a: State, b: State) =>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    // @ts-expect-error This function is supposed to throw an error\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    a.value.trim() === b.value.trim()\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  class ErrorBoundary extends ClassComponent<\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    { children?: ReactNode | undefined },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    { hasError: boolean }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  > {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    constructor(props: { children?: ReactNode | undefined }) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      super(props)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      this.state = { hasError: false }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    static getDerivedStateFromError() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return { hasError: true }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    render() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return this.state.hasError ? <div>errored</div> : this.props.children\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function Component() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    useBoundStore(selector, equalityFn)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return <div>no error</div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { findByText } = render(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <StrictMode>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <ErrorBoundary>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        <Component />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      </ErrorBoundary>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </StrictMode>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  await findByText('no error')\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  act(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    setState({ value: 123 })\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  })\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  await findByText('errored')\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"})\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This test verifies that when an error occurs inside an equality checker, the error is caught and handled gracefully by an \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"}),\" component.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"key-concepts-in-the-test-case\",children:(0,n.jsx)(e.strong,{children:\"Key Concepts in the Test Case\"})}),`\n`,(0,n.jsxs)(e.h2,{id:\"1-zustands-createwithequalityfn\",children:[(0,n.jsx)(e.strong,{children:\"1. Zustand\\u2019s\"}),\" \",(0,n.jsx)(e.code,{children:\"createWithEqualityFn\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Zustand allows you to define stores with custom equality functions using \",(0,n.jsx)(e.code,{children:\"createWithEqualityFn\"}),\". In this test, the initial state is defined as:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const initialState: State = { value: 'foo' }\"})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"createWithEqualityFn\"}),\" function is used to create a store where the equality function is defined to compare states based on whether the \",(0,n.jsx)(e.code,{children:\"value\"}),\" property is equal. In this case, the equality checker is intentionally set to throw an error when \",(0,n.jsx)(e.code,{children:\"value\"}),\" is of a type other than \",(0,n.jsx)(e.code,{children:\"string\"}),\":\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:\"You can intentionally throw errors in your test cases to ensure your code handles errors as expected.\"})}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const equalityFn = (a: State, b: State) =>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  a.value.trim() === b.value.trim() // Throws error if 'value' is not a string\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The test case expects this equality function to fail when \",(0,n.jsx)(e.code,{children:\"value\"}),\" becomes a \",(0,n.jsx)(e.code,{children:\"number\"}),\", causing the error handler to come into play.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"2-custom-errorboundary-component\",children:[(0,n.jsx)(e.strong,{children:\"2. Custom\"}),\" \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"}),\" Component\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"React\\u2019s \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"}),\" component is a common pattern used to catch JavaScript errors in a component tree, and Zustand has taken this approach to test how errors within their state management are handled. This particular test case defines a custom \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"}),\" component directly inside the test. I mean, how often do you come across a test case that has the custom ErrorBoundary with in a \\u201Ctest case\\u201D?\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"class ErrorBoundary extends ClassComponent<\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    { children?: ReactNode | undefined },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    { hasError: boolean }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  > {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    constructor(props: { children?: ReactNode | undefined }) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      super(props)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      this.state = { hasError: false }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    static getDerivedStateFromError() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return { hasError: true }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    render() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return this.state.hasError ? <div>errored</div> : this.props.children\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:\"How it works:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"The component uses the lifecycle method \",(0,n.jsx)(e.code,{children:\"getDerivedStateFromError()\"}),\" to catch errors and update its state (\",(0,n.jsx)(e.code,{children:\"hasError\"}),\") to \",(0,n.jsx)(e.code,{children:\"true\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"If an error is detected, the component renders \",(0,n.jsx)(e.code,{children:\"<div>errored</div>\"}),\". Otherwise, it renders its children.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"In typical production use, \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"}),\" components are created as reusable elements to catch and display errors across the application. However, embedding the \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"}),\" directly inside a test case like this provides fine-grained control over error testing, allowing you to assert that the component reacts correctly when errors occur in specific parts of the application.\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"3-testing-error-handling-with-vitest\",children:(0,n.jsx)(e.strong,{children:\"3. Testing Error Handling with Vitest\"})}),`\n`,(0,n.jsx)(e.p,{children:\"In this test case, Vitest is used as the testing framework. Here\\u2019s how it works with Zustand:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Rendering the Component:\"}),\" The \",(0,n.jsx)(e.code,{children:\"Component\"}),\" that uses the \",(0,n.jsx)(e.code,{children:\"useBoundStore\"}),\" hook is rendered inside the \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"}),\" within a React \",(0,n.jsx)(e.code,{children:\"StrictMode\"}),\" block. This ensures that errors inside the equality checker can be caught.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const { findByText } = render(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <StrictMode>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <ErrorBoundary>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        <Component />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      </ErrorBoundary>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </StrictMode>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  await findByText('no error')\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"At this point, the test verifies that no error has been thrown yet and checks for the text \",(0,n.jsx)(e.code,{children:\"no error\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Triggering the Error:\"}),\" After the component is initially rendered without errors, the test triggers an error by updating the store\\u2019s state to a \",(0,n.jsx)(e.code,{children:\"number\"}),\":\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"act(() => {   setState({ value: 123 }) })\"})})})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"This causes the equality function to throw an error, as \",(0,n.jsx)(e.code,{children:\"value.trim()\"}),\" is no longer valid for a \",(0,n.jsx)(e.code,{children:\"number\"}),\" type.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Asserting the Error Handling:\"}),\" Once the error is thrown, the \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"}),\" catches it, and the test waits for the UI to render the \",(0,n.jsx)(e.code,{children:\"errored\"}),\" message:\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"await findByText('errored')\"})})})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"This assertion confirms that the error was properly caught and displayed by the \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"})]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"why-this-approach-is-unique\",children:(0,n.jsx)(e.strong,{children:\"Why This Approach is Unique\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"What makes this test case particularly interesting is the use of an inline \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"}),\" component within a unit test. Typically, error boundaries are part of the main React app, wrapping components in the main render tree. However, Zustand's approach to create an error boundary in the test suite itself offers a more flexible and isolated way to test how errors are handled under specific conditions.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"By directly controlling the boundary within the test, Zustand ensures:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Granularity:\"}),\" The test can focus on how errors in a particular part of the application (like the equality checker) are handled, without needing to rely on global error boundaries.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Test Isolation:\"}),\" The \",(0,n.jsx)(e.code,{children:\"ErrorBoundary\"}),\" exists only within the scope of this test, reducing potential side effects or dependencies on the app\\u2019s broader error-handling logic.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L378\",children:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L378\"})}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----c033d8a38aa8--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function o(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(h,{...r})}):h(r)}return w(x);})();\n;return Component;"
        },
        "_id": "blog/Here-how-zustand-test.mdx",
        "_raw": {
          "sourceFilePath": "blog/Here-how-zustand-test.mdx",
          "sourceFileName": "Here-how-zustand-test.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Here-how-zustand-test"
        },
        "type": "Doc",
        "slug": "/blog/Here-how-zustand-test",
        "slugAsParams": "Here-how-zustand-test"
      },
      "documentHash": "1740489186199",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/hookable-package-in-unbuild.mdx": {
      "document": {
        "title": "Hookable package in unbuild source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nFor this week, I have been reading [unbuild](https://github.com/unjs/unbuild) source code and found few packages that I have never seen before or used. I wanted to share some interesting packages that are used in these OSS projects so we can learn a thing or two ;)\r\n\r\nThe following are discussed in this article:\r\n\r\n1. What is hookable?\r\n    \r\n2. Hookable’s usage in unbuild\r\n    \r\n\r\n### What is hookable?\r\n\r\nHookable is a package built by [authors at Unjs](https://github.com/unjs). Unjs provides JS tools, libraries and has about 63 npm packages and [421m downloads per month](https://unjs.io/packages?q=&order=1&orderBy=title). Sheesh, that’s a lot.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*d8woH8hDsiZShDCV5fPm6g.png align=\"left\")\r\n\r\n[Hookable repository](https://github.com/unjs/hookable) has this description “Awaitable Hooks”.\r\n\r\nThis package is straightforward to use:\r\n\r\n#### Install\r\n\r\n```plaintext\r\nnpm install hookable\r\n```\r\n\r\n#### Usage\r\n\r\n```plaintext\r\n// Method A:\r\nimport { createHooks } from 'hookable'\r\n\r\n// Create a hookable instance\r\nconst hooks = createHooks()\r\n\r\n// Hook on 'hello'\r\nhooks.hook('hello', () => { console.log('Hello World' )})\r\n\r\n// Call 'hello' hook\r\nhooks.callHook('hello')\r\n```\r\n\r\nBasically, you create a hook with a callback and call these hooks somewhere else in your codebase to trigger this callback. Let’s what sort of hooks are found in unbuild source code.\r\n\r\n### Hookable’s usage in unbuild\r\n\r\n#### Initializing hookable\r\n\r\n[At line 182 in build.ts](https://github.com/unjs/unbuild/blob/main/src/build.ts#L182), you will find the below code:\r\n\r\n```plaintext\r\n// Build context\r\n  const ctx: BuildContext = {\r\n    options,\r\n    jiti,\r\n    warnings: new Set(),\r\n    pkg,\r\n    buildEntries: [],\r\n    usedImports: new Set(),\r\n    hooks: createHooks(),\r\n  };\r\n```\r\n\r\n#### Register hooks\r\n\r\n[At the line 185 in build.ts](https://github.com/unjs/unbuild/blob/main/src/build.ts#L185), you will find the below code:\r\n\r\n```plaintext\r\n// Register hooks\r\n  if (preset.hooks) {\r\n    ctx.hooks.addHooks(preset.hooks);\r\n  }\r\n  if (inputConfig.hooks) {\r\n    ctx.hooks.addHooks(inputConfig.hooks);\r\n  }\r\n  if (buildConfig.hooks) {\r\n    ctx.hooks.addHooks(buildConfig.hooks);\r\n  }\r\n```\r\n\r\n#### Calling the hooks\r\n\r\nI[n build.ts](https://github.com/unjs/unbuild/blob/main/src/build.ts#L197), you will find the below code used to call registered hooks:\r\n\r\n```plaintext\r\n// Allow prepare and extending context\r\nawait ctx.hooks.callHook(\"build:prepare\", ctx);\r\n// Call build:before\r\nawait ctx.hooks.callHook(\"build:before\", ctx);\r\n// Skip rest for stub and watch mode\r\nif (options.stub || options.watch) {\r\n  await ctx.hooks.callHook(\"build:done\", ctx);\r\n  return;\r\n}\r\n// Call build:done\r\nawait ctx.hooks.callHook(\"build:done\", ctx);\r\n```\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L182](https://github.com/unjs/unbuild/blob/main/src/build.ts#L182)\r\n    \r\n2. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L193](https://github.com/unjs/unbuild/blob/main/src/build.ts#L193)\r\n    \r\n3. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L197](https://github.com/unjs/unbuild/blob/main/src/build.ts#L197)\r\n    \r\n4. [https://www.npmjs.com/package/hookable](https://www.npmjs.com/package/hookable)[https://github.com/unjs/unbuild/blob/main/src/build.ts#L93](https://github.com/unjs/unbuild/blob/main/src/build.ts#L93)",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var k=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),f=(a,n)=>{for(var i in n)s(a,i,{get:n[i],enumerable:!0})},h=(a,n,i,t)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let l of m(n))!g.call(a,l)&&l!==i&&s(a,l,{get:()=>n[l],enumerable:!(t=u(n,l))||t.enumerable});return a};var w=(a,n,i)=>(i=a!=null?p(b(a)):{},h(n||!a||!a.__esModule?s(i,\"default\",{value:a,enumerable:!0}):i,a)),N=a=>h(s({},\"__esModule\",{value:!0}),a);var r=k((H,c)=>{c.exports=_jsx_runtime});var j={};f(j,{default:()=>o,frontmatter:()=>x});var e=w(r()),x={title:\"Hookable package in unbuild source\\xA0code.\"};function d(a){let n={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"For this week, I have been reading \",(0,e.jsx)(n.a,{href:\"https://github.com/unjs/unbuild\",children:\"unbuild\"}),\" source code and found few packages that I have never seen before or used. I wanted to share some interesting packages that are used in these OSS projects so we can learn a thing or two\\xA0;)\"]}),`\n`,(0,e.jsx)(n.p,{children:\"The following are discussed in this article:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"What is hookable?\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Hookable\\u2019s usage in unbuild\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{id:\"what-is-hookable\",children:\"What is hookable?\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Hookable is a package built by \",(0,e.jsx)(n.a,{href:\"https://github.com/unjs\",children:\"authors at Unjs\"}),\". Unjs provides JS tools, libraries and has about 63 npm packages and \",(0,e.jsx)(n.a,{href:\"https://unjs.io/packages?q=&order=1&orderBy=title\",children:\"421m downloads per month\"}),\". Sheesh, that\\u2019s a lot.\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"![](\",(0,e.jsx)(n.a,{href:\"https://cdn-images-1.medium.com/max/1600/1*d8woH8hDsiZShDCV5fPm6g.png\",children:\"https://cdn-images-1.medium.com/max/1600/1*d8woH8hDsiZShDCV5fPm6g.png\"}),' align=\"left\")']}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/unjs/hookable\",children:\"Hookable repository\"}),\" has this description \\u201CAwaitable Hooks\\u201D.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"This package is straightforward to use:\"}),`\n`,(0,e.jsx)(n.h4,{id:\"install\",children:\"Install\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsx)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"npm install hookable\"})})})})}),`\n`,(0,e.jsx)(n.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Method A:\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"import { createHooks } from 'hookable'\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Create a hookable instance\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const hooks = createHooks()\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Hook on 'hello'\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"hooks.hook('hello', () => { console.log('Hello World' )})\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Call 'hello' hook\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"hooks.callHook('hello')\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"Basically, you create a hook with a callback and call these hooks somewhere else in your codebase to trigger this callback. Let\\u2019s what sort of hooks are found in unbuild source code.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"hookables-usage-inunbuild\",children:\"Hookable\\u2019s usage in\\xA0unbuild\"}),`\n`,(0,e.jsx)(n.h4,{id:\"initializing-hookable\",children:\"Initializing hookable\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L182\",children:\"At line 182 in build.ts\"}),\", you will find the below code:\"]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Build context\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const ctx: BuildContext = {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    options,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    jiti,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    warnings: new Set(),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    pkg,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    buildEntries: [],\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    usedImports: new Set(),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    hooks: createHooks(),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  };\"})})]})})}),`\n`,(0,e.jsx)(n.h4,{id:\"register-hooks\",children:\"Register hooks\"}),`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L185\",children:\"At the line 185 in build.ts\"}),\", you will find the below code:\"]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Register hooks\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  if (preset.hooks) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    ctx.hooks.addHooks(preset.hooks);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  if (inputConfig.hooks) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    ctx.hooks.addHooks(inputConfig.hooks);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  if (buildConfig.hooks) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    ctx.hooks.addHooks(buildConfig.hooks);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})})]})})}),`\n`,(0,e.jsx)(n.h4,{id:\"calling-thehooks\",children:\"Calling the\\xA0hooks\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"I\",(0,e.jsx)(n.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L197\",children:\"n build.ts\"}),\", you will find the below code used to call registered hooks:\"]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Allow prepare and extending context\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'await ctx.hooks.callHook(\"build:prepare\", ctx);'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Call build:before\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'await ctx.hooks.callHook(\"build:before\", ctx);'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Skip rest for stub and watch mode\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"if (options.stub || options.watch) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'  await ctx.hooks.callHook(\"build:done\", ctx);'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  return;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Call build:done\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'await ctx.hooks.callHook(\"build:done\", ctx);'})})]})})}),`\n`,(0,e.jsx)(n.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,e.jsx)(n.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.em,{children:(0,e.jsxs)(n.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(n.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(n.h3,{id:\"references\",children:\"References\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L182\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L182\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L193\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L193\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L197\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L197\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/hookable\",children:\"https://www.npmjs.com/package/hookable\"}),(0,e.jsx)(n.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\"})]}),`\n`]}),`\n`]})]})}function o(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(d,{...a})}):d(a)}return N(j);})();\n;return Component;"
        },
        "_id": "blog/hookable-package-in-unbuild.mdx",
        "_raw": {
          "sourceFilePath": "blog/hookable-package-in-unbuild.mdx",
          "sourceFileName": "hookable-package-in-unbuild.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/hookable-package-in-unbuild"
        },
        "type": "Doc",
        "slug": "/blog/hookable-package-in-unbuild",
        "slugAsParams": "hookable-package-in-unbuild"
      },
      "documentHash": "1740489186317",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/How-Shadcn-CLI-uses.mdx": {
      "document": {
        "title": "How Shadcn CLI uses error constants to improve code readability\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze how a file named [error.ts](https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts) is used across the shadcn/ui code base.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*O1GAhUUbgxAOetFrCt9yTQ.png)\r\n\r\n# **utils/errors.ts**\r\n\r\n`error.ts` contains 12 variables:\r\n\r\n```plaintext\r\nexport const MISSING_DIR_OR_EMPTY_PROJECT = \"1\"\r\nexport const EXISTING_CONFIG = \"2\"\r\nexport const MISSING_CONFIG = \"3\"\r\nexport const FAILED_CONFIG_READ = \"4\"\r\nexport const TAILWIND_NOT_CONFIGURED = \"5\"\r\nexport const IMPORT_ALIAS_MISSING = \"6\"\r\nexport const UNSUPPORTED_FRAMEWORK = \"7\"\r\nexport const COMPONENT_URL_NOT_FOUND = \"8\"\r\nexport const COMPONENT_URL_UNAUTHORIZED = \"9\"\r\nexport const COMPONENT_URL_FORBIDDEN = \"10\"\r\nexport const COMPONENT_URL_BAD_REQUEST = \"11\"\r\nexport const COMPONENT_URL_INTERNAL_SERVER_ERROR = \"12\"\r\n```\r\n\r\nThese are descriptive and explain the kind of error being handled, for example, MISSING\\_DIR\\_OR\\_EMPTY\\_PROJECT is likely used in a scenario where there is missing directory or empty project.\r\n\r\nIs there any special meaning to these variable values? they are just numbers assigned as strings. It makes more sense once we understand how these variables are used.\r\n\r\n# **Usage in preflight-init.ts:**\r\n\r\nIf you open this [preflight-init.ts](https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22), you will find the below code snippet in there.\r\n\r\n```plaintext\r\n// Ensure target directory exists.\r\n // Check for empty project. We assume if no package.json exists, the project is empty.\r\n if (\r\n   !fs.existsSync(options.cwd) ||\r\n   !fs.existsSync(path.resolve(options.cwd, \"package.json\"))\r\n ) {\r\n   errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\r\n   return {\r\n     errors,\r\n     projectInfo: null,\r\n   }\r\n }\r\n```\r\n\r\nPay attention to this `errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]=true`, here errors is an object. What’s the value of MISSING\\_DIR\\_OR\\_EMPTY\\_PROJECT? it was “1” as explained earlier.\r\n\r\nThis mean errors object would look like below:\r\n\r\n```plaintext\r\n{\r\n \"1\": true\r\n}\r\n```\r\n\r\nThis is fine, but how’s this error object used and where? The answer is in [init.ts](https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91).\r\n\r\n# **errors object in init.ts**\r\n\r\nAt line 91, in [init.ts](https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91), you will find the below `if` block.\r\n\r\n```plaintext\r\nif (preflight.errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\r\n \r\n const { projectPath } = await createProject(options)\r\n \r\n if (!projectPath) {\r\n   process.exit(1)\r\n }\r\n \r\n  options.cwd = projectPath\r\n options.isNewProject = true\r\n}\r\n```\r\n\r\nif this check was something like preflight.error\\[“1”\\], your next thought immediately is what’s this mysterious value here. This means, these constants in error.ts are used to improve code readability\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22](https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22)\r\n    \r\n2. [https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts](https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts)\r\n    \r\n3. [https://github.com/search?q=repo%3Ashadcn-ui%2Fui%20ERRORS&type=code](https://github.com/search?q=repo%3Ashadcn-ui%2Fui+ERRORS&type=code)\r\n    \r\n4. https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91\r\n",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var i in e)r(a,i,{get:e[i],enumerable:!0})},c=(a,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of u(e))!b.call(a,s)&&s!==i&&r(a,s,{get:()=>e[s],enumerable:!(t=m(e,s))||t.enumerable});return a};var R=(a,e,i)=>(i=a!=null?p(g(a)):{},c(e||!a||!a.__esModule?r(i,\"default\",{value:a,enumerable:!0}):i,a)),_=a=>c(r({},\"__esModule\",{value:!0}),a);var l=N((x,h)=>{h.exports=_jsx_runtime});var O={};f(O,{default:()=>o,frontmatter:()=>I});var n=R(l()),I={title:\"How Shadcn CLI uses error constants to improve code readability\"};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze how a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts\",children:\"error.ts\"}),\" is used across the shadcn/ui code base.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*O1GAhUUbgxAOetFrCt9yTQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"utilserrorsts\",children:(0,n.jsx)(e.strong,{children:\"utils/errors.ts\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"error.ts\"}),\" contains 12 variables:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const MISSING_DIR_OR_EMPTY_PROJECT = \"1\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const EXISTING_CONFIG = \"2\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const MISSING_CONFIG = \"3\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const FAILED_CONFIG_READ = \"4\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const TAILWIND_NOT_CONFIGURED = \"5\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const IMPORT_ALIAS_MISSING = \"6\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const UNSUPPORTED_FRAMEWORK = \"7\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const COMPONENT_URL_NOT_FOUND = \"8\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const COMPONENT_URL_UNAUTHORIZED = \"9\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const COMPONENT_URL_FORBIDDEN = \"10\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const COMPONENT_URL_BAD_REQUEST = \"11\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'export const COMPONENT_URL_INTERNAL_SERVER_ERROR = \"12\"'})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"These are descriptive and explain the kind of error being handled, for example, MISSING_DIR_OR_EMPTY_PROJECT is likely used in a scenario where there is missing directory or empty project.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Is there any special meaning to these variable values? they are just numbers assigned as strings. It makes more sense once we understand how these variables are used.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"usage-in-preflight-initts\",children:(0,n.jsx)(e.strong,{children:\"Usage in preflight-init.ts:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you open this \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22\",children:\"preflight-init.ts\"}),\", you will find the below code snippet in there.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Ensure target directory exists.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Check for empty project. We assume if no package.json exists, the project is empty.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   !fs.existsSync(options.cwd) ||\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'   !fs.existsSync(path.resolve(options.cwd, \"package.json\"))'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT] = true\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   return {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     errors,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     projectInfo: null,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Pay attention to this \",(0,n.jsx)(e.code,{children:\"errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]=true\"}),\", here errors is an object. What\\u2019s the value of MISSING_DIR_OR_EMPTY_PROJECT? it was \\u201C1\\u201D as explained earlier.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"This mean errors object would look like below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"1\": true'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This is fine, but how\\u2019s this error object used and where? The answer is in \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91\",children:\"init.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"errors-object-in-initts\",children:(0,n.jsx)(e.strong,{children:\"errors object in init.ts\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"At line 91, in \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91\",children:\"init.ts\"}),\", you will find the below \",(0,n.jsx)(e.code,{children:\"if\"}),\" block.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (preflight.errors[ERRORS.MISSING_DIR_OR_EMPTY_PROJECT]) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const { projectPath } = await createProject(options)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (!projectPath) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   process.exit(1)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  options.cwd = projectPath\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" options.isNewProject = true\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"if this check was something like preflight.error[\\u201C1\\u201D], your next thought immediately is what\\u2019s this mysterious value here. This means, these constants in error.ts are used to improve code readability\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22\",children:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/preflights/preflight-init.ts#L22\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts\",children:\"https://github.com/shadcn-ui/ui/blob/main/packages/shadcn/src/utils/errors.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Ashadcn-ui%2Fui+ERRORS&type=code\",children:\"https://github.com/search?q=repo%3Ashadcn-ui%2Fui%20ERRORS&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91\",children:\"https://github.com/shadcn-ui/ui/blob/1297abc8820480681ccec1bb026b29b30d9c858d/packages/shadcn/src/commands/init.ts#L91\"})}),`\n`]}),`\n`]})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return _(O);})();\n;return Component;"
        },
        "_id": "blog/How-Shadcn-CLI-uses.mdx",
        "_raw": {
          "sourceFilePath": "blog/How-Shadcn-CLI-uses.mdx",
          "sourceFileName": "How-Shadcn-CLI-uses.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/How-Shadcn-CLI-uses"
        },
        "type": "Doc",
        "slug": "/blog/How-Shadcn-CLI-uses",
        "slugAsParams": "How-Shadcn-CLI-uses"
      },
      "documentHash": "1740489186201",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/How-Tailwind-CSS-detects.mdx": {
      "document": {
        "title": "How Tailwind CSS detects circular dependancy.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\n![](https://miro.medium.com/v2/resize:fit:875/1*VThlmyxd0bN028srx1jlVg.png)\r\n\r\nIn this article, we analyze error thrown in [substituteAtApply](https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/apply.ts). This error is about circular dependency detected.\r\n\r\n```plaintext\r\nwalk(rule.nodes, (child) => {\r\n  if (child !== node) return\r\n  throw new Error(\r\n   `You cannot \\`@apply\\` the \\`${candidate}\\` utility here because it creates a circular dependency.`,\r\n   )\r\n})\r\n```\r\n\r\nThis is a high level overview of the code around this error.\r\n\r\n## **walk — recursive function:**\r\n\r\nLet’s begin with [walk](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/ast.ts#L70):\r\n\r\n```plaintext\r\nexport function walk(\r\n   ast: AstNode[],\r\n   visit: (\r\n     node: AstNode,\r\n     utils: {\r\n     parent: AstNode | null\r\n     replaceWith(newNode: AstNode | AstNode[]): void\r\n     context: Record<string, string>\r\n   },\r\n ) => void | WalkAction,\r\n parent: AstNode | null = null,\r\n context: Record<string, string> = {},\r\n) {\r\n for (let i = 0; i < ast.length; i++) {\r\n   let node = ast[i]\r\n  // We want context nodes to be transparent in walks. This means that\r\n   // whenever we encounter one, we immediately walk through its children and\r\n   // furthermore we also don't update the parent.\r\n if (node.kind === 'context') {\r\n   walk(node.nodes, visit, parent, { …context, …node.context })\r\n   continue\r\n }\r\nlet status = visit(node, {\r\n   parent,\r\n   replaceWith(newNode) {\r\n   ast.splice(i, 1, …(Array.isArray(newNode) ? newNode : [newNode]))\r\n   // We want to visit the newly replaced node(s), which start at the\r\n   // current index (i). By decrementing the index here, the next loop\r\n   // will process this position (containing the replaced node) again.\r\n   i - \r\n },\r\n context,\r\n }) ?? WalkAction.Continue\r\n  // Stop the walk entirely\r\n   if (status === WalkAction.Stop) return\r\n  // Skip visiting the children of this node\r\n   if (status === WalkAction.Skip) continue\r\n  if (node.kind === 'rule') {\r\n   walk(node.nodes, visit, node, context)\r\n   }\r\n }\r\n}\r\n```\r\n\r\nwalk is a recursive function located in [ast.ts](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/ast.ts#L70C1-L118C1).\r\n\r\nIt calls itself recursively when `node.kind === ‘context’` or when `node.kind === ‘rule’`, breaking condition is based on status\r\n\r\n```plaintext\r\n// Stop the walk entirely\r\nif (status === WalkAction.Stop) return\r\n// Skip visiting the children of this node\r\nif (status === WalkAction.Skip) continue\r\n```\r\n\r\nNow let’s zoom out a bit and study the code in the vicinity of walk function in [apply.ts](https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/apply.ts)\r\n\r\n```plaintext\r\n// Verify that we don't have any circular dependencies by verifying that\r\n// the current node does not appear in the new nodes.\r\nwalk(newNodes, (child) => {\r\n if (child !== node) return\r\n  // At this point we already know that we have a circular dependency.\r\n  //\r\n  // Figure out which candidate caused the circular dependency. This will\r\n // help to create a useful error message for the end user.\r\n for (let candidate of candidates) {\r\n   let selector = `.${escape(candidate)}`\r\n    for (let rule of candidateAst) {\r\n     if (rule.kind !== 'rule') continue\r\n     if (rule.selector !== selector) continue\r\n      walk(rule.nodes, (child) => {\r\n     if (child !== node) return\r\n      throw new Error(\r\n       `You cannot \\`@apply\\` the \\`${candidate}\\` utility here because it creates a circular dependency.`,\r\n       )\r\n     })\r\n    }\r\n }\r\n})\r\n```\r\n\r\nTailwindCSS authors have added explaining comments across the codebase where required or it makes sense to provide additional context  \r\nwith comments.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/ast.ts#L70](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/ast.ts#L70)\r\n    \r\n2. [https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/apply.ts](https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/apply.ts)\r\n    \r\n3. [https://stackoverflow.com/questions/71669246/need-help-using-apply-directive-in-tailwind-css](https://stackoverflow.com/questions/71669246/need-help-using-apply-directive-in-tailwind-css)\r\n    \r\n4. https://github.com/tailwindlabs/tailwindcss/issues/2807\r\n",
          "code": "var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var N=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),f=(a,n)=>{for(var i in n)l(a,i,{get:n[i],enumerable:!0})},t=(a,n,i,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let s of u(n))!g.call(a,s)&&s!==i&&l(a,s,{get:()=>n[s],enumerable:!(c=m(n,s))||c.enumerable});return a};var b=(a,n,i)=>(i=a!=null?o(w(a)):{},t(n||!a||!a.__esModule?l(i,\"default\",{value:a,enumerable:!0}):i,a)),k=a=>t(l({},\"__esModule\",{value:!0}),a);var d=N((A,r)=>{r.exports=_jsx_runtime});var x={};f(x,{default:()=>p,frontmatter:()=>y});var e=b(d()),y={title:\"How Tailwind CSS detects circular dependancy.\"};function h(a){let n={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*VThlmyxd0bN028srx1jlVg.png\",alt:\"\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"In this article, we analyze error thrown in \",(0,e.jsx)(n.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/apply.ts\",children:\"substituteAtApply\"}),\". This error is about circular dependency detected.\"]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"walk(rule.nodes, (child) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  if (child !== node) return\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  throw new Error(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   `You cannot \\\\`@apply\\\\` the \\\\`${candidate}\\\\` utility here because it creates a circular dependency.`,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   )\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"})\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"This is a high level overview of the code around this error.\"}),`\n`,(0,e.jsx)(n.h2,{id:\"walk--recursive-function\",children:(0,e.jsx)(n.strong,{children:\"walk \\u2014 recursive function:\"})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Let\\u2019s begin with \",(0,e.jsx)(n.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/ast.ts#L70\",children:\"walk\"}),\":\"]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"export function walk(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   ast: AstNode[],\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   visit: (\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"     node: AstNode,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"     utils: {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"     parent: AstNode | null\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"     replaceWith(newNode: AstNode | AstNode[]): void\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"     context: Record<string, string>\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" ) => void | WalkAction,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" parent: AstNode | null = null,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" context: Record<string, string> = {},\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\") {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" for (let i = 0; i < ast.length; i++) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   let node = ast[i]\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  // We want context nodes to be transparent in walks. This means that\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   // whenever we encounter one, we immediately walk through its children and\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   // furthermore we also don't update the parent.\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" if (node.kind === 'context') {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   walk(node.nodes, visit, parent, { \\u2026context, \\u2026node.context })\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   continue\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"let status = visit(node, {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   parent,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   replaceWith(newNode) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   ast.splice(i, 1, \\u2026(Array.isArray(newNode) ? newNode : [newNode]))\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   // We want to visit the newly replaced node(s), which start at the\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   // current index (i). By decrementing the index here, the next loop\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   // will process this position (containing the replaced node) again.\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   i - \"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" context,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" }) ?? WalkAction.Continue\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  // Stop the walk entirely\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   if (status === WalkAction.Stop) return\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  // Skip visiting the children of this node\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   if (status === WalkAction.Skip) continue\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  if (node.kind === 'rule') {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   walk(node.nodes, visit, node, context)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"walk is a recursive function located in \",(0,e.jsx)(n.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/ast.ts#L70C1-L118C1\",children:\"ast.ts\"}),\".\"]}),`\n`,(0,e.jsxs)(n.p,{children:[\"It calls itself recursively when \",(0,e.jsx)(n.code,{children:\"node.kind === \\u2018context\\u2019\"}),\" or when \",(0,e.jsx)(n.code,{children:\"node.kind === \\u2018rule\\u2019\"}),\", breaking condition is based on status\"]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Stop the walk entirely\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"if (status === WalkAction.Stop) return\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Skip visiting the children of this node\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"if (status === WalkAction.Skip) continue\"})})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"Now let\\u2019s zoom out a bit and study the code in the vicinity of walk function in \",(0,e.jsx)(n.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/apply.ts\",children:\"apply.ts\"})]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// Verify that we don't have any circular dependencies by verifying that\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// the current node does not appear in the new nodes.\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"walk(newNodes, (child) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" if (child !== node) return\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  // At this point we already know that we have a circular dependency.\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  //\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  // Figure out which candidate caused the circular dependency. This will\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" // help to create a useful error message for the end user.\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" for (let candidate of candidates) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"   let selector = `.${escape(candidate)}`\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    for (let rule of candidateAst) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"     if (rule.kind !== 'rule') continue\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"     if (rule.selector !== selector) continue\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      walk(rule.nodes, (child) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"     if (child !== node) return\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      throw new Error(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"       `You cannot \\\\`@apply\\\\` the \\\\`${candidate}\\\\` utility here because it creates a circular dependency.`,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"       )\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"     })\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\" }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"})\"})})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"TailwindCSS authors have added explaining comments across the codebase where required or it makes sense to provide additional context\",(0,e.jsx)(n.br,{}),`\n`,\"with comments.\"]}),`\n`,(0,e.jsx)(n.h1,{id:\"about-me\",children:(0,e.jsx)(n.strong,{children:\"About me:\"})}),`\n`,(0,e.jsx)(n.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(n.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Github \\u2014 \",(0,e.jsx)(n.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My website \\u2014 \",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Youtube channel \\u2014 \",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Learning platform \\u2014 \",(0,e.jsx)(n.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Codebase Architecture \\u2014 \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Best practices \\u2014 \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Production-grade projects \\u2014 \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(n.h1,{id:\"references\",children:(0,e.jsx)(n.strong,{children:\"References:\"})}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/ast.ts#L70\",children:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/ast.ts#L70\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/apply.ts\",children:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/apply.ts\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://stackoverflow.com/questions/71669246/need-help-using-apply-directive-in-tailwind-css\",children:\"https://stackoverflow.com/questions/71669246/need-help-using-apply-directive-in-tailwind-css\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/tailwindlabs/tailwindcss/issues/2807\",children:\"https://github.com/tailwindlabs/tailwindcss/issues/2807\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(h,{...a})}):h(a)}return k(x);})();\n;return Component;"
        },
        "_id": "blog/How-Tailwind-CSS-detects.mdx",
        "_raw": {
          "sourceFilePath": "blog/How-Tailwind-CSS-detects.mdx",
          "sourceFileName": "How-Tailwind-CSS-detects.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/How-Tailwind-CSS-detects"
        },
        "type": "Doc",
        "slug": "/blog/How-Tailwind-CSS-detects",
        "slugAsParams": "How-Tailwind-CSS-detects"
      },
      "documentHash": "1740489186202",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/how-to-check-nodeversion.mdx": {
      "document": {
        "title": "How to check node version programmatically?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "There’s a function named [checkNodeVersion()](https://github.com/umijs/father/blob/master/src/cli/cli.ts#L17) in [father/src/cli/cli.ts](https://github.com/umijs/father/blob/master/src/cli/cli.ts#L17).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*6yQakQPyiNMo7cEfnESLoQ.png)\r\n\r\nThis cli file has a function named run and in there, it calls a series of functions:\r\n\r\n```javascript\r\nexport async function run(_opts?: IOpts) {\r\n  checkNodeVersion();\r\n  checkLocal();\r\n  setNodeTitle();\r\n  setNoDeprecation();\r\n  ...\r\n}\r\n```\r\n\r\n* checkNodeVersion\r\n    \r\n* checkLocal\r\n    \r\n* setNodeTitle\r\n    \r\n* setNoDepreciation\r\n    \r\n\r\nWe are interested in [checkNodeVersion](https://github.com/umijs/father/blob/master/src/cli/cli.ts#L17)()\r\n\r\n# **checkNodeVersion**\r\n\r\ncheckNodeVersion is defined in [cli/node.ts](https://github.com/umijs/father/blob/master/src/cli/node.ts#L6)\r\n\r\n```javascript\r\nexport function checkVersion() {\r\n  const v = parseInt(process.version.slice(1));\r\n  if (v < MIN_NODE_VERSION || v === 15 || v === 17) {\r\n    logger.error(\r\n      `Your node version ${v} is not supported, please upgrade to ${MIN_NODE_VERSION} or above except 15 or 17.`,\r\n    );\r\n    process.exit(1);\r\n  }\r\n}\r\n```\r\n\r\nYou can get the current node version using this method — `process.version.slice(1)`\r\n\r\nIn this function, there’s a side-effect. process exits if the node version does not meet the criteria defined in the if block.\r\n\r\nlogger.error logs the error message when the node version is not supported.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/umijs/father/blob/master/src/cli/node.ts#L6](https://github.com/umijs/father/blob/master/src/cli/node.ts#L6)\r\n    \r\n2. [https://github.com/umijs/father/blob/master/src/cli/cli.ts#L17](https://github.com/umijs/father/blob/master/src/cli/cli.ts#L17)",
          "code": "var Component=(()=>{var F=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),f=(r,e)=>{for(var l in e)s(r,l,{get:e[l],enumerable:!0})},o=(r,e,l,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of m(e))!u.call(r,c)&&c!==l&&s(r,c,{get:()=>e[c],enumerable:!(t=p(e,c))||t.enumerable});return r};var b=(r,e,l)=>(l=r!=null?F(y(r)):{},o(e||!r||!r.__esModule?s(l,\"default\",{value:r,enumerable:!0}):l,r)),N=r=>o(s({},\"__esModule\",{value:!0}),r);var a=g((x,i)=>{i.exports=_jsx_runtime});var v={};f(v,{default:()=>d,frontmatter:()=>k});var n=b(a()),k={title:\"How to check node version programmatically?\"};function h(r){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"There\\u2019s a function named \",(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/cli/cli.ts#L17\",children:\"checkNodeVersion()\"}),\" in \",(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/cli/cli.ts#L17\",children:\"father/src/cli/cli.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*6yQakQPyiNMo7cEfnESLoQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"This cli file has a function named run and in there, it calls a series of functions:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" run\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"_opts\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" IOpts\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  checkNodeVersion\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  checkLocal\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  setNodeTitle\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  setNoDeprecation\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"checkNodeVersion\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"checkLocal\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"setNodeTitle\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"setNoDepreciation\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"We are interested in \",(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/cli/cli.ts#L17\",children:\"checkNodeVersion\"}),\"()\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"checknodeversion\",children:(0,n.jsx)(e.strong,{children:\"checkNodeVersion\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"checkNodeVersion is defined in \",(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/cli/node.ts#L6\",children:\"cli/node.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" checkVersion\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" v \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" parseInt\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"version\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"slice\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(1));\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"v \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" MIN_NODE_VERSION \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"||\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" v \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 15\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" v \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 17)\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    logger\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      `Your node version ${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"v\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"} is not supported, please upgrade to ${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"MIN_NODE_VERSION\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"} or above except 15 or 17.`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    );\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    process\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"exit\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(1);\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can get the current node version using this method \\u2014 \",(0,n.jsx)(e.code,{children:\"process.version.slice(1)\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"In this function, there\\u2019s a side-effect. process exits if the node version does not meet the criteria defined in the if block.\"}),`\n`,(0,n.jsx)(e.p,{children:\"logger.error logs the error message when the node version is not supported.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/cli/node.ts#L6\",children:\"https://github.com/umijs/father/blob/master/src/cli/node.ts#L6\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/cli/cli.ts#L17\",children:\"https://github.com/umijs/father/blob/master/src/cli/cli.ts#L17\"})}),`\n`]}),`\n`]})]})}function d(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(h,{...r})}):h(r)}return N(v);})();\n;return Component;"
        },
        "_id": "blog/how-to-check-nodeversion.mdx",
        "_raw": {
          "sourceFilePath": "blog/how-to-check-nodeversion.mdx",
          "sourceFileName": "how-to-check-nodeversion.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/how-to-check-nodeversion"
        },
        "type": "Doc",
        "slug": "/blog/how-to-check-nodeversion",
        "slugAsParams": "how-to-check-nodeversion"
      },
      "documentHash": "1740489186318",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/How-to-destroy-Preact.mdx": {
      "document": {
        "title": "How to destroy Preact node?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we review a [code snippet from react-scan codebase](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67) shown below.\r\n\r\n```plaintext\r\ncontainer.remove = () => {\r\n    window.__REACT_SCAN_TOOLBAR_CONTAINER__ = undefined;\r\n\r\n    if (container.hasChildNodes()) {\r\n      // Double render(null) is needed to fully unmount Preact components.\r\n      // The first call initiates unmounting, while the second ensures\r\n      // cleanup of internal VNode references and event listeners.\r\n      render(null, container);\r\n      render(null, container);\r\n    }\r\n\r\n    originalRemove();\r\n  };\r\n```\r\n\r\nThis code snippet is picked from [packages/scan/src/web/toolbar.tsx](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67). If you have noticed, render is called twice.\r\n\r\n```plaintext\r\nrender(null, container);\r\nrender(null, container);\r\n```\r\n\r\nBut first, we need to know what happens when you call render with null.\r\n\r\n### Unmount Preact components\r\n\r\nYou can unmount/destroy Preact node using render with null and a container.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*93okNIiaUs-mHtUim2EUiA.png)\r\n\r\nThis image is a [Stackoverflow answer](https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node).\r\n\r\n### Toolbar node\r\n\r\nComing back to the code snippet shared above, Toolbar uses Preact to render its components but before doing so, previously rendered DOM nodes are removed. \r\n\r\n```plaintext\r\nif (container.hasChildNodes()) {\r\n  // Double render(null) is needed to fully unmount Preact components.\r\n  // The first call initiates unmounting, while the second ensures\r\n  // cleanup of internal VNode references and event listeners.\r\n  render(null, container);\r\n  render(null, container);\r\n}\r\n```\r\n\r\nWhat’s so special about this? it is called twice and the comment above describes why render is called twice.\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67)\r\n    \r\n2. [https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node](https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node)",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),w=(a,e)=>{for(var t in e)i(a,t,{get:e[t],enumerable:!0})},s=(a,e,t,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!b.call(a,r)&&r!==t&&i(a,r,{get:()=>e[r],enumerable:!(c=m(e,r))||c.enumerable});return a};var N=(a,e,t)=>(t=a!=null?p(g(a)):{},s(e||!a||!a.__esModule?i(t,\"default\",{value:a,enumerable:!0}):t,a)),y=a=>s(i({},\"__esModule\",{value:!0}),a);var o=f((_,l)=>{l.exports=_jsx_runtime});var x={};w(x,{default:()=>h,frontmatter:()=>k});var n=N(o()),k={title:\"How to destroy Preact\\xA0node?\"};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we review a \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67\",children:\"code snippet from react-scan codebase\"}),\" shown below.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"container.remove = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    window.__REACT_SCAN_TOOLBAR_CONTAINER__ = undefined;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    if (container.hasChildNodes()) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      // Double render(null) is needed to fully unmount Preact components.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      // The first call initiates unmounting, while the second ensures\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      // cleanup of internal VNode references and event listeners.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      render(null, container);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      render(null, container);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    originalRemove();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  };\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This code snippet is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67\",children:\"packages/scan/src/web/toolbar.tsx\"}),\". If you have noticed, render is called twice.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"render(null, container);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"render(null, container);\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"But first, we need to know what happens when you call render with null.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"unmount-preact-components\",children:\"Unmount Preact components\"}),`\n`,(0,n.jsx)(e.p,{children:\"You can unmount/destroy Preact node using render with null and a container.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*93okNIiaUs-mHtUim2EUiA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This image is a \",(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node\",children:\"Stackoverflow answer\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"toolbar-node\",children:\"Toolbar node\"}),`\n`,(0,n.jsx)(e.p,{children:\"Coming back to the code snippet shared above, Toolbar uses Preact to render its components but before doing so, previously rendered DOM nodes are removed.\\xA0\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (container.hasChildNodes()) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Double render(null) is needed to fully unmount Preact components.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // The first call initiates unmounting, while the second ensures\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // cleanup of internal VNode references and event listeners.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  render(null, container);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  render(null, container);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"What\\u2019s so special about this? it is called twice and the comment above describes why render is called twice.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/toolbar.tsx#L67\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node\",children:\"https://stackoverflow.com/questions/50946950/how-to-destroy-root-preact-node\"})}),`\n`]}),`\n`]})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return y(x);})();\n;return Component;"
        },
        "_id": "blog/How-to-destroy-Preact.mdx",
        "_raw": {
          "sourceFilePath": "blog/How-to-destroy-Preact.mdx",
          "sourceFileName": "How-to-destroy-Preact.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/How-to-destroy-Preact"
        },
        "type": "Doc",
        "slug": "/blog/How-to-destroy-Preact",
        "slugAsParams": "How-to-destroy-Preact"
      },
      "documentHash": "1740998508653",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/how-to-override-zustand.mdx": {
      "document": {
        "title": "How to override your Zustand state.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we’ll explore how [Zustand enables state replacement](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L464C1-L474C3) with the `setState` function, focusing on an interesting feature: overriding the state without merging. We'll explain how to use it with a simple test case.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*4y6ZBmrF_WwazzVdxECwPw.png)\r\n\r\n# **Understanding State Merging vs State Overriding**\r\n\r\nBefore looking at the code, it’s important to understand the difference between **merging** and **overriding** state.\r\n\r\n* **Merging State:** By default, when you update state in Zustand (or React), it merges the new state with the existing state. Only the updated fields are changed, while the rest of the state remains intact.\r\n    \r\n* **Overriding State:** In contrast, overriding the state **replaces** the entire state with a new object, discarding any fields that were present in the previous state but are not part of the new state.\r\n    \r\n\r\n# **When to Override State**\r\n\r\nThere are situations where replacing the entire state is necessary, for instance:\r\n\r\n* Resetting state after a form submission.\r\n    \r\n* Replacing state entirely when loading a different dataset.\r\n    \r\n\r\n# **Test Case for Overriding Zustand State**\r\n\r\nHere’s a simple test case from [Zustand’s codebase](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L464C1-L474C3) that demonstrates how to override the state using the `setState` function:\r\n\r\n```plaintext\r\nit('can set the store without merging', () => {\r\n  const { setState, getState } = create<{ a: number } | { b: number }>(\r\n    (_set) => ({\r\n      a: 1,\r\n    }),\r\n  )\r\n\r\n  // Should override the state instead of merging.\r\n  setState({ b: 2 }, true)\r\n  expect(getState()).toEqual({ b: 2 })\r\n})\r\n```\r\n\r\n## **Breaking Down the Test**\r\n\r\n**1\\. Creating the Store** First, a Zustand store is created with an initial state:\r\n\r\n```plaintext\r\nconst { setState, getState } = create<{ a: number } | { b: number }>(\r\n    (_set) => ({\r\n      a: 1,\r\n    }),\r\n  )\r\n```\r\n\r\nThe initial state is an object with a single property `a` set to 1. The `create` function returns two essential methods:\r\n\r\n* `setState`**:** This method is used to update the store’s state.\r\n    \r\n* `getState`**:** This method retrieves the current state of the store.\r\n    \r\n\r\n**2\\. Overriding the State** The key operation here is to replace the current state, `{ a: 1 }`, with a completely new state:\r\n\r\n```plaintext\r\nsetState({ b: 2 }, true)\r\n```\r\n\r\n* By passing the `true` flag as the second argument, [Zustand knows that it should **override** the state](https://github.com/pmndrs/zustand/tree/v4.5.5?tab=readme-ov-file#overwriting-state), rather than merge the new object `{ b: 2 }` with the existing one. This completely replaces the previous state, so `{ a: 1 }` is removed, and the new state becomes `{ b: 2 }`.\r\n    \r\n\r\n**3\\. Validating the State Replacement** Finally, the test ensures that the state has been fully replaced:\r\n\r\n```plaintext\r\nexpect(getState()).toEqual({ b: 2 })\r\n```\r\n\r\nThe expectation is that after calling `setState({ b: 2 }, true)`, the store’s state will only contain `{ b: 2 }` and no longer contain `{ a: 1 }`.\r\n\r\n# **How Zustand Overrides State**\r\n\r\nThe below image is from Zustand source code that sets state.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*24QbQNEbrCvDfS8Gt4zcCQ.png)\r\n\r\nAs you can see, if replace flag exists, nextState become the new state.\r\n\r\n```plaintext\r\n(replace ?? (typeof nextState !== 'object' || nextState === null))\r\n```\r\n\r\nThis is a clever way, if replace is false, which it is by default, `(typeof nextState !== ‘object’ || nextState === null))` condition is checked.\r\n\r\n# **Conclusion**\r\n\r\nZustand offers a straightforward way to manage state in React, and the ability to override the state completely using `setState` with the override flag provides additional flexibility. Whether you want to reset a form, load new data, or clear out old values, this feature allows you to fully control how state is managed and updated in your application.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L471C13-L471C50](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L471C13-L471C50)\r\n    \r\n2. [https://github.com/pmndrs/zustand/tree/v4.5.5?tab=readme-ov-file#overwriting-state](https://github.com/pmndrs/zustand/tree/v4.5.5?tab=readme-ov-file#overwriting-state)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),w=(n,e)=>{for(var a in e)i(n,a,{get:e[a],enumerable:!0})},d=(n,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of g(e))!f.call(n,r)&&r!==a&&i(n,r,{get:()=>e[r],enumerable:!(s=u(e,r))||s.enumerable});return n};var v=(n,e,a)=>(a=n!=null?p(m(n)):{},d(e||!n||!n.__esModule?i(a,\"default\",{value:n,enumerable:!0}):a,n)),y=n=>d(i({},\"__esModule\",{value:!0}),n);var c=b((k,h)=>{h.exports=_jsx_runtime});var S={};w(S,{default:()=>o,frontmatter:()=>x});var t=v(c()),x={title:\"How to override your Zustand state.\"};function l(n){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"In this article, we\\u2019ll explore how \",(0,t.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L464C1-L474C3\",children:\"Zustand enables state replacement\"}),\" with the \",(0,t.jsx)(e.code,{children:\"setState\"}),\" function, focusing on an interesting feature: overriding the state without merging. We'll explain how to use it with a simple test case.\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*4y6ZBmrF_WwazzVdxECwPw.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.h1,{id:\"understanding-state-merging-vs-state-overriding\",children:(0,t.jsx)(e.strong,{children:\"Understanding State Merging vs State Overriding\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Before looking at the code, it\\u2019s important to understand the difference between \",(0,t.jsx)(e.strong,{children:\"merging\"}),\" and \",(0,t.jsx)(e.strong,{children:\"overriding\"}),\" state.\"]}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"Merging State:\"}),\" By default, when you update state in Zustand (or React), it merges the new state with the existing state. Only the updated fields are changed, while the rest of the state remains intact.\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"Overriding State:\"}),\" In contrast, overriding the state \",(0,t.jsx)(e.strong,{children:\"replaces\"}),\" the entire state with a new object, discarding any fields that were present in the previous state but are not part of the new state.\"]}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.h1,{id:\"when-to-override-state\",children:(0,t.jsx)(e.strong,{children:\"When to Override State\"})}),`\n`,(0,t.jsx)(e.p,{children:\"There are situations where replacing the entire state is necessary, for instance:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"Resetting state after a form submission.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"Replacing state entirely when loading a different dataset.\"}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.h1,{id:\"test-case-for-overriding-zustand-state\",children:(0,t.jsx)(e.strong,{children:\"Test Case for Overriding Zustand State\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Here\\u2019s a simple test case from \",(0,t.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L464C1-L474C3\",children:\"Zustand\\u2019s codebase\"}),\" that demonstrates how to override the state using the \",(0,t.jsx)(e.code,{children:\"setState\"}),\" function:\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"it('can set the store without merging', () => {\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  const { setState, getState } = create<{ a: number } | { b: number }>(\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"    (_set) => ({\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"      a: 1,\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"    }),\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  // Should override the state instead of merging.\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  setState({ b: 2 }, true)\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  expect(getState()).toEqual({ b: 2 })\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"})\"})})]})})}),`\n`,(0,t.jsx)(e.h2,{id:\"breaking-down-the-test\",children:(0,t.jsx)(e.strong,{children:\"Breaking Down the Test\"})}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"1. Creating the Store\"}),\" First, a Zustand store is created with an initial state:\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"const { setState, getState } = create<{ a: number } | { b: number }>(\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"    (_set) => ({\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"      a: 1,\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"    }),\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  )\"})})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"The initial state is an object with a single property \",(0,t.jsx)(e.code,{children:\"a\"}),\" set to 1. The \",(0,t.jsx)(e.code,{children:\"create\"}),\" function returns two essential methods:\"]}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:\"setState\"}),(0,t.jsx)(e.strong,{children:\":\"}),\" This method is used to update the store\\u2019s state.\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:\"getState\"}),(0,t.jsx)(e.strong,{children:\":\"}),\" This method retrieves the current state of the store.\"]}),`\n`]}),`\n`]}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"2. Overriding the State\"}),\" The key operation here is to replace the current state, \",(0,t.jsx)(e.code,{children:\"{ a: 1 }\"}),\", with a completely new state:\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"setState({ b: 2 }, true)\"})})})})}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[\"By passing the \",(0,t.jsx)(e.code,{children:\"true\"}),\" flag as the second argument, \",(0,t.jsxs)(e.a,{href:\"https://github.com/pmndrs/zustand/tree/v4.5.5?tab=readme-ov-file#overwriting-state\",children:[\"Zustand knows that it should \",(0,t.jsx)(e.strong,{children:\"override\"}),\" the state\"]}),\", rather than merge the new object \",(0,t.jsx)(e.code,{children:\"{ b: 2 }\"}),\" with the existing one. This completely replaces the previous state, so \",(0,t.jsx)(e.code,{children:\"{ a: 1 }\"}),\" is removed, and the new state becomes \",(0,t.jsx)(e.code,{children:\"{ b: 2 }\"}),\".\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"3. Validating the State Replacement\"}),\" Finally, the test ensures that the state has been fully replaced:\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"expect(getState()).toEqual({ b: 2 })\"})})})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"The expectation is that after calling \",(0,t.jsx)(e.code,{children:\"setState({ b: 2 }, true)\"}),\", the store\\u2019s state will only contain \",(0,t.jsx)(e.code,{children:\"{ b: 2 }\"}),\" and no longer contain \",(0,t.jsx)(e.code,{children:\"{ a: 1 }\"}),\".\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"how-zustand-overrides-state\",children:(0,t.jsx)(e.strong,{children:\"How Zustand Overrides State\"})}),`\n`,(0,t.jsx)(e.p,{children:\"The below image is from Zustand source code that sets state.\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*24QbQNEbrCvDfS8Gt4zcCQ.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"As you can see, if replace flag exists, nextState become the new state.\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"(replace ?? (typeof nextState !== 'object' || nextState === null))\"})})})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"This is a clever way, if replace is false, which it is by default, \",(0,t.jsx)(e.code,{children:\"(typeof nextState !== \\u2018object\\u2019 || nextState === null))\"}),\" condition is checked.\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"conclusion\",children:(0,t.jsx)(e.strong,{children:\"Conclusion\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Zustand offers a straightforward way to manage state in React, and the ability to override the state completely using \",(0,t.jsx)(e.code,{children:\"setState\"}),\" with the override flag provides additional flexibility. Whether you want to reset a form, load new data, or clear out old values, this feature allows you to fully control how state is managed and updated in your application.\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h1,{id:\"references\",children:(0,t.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L471C13-L471C50\",children:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L471C13-L471C50\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/tree/v4.5.5?tab=readme-ov-file#overwriting-state\",children:\"https://github.com/pmndrs/zustand/tree/v4.5.5?tab=readme-ov-file#overwriting-state\"})}),`\n`]}),`\n`]})]})}function o(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}return y(S);})();\n;return Component;"
        },
        "_id": "blog/how-to-override-zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/how-to-override-zustand.mdx",
          "sourceFileName": "how-to-override-zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/how-to-override-zustand"
        },
        "type": "Doc",
        "slug": "/blog/how-to-override-zustand",
        "slugAsParams": "how-to-override-zustand"
      },
      "documentHash": "1740489186321",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/httpBatchLink-types.mdx": {
      "document": {
        "title": "httpBatchLink types in tRPC source code explained\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze the httpBatchLink types found in the tRPC source code. But first, you would want to know  \r\nwhat is httpBatchLink.\r\n\r\n# **httpBatchLink:**\r\n\r\nBelow is an example picked from the [tRPC vanilla setup guide](https://trpc.io/docs/client/vanilla/setup).\r\n\r\n```javascript\r\nimport { createTRPCClient, httpBatchLink } from '@trpc/client';\r\nimport type { AppRouter } from '../path/to/server/trpc';\r\nconst client = createTRPCClient<AppRouter>({\r\n links: [\r\n httpBatchLink({\r\n url: 'http://localhost:3000/trpc',\r\n // You can pass any HTTP headers you wish here\r\n async headers() {\r\n return {\r\n authorization: getAuthCookie(),\r\n };\r\n },\r\n }),\r\n ],\r\n});\r\n```\r\n\r\nhttpBatchLink is used in configuring tRPC. I was curious about its types, so I started looking at its source code. There is a filed named httpBatchLink.ts found in [packages/client/src/links/httpBatchLinks.ts](https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L22) and has about 137 lines of code at the time of writing this article.\r\n\r\n## **httpBatchLink function definition:**\r\n\r\n```javascript\r\nexport function httpBatchLink<TRouter extends AnyRouter>(\r\n opts: HTTPBatchLinkOptions<TRouter['_def']['_config']['$types']>,\r\n): TRPCLink<TRouter> {\r\n```\r\n\r\nopts are of type `HTTPBatchLinkOptions<TRouter[‘_def’][‘_config’][‘$types’]>,`. Let’s follow along the unknowns. I would look at the type definitions for:  \r\n\\- HTTPBatchLinkOptions  \r\n\\- TRouter\r\n\r\n## **HTTPBatchLinkOptions type**\r\n\r\nYou will find HTTPBatchLinkOptions type defined in [packages/client/src/links/HTTPBatchLinkOptions.ts](https://github.com/trpc/trpc/blob/next/packages/client/src/links/HTTPBatchLinkOptions.ts#L6)\r\n\r\n```javascript\r\nexport type HTTPBatchLinkOptions<TRoot extends AnyClientTypes> =\r\n HTTPLinkBaseOptions<TRoot> & {\r\n maxURLLength?: number;\r\n /**\r\n * Headers to be set on outgoing requests or a callback that of said headers\r\n * @see http://trpc.io/docs/client/headers\r\n */\r\n headers?:\r\n | HTTPHeaders\r\n | ((opts: {\r\n opList: NonEmptyArray<Operation>;\r\n }) => HTTPHeaders | Promise<HTTPHeaders>);\r\n };\r\n```\r\n\r\n`<TRoot extends AnyClientTypes>` is a generic type that extends AnyClientTypes, This means that the generic type must at least have the properties and structure of the type it extends.\r\n\r\n# **AnyClientTypes:**\r\n\r\n[AnyClientTypes](https://github.com/trpc/trpc/blob/next/packages/server/src/unstable-core-do-not-import/clientish/inferrable.ts#L3)\r\n\r\n```javascript\r\nexport type AnyClientTypes = Pick<AnyRootTypes, 'errorShape' | 'transformer'>;\r\n```\r\n\r\nWhat is Pick here? I searched for Pick in TS docs and [found this](https://www.typescriptlang.org/docs/handbook/utility-types.html#picktype-keys):  \r\nConstructs a type by picking the set of properties Keys (string literal or union of string literals) from Type.\r\n\r\nExample:\r\n\r\n```javascript\r\ninterface Todo {\r\n title: string;\r\n description: string;\r\n completed: boolean;\r\n}\r\n \r\ntype TodoPreview = Pick<Todo, \"title\" | \"completed\">;\r\n \r\nconst todo: TodoPreview = {\r\n title: \"Clean room\",\r\n completed: false,\r\n};\r\n```\r\n\r\n# **AnyRootTypes:**\r\n\r\n[AnyRootTypes](https://github.com/trpc/trpc/blob/next/packages/server/src/unstable-core-do-not-import/rootConfig.ts#L95)\r\n\r\n```javascript\r\nexport type AnyRootTypes = CreateRootTypes<{\r\n ctx: any;\r\n meta: any;\r\n errorShape: any;\r\n transformer: any;\r\n}>;\r\n```\r\n\r\nIt could be confusing but important rule here is that types are defined in files, making them colocated with the functions that use these types but also export these types so they can be used across the codebase where required.\r\n\r\nBest example here is, HTTPLinkBaseOptions defined in [httpUtils.ts](https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L22) is used in the same file and also used in [packages/client/src/links/HTTPBatchLinkOptions.ts](https://github.com/trpc/trpc/blob/next/packages/client/src/links/HTTPBatchLinkOptions.ts#L6)\r\n\r\nIn some cases like:\r\n\r\n* [packages/client/src/links/HTTPBatchLinkOptions.ts](https://github.com/trpc/trpc/blob/next/packages/client/src/links/HTTPBatchLinkOptions.ts#L6)\r\n    \r\n* [packages/server/src/unstable-core-do-not-import/clientish/inferrable.ts](https://github.com/trpc/trpc/blob/next/packages/server/src/unstable-core-do-not-import/clientish/inferrable.ts#L3)\r\n    \r\n\r\nOnly types are defined in these files, there are no other functions found here.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://trpc.io/docs/client/vanilla/setup](https://trpc.io/docs/client/vanilla/setup)\r\n    \r\n2. [https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L22](https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L22)\r\n    \r\n3. [https://github.com/trpc/trpc/blob/next/packages/client/src/links/HTTPBatchLinkOptions.ts#L6](https://github.com/trpc/trpc/blob/next/packages/client/src/links/HTTPBatchLinkOptions.ts#L6)\r\n    \r\n4. https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L22\r\n",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),f=(l,e)=>{for(var t in e)c(l,t,{get:e[t],enumerable:!0})},o=(l,e,t,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of y(e))!g.call(l,s)&&s!==t&&c(l,s,{get:()=>e[s],enumerable:!(r=d(e,s))||r.enumerable});return l};var b=(l,e,t)=>(t=l!=null?p(m(l)):{},o(e||!l||!l.__esModule?c(t,\"default\",{value:l,enumerable:!0}):t,l)),k=l=>o(c({},\"__esModule\",{value:!0}),l);var i=u((x,a)=>{a.exports=_jsx_runtime});var N={};f(N,{default:()=>F,frontmatter:()=>T});var n=b(i()),T={title:\"httpBatchLink types in tRPC source code explained\"};function h(l){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze the httpBatchLink types found in the tRPC source code. But first, you would want to know\",(0,n.jsx)(e.br,{}),`\n`,\"what is httpBatchLink.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"httpbatchlink\",children:(0,n.jsx)(e.strong,{children:\"httpBatchLink:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Below is an example picked from the \",(0,n.jsx)(e.a,{href:\"https://trpc.io/docs/client/vanilla/setup\",children:\"tRPC vanilla setup guide\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createTRPCClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" httpBatchLink \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@trpc/client'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" AppRouter \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../path/to/server/trpc'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" client \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createTRPCClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"AppRouter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" links\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" httpBatchLink\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" url\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'http://localhost:3000/trpc'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" You can pass any HTTP headers you wish here\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" headers\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorization\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getAuthCookie\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(),\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"httpBatchLink is used in configuring tRPC. I was curious about its types, so I started looking at its source code. There is a filed named httpBatchLink.ts found in \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L22\",children:\"packages/client/src/links/httpBatchLinks.ts\"}),\" and has about 137 lines of code at the time of writing this article.\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"httpbatchlink-function-definition\",children:(0,n.jsx)(e.strong,{children:\"httpBatchLink function definition:\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" httpBatchLink\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TRouter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" extends\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" AnyRouter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" opts\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" HTTPBatchLinkOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TRouter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'_def'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"][\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'_config'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"][\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'$types'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]>,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TRPCLink\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TRouter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"opts are of type \",(0,n.jsx)(e.code,{children:\"HTTPBatchLinkOptions<TRouter[\\u2018_def\\u2019][\\u2018_config\\u2019][\\u2018$types\\u2019]>,\"}),\". Let\\u2019s follow along the unknowns. I would look at the type definitions for:\",(0,n.jsx)(e.br,{}),`\n`,\"- HTTPBatchLinkOptions\",(0,n.jsx)(e.br,{}),`\n`,\"- TRouter\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"httpbatchlinkoptions-type\",children:(0,n.jsx)(e.strong,{children:\"HTTPBatchLinkOptions type\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find HTTPBatchLinkOptions type defined in \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/HTTPBatchLinkOptions.ts#L6\",children:\"packages/client/src/links/HTTPBatchLinkOptions.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" HTTPBatchLinkOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TRoot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" extends\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" AnyClientTypes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" HTTPLinkBaseOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TRoot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" &\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" maxURLLength\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" number\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" /**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Headers to be set on outgoing requests or a callback that of said headers\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@see\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" http://trpc.io/docs/client/headers\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" headers\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" HTTPHeaders\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"opts\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" opList\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NonEmptyArray\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Operation\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" HTTPHeaders\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Promise\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"HTTPHeaders\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">);\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"<TRoot extends AnyClientTypes>\"}),\" is a generic type that extends AnyClientTypes, This means that the generic type must at least have the properties and structure of the type it extends.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"anyclienttypes\",children:(0,n.jsx)(e.strong,{children:\"AnyClientTypes:\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/server/src/unstable-core-do-not-import/clientish/inferrable.ts#L3\",children:\"AnyClientTypes\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" AnyClientTypes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Pick\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"AnyRootTypes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'errorShape'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'transformer'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"What is Pick here? I searched for Pick in TS docs and \",(0,n.jsx)(e.a,{href:\"https://www.typescriptlang.org/docs/handbook/utility-types.html#picktype-keys\",children:\"found this\"}),\":\",(0,n.jsx)(e.br,{}),`\n`,\"Constructs a type by picking the set of properties Keys (string literal or union of string literals) from Type.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Example:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"interface\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Todo\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" title\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" description\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" completed\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TodoPreview\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Pick\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Todo\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"title\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"completed\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" todo\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TodoPreview\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" title\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"Clean room\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" completed\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"anyroottypes\",children:(0,n.jsx)(e.strong,{children:\"AnyRootTypes:\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/server/src/unstable-core-do-not-import/rootConfig.ts#L95\",children:\"AnyRootTypes\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" AnyRootTypes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CreateRootTypes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ctx\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" meta\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" errorShape\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" transformer\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}>;\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"It could be confusing but important rule here is that types are defined in files, making them colocated with the functions that use these types but also export these types so they can be used across the codebase where required.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best example here is, HTTPLinkBaseOptions defined in \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L22\",children:\"httpUtils.ts\"}),\" is used in the same file and also used in \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/HTTPBatchLinkOptions.ts#L6\",children:\"packages/client/src/links/HTTPBatchLinkOptions.ts\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"In some cases like:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/HTTPBatchLinkOptions.ts#L6\",children:\"packages/client/src/links/HTTPBatchLinkOptions.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/server/src/unstable-core-do-not-import/clientish/inferrable.ts#L3\",children:\"packages/server/src/unstable-core-do-not-import/clientish/inferrable.ts\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Only types are defined in these files, there are no other functions found here.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://trpc.io/docs/client/vanilla/setup\",children:\"https://trpc.io/docs/client/vanilla/setup\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L22\",children:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L22\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/HTTPBatchLinkOptions.ts#L6\",children:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/HTTPBatchLinkOptions.ts#L6\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L22\",children:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/internals/httpUtils.ts#L22\"})}),`\n`]}),`\n`]})]})}function F(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(h,{...l})}):h(l)}return k(N);})();\n;return Component;"
        },
        "_id": "blog/httpBatchLink-types.mdx",
        "_raw": {
          "sourceFilePath": "blog/httpBatchLink-types.mdx",
          "sourceFileName": "httpBatchLink-types.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/httpBatchLink-types"
        },
        "type": "Doc",
        "slug": "/blog/httpBatchLink-types",
        "slugAsParams": "httpBatchLink-types"
      },
      "documentHash": "1740489186323",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/IndexedDB-explained.mdx": {
      "document": {
        "title": "IndexedDB explained.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn our previous article, we discussed Dexie, a wrapper for IndexedDB. In this article, we discuss IndexedDB. You must be familiar with this localStorage API, commonly used to store info in the browser. Similarly, IndexedDB is used for client side storage.\r\n\r\n# **What is IndexedDB?**\r\n\r\n[MDN documentation explaination](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API):  \r\nIndexedDB is a low-level API for client-side storage of significant amounts of structured data, including files/blobs. This API uses indexes to enable high-performance searches of this data. While Web Storage is useful for storing smaller amounts of data, it is less useful for storing larger amounts of structured data.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*9Lb_9Gm2LBcQXYax9aHQYw.png)\r\n\r\nIndexedDB provides a solution. This is the main landing page for MDN’s IndexedDB coverage — here we provide links to the full API reference and usage guides, browser support details, and some explanation of key concepts.\r\n\r\n## **Example repository:**\r\n\r\nMDN provides an [example Github repository](https://github.com/mdn/dom-examples/tree/main/to-do-notifications) and has [script/todo.js](https://github.com/mdn/dom-examples/blob/main/to-do-notifications/scripts/todo.js).\r\n\r\nScript is initialized using window.onload\r\n\r\n```javascript\r\nwindow.onload = () => {\r\n}\r\n```\r\n\r\n## **Open a request to database:**\r\n\r\n```javascript\r\n// Let us open our database\r\nconst DBOpenRequest = window.indexedDB.open('toDoList', 4);\r\n```\r\n\r\n## **Connection error:**\r\n\r\n```javascript\r\n// Register two event handlers to act on the database being opened successfully, or not\r\nDBOpenRequest.onerror = (event) => {\r\n note.appendChild(createListItem('Error loading database.'));\r\n};\r\n```\r\n\r\n## **On successful database connection:**\r\n\r\n```javascript\r\nDBOpenRequest.onsuccess = (event) => {\r\n note.appendChild(createListItem('Database initialised.'));\r\n// Store the result of opening the database in the db variable. This is used a lot below\r\n db = DBOpenRequest.result;\r\n// Run the displayData() function to populate the task list with all the to-do list data already in the IndexedDB\r\n displayData();\r\n};\r\n```\r\n\r\n## **Add data**\r\n\r\n```javascript\r\n// Open a read/write DB transaction, ready for adding the data\r\nconst transaction = db.transaction(['toDoList'], 'readwrite');\r\n// Call an object store that's already been added to the database\r\nconst objectStore = transaction.objectStore('toDoList');\r\n// Make a request to add our newItem object to the object store\r\nconst objectStoreRequest = objectStore.add(newItem[0]);\r\nobjectStoreRequest.onsuccess = (event) => {\r\n // process data on success.\r\n}\r\n// Report on the success of the transaction completing, when everything is done\r\ntransaction.oncomplete = () => {\r\n note.appendChild(createListItem('Transaction completed: database modification finished.'));\r\n// Update the display of data to show the newly added item, by running displayData() again.\r\n displayData();\r\n};\r\n// Handler for any unexpected error\r\ntransaction.onerror = () => {\r\n note.appendChild(createListItem(`Transaction not opened due to error: ${transaction.error}`));\r\n};\r\n```\r\n\r\n# **Observation: localStorage vs IndexedDB**\r\n\r\nYou might have by now realize that there is a lot of code required just to add a record, you have asynchronous callbacks such as onerror and onsuccess. This is pointed in this [stack exchange answer](https://softwareengineering.stackexchange.com/questions/219953/how-is-localstorage-different-from-indexeddb).\r\n\r\nTo simplify handling this IndexedDB, [Dexie](https://dexie.org/docs/Tutorial/React) can be used.\r\n\r\n# **Add data with Dexie:**\r\n\r\n```javascript\r\nexport function AddFriendForm({ defaultAge } = { defaultAge: 21 }) {\r\n const [name, setName] = useState('');\r\n const [age, setAge] = useState(defaultAge);\r\n const [status, setStatus] = useState('');\r\nasync function addFriend() {\r\n try {\r\n // Add the new friend!\r\n const id = await db.friends.add({\r\n name,\r\n age\r\n });\r\nsetStatus(`Friend ${name} successfully added. Got id ${id}`);\r\n setName('');\r\n setAge(defaultAge);\r\n } catch (error) {\r\n setStatus(`Failed to add ${name}: ${error}`);\r\n }\r\n }\r\nreturn (\r\n <>\r\n <p>{status}</p>\r\n Name:\r\n <input\r\n type=\"text\"\r\n value={name}\r\n onChange={(ev) => setName(ev.target.value)}\r\n />\r\n Age:\r\n <input\r\n type=\"number\"\r\n value={age}\r\n onChange={(ev) => setAge(Number(ev.target.value))}\r\n />\r\n <button onClick={addFriend}>Add</button>\r\n </>\r\n );\r\n}\r\n```\r\n\r\nThis wrapper API reminds me of ORMs such as Prisma and Drizzle.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://www.reddit.com/r/sveltejs/comments/15rj12h/any\\_downsides\\_to\\_using\\_indexeddb\\_vs\\_localstorage/](https://www.reddit.com/r/sveltejs/comments/15rj12h/any_downsides_to_using_indexeddb_vs_localstorage/)\r\n    \r\n2. [https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB\\_API](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API)\r\n    \r\n3. [https://github.com/mdn/dom-examples/tree/main/to-do-notifications](https://github.com/mdn/dom-examples/tree/main/to-do-notifications)\r\n    \r\n4. https://softwareengineering.stackexchange.com/questions/219953/how-is-localstorage-different-from-indexeddb\r\n",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},a=(n,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(n,r)&&r!==s&&c(n,r,{get:()=>e[r],enumerable:!(o=p(e,r))||o.enumerable});return n};var b=(n,e,s)=>(s=n!=null?h(m(n)):{},a(e||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),N=n=>a(c({},\"__esModule\",{value:!0}),n);var t=g((j,F)=>{F.exports=_jsx_runtime});var v={};f(v,{default:()=>d,frontmatter:()=>w});var l=b(t()),w={title:\"IndexedDB explained.\"};function i(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:\"In our previous article, we discussed Dexie, a wrapper for IndexedDB. In this article, we discuss IndexedDB. You must be familiar with this localStorage API, commonly used to store info in the browser. Similarly, IndexedDB is used for client side storage.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"what-is-indexeddb\",children:(0,l.jsx)(e.strong,{children:\"What is IndexedDB?\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\",children:\"MDN documentation explaination\"}),\":\",(0,l.jsx)(e.br,{}),`\n`,\"IndexedDB is a low-level API for client-side storage of significant amounts of structured data, including files/blobs. This API uses indexes to enable high-performance searches of this data. While Web Storage is useful for storing smaller amounts of data, it is less useful for storing larger amounts of structured data.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*9Lb_9Gm2LBcQXYax9aHQYw.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"IndexedDB provides a solution. This is the main landing page for MDN\\u2019s IndexedDB coverage \\u2014 here we provide links to the full API reference and usage guides, browser support details, and some explanation of key concepts.\"}),`\n`,(0,l.jsx)(e.h2,{id:\"example-repository\",children:(0,l.jsx)(e.strong,{children:\"Example repository:\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"MDN provides an \",(0,l.jsx)(e.a,{href:\"https://github.com/mdn/dom-examples/tree/main/to-do-notifications\",children:\"example Github repository\"}),\" and has \",(0,l.jsx)(e.a,{href:\"https://github.com/mdn/dom-examples/blob/main/to-do-notifications/scripts/todo.js\",children:\"script/todo.js\"}),\".\"]}),`\n`,(0,l.jsx)(e.p,{children:\"Script is initialized using window.onload\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"window\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"onload\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"open-a-request-to-database\",children:(0,l.jsx)(e.strong,{children:\"Open a request to database:\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Let us open our database\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" DBOpenRequest \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" window\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"indexedDB\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"open\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'toDoList'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 4);\"})]})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"connection-error\",children:(0,l.jsx)(e.strong,{children:\"Connection error:\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Register two event handlers to act on the database being opened successfully, or not\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"DBOpenRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"onerror\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"event\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" note\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"appendChild\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createListItem\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'Error loading database.'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"on-successful-database-connection\",children:(0,l.jsx)(e.strong,{children:\"On successful database connection:\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"DBOpenRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"onsuccess\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"event\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" note\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"appendChild\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createListItem\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'Database initialised.'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Store the result of opening the database in the db variable. This is used a lot below\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" db \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" DBOpenRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"result\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Run the displayData() function to populate the task list with all the to-do list data already in the IndexedDB\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" displayData\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"add-data\",children:(0,l.jsx)(e.strong,{children:\"Add data\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Open a read/write DB transaction, ready for adding the data\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" transaction \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"transaction\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"([\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'toDoList'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"],\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'readwrite'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Call an object store that's already been added to the database\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" objectStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" transaction\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"objectStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'toDoList'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Make a request to add our newItem object to the object store\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" objectStoreRequest \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" objectStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"newItem\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[0]);\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"objectStoreRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"onsuccess\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"event\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" process data on success.\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Report on the success of the transaction completing, when everything is done\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"transaction\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"oncomplete\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" note\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"appendChild\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createListItem\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'Transaction completed: database modification finished.'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Update the display of data to show the newly added item, by running displayData() again.\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" displayData\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Handler for any unexpected error\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"transaction\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"onerror\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" note\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"appendChild\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createListItem\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`Transaction not opened due to error: ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"transaction\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.h1,{id:\"observation-localstorage-vs-indexeddb\",children:(0,l.jsx)(e.strong,{children:\"Observation: localStorage vs IndexedDB\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"You might have by now realize that there is a lot of code required just to add a record, you have asynchronous callbacks such as onerror and onsuccess. This is pointed in this \",(0,l.jsx)(e.a,{href:\"https://softwareengineering.stackexchange.com/questions/219953/how-is-localstorage-different-from-indexeddb\",children:\"stack exchange answer\"}),\".\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"To simplify handling this IndexedDB, \",(0,l.jsx)(e.a,{href:\"https://dexie.org/docs/Tutorial/React\",children:\"Dexie\"}),\" can be used.\"]}),`\n`,(0,l.jsx)(e.h1,{id:\"add-data-with-dexie\",children:(0,l.jsx)(e.strong,{children:\"Add data with Dexie:\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" AddFriendForm\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defaultAge \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defaultAge\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 21\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setName\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"''\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"age\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setAge\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"defaultAge\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setStatus\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"''\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" addFriend\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" try\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Add the new friend!\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" id \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"friends\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" age\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" });\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"setStatus\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`Friend ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"} successfully added. Got id ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"id\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setName\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"''\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setAge\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"defaultAge\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" catch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setStatus\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`Failed to add ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}: ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <>\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"status\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}</\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Name:\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"input\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"text\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" onChange\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"ev\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setName\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"ev\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"target\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")}\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Age:\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"input\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"number\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"age\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" onChange\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"ev\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setAge\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Number\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"ev\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"target\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))}\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"button onClick\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"addFriend\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Add\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"</\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"button\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" </>\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" );\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"This wrapper API reminds me of ORMs such as Prisma and Drizzle.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"references\",children:(0,l.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://www.reddit.com/r/sveltejs/comments/15rj12h/any_downsides_to_using_indexeddb_vs_localstorage/\",children:\"https://www.reddit.com/r/sveltejs/comments/15rj12h/any_downsides_to_using_indexeddb_vs_localstorage/\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/mdn/dom-examples/tree/main/to-do-notifications\",children:\"https://github.com/mdn/dom-examples/tree/main/to-do-notifications\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://softwareengineering.stackexchange.com/questions/219953/how-is-localstorage-different-from-indexeddb\",children:\"https://softwareengineering.stackexchange.com/questions/219953/how-is-localstorage-different-from-indexeddb\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return N(v);})();\n;return Component;"
        },
        "_id": "blog/IndexedDB-explained.mdx",
        "_raw": {
          "sourceFilePath": "blog/IndexedDB-explained.mdx",
          "sourceFileName": "IndexedDB-explained.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/IndexedDB-explained"
        },
        "type": "Doc",
        "slug": "/blog/IndexedDB-explained",
        "slugAsParams": "IndexedDB-explained"
      },
      "documentHash": "1740489186203",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Istanbul-usage.mdx": {
      "document": {
        "title": "Istanbul usage in tRPC source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze Istanbul usage in tRPC source code. I found this comment — [istanbul ignore if](https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L91C12-L91C30). This hints that tRPC uses Istanbul.js, a tool that makes JavaScript test coverage simple.\r\n\r\nThis one took me a while to figure out that tRPC repository uses [@vitest/coverage-istanbul](https://vitest.dev/guide/coverage), I was initially looking to see if there’s any scripts related to test defined in [packages/clients](https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L91C12-L91C30) but there were none.\r\n\r\nAfter searching for istanbul across the codebase, that is when I saw Istanbul word in [vitest.config.ts](https://github.com/trpc/trpc/blob/d603d860a3aeb12bbf6e836abd8c5a30c7b5d7a5/vitest.config.ts#L45) test scripts are defined in the [root level’s package.json](https://github.com/trpc/trpc/blob/next/package.json).\r\n\r\n```javascript\r\n\"test\": \"turbo codegen-tests && conc -c \\\"green,blue\\\" \\\"vitest run\\\" \\\"pnpm -F tests test-run:tsc\\\"\",\r\n\"test-ci\": \"turbo codegen-tests && conc \\\"CI=true vitest run - coverage\\\" \\\"pnpm -F tests test-run:tsc\\\"\",\r\n\"test-watch\": \"vitest\",\r\n```\r\n\r\nBelow is coverage object picked from vitest.config.ts:\r\n\r\n```javascript\r\ncoverage: {\r\n provider: 'istanbul',\r\n include: ['**/src/**'],\r\n exclude: [\r\n '**/www/**',\r\n '**/examples/**',\r\n // skip codecov for experimental features\r\n // FIXME: delete me once they're stable\r\n '**/next/src/app-dir/**',\r\n '**/server/src/adapters/next-app-dir/**',\r\n ],\r\n},\r\n```\r\n\r\nVitest supports another provider as well, it is ‘v8’. By default, provider is set to v8.\r\n\r\nLet’s what happens when `test` script is run:\r\n\r\n## **test script:**\r\n\r\n```javascript\r\n\"test\": \"turbo codegen-tests && conc -c \\\"green,blue\\\" \\\"vitest run\\\" \\\"pnpm -F tests test-run:tsc\\\"\",\r\n```\r\n\r\ntRPC uses Turbo. Turbo is an incremental bundler and build system optimized for JavaScript and TypeScript, written in Rust.\r\n\r\n## **turbo codegen-tests:**\r\n\r\ncodegen-tests is a command defined in [turbo.json](https://github.com/trpc/trpc/blob/next/turbo.json#L19) and when you run this, it executes codegen-tests scripts defined in the packages. This is a monorepo setup.\r\n\r\ncodegen-scripts in packages:  \r\n\\- [client/package.json](https://github.com/trpc/trpc/blob/next/packages/client/package.json#L27)  \r\n\\- [next/package.json](https://github.com/trpc/trpc/blob/next/packages/next/package.json#L28)  \r\n\\- [react-query/package.json](https://github.com/trpc/trpc/blob/next/packages/react-query/package.json#L19)  \r\n\\- [server/package.json](https://github.com/trpc/trpc/blob/next/packages/server/package.json#L19)\r\n\r\n## **conc -c**\r\n\r\nconc is a short alias for [concurrently](https://www.npmjs.com/package/concurrently#usage). Checkout [concurrrently](https://www.npmjs.com/package/concurrently#usage).\r\n\r\nBelow is an example usage of concurrently.\r\n\r\n```javascript\r\nconcurrently \"command1 arg\" \"command2 arg\"\r\n(or)\r\nconc \"command1 arg\" \"command2 arg\"\r\n```\r\n\r\ntRPC uses this below command:\r\n\r\n```javascript\r\nconc -c \\\"green,blue\\\" \\\"vitest run\\\" \\\"pnpm -F tests test-run:tsc\\\"\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L91C12-L91C30](https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L91C12-L91C30)\r\n    \r\n2. [https://github.com/gotwarlost/istanbul](https://github.com/gotwarlost/istanbul)\r\n    \r\n3. [https://istanbul.js.org/](https://istanbul.js.org/)\r\n    \r\n4. [https://github.com/istanbuljs](https://github.com/istanbuljs)\r\n    \r\n5. https://github.com/trpc/trpc/blob/d603d860a3aeb12bbf6e836abd8c5a30c7b5d7a5/vitest.config.ts#L45\r\n",
          "code": "var Component=(()=>{var p=Object.create;var a=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),y=(n,e)=>{for(var r in e)a(n,r,{get:e[r],enumerable:!0})},l=(n,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of u(e))!m.call(n,c)&&c!==r&&a(n,c,{get:()=>e[c],enumerable:!(s=F(e,c))||s.enumerable});return n};var f=(n,e,r)=>(r=n!=null?p(g(n)):{},l(e||!n||!n.__esModule?a(r,\"default\",{value:n,enumerable:!0}):r,n)),v=n=>l(a({},\"__esModule\",{value:!0}),n);var o=b((x,i)=>{i.exports=_jsx_runtime});var j={};y(j,{default:()=>d,frontmatter:()=>k});var t=f(o()),k={title:\"Istanbul usage in tRPC source code\"};function h(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"In this article, we analyze Istanbul usage in tRPC source code. I found this comment \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L91C12-L91C30\",children:\"istanbul ignore if\"}),\". This hints that tRPC uses Istanbul.js, a tool that makes JavaScript test coverage simple.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"This one took me a while to figure out that tRPC repository uses \",(0,t.jsx)(e.a,{href:\"https://vitest.dev/guide/coverage\",children:\"@vitest/coverage-istanbul\"}),\", I was initially looking to see if there\\u2019s any scripts related to test defined in \",(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L91C12-L91C30\",children:\"packages/clients\"}),\" but there were none.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"After searching for istanbul across the codebase, that is when I saw Istanbul word in \",(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/d603d860a3aeb12bbf6e836abd8c5a30c7b5d7a5/vitest.config.ts#L45\",children:\"vitest.config.ts\"}),\" test scripts are defined in the \",(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/package.json\",children:\"root level\\u2019s package.json\"}),\".\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"test\"'}),(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"turbo codegen-tests && conc -c \\\\\"green,blue\\\\\" \\\\\"vitest run\\\\\" \\\\\"pnpm -F tests test-run:tsc\\\\\"\"'}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"test-ci\"'}),(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"turbo codegen-tests && conc \\\\\"CI=true vitest run - coverage\\\\\" \\\\\"pnpm -F tests test-run:tsc\\\\\"\"'}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"test-watch\"'}),(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"vitest\"'}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]})]})})}),`\n`,(0,t.jsx)(e.p,{children:\"Below is coverage object picked from vitest.config.ts:\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\"coverage\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\" provider\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'istanbul'\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\" include\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'**/src/**'\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"],\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\" exclude\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '**/www/**'\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '**/examples/**'\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" skip codecov for experimental features\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" FIXME: delete me once they're stable\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '**/next/src/app-dir/**'\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '**/server/src/adapters/next-app-dir/**'\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ],\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"},\"})})]})})}),`\n`,(0,t.jsx)(e.p,{children:\"Vitest supports another provider as well, it is \\u2018v8\\u2019. By default, provider is set to v8.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Let\\u2019s what happens when \",(0,t.jsx)(e.code,{children:\"test\"}),\" script is run:\"]}),`\n`,(0,t.jsx)(e.h2,{id:\"test-script\",children:(0,t.jsx)(e.strong,{children:\"test script:\"})}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"test\"'}),(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"turbo codegen-tests && conc -c \\\\\"green,blue\\\\\" \\\\\"vitest run\\\\\" \\\\\"pnpm -F tests test-run:tsc\\\\\"\"'}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]})})})}),`\n`,(0,t.jsx)(e.p,{children:\"tRPC uses Turbo. Turbo is an incremental bundler and build system optimized for JavaScript and TypeScript, written in Rust.\"}),`\n`,(0,t.jsx)(e.h2,{id:\"turbo-codegen-tests\",children:(0,t.jsx)(e.strong,{children:\"turbo codegen-tests:\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"codegen-tests is a command defined in \",(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/turbo.json#L19\",children:\"turbo.json\"}),\" and when you run this, it executes codegen-tests scripts defined in the packages. This is a monorepo setup.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"codegen-scripts in packages:\",(0,t.jsx)(e.br,{}),`\n`,\"- \",(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/package.json#L27\",children:\"client/package.json\"}),(0,t.jsx)(e.br,{}),`\n`,\"- \",(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/next/package.json#L28\",children:\"next/package.json\"}),(0,t.jsx)(e.br,{}),`\n`,\"- \",(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/react-query/package.json#L19\",children:\"react-query/package.json\"}),(0,t.jsx)(e.br,{}),`\n`,\"- \",(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/server/package.json#L19\",children:\"server/package.json\"})]}),`\n`,(0,t.jsx)(e.h2,{id:\"conc--c\",children:(0,t.jsx)(e.strong,{children:\"conc -c\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"conc is a short alias for \",(0,t.jsx)(e.a,{href:\"https://www.npmjs.com/package/concurrently#usage\",children:\"concurrently\"}),\". Checkout \",(0,t.jsx)(e.a,{href:\"https://www.npmjs.com/package/concurrently#usage\",children:\"concurrrently\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:\"Below is an example usage of concurrently.\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\"concurrently \"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"command1 arg\"'}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"command2 arg\"'})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\"or\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\"conc \"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"command1 arg\"'}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"command2 arg\"'})]})]})})}),`\n`,(0,t.jsx)(e.p,{children:\"tRPC uses this below command:\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.span,{className:\"line\",children:[(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\"conc \"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF\"},children:\"c \\\\\"}),(0,t.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"green,blue\\\\\" \\\\\"vitest run\\\\\" \\\\\"pnpm -F tests test-run:tsc\\\\\"'})]})})})}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h1,{id:\"references\",children:(0,t.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L91C12-L91C30\",children:\"https://github.com/trpc/trpc/blob/next/packages/client/src/links/httpBatchLink.ts#L91C12-L91C30\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/gotwarlost/istanbul\",children:\"https://github.com/gotwarlost/istanbul\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://istanbul.js.org/\",children:\"https://istanbul.js.org/\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/istanbuljs\",children:\"https://github.com/istanbuljs\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/d603d860a3aeb12bbf6e836abd8c5a30c7b5d7a5/vitest.config.ts#L45\",children:\"https://github.com/trpc/trpc/blob/d603d860a3aeb12bbf6e836abd8c5a30c7b5d7a5/vitest.config.ts#L45\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}return v(j);})();\n;return Component;"
        },
        "_id": "blog/Istanbul-usage.mdx",
        "_raw": {
          "sourceFilePath": "blog/Istanbul-usage.mdx",
          "sourceFileName": "Istanbul-usage.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Istanbul-usage"
        },
        "type": "Doc",
        "slug": "/blog/Istanbul-usage",
        "slugAsParams": "Istanbul-usage"
      },
      "documentHash": "1740489186206",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/jiti-in-docusaurus.mdx": {
      "document": {
        "title": "Jiti usage in Docusaurus source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nFor this week, I have been reading [unbuild](https://github.com/unjs/unbuild) source code and found few packages that I have never seen before or used. I wanted to share some interesting packages that are used in these OSS projects so we can learn a thing or two ;)\r\n\r\nThe following are discussed in this article:\r\n\r\n1. What is Jiti?\r\n    \r\n2. Jiti’s usage in Docusaurus\r\n    \r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*0p3E1fZ7ERKJKI52OPNKYQ.png)\r\n\r\n### What is Jiti?\r\n\r\nJiti is a package built by [authors at Unjs](https://github.com/unjs). Unjs provides JS tools, libraries and has about 63 npm packages and [421m downloads per month](https://unjs.io/packages?q=&order=1&orderBy=title). Sheesh, that’s a lot.\r\n\r\n[Jiti repository](https://github.com/unjs/jiti#readme) has this description “Runtime TypeScript and ESM support for Node.js”. Okay, what does this mean? To understand more about this tool, I looked at the features it offers:\r\n\r\n* Seamless TypeScript and ESM syntax support for Node.js\r\n    \r\n* Seamless interoperability between ESM and CommonJS\r\n    \r\n* Asynchronous API to replace `import()`\r\n    \r\n* Synchronous API to replace `require()` (deprecated)\r\n    \r\n* Super slim and zero dependency\r\n    \r\n* Custom resolve aliases\r\n    \r\n* Smart syntax detection to avoid extra transforms\r\n    \r\n* Node.js native `require.cache` integration\r\n    \r\n* Filesystem transpile with hard disk caches\r\n    \r\n* ESM Loader support\r\n    \r\n* JSX support (opt-in)\r\n    \r\n\r\nSure enough, it has features that I do not understand yet, the one feature that rings a bell for me is the ***Seamless interoperability between ESM and CommonJS*** because I have seen this in dynamic imports in OSS projects where a file is defined using CommonJS (module.exports) required in an file using ESM syntax (export default) but still not sure if what I saw back then has any resemblance to what Jiti offers. I am interested to learn more about this package, may be in the future.\r\n\r\nBut let’s review Jiti’s usage in Open Source projects such as Docusaurus and Unbuild\r\n\r\n### Jiti’s usage in Docusaurus\r\n\r\nI found the below code related to Jiti in the [Docusaurus — moduleUtils.js](https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/packages/docusaurus-utils/src/moduleUtils.ts#L21)\r\n\r\n```js\r\nimport jiti from 'jiti';\r\n\r\n/*\r\njiti is able to load ESM, CJS, JSON, TS modules\r\n */\r\nexport async function loadFreshModule(modulePath: string): Promise<unknown> {\r\n  try {\r\n    if (typeof modulePath !== 'string') {\r\n      throw new Error(\r\n        logger.interpolate`Invalid module path of type name=${modulePath}`,\r\n      );\r\n    }\r\n    const load = jiti(__filename, {\r\n      // Transpilation cache, can be safely enabled\r\n      cache: true,\r\n      // Bypass Node.js runtime require cache\r\n      // Same as \"import-fresh\" package we used previously\r\n      requireCache: false,\r\n      // Only take into consideration the default export\r\n      // For now we don't need named exports\r\n      // This also helps normalize return value for both CJS/ESM/TS modules\r\n      interopDefault: true,\r\n      // debug: true,\r\n    });\r\n\r\n    return load(modulePath);\r\n```\r\n\r\nLet’s get the hint from the comments — “***jiti is able to load ESM, CJS, JSON, TS modules***”, this would be the interoperability feature. jiti is imported and directly called as a function with some parameters for additional configuration and it has comments explaining what the configuration is for.\r\n\r\n```js\r\n// Transpilation cache, can be safely enabled\r\ncache: true,\r\n// Bypass Node.js runtime require cache\r\n// Same as \"import-fresh\" package we used previously\r\nrequireCache: false,\r\n// Only take into consideration the default export\r\n// For now we don't need named exports\r\n// This also helps normalize return value for both CJS/ESM/TS modules\r\ninteropDefault: true,\r\n// debug: true,\r\n```\r\n\r\nI also found this [note in Docusaurus migration guide](https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/website/docs/migration/v3.mdx#L759):\r\n\r\n> New Config Loader\r\n\r\n> Docusaurus v3 changes its internal config loading library from [`import-fresh`](https://github.com/sindresorhus/import-fresh) to [`jiti`](https://github.com/unjs/jiti). It is responsible for loading files such as `docusaurus.config.js` or `sidebars.js`, and Docusaurus plugins.\r\n\r\n> :::info How to upgrade\r\n\r\n> In theory, you have nothing to do, and your existing config files should keep working as before.\r\n\r\n> However, this is a major dependency swap and subtle behavior changes could occur.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/unjs/unbuild/tree/main/src](https://github.com/unjs/unbuild/tree/main/src)\r\n    \r\n2. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L36](https://github.com/unjs/unbuild/blob/main/src/build.ts#L36)\r\n    \r\n3. [https://github.com/search?q=repo%3Afacebook%2Fdocusaurus%20jiti&type=code](https://github.com/search?q=repo%3Afacebook%2Fdocusaurus%20jiti&type=code)\r\n    \r\n4. [https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/website/docs/migration/v3.mdx#L759](https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/website/docs/migration/v3.mdx#L759)\r\n    \r\n5. [https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/packages/docusaurus-utils/src/moduleUtils.ts#L21](https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/packages/docusaurus-utils/src/moduleUtils.ts#L21)\r\n    \r\n6. [https://www.npmjs.com/package/jiti](https://www.npmjs.com/package/jiti)\r\n    \r\n7. [https://unjs.io/packages?q=&order=1&orderBy=title](https://unjs.io/packages?q=&order=1&orderBy=title)",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var b=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var r in e)c(l,r,{get:e[r],enumerable:!0})},o=(l,e,r,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of u(e))!y.call(l,s)&&s!==r&&c(l,s,{get:()=>e[s],enumerable:!(i=F(e,s))||i.enumerable});return l};var f=(l,e,r)=>(r=l!=null?p(m(l)):{},o(e||!l||!l.__esModule?c(r,\"default\",{value:l,enumerable:!0}):r,l)),j=l=>o(c({},\"__esModule\",{value:!0}),l);var t=b((S,a)=>{a.exports=_jsx_runtime});var k={};g(k,{default:()=>h,frontmatter:()=>w});var n=f(t()),w={title:\"Jiti usage in Docusaurus source\\xA0code.\"};function d(l){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"For this week, I have been reading \",(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild\",children:\"unbuild\"}),\" source code and found few packages that I have never seen before or used. I wanted to share some interesting packages that are used in these OSS projects so we can learn a thing or two\\xA0;)\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The following are discussed in this article:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What is Jiti?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Jiti\\u2019s usage in Docusaurus\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*0p3E1fZ7ERKJKI52OPNKYQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"what-isjiti\",children:\"What is\\xA0Jiti?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Jiti is a package built by \",(0,n.jsx)(e.a,{href:\"https://github.com/unjs\",children:\"authors at Unjs\"}),\". Unjs provides JS tools, libraries and has about 63 npm packages and \",(0,n.jsx)(e.a,{href:\"https://unjs.io/packages?q=&order=1&orderBy=title\",children:\"421m downloads per month\"}),\". Sheesh, that\\u2019s a lot.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/unjs/jiti#readme\",children:\"Jiti repository\"}),\" has this description \\u201CRuntime TypeScript and ESM support for Node.js\\u201D. Okay, what does this mean? To understand more about this tool, I looked at the features it offers:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Seamless TypeScript and ESM syntax support for Node.js\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Seamless interoperability between ESM and CommonJS\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Asynchronous API to replace \",(0,n.jsx)(e.code,{children:\"import()\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Synchronous API to replace \",(0,n.jsx)(e.code,{children:\"require()\"}),\" (deprecated)\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Super slim and zero dependency\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Custom resolve aliases\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Smart syntax detection to avoid extra transforms\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Node.js native \",(0,n.jsx)(e.code,{children:\"require.cache\"}),\" integration\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Filesystem transpile with hard disk caches\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"ESM Loader support\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"JSX support (opt-in)\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Sure enough, it has features that I do not understand yet, the one feature that rings a bell for me is the \",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.strong,{children:\"Seamless interoperability between ESM and CommonJS\"})}),\" because I have seen this in dynamic imports in OSS projects where a file is defined using CommonJS (module.exports) required in an file using ESM syntax (export default) but still not sure if what I saw back then has any resemblance to what Jiti offers. I am interested to learn more about this package, may be in the future.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"But let\\u2019s review Jiti\\u2019s usage in Open Source projects such as Docusaurus and Unbuild\"}),`\n`,(0,n.jsx)(e.h3,{id:\"jitis-usage-in-docusaurus\",children:\"Jiti\\u2019s usage in Docusaurus\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I found the below code related to Jiti in the \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/packages/docusaurus-utils/src/moduleUtils.ts#L21\",children:\"Docusaurus\\u200A\\u2014\\u200AmoduleUtils.js\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" jiti \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'jiti'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"jiti is able to load ESM, CJS, JSON, TS modules\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" loadFreshModule\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"modulePath\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Promise\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"unknown\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  try\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" modulePath \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'string'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      throw\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Error\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        logger\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"interpolate\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`Invalid module path of type name=${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"modulePath\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" load \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" jiti\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"__filename\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Transpilation cache, can be safely enabled\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      cache\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Bypass Node.js runtime require cache\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:' Same as \"import-fresh\" package we used previously'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      requireCache\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Only take into consideration the default export\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" For now we don't need named exports\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" This also helps normalize return value for both CJS/ESM/TS modules\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      interopDefault\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" debug: true,\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" load\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"modulePath\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s get the hint from the comments\\u200A\\u2014\\u200A\\u201C\",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.strong,{children:\"jiti is able to load ESM, CJS, JSON, TS modules\"})}),\"\\u201D, this would be the interoperability feature. jiti is imported and directly called as a function with some parameters for additional configuration and it has comments explaining what the configuration is for.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Transpilation cache, can be safely enabled\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cache\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Bypass Node.js runtime require cache\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:' Same as \"import-fresh\" package we used previously'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"requireCache\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Only take into consideration the default export\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" For now we don't need named exports\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" This also helps normalize return value for both CJS/ESM/TS modules\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"interopDefault\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" debug: true,\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I also found this \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/website/docs/migration/v3.mdx#L759\",children:\"note in Docusaurus migration guide\"}),\":\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"New Config Loader\"}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Docusaurus v3 changes its internal config loading library from \",(0,n.jsx)(e.a,{href:\"https://github.com/sindresorhus/import-fresh\",children:(0,n.jsx)(e.code,{children:\"import-fresh\"})}),\" to \",(0,n.jsx)(e.a,{href:\"https://github.com/unjs/jiti\",children:(0,n.jsx)(e.code,{children:\"jiti\"})}),\". It is responsible for loading files such as \",(0,n.jsx)(e.code,{children:\"docusaurus.config.js\"}),\" or \",(0,n.jsx)(e.code,{children:\"sidebars.js\"}),\", and Docusaurus plugins.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\":::info How to upgrade\"}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"In theory, you have nothing to do, and your existing config files should keep working as before.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"However, this is a major dependency swap and subtle behavior changes could occur.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/tree/main/src\",children:\"https://github.com/unjs/unbuild/tree/main/src\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L36\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L36\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Afacebook%2Fdocusaurus%20jiti&type=code\",children:\"https://github.com/search?q=repo%3Afacebook%2Fdocusaurus%20jiti&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/website/docs/migration/v3.mdx#L759\",children:\"https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/website/docs/migration/v3.mdx#L759\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/packages/docusaurus-utils/src/moduleUtils.ts#L21\",children:\"https://github.com/facebook/docusaurus/blob/71d682c53b2f6bcb2e70c86dde79cbb7c581e9a8/packages/docusaurus-utils/src/moduleUtils.ts#L21\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/jiti\",children:\"https://www.npmjs.com/package/jiti\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://unjs.io/packages?q=&order=1&orderBy=title\",children:\"https://unjs.io/packages?q=&order=1&orderBy=title\"})}),`\n`]}),`\n`]})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(d,{...l})}):d(l)}return j(k);})();\n;return Component;"
        },
        "_id": "blog/jiti-in-docusaurus.mdx",
        "_raw": {
          "sourceFilePath": "blog/jiti-in-docusaurus.mdx",
          "sourceFileName": "jiti-in-docusaurus.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/jiti-in-docusaurus"
        },
        "type": "Doc",
        "slug": "/blog/jiti-in-docusaurus",
        "slugAsParams": "jiti-in-docusaurus"
      },
      "documentHash": "1740489186325",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/kodiak-toml-in-tRPC.mdx": {
      "document": {
        "title": "kodiak.toml in tRPC source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze [kodiak.t](https://kodiakhq.com/)oml found in [tRPC source](https://github.com/trpc/trpc/blob/next/.kodiak.toml) code.\r\n\r\n# **Kodiak**\r\n\r\nAutomate your GitHub Pull Requests using Kodiak\r\n\r\n1. Auto Update — Keep your PRs up to date with master automatically\r\n    \r\n2. Auto Merge — Add the automerge label to auto merge once CI and Approvals pass.\r\n    \r\n3. Bot Collaboration — Combine Kodiak with a dependency bot (dependabot, snyk, greenskeeper.io) to automate updating of dependencies\r\n    \r\n\r\nWhen you visit kodiak’s website, you will find that Kodiak is a tool that  \r\nautomates Github pull requests.\r\n\r\nCheck out its [quick start guide](https://kodiakhq.com/docs/quickstart).\r\n\r\n# **kodiak.yaml in trpc repository:**\r\n\r\nThe below code snippet is picked from [.kodiak.toml](https://github.com/trpc/trpc/blob/next/.kodiak.toml)\r\n\r\n```plaintext\r\n# .kodiak.toml\r\nversion = 1\r\n[approve]\r\nauto_approve_usernames = [\"dependabot\", \"renovate\"]\r\n[merge]\r\nmethod = \"squash\"\r\nautomerge_label = [\"🚀 merge\", \"⬆️ dependencies\"]\r\n[merge.automerge_dependencies]\r\n# only auto merge \"minor\" and \"patch\" version upgrades.\r\nversions = [\"minor\", \"patch\"]\r\nusernames = [\"dependabot\", \"renovate\"]\r\n[update]\r\nautoupdate_label = \"♻️ autoupdate\"\r\n```\r\n\r\nLet’s now refer to the documentation based on this configuration file. The first option is [approve](https://kodiakhq.com/docs/config-reference#approveauto_approve_usernames). If a PR is opened by a user with a username in the approve.auto\\_approve\\_usernames list, Kodiak will automatically add an approval to the PR. Read more about [approve](https://kodiakhq.com/docs/config-reference#approveauto_approve_usernames).\r\n\r\nNext option in above file is merge. It has two variables set, `method` and `automerge_label`. Label your pull request with the kodiak: merge.method = ‘rebase’ label, for example, to set merge.method to “rebase” for your pull request. Read more about [merge](https://kodiakhq.com/docs/config-reference#mergemethod-1). [automerge\\_label](https://kodiakhq.com/docs/config-reference#mergeautomerge_label) is a label to enable Kodiak to merge a PR. Kodiak can only merge pull requests passing your GitHub branch protection rules.If multiple labels are specified in an array, any of the specified labels will trigger merge.\r\n\r\n```plaintext\r\n[merge.automerge_dependencies]\r\n# only auto merge \"minor\" and \"patch\" version upgrades.\r\nversions = [\"minor\", \"patch\"]\r\nusernames = [\"dependabot\", \"renovate\"]\r\n```\r\n\r\nKodiak will only automerge dependency upgrades for pull request authors in this list. Check out [automerge\\_dependenciesusernames](https://kodiakhq.com/docs/config-reference#mergeautomerge_dependenciesusernames).\r\n\r\n```plaintext\r\n[update]\r\nautoupdate_label = \"♻️ autoupdate\"\r\n```\r\n\r\nPull requests with the update.autoupdate\\_label will be updated when they are out-of-date with their base branch.\r\n\r\nCheckout [Configuration Reference](https://kodiakhq.com/docs/config-reference) for a comprehensive list of  \r\nconfiguration options.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1\\. https://kodiakhq.com/  \r\n2\\. https://github.com/trpc/trpc/blob/next/.kodiak.toml\r\n",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),b=(a,e)=>{for(var t in e)i(a,t,{get:e[t],enumerable:!0})},c=(a,e,t,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!k.call(a,r)&&r!==t&&i(a,r,{get:()=>e[r],enumerable:!(o=m(e,r))||o.enumerable});return a};var y=(a,e,t)=>(t=a!=null?p(g(a)):{},c(e||!a||!a.__esModule?i(t,\"default\",{value:a,enumerable:!0}):t,a)),v=a=>c(i({},\"__esModule\",{value:!0}),a);var d=f((N,l)=>{l.exports=_jsx_runtime});var _={};b(_,{default:()=>h,frontmatter:()=>w});var n=y(d()),w={title:\"kodiak.toml in tRPC source code\"};function s(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze \",(0,n.jsx)(e.a,{href:\"https://kodiakhq.com/\",children:\"kodiak.t\"}),\"oml found in \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/.kodiak.toml\",children:\"tRPC source\"}),\" code.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"kodiak\",children:(0,n.jsx)(e.strong,{children:\"Kodiak\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Automate your GitHub Pull Requests using Kodiak\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Auto Update \\u2014 Keep your PRs up to date with master automatically\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Auto Merge \\u2014 Add the automerge label to auto merge once CI and Approvals pass.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Bot Collaboration \\u2014 Combine Kodiak with a dependency bot (dependabot, snyk, greenskeeper.io) to automate updating of dependencies\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you visit kodiak\\u2019s website, you will find that Kodiak is a tool that\",(0,n.jsx)(e.br,{}),`\n`,\"automates Github pull requests.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Check out its \",(0,n.jsx)(e.a,{href:\"https://kodiakhq.com/docs/quickstart\",children:\"quick start guide\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"kodiakyaml-in-trpc-repository\",children:(0,n.jsx)(e.strong,{children:\"kodiak.yaml in trpc repository:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below code snippet is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/.kodiak.toml\",children:\".kodiak.toml\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# .kodiak.toml\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"version = 1\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"[approve]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'auto_approve_usernames = [\"dependabot\", \"renovate\"]'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"[merge]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'method = \"squash\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'automerge_label = [\"\\u{1F680} merge\", \"\\u2B06\\uFE0F dependencies\"]'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"[merge.automerge_dependencies]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'# only auto merge \"minor\" and \"patch\" version upgrades.'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'versions = [\"minor\", \"patch\"]'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'usernames = [\"dependabot\", \"renovate\"]'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"[update]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'autoupdate_label = \"\\u267B\\uFE0F autoupdate\"'})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s now refer to the documentation based on this configuration file. The first option is \",(0,n.jsx)(e.a,{href:\"https://kodiakhq.com/docs/config-reference#approveauto_approve_usernames\",children:\"approve\"}),\". If a PR is opened by a user with a username in the approve.auto_approve_usernames list, Kodiak will automatically add an approval to the PR. Read more about \",(0,n.jsx)(e.a,{href:\"https://kodiakhq.com/docs/config-reference#approveauto_approve_usernames\",children:\"approve\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Next option in above file is merge. It has two variables set, \",(0,n.jsx)(e.code,{children:\"method\"}),\" and \",(0,n.jsx)(e.code,{children:\"automerge_label\"}),\". Label your pull request with the kodiak: merge.method = \\u2018rebase\\u2019 label, for example, to set merge.method to \\u201Crebase\\u201D for your pull request. Read more about \",(0,n.jsx)(e.a,{href:\"https://kodiakhq.com/docs/config-reference#mergemethod-1\",children:\"merge\"}),\". \",(0,n.jsx)(e.a,{href:\"https://kodiakhq.com/docs/config-reference#mergeautomerge_label\",children:\"automerge_label\"}),\" is a label to enable Kodiak to merge a PR. Kodiak can only merge pull requests passing your GitHub branch protection rules.If multiple labels are specified in an array, any of the specified labels will trigger merge.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"[merge.automerge_dependencies]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'# only auto merge \"minor\" and \"patch\" version upgrades.'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'versions = [\"minor\", \"patch\"]'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'usernames = [\"dependabot\", \"renovate\"]'})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Kodiak will only automerge dependency upgrades for pull request authors in this list. Check out \",(0,n.jsx)(e.a,{href:\"https://kodiakhq.com/docs/config-reference#mergeautomerge_dependenciesusernames\",children:\"automerge_dependenciesusernames\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"[update]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'autoupdate_label = \"\\u267B\\uFE0F autoupdate\"'})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Pull requests with the update.autoupdate_label will be updated when they are out-of-date with their base branch.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Checkout \",(0,n.jsx)(e.a,{href:\"https://kodiakhq.com/docs/config-reference\",children:\"Configuration Reference\"}),\" for a comprehensive list of\",(0,n.jsx)(e.br,{}),`\n`,\"configuration options.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. \",(0,n.jsx)(e.a,{href:\"https://kodiakhq.com/\",children:\"https://kodiakhq.com/\"}),(0,n.jsx)(e.br,{}),`\n`,\"2. \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/.kodiak.toml\",children:\"https://github.com/trpc/trpc/blob/next/.kodiak.toml\"})]})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(s,{...a})}):s(a)}return v(_);})();\n;return Component;"
        },
        "_id": "blog/kodiak-toml-in-tRPC.mdx",
        "_raw": {
          "sourceFilePath": "blog/kodiak-toml-in-tRPC.mdx",
          "sourceFileName": "kodiak-toml-in-tRPC.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/kodiak-toml-in-tRPC"
        },
        "type": "Doc",
        "slug": "/blog/kodiak-toml-in-tRPC",
        "slugAsParams": "kodiak-toml-in-tRPC"
      },
      "documentHash": "1740489186327",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/list-filesnames-recursively.mdx": {
      "document": {
        "title": "List filenames recursively in a directory using this utility function.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review a function named [listRecursively](https://github.com/unjs/unbuild/blob/main/src/utils.ts#L54) found in [unbuild/src/utils.ts](https://github.com/unjs/unbuild/blob/main/src/utils.ts#L54)\r\n\r\n```js\r\nexport function listRecursively(path: string): string[] {\r\n  const filenames = new Set<string>();\r\n  const walk = (path: string): void => {\r\n    const files = readdirSync(path);\r\n    for (const file of files) {\r\n      const fullPath = resolve(path, file);\r\n      if (statSync(fullPath).isDirectory()) {\r\n        filenames.add(fullPath + \"/\");\r\n        walk(fullPath);\r\n      } else {\r\n        filenames.add(fullPath);\r\n      }\r\n    }\r\n  };\r\n  walk(path);\r\n  return [...filenames];\r\n}\r\n```\r\n\r\nThis codesnippet does below:\r\n\r\n* Initialise filenames to a Set\r\n    \r\n\r\n```js\r\nconst filenames = new Set<string>();\r\n```\r\n\r\nUsing a Set prevents duplicate file names, if you wish to include duplicate files names, you are better off using an array.\r\n\r\n> I study large open-source projects and provide insights, give [my repository a star](https://github.com/ramu-narasinga/thinkthroo).\r\n\r\n* Define walk function with path parameter\r\n    \r\n\r\n```js\r\nconst walk = (path: string): void => {\r\n```\r\n\r\n* Get the list of files/directorites\r\n    \r\n\r\n```js\r\nconst files = readdirSync(path);\r\n```\r\n\r\nreaddirSync is an API used to read the contents of the directory. Read more about [readdirSync](https://nodejs.org/api/fs.html#fsreaddirsyncpath-options).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*2K5Q4iVxNnmdtBsEOpWwVA.png)\r\n\r\n* Loop through files and get full path\r\n    \r\n\r\n```js\r\nfor (const file of files) {\r\n      const fullPath = resolve(path, file);\r\n```\r\n\r\n* Check if the path is a directory\r\n    \r\n\r\n```js\r\n// statSync provides an API to check if the given path is a directory.\r\nif (statSync(fullPath).isDirectory()) {\r\n  // Add the path to filenames set\r\n  // filenames is a set and add is used add the fullPath\r\n  filenames.add(fullPath + \"/\");\r\n  // Call walk function recursively\r\n  walk(fullPath);\r\n} else {\r\n  // filenames is a set and add is used add the fullPath\r\n  filenames.add(fullPath);\r\n}\r\n```\r\n\r\n* Call the `walk` function.\r\n    \r\n\r\n```js\r\n walk(path);\r\n```\r\n\r\n* Return the file names\r\n    \r\n\r\n```js\r\nreturn [...filenames];\r\n```\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1. [https://github.com/unjs/unbuild/blob/main/src/utils.ts#L54](https://github.com/unjs/unbuild/blob/main/src/utils.ts#L54)\r\n    \r\n2. [https://nodejs.org/api/fs.html#fsreaddirsyncpath-options](https://nodejs.org/api/fs.html#fsreaddirsyncpath-options)\r\n    \r\n3. [https://nodejs.org/api/fs.html#fsstatsyncpath-options](https://nodejs.org/api/fs.html#fsstatsyncpath-options)",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),g=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},t=(n,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(n,r)&&r!==s&&c(n,r,{get:()=>e[r],enumerable:!(a=p(e,r))||a.enumerable});return n};var b=(n,e,s)=>(s=n!=null?h(m(n)):{},t(e||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),N=n=>t(c({},\"__esModule\",{value:!0}),n);var i=f((v,o)=>{o.exports=_jsx_runtime});var w={};g(w,{default:()=>d,frontmatter:()=>j});var l=b(i()),j={title:\"List filenames recursively in a directory using this utility function.\"};function F(n){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we will review a function named \",(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/utils.ts#L54\",children:\"listRecursively\"}),\" found in \",(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/utils.ts#L54\",children:\"unbuild/src/utils.ts\"})]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" listRecursively\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" filenames \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">();\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" walk\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" files \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" readdirSync\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    for\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" file \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"of\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" files\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fullPath \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" resolve\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"statSync\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fullPath\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isDirectory\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"())\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        filenames\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fullPath \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"/\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        walk\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fullPath\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        filenames\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fullPath\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  };\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  walk\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filenames\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"];\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"This codesnippet does below:\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"Initialise filenames to a Set\"}),`\n`]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" filenames \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">();\"})]})})})}),`\n`,(0,l.jsx)(e.p,{children:\"Using a Set prevents duplicate file names, if you wish to include duplicate files names, you are better off using an array.\"}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsxs)(e.p,{children:[\"I study large open-source projects and provide insights, give \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga/thinkthroo\",children:\"my repository a star\"}),\".\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"Define walk function with path parameter\"}),`\n`]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" walk\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]})})})}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"Get the list of files/directorites\"}),`\n`]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" files \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" readdirSync\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"readdirSync is an API used to read the contents of the directory. Read more about \",(0,l.jsx)(e.a,{href:\"https://nodejs.org/api/fs.html#fsreaddirsyncpath-options\",children:\"readdirSync\"}),\".\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*2K5Q4iVxNnmdtBsEOpWwVA.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"Loop through files and get full path\"}),`\n`]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"for\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" file \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"of\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" files\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fullPath \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" resolve\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})]})})}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"Check if the path is a directory\"}),`\n`]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" statSync provides an API to check if the given path is a directory.\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"statSync\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fullPath\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isDirectory\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"())\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Add the path to filenames set\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" filenames is a set and add is used add the fullPath\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  filenames\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fullPath \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"/\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Call walk function recursively\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  walk\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fullPath\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" filenames is a set and add is used add the fullPath\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  filenames\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fullPath\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"Call the \",(0,l.jsx)(e.code,{children:\"walk\"}),\" function.\"]}),`\n`]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" walk\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"Return the file names\"}),`\n`]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filenames\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"];\"})]})})})}),`\n`,(0,l.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/utils.ts#L54\",children:\"https://github.com/unjs/unbuild/blob/main/src/utils.ts#L54\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://nodejs.org/api/fs.html#fsreaddirsyncpath-options\",children:\"https://nodejs.org/api/fs.html#fsreaddirsyncpath-options\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://nodejs.org/api/fs.html#fsstatsyncpath-options\",children:\"https://nodejs.org/api/fs.html#fsstatsyncpath-options\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(F,{...n})}):F(n)}return N(w);})();\n;return Component;"
        },
        "_id": "blog/list-filesnames-recursively.mdx",
        "_raw": {
          "sourceFilePath": "blog/list-filesnames-recursively.mdx",
          "sourceFileName": "list-filesnames-recursively.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/list-filesnames-recursively"
        },
        "type": "Doc",
        "slug": "/blog/list-filesnames-recursively",
        "slugAsParams": "list-filesnames-recursively"
      },
      "documentHash": "1740489186329",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/lobechat-uses-namespaces-actions.mdx": {
      "document": {
        "title": "LobeChat uses Namespace for action labels in DevTools configuration\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will look at how the action labels use Namespace in LobeChat devtools. I want to provide a bit of an introduction to the terms such action labels, devtools and how/why they come into the picture.\r\n\r\nLobeChat uses Zustand for its state management and has DevTools configured for debugging purposes. When you see DevTools configured, you will have action labels for the Zustand.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*CZf6F7zPQGj3hBzAWtH4lg.png)\r\n\r\n### What is action label?\r\n\r\nIn the `set`, you will have to provide action label, otherwise this action appears as [anonymous in your Redux DevTools](https://zustand.docs.pmnd.rs/middlewares/devtools#all-action-names-are-labeled-as-%27anonymous%27).\r\n\r\n#### Example from the documentation\r\n\r\n```js\r\naddFish: () => set((state) => ({ fishes: state.fishes + 1 }),\r\n undefined,\r\n 'jungle/addFish',\r\n ),\r\n```\r\n\r\nAction name here is a string.\r\n\r\n### How does LobeChat configure its action label?\r\n\r\nLet’s pick this example found in [Session Slice action](https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L167).\r\n\r\n```js\r\nswitchSession: (sessionId) => {\r\n if (get().activeId === sessionId) return;\r\n \r\n set({ activeId: sessionId }, false, n(`activeSession/${sessionId}`));\r\n},\r\n```\r\n\r\nAction name here is a function named `n`. What’s this n function? n is a function returned by a function named `setNamespace` at [line 31](https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L31C1-L31C35).\r\n\r\n```js\r\nconst n = setNamespace('session');\r\n```\r\n\r\nsetNamespace is imported from [storeDebug.ts](https://github.com/lobehub/lobe-chat/blob/main/src/utils/storeDebug.ts#L1) and has the below code:\r\n\r\n```js\r\nexport const setNamespace = (namespace: string) => {\r\n \r\n  return (type: string, payload?: any) => {\r\n   const name = [namespace, type].filter(Boolean).join('/');\r\n     return payload\r\n       ? {\r\n       payload,\r\n       type: name,\r\n     } : name;\r\n   };\r\n};\r\n```\r\n\r\nThis returns an arrow function that has two parameters: \r\n\r\n* type: string\r\n    \r\n* payload?: any\r\n    \r\n\r\nThis below line is interesting.\r\n\r\n```js\r\nconst name = [namespace, type].filter(Boolean).join('/');\r\n```\r\n\r\nI have never seen this before — applying filter with `Boolean`. If you were to execute this in your browser’s console using some strings as shown below:\r\n\r\n```js\r\n[\"session\", true].filter(Boolean).join('/')\r\n\r\n[\"session\", \"true\"].filter(Boolean).join('/')\r\n\r\n[\"session\", \"true\"].filter(Boolean).join('/')\r\n\r\n[\"session\", \"switchSession/true/id-123\"].filter(Boolean).join('/')\r\n\r\n[\"session\", \"switchSession/id-123\"].filter(Boolean).join('/')\r\n```\r\n\r\nWhen you paste the above code in the browser’s console, you will find the results shown as in this screenshot below\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*t8Qz7e79G6uXVa3QtHpHdw.png)\r\n\r\nI asked ChatGPT to explain this line of code and it has to say this about it: \r\n\r\n> The line `[namespace, type].filter(Boolean).join('/')` is used to build a string representing the action name for Zustand's store configuration in LobeChat. Let’s break it down and address why `filter(Boolean)` is used.\r\n\r\n> Code Breakdown\r\n\r\n> `[namespace, type]`:\r\n\r\n> This creates an array containing two values: `namespace` and `type`.\r\n\r\n> `namespace` is likely a string representing a broader category or module.\r\n\r\n> `type` represents the specific action within that namespace, e.g., `activeSession`.\r\n\r\n> `.filter(Boolean)`:\r\n\r\n> Filters out any `falsy` values (e.g., `undefined`, `null`, `false`, or an empty string) from the array.\r\n\r\n> This ensures the resulting string only includes valid components.\r\n\r\n> If `namespace` is not provided (e.g., `namespace` is `undefined` or `''`), it will not be included in the final string.\r\n\r\n> `.join('/')`:\r\n\r\n> Joins the remaining array elements with a `/` separator to create a namespaced action name, e.g., `namespace/type` or just `type` if `namespace` is absent.\r\n\r\nIf the payload exists, an object is returned:\r\n\r\n```js\r\nreturn payload\r\n       ? {\r\n       payload,\r\n       type: name,\r\n     } : name;\r\n   };\r\n```\r\n\r\nBelow example is from [global/action.ts](https://github.com/lobehub/lobe-chat/blob/fef58c527c13c7ebc908a458cfbddb538165c92f/src/store/global/action.ts#L49)\r\n\r\n```js\r\ntoggleChatSideBar: (newValue) => {\r\n    const showChatSideBar =\r\n      typeof newValue === 'boolean' ? newValue : !get().status.showChatSideBar;\r\n\r\n    get().updateSystemStatus({ showChatSideBar }, n('toggleAgentPanel', newValue));\r\n},\r\n```\r\n\r\nConclusion here is action name can be an object or a string.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L31C1-L31C35](https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L31C1-L31C35)\r\n    \r\n2. [https://github.com/lobehub/lobe-chat/blob/main/src/utils/storeDebug.ts#L1](https://github.com/lobehub/lobe-chat/blob/main/src/utils/storeDebug.ts#L1)\r\n    \r\n3. [https://zustand.docs.pmnd.rs/middlewares/devtools#debugging-a-store](https://zustand.docs.pmnd.rs/middlewares/devtools#debugging-a-store)\r\n    \r\n4. [https://zustand.docs.pmnd.rs/middlewares/devtools#all-action-names-are-labeled-as-'anonymous'](https://zustand.docs.pmnd.rs/middlewares/devtools#all-action-names-are-labeled-as-%27anonymous%27)",
          "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),b=(l,e)=>{for(var s in e)r(l,s,{get:e[s],enumerable:!0})},a=(l,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(l,c)&&c!==s&&r(l,c,{get:()=>e[c],enumerable:!(o=p(e,c))||o.enumerable});return l};var f=(l,e,s)=>(s=l!=null?h(m(l)):{},a(e||!l||!l.__esModule?r(s,\"default\",{value:l,enumerable:!0}):s,l)),w=l=>a(r({},\"__esModule\",{value:!0}),l);var i=g((k,t)=>{t.exports=_jsx_runtime});var j={};b(j,{default:()=>d,frontmatter:()=>N});var n=f(i()),N={title:\"LobeChat uses Namespace for action labels in DevTools configuration\"};function F(l){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this article, we will look at how the action labels use Namespace in LobeChat devtools. I want to provide a bit of an introduction to the terms such action labels, devtools and how/why they come into the picture.\"}),`\n`,(0,n.jsx)(e.p,{children:\"LobeChat uses Zustand for its state management and has DevTools configured for debugging purposes. When you see DevTools configured, you will have action labels for the Zustand.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*CZf6F7zPQGj3hBzAWtH4lg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"what-is-actionlabel\",children:\"What is action\\xA0label?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.code,{children:\"set\"}),\", you will have to provide action label, otherwise this action appears as \",(0,n.jsx)(e.a,{href:\"https://zustand.docs.pmnd.rs/middlewares/devtools#all-action-names-are-labeled-as-%27anonymous%27\",children:\"anonymous in your Redux DevTools\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"example-from-the-documentation\",children:\"Example from the documentation\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"addFish\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fishes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fishes \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }),\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" undefined,\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'jungle/addFish'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ),\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Action name here is a string.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"how-does-lobechat-configure-its-actionlabel\",children:\"How does LobeChat configure its action\\xA0label?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s pick this example found in \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L167\",children:\"Session Slice action\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"switchSession\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"sessionId\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"get\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"activeId \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" sessionId\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" return;\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" activeId\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" sessionId \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"},\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" n\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`activeSession/${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"sessionId\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"},\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Action name here is a function named \",(0,n.jsx)(e.code,{children:\"n\"}),\". What\\u2019s this n function? n is a function returned by a function named \",(0,n.jsx)(e.code,{children:\"setNamespace\"}),\" at \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L31C1-L31C35\",children:\"line 31\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" n \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setNamespace\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'session'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"setNamespace is imported from \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/utils/storeDebug.ts#L1\",children:\"storeDebug.ts\"}),\" and has the below code:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" setNamespace\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"namespace\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" payload\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" any\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"namespace\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"].\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'/'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" payload\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"       ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"       payload\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"       type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     }\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This returns an arrow function that has two parameters:\\xA0\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"type: string\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"payload?: any\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"This below line is interesting.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"namespace\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"].\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'/'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I have never seen this before\\u200A\\u2014\\u200Aapplying filter with \",(0,n.jsx)(e.code,{children:\"Boolean\"}),\". If you were to execute this in your browser\\u2019s console using some strings as shown below:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"session\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true].\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'/'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"session\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"true\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"].\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'/'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"session\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"true\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"].\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'/'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"session\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"switchSession/true/id-123\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"].\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'/'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"session\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"switchSession/id-123\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"].\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'/'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"When you paste the above code in the browser\\u2019s console, you will find the results shown as in this screenshot below\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*t8Qz7e79G6uXVa3QtHpHdw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"I asked ChatGPT to explain this line of code and it has to say this about it:\\xA0\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"The line \",(0,n.jsx)(e.code,{children:\"[namespace, type].filter(Boolean).join('/')\"}),\" is used to build a string representing the action name for Zustand's store configuration in LobeChat. Let\\u2019s break it down and address why \",(0,n.jsx)(e.code,{children:\"filter(Boolean)\"}),\" is used.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Code Breakdown\"}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"[namespace, type]\"}),\":\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"This creates an array containing two values: \",(0,n.jsx)(e.code,{children:\"namespace\"}),\" and \",(0,n.jsx)(e.code,{children:\"type\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"namespace\"}),\" is likely a string representing a broader category or module.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"type\"}),\" represents the specific action within that namespace, e.g., \",(0,n.jsx)(e.code,{children:\"activeSession\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\".filter(Boolean)\"}),\":\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Filters out any \",(0,n.jsx)(e.code,{children:\"falsy\"}),\" values (e.g., \",(0,n.jsx)(e.code,{children:\"undefined\"}),\", \",(0,n.jsx)(e.code,{children:\"null\"}),\", \",(0,n.jsx)(e.code,{children:\"false\"}),\", or an empty string) from the array.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"This ensures the resulting string only includes valid components.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"If \",(0,n.jsx)(e.code,{children:\"namespace\"}),\" is not provided (e.g., \",(0,n.jsx)(e.code,{children:\"namespace\"}),\" is \",(0,n.jsx)(e.code,{children:\"undefined\"}),\" or \",(0,n.jsx)(e.code,{children:\"''\"}),\"), it will not be included in the final string.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\".join('/')\"}),\":\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Joins the remaining array elements with a \",(0,n.jsx)(e.code,{children:\"/\"}),\" separator to create a namespaced action name, e.g., \",(0,n.jsx)(e.code,{children:\"namespace/type\"}),\" or just \",(0,n.jsx)(e.code,{children:\"type\"}),\" if \",(0,n.jsx)(e.code,{children:\"namespace\"}),\" is absent.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"If the payload exists, an object is returned:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" payload\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"       ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"       payload\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"       type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     }\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"   }\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Below example is from \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/fef58c527c13c7ebc908a458cfbddb538165c92f/src/store/global/action.ts#L49\",children:\"global/action.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"toggleChatSideBar\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"newValue\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" showChatSideBar \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" newValue \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'boolean'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" newValue \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" !\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"get\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"status\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"showChatSideBar\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    get\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"updateSystemStatus\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" showChatSideBar \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"},\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" n\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'toggleAgentPanel'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" newValue\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Conclusion here is action name can be an object or a string.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L31C1-L31C35\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/store/session/slices/session/action.ts#L31C1-L31C35\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/utils/storeDebug.ts#L1\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/utils/storeDebug.ts#L1\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://zustand.docs.pmnd.rs/middlewares/devtools#debugging-a-store\",children:\"https://zustand.docs.pmnd.rs/middlewares/devtools#debugging-a-store\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://zustand.docs.pmnd.rs/middlewares/devtools#all-action-names-are-labeled-as-%27anonymous%27\",children:\"https://zustand.docs.pmnd.rs/middlewares/devtools#all-action-names-are-labeled-as-'anonymous'\"})}),`\n`]}),`\n`]})]})}function d(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(F,{...l})}):F(l)}return w(j);})();\n;return Component;"
        },
        "_id": "blog/lobechat-uses-namespaces-actions.mdx",
        "_raw": {
          "sourceFilePath": "blog/lobechat-uses-namespaces-actions.mdx",
          "sourceFileName": "lobechat-uses-namespaces-actions.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/lobechat-uses-namespaces-actions"
        },
        "type": "Doc",
        "slug": "/blog/lobechat-uses-namespaces-actions",
        "slugAsParams": "lobechat-uses-namespaces-actions"
      },
      "documentHash": "1740489186331",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/lobechat-vs-shadcn-metadata.mdx": {
      "document": {
        "title": "A comparison of metadata configurations between Lobechat and Shadcn/ui\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, you will learn how metadata is configured in Lobechat and Shadcn/ui. This comparison shows two ways to configure your metadata, key difference here is that Shadcn/ui is a UI components provider. You don’t see any API calls made to the backend and you don’t find any database involved either. Lobechat, on the other hand, is our team’s favorite and is quite complex and a large project that has a database, uses tRPC to make API calls.\r\n\r\nYou will find out how the files and folders are used to configure metadata depending on the context, more on this in the later parts of this article.\r\n\r\nThere are two ways you can define metadata in a Next.js layout or a page\r\n\r\n1. Config-based Metadata: Export a static metadata object or a dynamic generateMetadata function in a layout.js or page.js file.\r\n    \r\n2. File-based Metadata: Add static or dynamically generated special files to route segments.\r\n    \r\n\r\nRead more about:  \r\n\\- [Static metadata](https://nextjs.org/docs/app/building-your-application/optimizing/metadata#static-metadata)  \r\n\\- [Dynamic metadata](https://nextjs.org/docs/app/building-your-application/optimizing/metadata#dynamic-metadata)  \r\n\\- [File Based Metadata](https://nextjs.org/docs/app/building-your-application/optimizing/metadata#file-based-metadata)\r\n\r\nWith this information from the documentation, we will find out which way Shadcn/ui and Lobechat have chosen.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*hTlrbaqKEdU4cXk3DVqIYw.png)\r\n\r\n### Shadcn/ui metadata configuration\r\n\r\nIn the [www/app/layout.tsx](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/layout.tsx#L15) in Shadcn/ui source code, metadata is defined as shown below:\r\n\r\n```plaintext\r\nexport const metadata: Metadata = {\r\n  title: {\r\n    default: siteConfig.name,\r\n    template: `%s - ${siteConfig.name}`,\r\n  },\r\n  metadataBase: new URL(siteConfig.url),\r\n  description: siteConfig.description,\r\n  keywords: [\r\n    \"Next.js\",\r\n    \"React\",\r\n    \"Tailwind CSS\",\r\n    \"Server Components\",\r\n    \"Radix UI\",\r\n  ],\r\n  authors: [\r\n    {\r\n      name: \"shadcn\",\r\n      url: \"https://shadcn.com\",\r\n    },\r\n  ],\r\n  creator: \"shadcn\",\r\n  openGraph: {\r\n    type: \"website\",\r\n    locale: \"en_US\",\r\n    url: siteConfig.url,\r\n    title: siteConfig.name,\r\n    description: siteConfig.description,\r\n    siteName: siteConfig.name,\r\n    images: [\r\n      {\r\n        url: siteConfig.ogImage,\r\n        width: 1200,\r\n        height: 630,\r\n        alt: siteConfig.name,\r\n      },\r\n    ],\r\n  },\r\n  twitter: {\r\n    card: \"summary_large_image\",\r\n    title: siteConfig.name,\r\n    description: siteConfig.description,\r\n    images: [siteConfig.ogImage],\r\n    creator: \"@shadcn\",\r\n  },\r\n  icons: {\r\n    icon: \"/favicon.ico\",\r\n    shortcut: \"/favicon-16x16.png\",\r\n    apple: \"/apple-touch-icon.png\",\r\n  },\r\n  manifest: `${siteConfig.url}/site.webmanifest`,\r\n}\r\n```\r\n\r\nWhat this means is that Shadcn/ui uses static metadata. [SiteConfig](https://github.com/shadcn-ui/ui/blob/main/apps/www/config/site.ts) is imported as shown below:\r\n\r\n```plaintext\r\nimport { META_THEME_COLORS, siteConfig } from \"@/config/site\"\r\n```\r\n\r\n### Lobechat metadata configuration\r\n\r\nIn the [Lobechat/src/app/layout.tsx](https://github.com/lobehub/lobe-chat/blob/main/src/app/layout.tsx#L47), you will find the below code:\r\n\r\n```plaintext\r\nexport { generateMetadata } from './metadata';\r\n```\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*cjyU40J-n3jM6tcOJ0ISMg.png)\r\n\r\ngenerateMetadata here means that Lobechat uses dynamic metadata. Below is the code picked from [Lobechat metadata file](https://github.com/lobehub/lobe-chat/blob/main/src/app/metadata.ts).\r\n\r\n```plaintext\r\nimport { Metadata } from 'next';\r\n\r\nimport { appEnv } from '@/config/app';\r\nimport { BRANDING_LOGO_URL, BRANDING_NAME, ORG_NAME } from '@/const/branding';\r\nimport { OFFICIAL_URL, OG_URL } from '@/const/url';\r\nimport { isCustomBranding, isCustomORG } from '@/const/version';\r\nimport { translation } from '@/server/translation';\r\n\r\nconst BASE_PATH = appEnv.NEXT_PUBLIC_BASE_PATH;\r\n\r\n// if there is a base path, then we don't need the manifest\r\nconst noManifest = !!BASE_PATH;\r\n\r\nexport const generateMetadata = async (): Promise<Metadata> => {\r\n  const { t } = await translation('metadata');\r\n\r\n  return {\r\n    alternates: {\r\n      canonical: OFFICIAL_URL,\r\n    },\r\n    appleWebApp: {\r\n      statusBarStyle: 'black-translucent',\r\n      title: BRANDING_NAME,\r\n    },\r\n    description: t('chat.description', { appName: BRANDING_NAME }),\r\n    icons: isCustomBranding\r\n      ? BRANDING_LOGO_URL\r\n      : {\r\n          apple: '/apple-touch-icon.png?v=1',\r\n          icon: '/favicon.ico?v=1',\r\n          shortcut: '/favicon-32x32.ico?v=1',\r\n        },\r\n    manifest: noManifest ? undefined : '/manifest.json',\r\n    metadataBase: new URL(OFFICIAL_URL),\r\n    openGraph: {\r\n      description: t('chat.description', { appName: BRANDING_NAME }),\r\n      images: [\r\n        {\r\n          alt: t('chat.title', { appName: BRANDING_NAME }),\r\n          height: 640,\r\n          url: OG_URL,\r\n          width: 1200,\r\n        },\r\n      ],\r\n      locale: 'en-US',\r\n      siteName: BRANDING_NAME,\r\n      title: BRANDING_NAME,\r\n      type: 'website',\r\n      url: OFFICIAL_URL,\r\n    },\r\n    title: {\r\n      default: t('chat.title', { appName: BRANDING_NAME }),\r\n      template: `%s · ${BRANDING_NAME}`,\r\n    },\r\n    twitter: {\r\n      card: 'summary_large_image',\r\n      description: t('chat.description', { appName: BRANDING_NAME }),\r\n      images: [OG_URL],\r\n      site: isCustomORG ? `@${ORG_NAME}` : '@lobehub',\r\n      title: t('chat.title', { appName: BRANDING_NAME }),\r\n    },\r\n  };\r\n};\r\n```\r\n\r\nIn the Shadcn/ui [siteconfig](https://github.com/shadcn-ui/ui/blob/main/apps/www/config/site.ts), we saw it contains brand information and relevant urls, but Lobechat has done it differently. There’s a `const` folder containing files such as \r\n\r\n* [Branding](https://github.com/lobehub/lobe-chat/blob/main/src/const/branding.ts)\r\n    \r\n* [URL](https://github.com/lobehub/lobe-chat/blob/main/src/const/url.ts)\r\n    \r\n* [Version](https://github.com/lobehub/lobe-chat/blob/main/src/const/version.ts)\r\n    \r\n\r\nThis configuration in the Lobechat comes from a folder named const instead of config, like in Shadcn/ui, because [config folder in Lobechat](https://github.com/lobehub/lobe-chat/tree/main/src/config)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1\\. [https://github.com/lobehub/lobe-chat/blob/main/src/app/metadata.ts](https://github.com/lobehub/lobe-chat/blob/main/src/app/metadata.ts)  \r\n2\\. [https://github.com/shadcn-ui/ui/blob/main/apps/www/config/site.ts](https://github.com/shadcn-ui/ui/blob/main/apps/www/config/site.ts)  \r\n3\\. [https://nextjs.org/docs/app/building-your-application/optimizing/metadata#static-metadata](https://nextjs.org/docs/app/building-your-application/optimizing/metadata#static-metadata)  \r\n4\\. [https://github.com/lobehub/lobe-chat/blob/main/src/app/layout.tsx#L47](https://github.com/lobehub/lobe-chat/blob/main/src/app/layout.tsx#L47)  \r\n5\\. [https://nextjs.org/docs/app/building-your-application/optimizing/metadata#dynamic-metadata](https://nextjs.org/docs/app/building-your-application/optimizing/metadata#dynamic-metadata)",
          "code": "var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var N=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var b=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),f=(e,n)=>{for(var i in n)l(e,i,{get:n[i],enumerable:!0})},t=(e,n,i,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let s of u(n))!g.call(e,s)&&s!==i&&l(e,s,{get:()=>n[s],enumerable:!(c=m(n,s))||c.enumerable});return e};var w=(e,n,i)=>(i=e!=null?o(N(e)):{},t(n||!e||!e.__esModule?l(i,\"default\",{value:e,enumerable:!0}):i,e)),y=e=>t(l({},\"__esModule\",{value:!0}),e);var h=b((L,r)=>{r.exports=_jsx_runtime});var A={};f(A,{default:()=>p,frontmatter:()=>x});var a=w(h()),x={title:\"A comparison of metadata configurations between Lobechat and Shadcn/ui\"};function d(e){let n={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:\"In this article, you will learn how metadata is configured in Lobechat and Shadcn/ui. This comparison shows two ways to configure your metadata, key difference here is that Shadcn/ui is a UI components provider. You don\\u2019t see any API calls made to the backend and you don\\u2019t find any database involved either. Lobechat, on the other hand, is our team\\u2019s favorite and is quite complex and a large project that has a database, uses tRPC to make API calls.\"}),`\n`,(0,a.jsx)(n.p,{children:\"You will find out how the files and folders are used to configure metadata depending on the context, more on this in the later parts of this article.\"}),`\n`,(0,a.jsx)(n.p,{children:\"There are two ways you can define metadata in a Next.js layout or a page\"}),`\n`,(0,a.jsxs)(n.ol,{children:[`\n`,(0,a.jsxs)(n.li,{children:[`\n`,(0,a.jsx)(n.p,{children:\"Config-based Metadata: Export a static metadata object or a dynamic generateMetadata function in a layout.js or page.js file.\"}),`\n`]}),`\n`,(0,a.jsxs)(n.li,{children:[`\n`,(0,a.jsx)(n.p,{children:\"File-based Metadata: Add static or dynamically generated special files to route segments.\"}),`\n`]}),`\n`]}),`\n`,(0,a.jsxs)(n.p,{children:[\"Read more about:\",(0,a.jsx)(n.br,{}),`\n`,\"- \",(0,a.jsx)(n.a,{href:\"https://nextjs.org/docs/app/building-your-application/optimizing/metadata#static-metadata\",children:\"Static metadata\"}),(0,a.jsx)(n.br,{}),`\n`,\"- \",(0,a.jsx)(n.a,{href:\"https://nextjs.org/docs/app/building-your-application/optimizing/metadata#dynamic-metadata\",children:\"Dynamic metadata\"}),(0,a.jsx)(n.br,{}),`\n`,\"- \",(0,a.jsx)(n.a,{href:\"https://nextjs.org/docs/app/building-your-application/optimizing/metadata#file-based-metadata\",children:\"File Based Metadata\"})]}),`\n`,(0,a.jsx)(n.p,{children:\"With this information from the documentation, we will find out which way Shadcn/ui and Lobechat have chosen.\"}),`\n`,(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*hTlrbaqKEdU4cXk3DVqIYw.png\",alt:\"\"})}),`\n`,(0,a.jsx)(n.h3,{id:\"shadcnui-metadata-configuration\",children:\"Shadcn/ui metadata configuration\"}),`\n`,(0,a.jsxs)(n.p,{children:[\"In the \",(0,a.jsx)(n.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/layout.tsx#L15\",children:\"www/app/layout.tsx\"}),\" in Shadcn/ui source code, metadata is defined as shown below:\"]}),`\n`,(0,a.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"export const metadata: Metadata = {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  title: {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    default: siteConfig.name,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    template: `%s - ${siteConfig.name}`,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  metadataBase: new URL(siteConfig.url),\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  description: siteConfig.description,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  keywords: [\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    \"Next.js\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    \"React\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    \"Tailwind CSS\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    \"Server Components\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    \"Radix UI\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  ],\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  authors: [\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'      name: \"shadcn\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'      url: \"https://shadcn.com\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  ],\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'  creator: \"shadcn\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  openGraph: {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    type: \"website\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    locale: \"en_US\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    url: siteConfig.url,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    title: siteConfig.name,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    description: siteConfig.description,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    siteName: siteConfig.name,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    images: [\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"        url: siteConfig.ogImage,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"        width: 1200,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"        height: 630,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"        alt: siteConfig.name,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    ],\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  twitter: {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    card: \"summary_large_image\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    title: siteConfig.name,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    description: siteConfig.description,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    images: [siteConfig.ogImage],\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    creator: \"@shadcn\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  icons: {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    icon: \"/favicon.ico\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    shortcut: \"/favicon-16x16.png\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'    apple: \"/apple-touch-icon.png\",'})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  manifest: `${siteConfig.url}/site.webmanifest`,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"}\"})})]})})}),`\n`,(0,a.jsxs)(n.p,{children:[\"What this means is that Shadcn/ui uses static metadata. \",(0,a.jsx)(n.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/config/site.ts\",children:\"SiteConfig\"}),\" is imported as shown below:\"]}),`\n`,(0,a.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsx)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:'import { META_THEME_COLORS, siteConfig } from \"@/config/site\"'})})})})}),`\n`,(0,a.jsx)(n.h3,{id:\"lobechat-metadata-configuration\",children:\"Lobechat metadata configuration\"}),`\n`,(0,a.jsxs)(n.p,{children:[\"In the \",(0,a.jsx)(n.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/layout.tsx#L47\",children:\"Lobechat/src/app/layout.tsx\"}),\", you will find the below code:\"]}),`\n`,(0,a.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsx)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"export { generateMetadata } from './metadata';\"})})})})}),`\n`,(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*cjyU40J-n3jM6tcOJ0ISMg.png\",alt:\"\"})}),`\n`,(0,a.jsxs)(n.p,{children:[\"generateMetadata here means that Lobechat uses dynamic metadata. Below is the code picked from \",(0,a.jsx)(n.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/metadata.ts\",children:\"Lobechat metadata file\"}),\".\"]}),`\n`,(0,a.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"import { Metadata } from 'next';\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"import { appEnv } from '@/config/app';\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"import { BRANDING_LOGO_URL, BRANDING_NAME, ORG_NAME } from '@/const/branding';\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"import { OFFICIAL_URL, OG_URL } from '@/const/url';\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"import { isCustomBranding, isCustomORG } from '@/const/version';\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"import { translation } from '@/server/translation';\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"const BASE_PATH = appEnv.NEXT_PUBLIC_BASE_PATH;\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"// if there is a base path, then we don't need the manifest\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"const noManifest = !!BASE_PATH;\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"export const generateMetadata = async (): Promise<Metadata> => {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  const { t } = await translation('metadata');\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  return {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    alternates: {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      canonical: OFFICIAL_URL,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    appleWebApp: {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      statusBarStyle: 'black-translucent',\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      title: BRANDING_NAME,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    description: t('chat.description', { appName: BRANDING_NAME }),\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    icons: isCustomBranding\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      ? BRANDING_LOGO_URL\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      : {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"          apple: '/apple-touch-icon.png?v=1',\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"          icon: '/favicon.ico?v=1',\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"          shortcut: '/favicon-32x32.ico?v=1',\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"        },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    manifest: noManifest ? undefined : '/manifest.json',\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    metadataBase: new URL(OFFICIAL_URL),\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    openGraph: {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      description: t('chat.description', { appName: BRANDING_NAME }),\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      images: [\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"        {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"          alt: t('chat.title', { appName: BRANDING_NAME }),\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"          height: 640,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"          url: OG_URL,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"          width: 1200,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"        },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      ],\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      locale: 'en-US',\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      siteName: BRANDING_NAME,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      title: BRANDING_NAME,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      type: 'website',\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      url: OFFICIAL_URL,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    title: {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      default: t('chat.title', { appName: BRANDING_NAME }),\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      template: `%s \\xB7 ${BRANDING_NAME}`,\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    twitter: {\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      card: 'summary_large_image',\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      description: t('chat.description', { appName: BRANDING_NAME }),\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      images: [OG_URL],\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      site: isCustomORG ? `@${ORG_NAME}` : '@lobehub',\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"      title: t('chat.title', { appName: BRANDING_NAME }),\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"  };\"})}),`\n`,(0,a.jsx)(n.span,{className:\"line\",children:(0,a.jsx)(n.span,{children:\"};\"})})]})})}),`\n`,(0,a.jsxs)(n.p,{children:[\"In the Shadcn/ui \",(0,a.jsx)(n.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/config/site.ts\",children:\"siteconfig\"}),\", we saw it contains brand information and relevant urls, but Lobechat has done it differently. There\\u2019s a \",(0,a.jsx)(n.code,{children:\"const\"}),\" folder containing files such as\\xA0\"]}),`\n`,(0,a.jsxs)(n.ul,{children:[`\n`,(0,a.jsxs)(n.li,{children:[`\n`,(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/const/branding.ts\",children:\"Branding\"})}),`\n`]}),`\n`,(0,a.jsxs)(n.li,{children:[`\n`,(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/const/url.ts\",children:\"URL\"})}),`\n`]}),`\n`,(0,a.jsxs)(n.li,{children:[`\n`,(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/const/version.ts\",children:\"Version\"})}),`\n`]}),`\n`]}),`\n`,(0,a.jsxs)(n.p,{children:[\"This configuration in the Lobechat comes from a folder named const instead of config, like in Shadcn/ui, because \",(0,a.jsx)(n.a,{href:\"https://github.com/lobehub/lobe-chat/tree/main/src/config\",children:\"config folder in Lobechat\"})]}),`\n`,(0,a.jsx)(n.h1,{id:\"about-me\",children:(0,a.jsx)(n.strong,{children:\"About me:\"})}),`\n`,(0,a.jsx)(n.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,a.jsxs)(n.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,a.jsx)(n.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,a.jsxs)(n.p,{children:[\"My Github \\u2014 \",(0,a.jsx)(n.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,a.jsxs)(n.p,{children:[\"My website \\u2014 \",(0,a.jsx)(n.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,a.jsxs)(n.p,{children:[\"My Youtube channel \\u2014 \",(0,a.jsx)(n.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,a.jsxs)(n.p,{children:[\"Learning platform \\u2014 \",(0,a.jsx)(n.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,a.jsxs)(n.p,{children:[\"Codebase Architecture \\u2014 \",(0,a.jsx)(n.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,a.jsxs)(n.p,{children:[\"Best practices \\u2014 \",(0,a.jsx)(n.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,a.jsxs)(n.p,{children:[\"Production-grade projects \\u2014 \",(0,a.jsx)(n.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,a.jsx)(n.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,a.jsxs)(n.p,{children:[\"1. \",(0,a.jsx)(n.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/metadata.ts\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/metadata.ts\"}),(0,a.jsx)(n.br,{}),`\n`,\"2. \",(0,a.jsx)(n.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/config/site.ts\",children:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/config/site.ts\"}),(0,a.jsx)(n.br,{}),`\n`,\"3. \",(0,a.jsx)(n.a,{href:\"https://nextjs.org/docs/app/building-your-application/optimizing/metadata#static-metadata\",children:\"https://nextjs.org/docs/app/building-your-application/optimizing/metadata#static-metadata\"}),(0,a.jsx)(n.br,{}),`\n`,\"4. \",(0,a.jsx)(n.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/layout.tsx#L47\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/layout.tsx#L47\"}),(0,a.jsx)(n.br,{}),`\n`,\"5. \",(0,a.jsx)(n.a,{href:\"https://nextjs.org/docs/app/building-your-application/optimizing/metadata#dynamic-metadata\",children:\"https://nextjs.org/docs/app/building-your-application/optimizing/metadata#dynamic-metadata\"})]})]})}function p(e={}){let{wrapper:n}=e.components||{};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}return y(A);})();\n;return Component;"
        },
        "_id": "blog/lobechat-vs-shadcn-metadata.mdx",
        "_raw": {
          "sourceFilePath": "blog/lobechat-vs-shadcn-metadata.mdx",
          "sourceFileName": "lobechat-vs-shadcn-metadata.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/lobechat-vs-shadcn-metadata"
        },
        "type": "Doc",
        "slug": "/blog/lobechat-vs-shadcn-metadata",
        "slugAsParams": "lobechat-vs-shadcn-metadata"
      },
      "documentHash": "1740489186333",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/locating-toolbar-in-grida.mdx": {
      "document": {
        "title": "Locating the toolbar code in the Grida codebase.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review the code related to toolbar that you find on [Grida Canvas page](https://app.grida.co/canvas). I will describe the approach I have taken to find the code rendering this toolbar shown in the below image.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*wJxtsTo6B3u2Jix5hvY9bg.png)\r\n\r\n### Inspect and find a unique identifier\r\n\r\nWhen I want to locate the code for an element in a project, I tend to open the developer tools and inspect the element, which in this case is toolbar.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*K6vI3IpvqLmUaUQ966-_-g.png)\r\n\r\nThe unique identifier here I chose is the classname.\r\n\r\n```js\r\nrounded-full flex gap-4 border bg-background shadow px-4 py-2 pointer-events-auto select-none\r\n```\r\n\r\nI searched across the codebase for this classname in the hopes of finding the toolbar component.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*zsrcvbiwh9tj7lTHpvOW6w.png)\r\n\r\nThere it was, [toolbar.tsx](https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L145). PlaygroundToolbar.tsx has the below code\r\n\r\n```js\r\nexport function PlaygroundToolbar({\r\n  onAddButtonClick,\r\n}: {\r\n  onAddButtonClick?: () => void;\r\n}) {\r\n  const { setCursorMode, cursor_mode } = useEventTarget();\r\n\r\n  const value = cursormode_to_toolbar_value(cursor_mode);\r\n\r\n  return (\r\n    <div className=\"rounded-full flex gap-4 border bg-background shadow px-4 py-2 pointer-events-auto select-none\">\r\n      <ToggleGroup\r\n        onValueChange={(v) => {\r\n          setCursorMode(\r\n            v\r\n              ? toolbar_value_to_cursormode(v as ToolbarToolType)\r\n              : { type: \"cursor\" }\r\n          );\r\n        }}\r\n        value={value}\r\n        defaultValue=\"cursor\"\r\n        type=\"single\"\r\n      >\r\n        <ToolsGroup\r\n          value={value}\r\n          options={[\r\n            { value: \"cursor\", label: \"Cursor\", shortcut: \"V\" },\r\n            { value: \"hand\", label: \"Hand tool\", shortcut: \"H\" },\r\n          ]}\r\n          onValueChange={(v) => {\r\n            setCursorMode(toolbar_value_to_cursormode(v as ToolbarToolType));\r\n          }}\r\n        />\r\n        <VerticalDivider />\r\n        <ToggleGroupItem value={\"container\" satisfies ToolbarToolType}>\r\n          <FrameIcon />\r\n        </ToggleGroupItem>\r\n        <ToggleGroupItem value={\"text\" satisfies ToolbarToolType}>\r\n          <ToolIcon type=\"text\" />\r\n        </ToggleGroupItem>\r\n        <ToolsGroup\r\n          value={value}\r\n          options={[\r\n            { value: \"rectangle\", label: \"Rectangle\", shortcut: \"R\" },\r\n            { value: \"ellipse\", label: \"Ellipse\", shortcut: \"O\" },\r\n            { value: \"line\", label: \"Line\", shortcut: \"L\" },\r\n            { value: \"image\", label: \"Image\" },\r\n          ]}\r\n          onValueChange={(v) => {\r\n            setCursorMode(toolbar_value_to_cursormode(v as ToolbarToolType));\r\n          }}\r\n        />\r\n        <ToolsGroup\r\n          value={value}\r\n          options={[\r\n            { value: \"pencil\", label: \"Pencil tool\", shortcut: \"⇧+P\" },\r\n            { value: \"path\", label: \"Path tool\", shortcut: \"P\" },\r\n          ]}\r\n          onValueChange={(v) => {\r\n            setCursorMode(toolbar_value_to_cursormode(v as ToolbarToolType));\r\n          }}\r\n        />\r\n\r\n        <VerticalDivider />\r\n        <Popover>\r\n          <PopoverTrigger asChild>\r\n            <Button variant=\"ghost\" className=\"px-3\">\r\n              <OpenAILogo className=\"w-4 h-4\" />\r\n            </Button>\r\n          </PopoverTrigger>\r\n          <PopoverContent\r\n            side=\"top\"\r\n            sideOffset={16}\r\n            align=\"end\"\r\n            className=\"w-96\"\r\n          >\r\n            <Generate />\r\n          </PopoverContent>\r\n        </Popover>\r\n        <Button variant=\"ghost\" className=\"px-3\" onClick={onAddButtonClick}>\r\n          <MixIcon />\r\n        </Button>\r\n      </ToggleGroup>\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\nAt this point, I would check where this component is used. It is found to be at [line 417 in playground.tsx](https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx#L417).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*G0tEoxftKgyzh08fJFXG6A.png)\r\n\r\n```js\r\n{!uiHidden && (\r\n  <div className=\"absolute bottom-8 left-0 right-0 flex items-center justify-center z-50 pointer-events-none\">\r\n    <PlaygroundToolbar\r\n      onAddButtonClick={libraryDialog.openDialog}\r\n    />\r\n  </div>\r\n)}\r\n```\r\n\r\nSo far, we just located the toolbar code. We need to understand what happens when you click on a toolbar item. `setCursorMode` is found to be called. This will lead us to understand how the canvas state is managed.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://app.grida.co/canvas](https://app.grida.co/canvas)\r\n    \r\n2. [apps/forms/scaffolds/playground-canvas/toolbar.tsx#L145](https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L145)\r\n    \r\n3. [https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx#L417](https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx#L417)",
          "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,l)=>()=>(l||n((l={exports:{}}).exports,l),l.exports),N=(n,l)=>{for(var s in l)r(n,s,{get:l[s],enumerable:!0})},F=(n,l,s,o)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let c of y(l))!u.call(n,c)&&c!==s&&r(n,c,{get:()=>l[c],enumerable:!(o=p(l,c))||o.enumerable});return n};var b=(n,l,s)=>(s=n!=null?h(m(n)):{},F(l||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),f=n=>F(r({},\"__esModule\",{value:!0}),n);var i=g((w,a)=>{a.exports=_jsx_runtime});var T={};N(T,{default:()=>d,frontmatter:()=>v});var e=b(i()),v={title:\"Locating the toolbar code in the Grida codebase.\"};function t(n){let l={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(l.p,{children:[\"In this article, we will review the code related to toolbar that you find on \",(0,e.jsx)(l.a,{href:\"https://app.grida.co/canvas\",children:\"Grida Canvas page\"}),\". I will describe the approach I have taken to find the code rendering this toolbar shown in the below image.\"]}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*wJxtsTo6B3u2Jix5hvY9bg.png\",alt:\"\"})}),`\n`,(0,e.jsx)(l.h3,{id:\"inspect-and-find-a-unique-identifier\",children:\"Inspect and find a unique identifier\"}),`\n`,(0,e.jsx)(l.p,{children:\"When I want to locate the code for an element in a project, I tend to open the developer tools and inspect the element, which in this case is toolbar.\"}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*K6vI3IpvqLmUaUQ966-_-g.png\",alt:\"\"})}),`\n`,(0,e.jsx)(l.p,{children:\"The unique identifier here I chose is the classname.\"}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsx)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"rounded\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"full flex gap\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"-4\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" border bg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"background shadow px\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"-4\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" py\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"-2\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" pointer\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"events\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"auto select\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"none\"})]})})})}),`\n`,(0,e.jsx)(l.p,{children:\"I searched across the codebase for this classname in the hopes of finding the toolbar component.\"}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*zsrcvbiwh9tj7lTHpvOW6w.png\",alt:\"\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"There it was, \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L145\",children:\"toolbar.tsx\"}),\". PlaygroundToolbar.tsx has the below code\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" PlaygroundToolbar\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  onAddButtonClick\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}:\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  onAddButtonClick\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" void\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" setCursorMode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" cursor_mode \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" useEventTarget\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" cursormode_to_toolbar_value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cursor_mode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"div className\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"rounded-full flex gap-4 border bg-background shadow px-4 py-2 pointer-events-auto select-none\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ToggleGroup\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        onValueChange\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"v\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          setCursorMode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            v\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"              ?\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" toolbar_value_to_cursormode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"v \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ToolbarToolType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"              :\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"cursor\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" }\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          );\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        }}\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        defaultValue\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"cursor\"'})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"single\"'})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      >\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ToolsGroup\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          options\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={[\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"cursor\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Cursor\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"V\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"hand\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Hand tool\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"H\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          ]}\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          onValueChange\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"v\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            setCursorMode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"toolbar_value_to_cursormode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"v \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ToolbarToolType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          }}\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        />\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"VerticalDivider \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ToggleGroupItem value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"container\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" satisfies\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ToolbarToolType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"FrameIcon \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ToggleGroupItem\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ToggleGroupItem value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"text\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" satisfies\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ToolbarToolType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ToolIcon type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"text\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" />\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ToggleGroupItem\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ToolsGroup\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          options\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={[\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"rectangle\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Rectangle\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"R\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"ellipse\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Ellipse\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"O\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"line\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Line\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"L\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"image\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Image\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          ]}\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          onValueChange\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"v\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            setCursorMode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"toolbar_value_to_cursormode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"v \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ToolbarToolType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          }}\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        />\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ToolsGroup\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          options\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={[\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"pencil\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Pencil tool\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"\\u21E7+P\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"path\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"Path tool\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"P\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          ]}\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          onValueChange\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"v\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            setCursorMode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"toolbar_value_to_cursormode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"v \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ToolbarToolType\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          }}\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        />\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"VerticalDivider \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"Popover\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"PopoverTrigger asChild\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"Button variant\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"ghost\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" className\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"px-3\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"              <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"OpenAILogo className\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"w-4 h-4\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" />\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"Button\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"PopoverTrigger\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"PopoverContent\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            side\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"top\"'})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            sideOffset\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={16}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            align\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"end\"'})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            className\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"w-96\"'})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          >\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"Generate \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"PopoverContent\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"Popover\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"Button variant\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"ghost\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" className\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"px-3\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" onClick\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"onAddButtonClick\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"MixIcon \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"Button\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ToggleGroup\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"div\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  );\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"At this point, I would check where this component is used. It is found to be at \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx#L417\",children:\"line 417 in playground.tsx\"}),\".\"]}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*G0tEoxftKgyzh08fJFXG6A.png\",alt:\"\"})}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"{!\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"uiHidden \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"&&\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"div className\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'\"absolute bottom-8 left-0 right-0 flex items-center justify-center z-50 pointer-events-none\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"PlaygroundToolbar\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      onAddButtonClick\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"libraryDialog\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"openDialog\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    />\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"div\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")}\"})})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"So far, we just located the toolbar code. We need to understand what happens when you click on a toolbar item. \",(0,e.jsx)(l.code,{children:\"setCursorMode\"}),\" is found to be called. This will lead us to understand how the canvas state is managed.\"]}),`\n`,(0,e.jsx)(l.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,e.jsx)(l.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.em,{children:(0,e.jsxs)(l.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(l.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,e.jsx)(l.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,e.jsx)(l.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,e.jsx)(l.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,e.jsx)(l.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(l.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,e.jsxs)(l.ol,{children:[`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://app.grida.co/canvas\",children:\"https://app.grida.co/canvas\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L145\",children:\"apps/forms/scaffolds/playground-canvas/toolbar.tsx#L145\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx#L417\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/scaffolds/playground-canvas/playground.tsx#L417\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:l}=n.components||{};return l?(0,e.jsx)(l,{...n,children:(0,e.jsx)(t,{...n})}):t(n)}return f(T);})();\n;return Component;"
        },
        "_id": "blog/locating-toolbar-in-grida.mdx",
        "_raw": {
          "sourceFilePath": "blog/locating-toolbar-in-grida.mdx",
          "sourceFileName": "locating-toolbar-in-grida.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/locating-toolbar-in-grida"
        },
        "type": "Doc",
        "slug": "/blog/locating-toolbar-in-grida",
        "slugAsParams": "locating-toolbar-in-grida"
      },
      "documentHash": "1740489186335",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/lodash-merge-vs-defu.mdx": {
      "document": {
        "title": "lodash._merge vs Defu\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn one of the previous week’s articles, I noticed Defu is used in [unbuild source code](https://github.com/unjs/unbuild/blob/main/src/build.ts#L93) to merge objects. This got me wondering how this is different to lodash.\\_merge. In this article, we will look at their differences. I created a Codesandbox repository for the purposes of this article. Let’s get started.\r\n\r\n# **lodash.\\_merge**\r\n\r\nBelow is definition picked from [official docs](https://lodash.com/docs/#merge).\r\n\r\n> *This method is like* [`_.assign`](https://lodash.com/docs/#assign) except that it recursively merges own and inherited enumerable string keyed properties of source objects into the destination object. Source properties that resolve to `undefined` are skipped if a destination value exists. Array and plain object properties are merged recursively. Other objects and value types are overridden by assignment. Source objects are applied from left to right. Subsequent sources overwrite property assignments of previous sources.\r\n\r\n## **Example**\r\n\r\n```javascript\r\nvar object = {\r\n  'a': [{ 'b': 2 }, { 'd': 4 }]\r\n};\r\n \r\nvar other = {\r\n  'a': [{ 'c': 3 }, { 'e': 5 }]\r\n};\r\n \r\n_.merge(object, other);\r\n// => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\r\n```\r\n\r\nArrays and objects are merged recursively.\r\n\r\nSo far so good, now let’s look at Defu\r\n\r\n> *I study large open-source projects and provide insights, give* [*my repository a star*](https://github.com/ramu-narasinga/thinkthroo)*.*\r\n\r\n# **Defu**\r\n\r\nBelow definition is picked from [Defu’s npm page](https://www.npmjs.com/package/defu).\r\n\r\n> *Assign default properties, recursively. Lightweight and Fast.*\r\n\r\n## **Example**\r\n\r\n```javascript\r\nimport { defu } from \"defu\";\r\n\r\nconsole.log(defu({ a: { b: 2 } }, { a: { b: 1, c: 3 } }));\r\n// => { a: { b: 2, c: 3 } }\r\n```\r\n\r\nAt this point, I would investigate if arrays are merged in defu or if it only deals with objects. Let’s pick the example from lodash.\\_merge and see the results.\r\n\r\nIn this sandbox example — [https://codesandbox.io/p/devbox/yn9ds8](https://codesandbox.io/p/devbox/yn9ds8), I have setup the defu and lodash.\\_merge and below is a screenshot of my attempt to merge arrays recursively using Defu.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*K-CRhP-5GbzlaUc6llTbbg.png)\r\n\r\nDefu cannot merge arrays recrusively, I would use Defu stricly to merge objects only. The key difference here is:\r\n\r\n```javascript\r\n// Using lodash._merge\r\nvar object = {\r\n  'a': [{ 'b': 2 }, { 'd': 4 }]\r\n};\r\n \r\nvar other = {\r\n  'a': [{ 'c': 3 }, { 'e': 5 }]\r\n};\r\n \r\n_.merge(object, other);\r\n// => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\r\n\r\n// Using the same example in defu\r\ndefu(\r\n    {\r\n      a: [{ b: 2 }, { d: 4 }],\r\n    },\r\n    {\r\n      a: [{ c: 3 }, { e: 5 }],\r\n    }\r\n  )\r\n// { a: [ { b: 2 }, { d: 4 }, { c: 3 }, { e: 5 } ] }\r\n```\r\n\r\nWhat’s the count of array items in these two examplse? lodash.\\_merge has only two items, whereas defu has four items, each item being an object. Something to keep in mind, I guess.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://lodash.com/docs/#merge](https://lodash.com/docs/#merge)\r\n    \r\n2. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L93](https://github.com/unjs/unbuild/blob/main/src/build.ts#L93)\r\n    \r\n3. [https://github.com/unjs/defu#readme](https://github.com/unjs/defu#readme)",
          "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var r in e)c(n,r,{get:e[r],enumerable:!0})},a=(n,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of y(e))!u.call(n,s)&&s!==r&&c(n,s,{get:()=>e[s],enumerable:!(o=p(e,s))||o.enumerable});return n};var b=(n,e,r)=>(r=n!=null?d(m(n)):{},a(e||!n||!n.__esModule?c(r,\"default\",{value:n,enumerable:!0}):r,n)),j=n=>a(c({},\"__esModule\",{value:!0}),n);var t=g((k,i)=>{i.exports=_jsx_runtime});var N={};f(N,{default:()=>h,frontmatter:()=>v});var l=b(t()),v={title:\"lodash._merge vs Defu\"};function F(n){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In one of the previous week\\u2019s articles, I noticed Defu is used in \",(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\",children:\"unbuild source code\"}),\" to merge objects. This got me wondering how this is different to lodash._merge. In this article, we will look at their differences. I created a Codesandbox repository for the purposes of this article. Let\\u2019s get started.\"]}),`\n`,(0,l.jsx)(e.h1,{id:\"lodash_merge\",children:(0,l.jsx)(e.strong,{children:\"lodash._merge\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Below is definition picked from \",(0,l.jsx)(e.a,{href:\"https://lodash.com/docs/#merge\",children:\"official docs\"}),\".\"]}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.em,{children:\"This method is like\"}),\" \",(0,l.jsx)(e.a,{href:\"https://lodash.com/docs/#assign\",children:(0,l.jsx)(e.code,{children:\"_.assign\"})}),\" except that it recursively merges own and inherited enumerable string keyed properties of source objects into the destination object. Source properties that resolve to \",(0,l.jsx)(e.code,{children:\"undefined\"}),\" are skipped if a destination value exists. Array and plain object properties are merged recursively. Other objects and value types are overridden by assignment. Source objects are applied from left to right. Subsequent sources overwrite property assignments of previous sources.\"]}),`\n`]}),`\n`,(0,l.jsx)(e.h2,{id:\"example\",children:(0,l.jsx)(e.strong,{children:\"Example\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" object \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  'a'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'b'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 2\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'd'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 4\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }]\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" other \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  'a'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'c'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 3\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'e'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 5\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }]\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"_\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"merge\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" other\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Arrays and objects are merged recursively.\"}),`\n`,(0,l.jsx)(e.p,{children:\"So far so good, now let\\u2019s look at Defu\"}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.em,{children:\"I study large open-source projects and provide insights, give\"}),\" \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga/thinkthroo\",children:(0,l.jsx)(e.em,{children:\"my repository a star\"})}),(0,l.jsx)(e.em,{children:\".\"})]}),`\n`]}),`\n`,(0,l.jsx)(e.h1,{id:\"defu\",children:(0,l.jsx)(e.strong,{children:\"Defu\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Below definition is picked from \",(0,l.jsx)(e.a,{href:\"https://www.npmjs.com/package/defu\",children:\"Defu\\u2019s npm page\"}),\".\"]}),`\n`,(0,l.jsxs)(e.blockquote,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:\"Assign default properties, recursively. Lightweight and Fast.\"})}),`\n`]}),`\n`,(0,l.jsx)(e.h2,{id:\"example-1\",children:(0,l.jsx)(e.strong,{children:\"Example\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defu \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"defu\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"defu\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" a\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 2\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" a\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" c\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 3\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" => { a: { b: 2, c: 3 } }\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"At this point, I would investigate if arrays are merged in defu or if it only deals with objects. Let\\u2019s pick the example from lodash._merge and see the results.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"In this sandbox example \\u2014 \",(0,l.jsx)(e.a,{href:\"https://codesandbox.io/p/devbox/yn9ds8\",children:\"https://codesandbox.io/p/devbox/yn9ds8\"}),\", I have setup the defu and lodash._merge and below is a screenshot of my attempt to merge arrays recursively using Defu.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*K-CRhP-5GbzlaUc6llTbbg.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Defu cannot merge arrays recrusively, I would use Defu stricly to merge objects only. The key difference here is:\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Using lodash._merge\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" object \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  'a'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'b'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 2\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'd'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 4\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }]\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"var\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" other \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  'a'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'c'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 3\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'e'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 5\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }]\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"_\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"merge\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" other\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Using the same example in defu\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"defu\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      a\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 2\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" d\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 4\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }],\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      a\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" c\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 3\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" e\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 5\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }],\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" { a: [ { b: 2 }, { d: 4 }, { c: 3 }, { e: 5 } ] }\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"What\\u2019s the count of array items in these two examplse? lodash._merge has only two items, whereas defu has four items, each item being an object. Something to keep in mind, I guess.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"references\",children:(0,l.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://lodash.com/docs/#merge\",children:\"https://lodash.com/docs/#merge\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/unjs/defu#readme\",children:\"https://github.com/unjs/defu#readme\"})}),`\n`]}),`\n`]})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(F,{...n})}):F(n)}return j(N);})();\n;return Component;"
        },
        "_id": "blog/lodash-merge-vs-defu.mdx",
        "_raw": {
          "sourceFilePath": "blog/lodash-merge-vs-defu.mdx",
          "sourceFileName": "lodash-merge-vs-defu.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/lodash-merge-vs-defu"
        },
        "type": "Doc",
        "slug": "/blog/lodash-merge-vs-defu",
        "slugAsParams": "lodash-merge-vs-defu"
      },
      "documentHash": "1740489186339",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/logger-package-in-changesets.mdx": {
      "document": {
        "title": "Logger package in changesets monorepo\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\n[Changesets CLI package](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L3) has an import as shown below at line 3 in [packages/cli/src/index.ts#L3](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L3)\r\n\r\n```plaintext\r\nimport { error } from \"@changesets/logger\";\r\n```\r\n\r\nI have seen this before, a dedicated package just for logger, [in docusaurus-logger](https://github.com/facebook/docusaurus/blob/2b8ddb9260c54b7fdba4398bfdce64553a1356b0/packages/docusaurus-logger/src/index.ts). At this point, I believe it is a common standard/best practice across the OSS to have a dedicated package to have a consistent logger to be used across the codebase.\r\n\r\n### Why a dedicated package for logger?\r\n\r\nSince changesets is a monorepo (so is Docusaurus), you will find yourself reusing packages across the codebase but imagine a scenario where you logged an error on to the CLI using a color. Why is this color in picture now? you might be wondering. When you use a CLI package of any Open Source project such as Next.js or Docusaurus or Changesets, the feedback you get from interacting with CLI often times is colored, for example, to show an error or warning or info.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*EiOWVzae6Qoc_uBe74v3fw.png)\r\n\r\nI picked few functions from [Changesets packages/cli/src/index.ts](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L3)\r\n\r\n```plaintext\r\nexport function error(…args: Array<any>) {\r\n console.error(format(args, pc.red(\"error\")));\r\n}\r\nexport function info(…args: Array<any>) {\r\n console.info(format(args, pc.cyan(\"info\")));\r\n}\r\nexport function success(…args: Array<any>) {\r\n console.log(format(args, pc.green(\"success\")));\r\n}\r\n```\r\n\r\nSo what’s pc? It is picocolors package imported at the top of the file.\r\n\r\n```plaintext\r\nimport pc from \"picocolors\";\r\n```\r\n\r\n### Benefits of using a logger package \r\n\r\nYou will greatly benefit from consistent logging capabilities across your codebase since you will define the common logs with color encoding if required.\r\n\r\nBelow is a code snippet picked from Docusuarus.\r\n\r\n```plaintext\r\nfunction warn(msg: unknown, …values: InterpolatableValue[]): void {\r\n console.warn(\r\n chalk.yellow(\r\n `${chalk.bold('[WARNING]')} ${\r\n values.length === 0\r\n ? stringify(msg)\r\n : interpolate(msg as TemplateStringsArray, …values)\r\n }`,\r\n ),\r\n );\r\n}\r\n```\r\n\r\nDocusaurus uses chalk to color the CLI output strings. I mentioned Docusaurus and shown the example to demonstrate how a package is used purely for logging purposes.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L18](https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L18)\r\n    \r\n2. [https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L3](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L3)\r\n    \r\n3. [https://github.com/changesets/changesets/tree/main/packages/logger](https://github.com/changesets/changesets/tree/main/packages/logger)\r\n    \r\n4. [https://github.com/facebook/docusaurus/blob/2b8ddb9260c54b7fdba4398bfdce64553a1356b0/packages/docusaurus-logger/src/index.ts](https://github.com/facebook/docusaurus/blob/2b8ddb9260c54b7fdba4398bfdce64553a1356b0/packages/docusaurus-logger/src/index.ts)\r\n    \r\n5. [https://www.npmjs.com/package/picocolors](https://www.npmjs.com/package/picocolors)\r\n    \r\n6. [https://www.npmjs.com/package/chalk](https://www.npmjs.com/package/chalk)",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),k=(a,e)=>{for(var c in e)r(a,c,{get:e[c],enumerable:!0})},i=(a,e,c,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of m(e))!f.call(a,s)&&s!==c&&r(a,s,{get:()=>e[s],enumerable:!(t=g(e,s))||t.enumerable});return a};var w=(a,e,c)=>(c=a!=null?p(u(a)):{},i(e||!a||!a.__esModule?r(c,\"default\",{value:a,enumerable:!0}):c,a)),y=a=>i(r({},\"__esModule\",{value:!0}),a);var h=b((v,o)=>{o.exports=_jsx_runtime});var N={};k(N,{default:()=>d,frontmatter:()=>x});var n=w(h()),x={title:\"Logger package in changesets monorepo\"};function l(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L3\",children:\"Changesets CLI package\"}),\" has an import as shown below at line 3 in \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L3\",children:\"packages/cli/src/index.ts#L3\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { error } from \"@changesets/logger\";'})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I have seen this before, a dedicated package just for logger, \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/docusaurus/blob/2b8ddb9260c54b7fdba4398bfdce64553a1356b0/packages/docusaurus-logger/src/index.ts\",children:\"in docusaurus-logger\"}),\". At this point, I believe it is a common standard/best practice across the OSS to have a dedicated package to have a consistent logger to be used across the codebase.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"why-a-dedicated-package-forlogger\",children:\"Why a dedicated package for\\xA0logger?\"}),`\n`,(0,n.jsx)(e.p,{children:\"Since changesets is a monorepo (so is Docusaurus), you will find yourself reusing packages across the codebase but imagine a scenario where you logged an error on to the CLI using a color. Why is this color in picture now? you might be wondering. When you use a CLI package of any Open Source project such as Next.js or Docusaurus or Changesets, the feedback you get from interacting with CLI often times is colored, for example, to show an error or warning or info.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*EiOWVzae6Qoc_uBe74v3fw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I picked few functions from \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L3\",children:\"Changesets packages/cli/src/index.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function error(\\u2026args: Array<any>) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' console.error(format(args, pc.red(\"error\")));'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function info(\\u2026args: Array<any>) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' console.info(format(args, pc.cyan(\"info\")));'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function success(\\u2026args: Array<any>) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' console.log(format(args, pc.green(\"success\")));'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"So what\\u2019s pc? It is picocolors package imported at the top of the file.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import pc from \"picocolors\";'})})})})}),`\n`,(0,n.jsx)(e.h3,{id:\"benefits-of-using-a-loggerpackage\",children:\"Benefits of using a logger\\xA0package\\xA0\"}),`\n`,(0,n.jsx)(e.p,{children:\"You will greatly benefit from consistent logging capabilities across your codebase since you will define the common logs with color encoding if required.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Below is a code snippet picked from Docusuarus.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function warn(msg: unknown, \\u2026values: InterpolatableValue[]): void {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" console.warn(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" chalk.yellow(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" `${chalk.bold('[WARNING]')} ${\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" values.length === 0\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ? stringify(msg)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" : interpolate(msg as TemplateStringsArray, \\u2026values)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }`,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Docusaurus uses chalk to color the CLI output strings. I mentioned Docusaurus and shown the example to demonstrate how a package is used purely for logging purposes.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L18\",children:\"https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L18\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L3\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L3\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/tree/main/packages/logger\",children:\"https://github.com/changesets/changesets/tree/main/packages/logger\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/docusaurus/blob/2b8ddb9260c54b7fdba4398bfdce64553a1356b0/packages/docusaurus-logger/src/index.ts\",children:\"https://github.com/facebook/docusaurus/blob/2b8ddb9260c54b7fdba4398bfdce64553a1356b0/packages/docusaurus-logger/src/index.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/picocolors\",children:\"https://www.npmjs.com/package/picocolors\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/chalk\",children:\"https://www.npmjs.com/package/chalk\"})}),`\n`]}),`\n`]})]})}function d(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(l,{...a})}):l(a)}return y(N);})();\n;return Component;"
        },
        "_id": "blog/logger-package-in-changesets.mdx",
        "_raw": {
          "sourceFilePath": "blog/logger-package-in-changesets.mdx",
          "sourceFileName": "logger-package-in-changesets.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/logger-package-in-changesets"
        },
        "type": "Doc",
        "slug": "/blog/logger-package-in-changesets",
        "slugAsParams": "logger-package-in-changesets"
      },
      "documentHash": "1740489186341",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/maintenance-mode-in-nextjs.mdx": {
      "document": {
        "title": "Maintenance mode check in Next.js middleware.ts\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we review the code related to maintenance mode check in [Grida source code](https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14), but first we need to understand what a maintenance mode is in Vercel.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*xiYyTyRKUGmYqT9EbD_Rpw.png)\r\n\r\n### Maintenance mode in Vercel\r\n\r\nI am quoting the documentation found in [Maintenance Page Example](https://vercel.com/templates/next.js/maintenance-page)  \r\nbelow:\r\n\r\n> When we do a release, promotion, event, etc. that might bring more attention than usual to a page; \r\n\r\nIts a good idea to have a backup plan that includes showing a different page to the users in case something fails. If this page receives a lot of traffic, we can use the edge, a previously generated static page and Edge Config to give the users dynamic at the speed of static.\r\n\r\nYou would use Maintenance Page when you want to change the flow of the traffic quickly in case something fails, but how to do it?\r\n\r\n#### Detect if your app is in maintenance mode\r\n\r\nThe below code is picked from the [Maintenance Page example](https://edge-maintenance-page.vercel.app/).\r\n\r\n```js\r\nimport { NextRequest, NextResponse } from 'next/server'\r\nimport { get } from '@vercel/edge-config'\r\n\r\nexport const config = {\r\n matcher: '/big-promo',\r\n}\r\n\r\nexport async function middleware(req: NextRequest) {\r\n  // Check Edge Config to see if the maintenance page should be shown\r\n  const isInMaintenanceMode = await get('isInMaintenanceMode')\r\n  // If in maintenance mode, point the url pathname to the maintenance page\r\n  if (isInMaintenanceMode) {\r\n    req.nextUrl.pathname = `/maintenance`\r\n    // Rewrite to the url\r\n    return NextResponse.rewrite(req.nextUrl)\r\n  }\r\n}\r\n```\r\n\r\nHere the most important check is about maintenance mode\r\n\r\n```js\r\n// Check Edge Config to see if the maintenance page should be shown\r\nconst isInMaintenanceMode = await get('isInMaintenanceMode')\r\n```\r\n\r\nThen if your project is in maintenance mode, you would do something like below, to show the maintenance page:\r\n\r\n```js\r\n// If in maintenance mode, point the url pathname to the maintenance page\r\nif (isInMaintenanceMode) {\r\n  req.nextUrl.pathname = `/maintenance`\r\n  // Rewrite to the url\r\n  return NextResponse.rewrite(req.nextUrl)\r\n}\r\n```\r\n\r\n### Github discussion:\r\n\r\nThere is a [discussion on Github](https://github.com/vercel/next.js/discussions/12850) about Maintenance mode in Vercel.\r\n\r\nSome suggestions involve using redirects in next.config.ts depending on an enviroment variable called MAINTENANCE\\_MODE but what folows that is a conversation about how this be indexed by Google and for that reason, [comment](https://github.com/vercel/next.js/discussions/12850#discussioncomment-3335807) suggests to add `<meta name=”robots” content=”noindex” />`\r\n\r\nThe [accepted answer](https://github.com/vercel/next.js/discussions/12850#discussioncomment-5611009) points to the [Maintenance page example](https://vercel.com/templates/next.js/maintenance-page).\r\n\r\n### Maintenance mode check in Grida Form\r\n\r\nThe below code is picked from [forms/middleware.ts](https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14)\r\n\r\n```js\r\nexport async function middleware(req: NextRequest) {\r\n  // #region maintenance mode\r\n  if (process.env.NODE_ENV === \"production\") {\r\n    try {\r\n      // Check whether the maintenance page should be shown\r\n      const isInMaintenanceMode = await get<boolean>(\"IS_IN_MAINTENANCE_MODE\");\r\n\r\n      // If is in maintenance mode, point the url pathname to the maintenance page\r\n      if (isInMaintenanceMode) {\r\n        req.nextUrl.pathname = `/maintenance`;\r\n\r\n        // Rewrite to the url\r\n        return NextResponse.rewrite(req.nextUrl);\r\n      }\r\n    } catch (error) {\r\n      // show the default page if EDGE_CONFIG env var is missing,\r\n      // but log the error to the console\r\n      console.error(error);\r\n    }\r\n  }\r\n  // #endregion maintenance mode\r\n```\r\n\r\nThis code handles the maintenance mode exactly as what is provided in the Vercel’s example, but there are slight differences:\r\n\r\n1. Try/catch block\r\n    \r\n2. process.env.NODE\\_ENV check\r\n    \r\n\r\nThis defensive mechanism is important to handle any unexpected errors and that to apply the maintenance mode only in production.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14](https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14)\r\n    \r\n2. [https://github.com/vercel/next.js/discussions/12850](https://github.com/vercel/next.js/discussions/12850)\r\n    \r\n3. [https://vercel.com/templates/next.js/maintenance-page](https://vercel.com/templates/next.js/maintenance-page)\r\n    \r\n4. [https://github.com/vercel/next.js/discussions/12850#discussioncomment-3335807](https://github.com/vercel/next.js/discussions/12850#discussioncomment-3335807)\r\n    \r\n5. [https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14](https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14)",
          "code": "var Component=(()=>{var d=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),f=(l,e)=>{for(var c in e)r(l,c,{get:e[c],enumerable:!0})},o=(l,e,c,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of m(e))!u.call(l,s)&&s!==c&&r(l,s,{get:()=>e[s],enumerable:!(a=p(e,s))||a.enumerable});return l};var b=(l,e,c)=>(c=l!=null?d(y(l)):{},o(e||!l||!l.__esModule?r(c,\"default\",{value:l,enumerable:!0}):c,l)),N=l=>o(r({},\"__esModule\",{value:!0}),l);var i=g((M,t)=>{t.exports=_jsx_runtime});var x={};f(x,{default:()=>h,frontmatter:()=>w});var n=b(i()),w={title:\"Maintenance mode check in Next.js middleware.ts\"};function F(l){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we review the code related to maintenance mode check in \",(0,n.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14\",children:\"Grida source code\"}),\", but first we need to understand what a maintenance mode is in Vercel.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*xiYyTyRKUGmYqT9EbD_Rpw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"maintenance-mode-invercel\",children:\"Maintenance mode in\\xA0Vercel\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am quoting the documentation found in \",(0,n.jsx)(e.a,{href:\"https://vercel.com/templates/next.js/maintenance-page\",children:\"Maintenance Page Example\"}),(0,n.jsx)(e.br,{}),`\n`,\"below:\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"When we do a release, promotion, event, etc. that might bring more attention than usual to a page;\\xA0\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Its a good idea to have a backup plan that includes showing a different page to the users in case something fails. If this page receives a lot of traffic, we can use the edge, a previously generated static page and Edge Config to give the users dynamic at the speed of static.\"}),`\n`,(0,n.jsx)(e.p,{children:\"You would use Maintenance Page when you want to change the flow of the traffic quickly in case something fails, but how to do it?\"}),`\n`,(0,n.jsx)(e.h4,{id:\"detect-if-your-app-is-in-maintenance-mode\",children:\"Detect if your app is in maintenance mode\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below code is picked from the \",(0,n.jsx)(e.a,{href:\"https://edge-maintenance-page.vercel.app/\",children:\"Maintenance Page example\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextRequest\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextResponse \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next/server'\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" get \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@vercel/edge-config'\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" config \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" matcher\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/big-promo'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" middleware\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"req\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NextRequest\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Check Edge Config to see if the maintenance page should be shown\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" isInMaintenanceMode \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" get\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'isInMaintenanceMode'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" If in maintenance mode, point the url pathname to the maintenance page\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isInMaintenanceMode\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    req\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextUrl\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"pathname \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `/maintenance`\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Rewrite to the url\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextResponse\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"rewrite\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"req\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextUrl\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Here the most important check is about maintenance mode\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Check Edge Config to see if the maintenance page should be shown\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" isInMaintenanceMode \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" get\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'isInMaintenanceMode'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Then if your project is in maintenance mode, you would do something like below, to show the maintenance page:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" If in maintenance mode, point the url pathname to the maintenance page\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isInMaintenanceMode\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  req\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextUrl\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"pathname \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `/maintenance`\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Rewrite to the url\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextResponse\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"rewrite\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"req\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextUrl\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"github-discussion\",children:\"Github discussion:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"There is a \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/discussions/12850\",children:\"discussion on Github\"}),\" about Maintenance mode in Vercel.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Some suggestions involve using redirects in next.config.ts depending on an enviroment variable called MAINTENANCE_MODE but what folows that is a conversation about how this be indexed by Google and for that reason, \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/discussions/12850#discussioncomment-3335807\",children:\"comment\"}),\" suggests to add \",(0,n.jsx)(e.code,{children:\"<meta name=\\u201Drobots\\u201D content=\\u201Dnoindex\\u201D />\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/discussions/12850#discussioncomment-5611009\",children:\"accepted answer\"}),\" points to the \",(0,n.jsx)(e.a,{href:\"https://vercel.com/templates/next.js/maintenance-page\",children:\"Maintenance page example\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"maintenance-mode-check-in-gridaform\",children:\"Maintenance mode check in Grida\\xA0Form\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14\",children:\"forms/middleware.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" middleware\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"req\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NextRequest\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" #region maintenance mode\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NODE_ENV \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"production\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    try\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Check whether the maintenance page should be shown\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" isInMaintenanceMode \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" get\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"IS_IN_MAINTENANCE_MODE\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" If is in maintenance mode, point the url pathname to the maintenance page\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isInMaintenanceMode\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        req\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextUrl\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"pathname \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `/maintenance`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Rewrite to the url\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextResponse\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"rewrite\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"req\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextUrl\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" catch\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" show the default page if EDGE_CONFIG env var is missing,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" but log the error to the console\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      console\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" #endregion maintenance mode\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This code handles the maintenance mode exactly as what is provided in the Vercel\\u2019s example, but there are slight differences:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Try/catch block\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"process.env.NODE_ENV check\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"This defensive mechanism is important to handle any unexpected errors and that to apply the maintenance mode only in production.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/discussions/12850\",children:\"https://github.com/vercel/next.js/discussions/12850\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://vercel.com/templates/next.js/maintenance-page\",children:\"https://vercel.com/templates/next.js/maintenance-page\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/discussions/12850#discussioncomment-3335807\",children:\"https://github.com/vercel/next.js/discussions/12850#discussioncomment-3335807\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/middleware.ts#L14\"})}),`\n`]}),`\n`]})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(F,{...l})}):F(l)}return N(x);})();\n;return Component;"
        },
        "_id": "blog/maintenance-mode-in-nextjs.mdx",
        "_raw": {
          "sourceFilePath": "blog/maintenance-mode-in-nextjs.mdx",
          "sourceFileName": "maintenance-mode-in-nextjs.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/maintenance-mode-in-nextjs"
        },
        "type": "Doc",
        "slug": "/blog/maintenance-mode-in-nextjs",
        "slugAsParams": "maintenance-mode-in-nextjs"
      },
      "documentHash": "1740489186343",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/manage-version-changelog.mdx": {
      "document": {
        "title": "Manage your versioning and changelogs using Changesets\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, an overview of [Changesets](https://github.com/changesets/changesets) and its usage in [t3-env](https://github.com/t3-oss/t3-env/tree/main/.changeset) are provided.\r\n\r\n### What is changesets?\r\n\r\nThis is the official definition provided in changesets repository Readme.\r\n\r\nThe changesets workflow is designed to help when people are making changes, all the way through to publishing. It lets contributors declare how their changes should be released, then we automate updating package versions, and changelogs, and publishing new versions of packages based on the provided information.\r\n\r\nChangesets has a focus on solving these problems for multi-package repositories, and keeps packages that rely on each other within the multi-package repository up-to-date, as well as making it easy to make changes to groups of packages.\r\n\r\n#### How does Changesets do it?\r\n\r\nA changeset is an intent to release a set of packages at particular semver bump types with a summary of the changes made.\r\n\r\nThe [@changesets/cli](http://twitter.com/changesets/cli) package allows you to write changeset files as you make changes, then combine any number of changesets into a release, that flattens the bump-types into a single release per package, handles internal dependencies in a multi-package-repository, and updates changelogs, as well as release all updated packages from a mono-repository with one command.\r\n\r\n### Using Changesets:\r\n\r\n[This intro guide](https://github.com/changesets/changesets/blob/main/docs/intro-to-using-changesets.md) explains the basics.\r\n\r\nThe overall tool after initialization should lead to a loop that looks like:\r\n\r\n1. Changesets added along with each change\r\n    \r\n2. The version command is run when a release is ready, and the changes are verified\r\n    \r\n3. The publish command is run afterwards.\r\n    \r\n\r\n#### Basic steps to configure changesets in your project\r\n\r\n1. Install changesets and initialize\r\n    \r\n\r\n```plaintext\r\nnpm install @changesets/cli && npx changeset init\r\n```\r\n\r\n2\\. Add changesets\r\n\r\n```plaintext\r\nnpx changeset\r\n```\r\n\r\nWhen you run this command, you are prompted with questions about:\r\n\r\n* Packages you want to release\r\n    \r\n* Semver bump type for each package\r\n    \r\n* Summary of entire changeset.\r\n    \r\n\r\n3\\. Versioning\r\n\r\n```plaintext\r\nnpx changeset version\r\n```\r\n\r\n4\\. Publishing\r\n\r\n```plaintext\r\nnpx changeset publish\r\n```\r\n\r\nRead this [commands documentation](https://github.com/changesets/changesets/blob/main/packages/cli/README.md#commands) to learn more about these commands such as init, version, publish etc.,\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/changesets/changesets](https://github.com/changesets/changesets)\r\n    \r\n2. [https://github.com/t3-oss/t3-env/tree/main/.changeset](https://github.com/t3-oss/t3-env/tree/main/.changeset)\r\n    \r\n3. [https://github.com/changesets/changesets/blob/main/docs/common-questions.md](https://github.com/changesets/changesets/blob/main/docs/common-questions.md)\r\n    \r\n4. [https://changesets-docs.vercel.app/](https://changesets-docs.vercel.app/)",
          "code": "var Component=(()=>{var p=Object.create;var h=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var a in e)h(t,a,{get:e[a],enumerable:!0})},r=(t,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!f.call(t,i)&&i!==a&&h(t,i,{get:()=>e[i],enumerable:!(s=g(e,i))||s.enumerable});return t};var k=(t,e,a)=>(a=t!=null?p(u(t)):{},r(e||!t||!t.__esModule?h(a,\"default\",{value:t,enumerable:!0}):a,t)),w=t=>r(h({},\"__esModule\",{value:!0}),t);var o=b((C,c)=>{c.exports=_jsx_runtime});var x={};y(x,{default:()=>d,frontmatter:()=>v});var n=k(o()),v={title:\"Manage your versioning and changelogs using Changesets\"};function l(t){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, an overview of \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets\",children:\"Changesets\"}),\" and its usage in \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/tree/main/.changeset\",children:\"t3-env\"}),\" are provided.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"what-is-changesets\",children:\"What is changesets?\"}),`\n`,(0,n.jsx)(e.p,{children:\"This is the official definition provided in changesets repository Readme.\"}),`\n`,(0,n.jsx)(e.p,{children:\"The changesets workflow is designed to help when people are making changes, all the way through to publishing. It lets contributors declare how their changes should be released, then we automate updating package versions, and changelogs, and publishing new versions of packages based on the provided information.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Changesets has a focus on solving these problems for multi-package repositories, and keeps packages that rely on each other within the multi-package repository up-to-date, as well as making it easy to make changes to groups of packages.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"how-does-changesets-doit\",children:\"How does Changesets do\\xA0it?\"}),`\n`,(0,n.jsx)(e.p,{children:\"A changeset is an intent to release a set of packages at particular semver bump types with a summary of the changes made.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.a,{href:\"http://twitter.com/changesets/cli\",children:\"@changesets/cli\"}),\" package allows you to write changeset files as you make changes, then combine any number of changesets into a release, that flattens the bump-types into a single release per package, handles internal dependencies in a multi-package-repository, and updates changelogs, as well as release all updated packages from a mono-repository with one command.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"using-changesets\",children:\"Using Changesets:\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/docs/intro-to-using-changesets.md\",children:\"This intro guide\"}),\" explains the basics.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The overall tool after initialization should lead to a loop that looks like:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Changesets added along with each change\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"The version command is run when a release is ready, and the changes are verified\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"The publish command is run afterwards.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h4,{id:\"basic-steps-to-configure-changesets-in-yourproject\",children:\"Basic steps to configure changesets in your\\xA0project\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Install changesets and initialize\"}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npm install @changesets/cli && npx changeset init\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"2. Add changesets\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npx changeset\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"When you run this command, you are prompted with questions about:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Packages you want to release\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Semver bump type for each package\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Summary of entire changeset.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"3. Versioning\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npx changeset version\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"4. Publishing\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npx changeset publish\"})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read this \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/README.md#commands\",children:\"commands documentation\"}),\" to learn more about these commands such as init, version, publish etc.,\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets\",children:\"https://github.com/changesets/changesets\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env/tree/main/.changeset\",children:\"https://github.com/t3-oss/t3-env/tree/main/.changeset\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/docs/common-questions.md\",children:\"https://github.com/changesets/changesets/blob/main/docs/common-questions.md\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://changesets-docs.vercel.app/\",children:\"https://changesets-docs.vercel.app/\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(l,{...t})}):l(t)}return w(x);})();\n;return Component;"
        },
        "_id": "blog/manage-version-changelog.mdx",
        "_raw": {
          "sourceFilePath": "blog/manage-version-changelog.mdx",
          "sourceFileName": "manage-version-changelog.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/manage-version-changelog"
        },
        "type": "Doc",
        "slug": "/blog/manage-version-changelog",
        "slugAsParams": "manage-version-changelog"
      },
      "documentHash": "1740489186345",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/mangle-json-in-Preact.mdx": {
      "document": {
        "title": "mangle json in Preact source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": " \r\n\r\nI found a file named [mangle.json in Preact source code](https://github.com/preactjs/preact/blob/main/mangle.json). I wanted to learn more about what this file is about. In this article, we review\r\n\r\n1. [developit/microbundle/wiki/mangle.json](https://github.com/developit/microbundle/wiki/mangle.json)\r\n    \r\n2. [preactjs/preact/main/mangle.json](https://github.com/preactjs/preact/blob/main/mangle.json)\r\n    \r\n![](https://cdn-images-1.medium.com/max/1000/1*yB4DLr6Tvsdu34Nz4BXTXw.png)\r\n\r\n### developit/microbundle/wiki/mangle.json\r\n\r\nIn this [developit/microbundle/wiki/mangle.json](https://github.com/developit/microbundle/wiki/mangle.json), you will find the mangle.json definition. \r\n\r\n> It’s standard practice for minifiers to compress function and variable names, since doing so is mostly assumed to be transparent to the developer. Microbundle makes it easy to extend this approach to property names as well, which can have a large impact on size for projects containing many objects or classes. This process is referred to as “property mangling” and is implemented using Terser, just like standard variable mangling.\r\n\r\nThis definition is tailored to [microbundle](https://github.com/developit/microbundle/wiki/mangle.json) but the tldr is property names can have large impact on size .\r\n\r\n### How to enable property mangling?\r\n\r\nTo enable property mangling, you must specify a regular expression pattern that dictates which properties should be compressed to shorter names. This can be done in a `mangle.json` configuration file, or in a `\"mangle\"` key in your `package.json.`\r\n\r\nRead more [property mangling](https://github.com/developit/microbundle/wiki/mangle.json#enabling-property-mangling).\r\n\r\nBelow is an example picked from [custom property mangling in microbundle](https://github.com/developit/microbundle/wiki/mangle.json#custom-property-name-mappings).\r\n\r\n```plaintext\r\n{\r\n  \"mangle\": {\r\n    \"regex\": \"^_\"\r\n  },\r\n  \"props\": {\r\n    \"props\": {\r\n      \"$_somePrivateProperty\": \"__p\",\r\n      \"$_backingInstance\": \"__b\"\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nKeep this in mind, we are now going to review the [preact mangle.json](https://github.com/preactjs/preact/blob/main/mangle.json)\r\n\r\n### preactjs/preact/main/mangle.json\r\n\r\n#### [help](https://github.com/preactjs/preact/blob/main/mangle.json#L2C3-L6C1)\r\n\r\nThe help object clearly describes what this file is about.\r\n\r\n```plaintext\r\n\"help\": {\r\n    \"what is this file?\": \"It controls protected/private property mangling so that minified builds have consistent property names.\",\r\n    \"why are there duplicate minified properties?\": \"Most properties are only used on one type of objects, so they can have the same name since they will never collide. Doing this reduces size.\"\r\n},\r\n```\r\n\r\n#### minify\r\n\r\n```plaintext\r\n\"minify\": {\r\n    \"mangle\": {\r\n      \"properties\": {\r\n        \"regex\": \"^_[^_]\",\r\n        \"reserved\": [\r\n          \"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\",\r\n          \"__REACT_DEVTOOLS_GLOBAL_HOOK__\",\r\n          \"__PREACT_DEVTOOLS__\",\r\n          \"_renderers\",\r\n          \"__source\",\r\n          \"__self\"\r\n        ]\r\n      }\r\n    },\r\n```\r\n\r\nIn the above code snippet, we are instructing bundler to shorten any properties matching the pattern `^_`, which would be any property beginning with an underscore. This is the most common usage, as underscore-prefixed properties are often used to emulate \"private\" properties in JavaScript.\r\n\r\n#### props\r\n\r\n```plaintext\r\n\"props\": {\r\n    \"cname\": 6,\r\n    \"props\": {\r\n      \"$_hasScuFromHooks\": \"__f\",\r\n      \"$_listeners\": \"l\",\r\n      \"$_cleanup\": \"__c\",\r\n      \"$__hooks\": \"__H\",\r\n      \"$_hydrationMismatch\": \"__m\",\r\n      \"$_list\": \"__\",\r\n      \"$_pendingEffects\": \"__h\",\r\n      \"$_value\": \"__\",\r\n```\r\n\r\nMangled property names become single-character names by default, however these can be overridden in the mangle configuration. The property name mappings are stored in `mangle.json` alongside the configuration for which names should be mangled. This way every build shortens the name to the same property named defined in this props object.\r\n\r\nSome of the information presented in this article is picked from [Microbundle wiki](https://github.com/developit/microbundle/wiki/mangle.json#custom-property-name-mappings).\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/preactjs/signals/blob/main/mangle.json](https://github.com/preactjs/signals/blob/main/mangle.json)\r\n    \r\n2. [https://github.com/preactjs/preact/blob/main/mangle.json](https://github.com/preactjs/preact/blob/main/mangle.json)\r\n    \r\n3. [https://github.com/developit/microbundle/wiki/mangle.json](https://github.com/developit/microbundle/wiki/mangle.json)",
          "code": "var Component=(()=>{var d=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),_=(a,e)=>{for(var i in e)l(a,i,{get:e[i],enumerable:!0})},s=(a,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of g(e))!b.call(a,r)&&r!==i&&l(a,r,{get:()=>e[r],enumerable:!(t=m(e,r))||t.enumerable});return a};var y=(a,e,i)=>(i=a!=null?d(u(a)):{},s(e||!a||!a.__esModule?l(i,\"default\",{value:a,enumerable:!0}):i,a)),j=a=>s(l({},\"__esModule\",{value:!0}),a);var h=f((k,c)=>{c.exports=_jsx_runtime});var N={};_(N,{default:()=>p,frontmatter:()=>w});var n=y(h()),w={title:\"mangle json in Preact source\\xA0code.\"};function o(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I found a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/mangle.json\",children:\"mangle.json in Preact source code\"}),\". I wanted to learn more about what this file is about. In this article, we review\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/developit/microbundle/wiki/mangle.json\",children:\"developit/microbundle/wiki/mangle.json\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/mangle.json\",children:\"preactjs/preact/main/mangle.json\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*yB4DLr6Tvsdu34Nz4BXTXw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"developitmicrobundlewikimanglejson\",children:\"developit/microbundle/wiki/mangle.json\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In this \",(0,n.jsx)(e.a,{href:\"https://github.com/developit/microbundle/wiki/mangle.json\",children:\"developit/microbundle/wiki/mangle.json\"}),\", you will find the mangle.json definition.\\xA0\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"It\\u2019s standard practice for minifiers to compress function and variable names, since doing so is mostly assumed to be transparent to the developer. Microbundle makes it easy to extend this approach to property names as well, which can have a large impact on size for projects containing many objects or classes. This process is referred to as \\u201Cproperty mangling\\u201D and is implemented using Terser, just like standard variable mangling.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"This definition is tailored to \",(0,n.jsx)(e.a,{href:\"https://github.com/developit/microbundle/wiki/mangle.json\",children:\"microbundle\"}),\" but the tldr is property names can have large impact on size\\xA0.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"how-to-enable-property-mangling\",children:\"How to enable property mangling?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"To enable property mangling, you must specify a regular expression pattern that dictates which properties should be compressed to shorter names. This can be done in a \",(0,n.jsx)(e.code,{children:\"mangle.json\"}),\" configuration file, or in a \",(0,n.jsx)(e.code,{children:'\"mangle\"'}),\" key in your \",(0,n.jsx)(e.code,{children:\"package.json.\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more \",(0,n.jsx)(e.a,{href:\"https://github.com/developit/microbundle/wiki/mangle.json#enabling-property-mangling\",children:\"property mangling\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Below is an example picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/developit/microbundle/wiki/mangle.json#custom-property-name-mappings\",children:\"custom property mangling in microbundle\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  \"mangle\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"regex\": \"^_\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  \"props\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"props\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"$_somePrivateProperty\": \"__p\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"$_backingInstance\": \"__b\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Keep this in mind, we are now going to review the \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/mangle.json\",children:\"preact mangle.json\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"preactjspreactmainmanglejson\",children:\"preactjs/preact/main/mangle.json\"}),`\n`,(0,n.jsx)(e.h4,{id:\"help\",children:(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/mangle.json#L2C3-L6C1\",children:\"help\"})}),`\n`,(0,n.jsx)(e.p,{children:\"The help object clearly describes what this file is about.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"help\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"what is this file?\": \"It controls protected/private property mangling so that minified builds have consistent property names.\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"why are there duplicate minified properties?\": \"Most properties are only used on one type of objects, so they can have the same name since they will never collide. Doing this reduces size.\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"minify\",children:\"minify\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"minify\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"mangle\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"properties\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'        \"regex\": \"^_[^_]\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'        \"reserved\": ['})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          \"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          \"__REACT_DEVTOOLS_GLOBAL_HOOK__\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          \"__PREACT_DEVTOOLS__\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          \"_renderers\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          \"__source\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          \"__self\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        ]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    },\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the above code snippet, we are instructing bundler to shorten any properties matching the pattern \",(0,n.jsx)(e.code,{children:\"^_\"}),', which would be any property beginning with an underscore. This is the most common usage, as underscore-prefixed properties are often used to emulate \"private\" properties in JavaScript.']}),`\n`,(0,n.jsx)(e.h4,{id:\"props\",children:\"props\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"props\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"cname\": 6,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"props\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"$_hasScuFromHooks\": \"__f\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"$_listeners\": \"l\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"$_cleanup\": \"__c\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"$__hooks\": \"__H\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"$_hydrationMismatch\": \"__m\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"$_list\": \"__\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"$_pendingEffects\": \"__h\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      \"$_value\": \"__\",'})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Mangled property names become single-character names by default, however these can be overridden in the mangle configuration. The property name mappings are stored in \",(0,n.jsx)(e.code,{children:\"mangle.json\"}),\" alongside the configuration for which names should be mangled. This way every build shortens the name to the same property named defined in this props object.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Some of the information presented in this article is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/developit/microbundle/wiki/mangle.json#custom-property-name-mappings\",children:\"Microbundle wiki\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/signals/blob/main/mangle.json\",children:\"https://github.com/preactjs/signals/blob/main/mangle.json\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/mangle.json\",children:\"https://github.com/preactjs/preact/blob/main/mangle.json\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/developit/microbundle/wiki/mangle.json\",children:\"https://github.com/developit/microbundle/wiki/mangle.json\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(o,{...a})}):o(a)}return j(N);})();\n;return Component;"
        },
        "_id": "blog/mangle-json-in-Preact.mdx",
        "_raw": {
          "sourceFilePath": "blog/mangle-json-in-Preact.mdx",
          "sourceFileName": "mangle-json-in-Preact.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/mangle-json-in-Preact"
        },
        "type": "Doc",
        "slug": "/blog/mangle-json-in-Preact",
        "slugAsParams": "mangle-json-in-Preact"
      },
      "documentHash": "1741002416153",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/MessageChannel-usage-in-React.mdx": {
      "document": {
        "title": "MessageChannel usage in React source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze the [MessageChannel usage in React source code](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js#L42).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*xGkPWAcPPeTFBI0C7PJ33A.png)\r\n\r\nLet’s first understand what a MessageChannel is.\r\n\r\n# **MessageChannel**\r\n\r\nThe MessageChannel interface of the Channel Messaging API allows us to create a new message channel and send data through it via its two MessagePort properties.\r\n\r\n## **Example**\r\n\r\nThis following example is picked from [MDN docs](https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel), you can see a new channel being created using the MessageChannel() constructor.\r\n\r\nWhen the IFrame has loaded, we register an onmessage handler for MessageChannel.port1 and transfer MessageChannel.port2 to the IFrame using the window.postMessage method along with a message.\r\n\r\nWhen a message is received back from the IFrame, the onMessage function outputs the message to a paragraph.\r\n\r\n```plaintext\r\nconst channel = new MessageChannel();\r\nconst output = document.querySelector(\".output\");\r\nconst iframe = document.querySelector(\"iframe\");\r\n// Wait for the iframe to load\r\niframe.addEventListener(\"load\", onLoad);\r\nfunction onLoad() {\r\n  // Listen for messages on port1\r\n  channel.port1.onmessage = onMessage;\r\n  // Transfer port2 to the iframe\r\n  iframe.contentWindow.postMessage(\"Hello from the main page!\", \"*\", [\r\n   channel.port2,\r\n  ]);\r\n}\r\n// Handle messages received on port1\r\nfunction onMessage(e) {\r\n output.innerHTML = e.data;\r\n}\r\n```\r\n\r\nOkay, now that we understand the basics of MessageChannel, let’s learn its usage in React source code.\r\n\r\n# **MessageChannel usage in React source code:**\r\n\r\n```plaintext\r\nconst channel = new MessageChannel();\r\nchannel.port1.onmessage = callback;\r\nchannel.port2.postMessage(undefined);\r\n```\r\n\r\nHere’s how React uses it:\r\n\r\n* Create a new MessageChannel instance: React creates a new MessageChannel with two communication ports.\r\n    \r\n* Schedule a task using postMessage: React uses port2.postMessage(undefined) to trigger a task asynchronously without the delays or interferences that might occur with setTimeout or setImmediate.\r\n    \r\n* Execute the task when onmessage is triggered: The task (which is the callback passed to enqueueTask) is executed when port1.onmessage receives the posted message.\r\n    \r\n\r\nWhy not use setTimeout or setImmediate? React code hints that they want to avoid using setTimeout or setImmediate in browser environments because they are not always precise and can be affected by throttling, testing environments, or other optimizations (such as faked timers in test environments). React wants fine control over scheduling, especially when it comes to asynchronous rendering and updates.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*eJ5Kp1_67hIMjbNVuh08vg.png)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n* [https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel](https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel)\r\n    \r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js#L42](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js#L42)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),w=(a,e)=>{for(var s in e)r(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of g(e))!f.call(a,t)&&t!==s&&r(a,t,{get:()=>e[t],enumerable:!(i=m(e,t))||i.enumerable});return a};var M=(a,e,s)=>(s=a!=null?p(u(a)):{},c(e||!a||!a.__esModule?r(s,\"default\",{value:a,enumerable:!0}):s,a)),k=a=>c(r({},\"__esModule\",{value:!0}),a);var o=b((v,h)=>{h.exports=_jsx_runtime});var C={};w(C,{default:()=>d,frontmatter:()=>y});var n=M(o()),y={title:\"MessageChannel usage in React source code\"};function l(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze the \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js#L42\",children:\"MessageChannel usage in React source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*xGkPWAcPPeTFBI0C7PJ33A.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Let\\u2019s first understand what a MessageChannel is.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"messagechannel\",children:(0,n.jsx)(e.strong,{children:\"MessageChannel\"})}),`\n`,(0,n.jsx)(e.p,{children:\"The MessageChannel interface of the Channel Messaging API allows us to create a new message channel and send data through it via its two MessagePort properties.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"example\",children:(0,n.jsx)(e.strong,{children:\"Example\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This following example is picked from \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel\",children:\"MDN docs\"}),\", you can see a new channel being created using the MessageChannel() constructor.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"When the IFrame has loaded, we register an onmessage handler for MessageChannel.port1 and transfer MessageChannel.port2 to the IFrame using the window.postMessage method along with a message.\"}),`\n`,(0,n.jsx)(e.p,{children:\"When a message is received back from the IFrame, the onMessage function outputs the message to a paragraph.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const channel = new MessageChannel();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'const output = document.querySelector(\".output\");'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'const iframe = document.querySelector(\"iframe\");'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Wait for the iframe to load\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'iframe.addEventListener(\"load\", onLoad);'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function onLoad() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Listen for messages on port1\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  channel.port1.onmessage = onMessage;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Transfer port2 to the iframe\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  iframe.contentWindow.postMessage(\"Hello from the main page!\", \"*\", ['})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   channel.port2,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  ]);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Handle messages received on port1\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function onMessage(e) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" output.innerHTML = e.data;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Okay, now that we understand the basics of MessageChannel, let\\u2019s learn its usage in React source code.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"messagechannel-usage-in-react-source-code\",children:(0,n.jsx)(e.strong,{children:\"MessageChannel usage in React source code:\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const channel = new MessageChannel();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"channel.port1.onmessage = callback;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"channel.port2.postMessage(undefined);\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Here\\u2019s how React uses it:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Create a new MessageChannel instance: React creates a new MessageChannel with two communication ports.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Schedule a task using postMessage: React uses port2.postMessage(undefined) to trigger a task asynchronously without the delays or interferences that might occur with setTimeout or setImmediate.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Execute the task when onmessage is triggered: The task (which is the callback passed to enqueueTask) is executed when port1.onmessage receives the posted message.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Why not use setTimeout or setImmediate? React code hints that they want to avoid using setTimeout or setImmediate in browser environments because they are not always precise and can be affected by throttling, testing environments, or other optimizations (such as faked timers in test environments). React wants fine control over scheduling, especially when it comes to asynchronous rendering and updates.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*eJ5Kp1_67hIMjbNVuh08vg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/MessageChannel\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js#L42\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js#L42\"})}),`\n`]}),`\n`]})]})}function d(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(l,{...a})}):l(a)}return k(C);})();\n;return Component;"
        },
        "_id": "blog/MessageChannel-usage-in-React.mdx",
        "_raw": {
          "sourceFilePath": "blog/MessageChannel-usage-in-React.mdx",
          "sourceFileName": "MessageChannel-usage-in-React.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/MessageChannel-usage-in-React"
        },
        "type": "Doc",
        "slug": "/blog/MessageChannel-usage-in-React",
        "slugAsParams": "MessageChannel-usage-in-React"
      },
      "documentHash": "1740489186209",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/micro-frontend-in-supabase.mdx": {
      "document": {
        "title": "How Supabase implemented micro-frontends using Multi Zones in Next.js\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, you will learn about Multi Zones in Next.js and its usage in [Supabase](https://github.com/supabase/supabase), an open-source firebase alternative.\r\n\r\n### Multi Zones in Next.js\r\n\r\nThe following information is picked from [Next.js documentation](https://nextjs.org/docs/app/building-your-application/deploying/multi-zones).\r\n\r\nMulti-Zones are an approach to micro-frontends that separate a large application on a domain into smaller Next.js applications that each serve a set of paths. This is useful when there are collections of pages unrelated to the other pages in the application. By moving those pages to a separate zone (i.e., a separate application), you can reduce the size of each application which improves build times and removes code that is only necessary for one of the zones. Since applications are decoupled, Multi-Zones also allows other applications on the domain to use their   \r\nown choice of framework.\r\n\r\nFor example, let’s say you have the following set of pages that you would like to split up:\r\n\r\n* /blog/\\* for all blog posts\r\n    \r\n* /dashboard/\\* for all pages when the user is logged-in to the dashboard\r\n    \r\n* /\\* for the rest of your website not covered by other zones\r\n    \r\n\r\nWith Multi-Zones support, you can create three applications that all are served on the same domain and look the same to the user, but you can develop and deploy each of the applications independently.\r\n\r\nNavigating from a page in one zone to a page in another zone, such as from / to /dashboard, will perform a hard navigation, unloading the resources of the current page and loading the resources of the new page. Pages that are frequently visited together should live in the same zone to avoid hard navigations.\r\n\r\n#### How to define a zone\r\n\r\nYou can use assetPrefix to avoid conflicts with pages and static files in other zones. Below is an example showing the assetPrefix example:\r\n\r\n```js\r\n/** @type {import('next').NextConfig} */\r\nconst nextConfig = {\r\n assetPrefix: '/blog-static',\r\n}\r\n```\r\n\r\nThis way, a project in one zone has its static assets such as JavaScript and CSS prefixed with `assetPrefix`.\r\n\r\nDocs also mentions that in versions older than 15 (&lt; 15, say 14.x, 13.x), there’s additional rewrited that need to be configured but this is no longer needed in version 15. Below is an example showing the rewrites\r\n\r\n```js\r\n/** @type {import('next').NextConfig} */\r\nconst nextConfig = {\r\n assetPrefix: '/blog-static',\r\n async rewrites() {\r\n   return {\r\n     beforeFiles: [\r\n       {\r\n         source: '/blog-static/_next/:path+',\r\n         destination: '/_next/:path+',\r\n       },\r\n     ],\r\n   }\r\n },\r\n}\r\n```\r\n\r\n[Read more about routing to the right zone](https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone) and also check out this example repository with [Multi Zones implemented](https://github.com/vercel/next.js/tree/canary/examples/with-zones).\r\n\r\nNow that you understand the basics of Multi Zones, let’s apply this knowledge and deduce how Supabase has its Multi Zones configured.\r\n\r\n### Multi Zones in Supabase\r\n\r\nIn the [Supabase repository](https://github.com/supabase/supabase/tree/master/apps), you will find that it is a monorepo. It has workspaces such as:\r\n\r\n* [design-system](https://github.com/supabase/supabase/tree/master/apps/design-system)\r\n    \r\n* [docs](https://github.com/supabase/supabase/tree/master/apps/docs)\r\n    \r\n* [studio](https://github.com/supabase/supabase/tree/master/apps/studio)\r\n    \r\n* [www](https://github.com/supabase/supabase/tree/master/apps/www)\r\n    \r\n\r\nWhen you visit [https://supabase.com](https://supabase.com), [www workspace](https://github.com/supabase/supabase/tree/master/apps/www) is responsible to show the landing page. When you were to login and visit dashboard,  \r\nthe url would be [https://supabase.com/dashboard/projects](https://supabase.com/dashboard/projects)\r\n\r\n/dashboard is a different zone and [https://supabase.com](https://supabase.com) is another zone.   \r\n[studio workspace](https://github.com/supabase/supabase/tree/master/apps/studio) is responsible for the zone that gets rendered when you visit /dashboard.\r\n\r\nFor this article, we are only focusing on two workspaces, www and studio as www loads landing and when you visit dashboard, there is a hard navigation as you moving to a different zone.\r\n\r\nThis is all fine but how is this configured? based on basics that we discussed at the top of this article, the trick to define your rewrites correctly. That’s where you should be looking too, rewrites are defined in next.config.js. Let’s dig up the www next.config.js\r\n\r\n```js\r\n//In https://github.com/supabase/supabase/blob/master/apps/www/next.config.mjs\r\n\r\nasync rewrites() {\r\n    return rewrites\r\n},\r\n```\r\n\r\nredirects are different from rewrites, for the Multi Zones, you should be focusing on `rewrites`.\r\n\r\n`rewrites` are found to be imported from [lib/rewrites.ts](https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L42)\r\n\r\n```js\r\nmodule.exports = [\r\n  {\r\n    source: '/:path*',\r\n    destination: `/:path*`,\r\n  },\r\n  {\r\n    source: '/dashboard',\r\n    destination: `${process.env.NEXT_PUBLIC_STUDIO_URL}`,\r\n  },\r\n  {\r\n    source: '/dashboard/:path*',\r\n    destination: `${process.env.NEXT_PUBLIC_STUDIO_URL}/:path*`,\r\n  },\r\n```\r\n\r\nNow then, finally we are able to understand how the www project redirects to dashboard. So, based on the above image, as you can see, when you navigate to /dashboard, destination has a value pointing to process.env.NEXT\\_PUBLIC\\_STUDIO\\_URL that you would define in your .env file. www workspace has a sample .env provided.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*tlfzBt7KhwrZNYkXIK6Uzg.png)\r\n\r\nAs you can see from the above image, process.env.NEXT\\_PUBLIC\\_STUDIO\\_URL points to a server running on a   \r\ndifferent port. So when you visit /dashboard, a hard navigation to destination happens.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/supabase/supabase/tree/master/apps](https://github.com/supabase/supabase/tree/master/apps)\r\n    \r\n2. [https://nextjs.org/docs/app/building-your-application/deploying/multi-zones](https://nextjs.org/docs/app/building-your-application/deploying/multi-zones)\r\n    \r\n3. [https://github.com/vercel/next.js/tree/canary/examples/with-zones](https://github.com/vercel/next.js/tree/canary/examples/with-zones)\r\n    \r\n4. [https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone](https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone)\r\n    \r\n5. [https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L6-L12](https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L6-L12)",
          "code": "var Component=(()=>{var p=Object.create;var l=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var g=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),b=(s,e)=>{for(var a in e)l(s,a,{get:e[a],enumerable:!0})},o=(s,e,a,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of u(e))!y.call(s,t)&&t!==a&&l(s,t,{get:()=>e[t],enumerable:!(r=F(e,t))||r.enumerable});return s};var f=(s,e,a)=>(a=s!=null?p(m(s)):{},o(e||!s||!s.__esModule?l(a,\"default\",{value:s,enumerable:!0}):a,s)),w=s=>o(l({},\"__esModule\",{value:!0}),s);var c=g((j,i)=>{i.exports=_jsx_runtime});var N={};b(N,{default:()=>d,frontmatter:()=>x});var n=f(c()),x={title:\"How Supabase implemented micro-frontends using Multi Zones in\\xA0Next.js\"};function h(s){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...s.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, you will learn about Multi Zones in Next.js and its usage in \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase\",children:\"Supabase\"}),\", an open-source firebase alternative.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"multi-zones-innextjs\",children:\"Multi Zones in\\xA0Next.js\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The following information is picked from \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones\",children:\"Next.js documentation\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Multi-Zones are an approach to micro-frontends that separate a large application on a domain into smaller Next.js applications that each serve a set of paths. This is useful when there are collections of pages unrelated to the other pages in the application. By moving those pages to a separate zone (i.e., a separate application), you can reduce the size of each application which improves build times and removes code that is only necessary for one of the zones. Since applications are decoupled, Multi-Zones also allows other applications on the domain to use their\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"own choice of framework.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"For example, let\\u2019s say you have the following set of pages that you would like to split up:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"/blog/* for all blog posts\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"/dashboard/* for all pages when the user is logged-in to the dashboard\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"/* for the rest of your website not covered by other zones\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"With Multi-Zones support, you can create three applications that all are served on the same domain and look the same to the user, but you can develop and deploy each of the applications independently.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Navigating from a page in one zone to a page in another zone, such as from / to /dashboard, will perform a hard navigation, unloading the resources of the current page and loading the resources of the new page. Pages that are frequently visited together should live in the same zone to avoid hard navigations.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"how-to-define-azone\",children:\"How to define a\\xA0zone\"}),`\n`,(0,n.jsx)(e.p,{children:\"You can use assetPrefix to avoid conflicts with pages and static files in other zones. Below is an example showing the assetPrefix example:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" @type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"import('next').NextConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextConfig \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" assetPrefix\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/blog-static'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This way, a project in one zone has its static assets such as JavaScript and CSS prefixed with \",(0,n.jsx)(e.code,{children:\"assetPrefix\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Docs also mentions that in versions older than 15 (< 15, say 14.x, 13.x), there\\u2019s additional rewrited that need to be configured but this is no longer needed in version 15. Below is an example showing the rewrites\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" @type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"import('next').NextConfig\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\",fontWeight:\"bold\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextConfig \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" assetPrefix\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/blog-static'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" rewrites\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"     beforeFiles\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"       {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"         source\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/blog-static/_next/:path+'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"         destination\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/_next/:path+'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"       },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone\",children:\"Read more about routing to the right zone\"}),\" and also check out this example repository with \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/tree/canary/examples/with-zones\",children:\"Multi Zones implemented\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Now that you understand the basics of Multi Zones, let\\u2019s apply this knowledge and deduce how Supabase has its Multi Zones configured.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"multi-zones-insupabase\",children:\"Multi Zones in\\xA0Supabase\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps\",children:\"Supabase repository\"}),\", you will find that it is a monorepo. It has workspaces such as:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/design-system\",children:\"design-system\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/docs\",children:\"docs\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/studio\",children:\"studio\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/www\",children:\"www\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you visit \",(0,n.jsx)(e.a,{href:\"https://supabase.com\",children:\"https://supabase.com\"}),\", \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/www\",children:\"www workspace\"}),\" is responsible to show the landing page. When you were to login and visit dashboard,\",(0,n.jsx)(e.br,{}),`\n`,\"the url would be \",(0,n.jsx)(e.a,{href:\"https://supabase.com/dashboard/projects\",children:\"https://supabase.com/dashboard/projects\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"/dashboard is a different zone and \",(0,n.jsx)(e.a,{href:\"https://supabase.com\",children:\"https://supabase.com\"}),\" is another zone.\\xA0\",(0,n.jsx)(e.br,{}),`\n`,(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/studio\",children:\"studio workspace\"}),\" is responsible for the zone that gets rendered when you visit /dashboard.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"For this article, we are only focusing on two workspaces, www and studio as www loads landing and when you visit dashboard, there is a hard navigation as you moving to a different zone.\"}),`\n`,(0,n.jsx)(e.p,{children:\"This is all fine but how is this configured? based on basics that we discussed at the top of this article, the trick to define your rewrites correctly. That\\u2019s where you should be looking too, rewrites are defined in next.config.js. Let\\u2019s dig up the www next.config.js\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"In https://github.com/supabase/supabase/blob/master/apps/www/next.config.mjs\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"async rewrites\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" rewrites\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"},\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"redirects are different from rewrites, for the Multi Zones, you should be focusing on \",(0,n.jsx)(e.code,{children:\"rewrites\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"rewrites\"}),\" are found to be imported from \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L42\",children:\"lib/rewrites.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"module\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"exports \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    source\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/:path*'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    destination\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `/:path*`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    source\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/dashboard'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    destination\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_STUDIO_URL\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    source\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/dashboard/:path*'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    destination\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_STUDIO_URL\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}/:path*`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Now then, finally we are able to understand how the www project redirects to dashboard. So, based on the above image, as you can see, when you navigate to /dashboard, destination has a value pointing to process.env.NEXT_PUBLIC_STUDIO_URL that you would define in your\\xA0.env file. www workspace has a sample\\xA0.env provided.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*tlfzBt7KhwrZNYkXIK6Uzg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"As you can see from the above image, process.env.NEXT_PUBLIC_STUDIO_URL points to a server running on a\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"different port. So when you visit /dashboard, a hard navigation to destination happens.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps\",children:\"https://github.com/supabase/supabase/tree/master/apps\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones\",children:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/next.js/tree/canary/examples/with-zones\",children:\"https://github.com/vercel/next.js/tree/canary/examples/with-zones\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone\",children:\"https://nextjs.org/docs/app/building-your-application/deploying/multi-zones#how-to-route-requests-to-the-right-zone\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L6-L12\",children:\"https://github.com/supabase/supabase/blob/master/apps/www/lib/rewrites.js#L6-L12\"})}),`\n`]}),`\n`]})]})}function d(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(h,{...s})}):h(s)}return w(N);})();\n;return Component;"
        },
        "_id": "blog/micro-frontend-in-supabase.mdx",
        "_raw": {
          "sourceFilePath": "blog/micro-frontend-in-supabase.mdx",
          "sourceFileName": "micro-frontend-in-supabase.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/micro-frontend-in-supabase"
        },
        "type": "Doc",
        "slug": "/blog/micro-frontend-in-supabase",
        "slugAsParams": "micro-frontend-in-supabase"
      },
      "documentHash": "1740489186348",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/middleware-in-supabase-auth-example.mdx": {
      "document": {
        "title": "Comparison of the middleware implementation between Supabase Auth documentation and the nextjs-stripe-supabase.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we are going to compare the middleware implementation between Supabase Auth documentation and the nextjs-stripe-supabase.\r\n\r\n* Supabase Auth Documentation\r\n    \r\n\r\nThis is a good starting point for us to understand how the Supabase Auth middleware is configured so we can use that knowledge and draw some conclusions when we compare it with opensource projects such as nextjs-stripe-supabase\r\n\r\n* Middleware in [nextjs-subscription-payments](https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/middleware.ts).\r\n    \r\n\r\nBut what’s the point of this? well, you will learn few techniques about how middleware for Supabase Auth can be configured.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*ChbTsBQq6lY55VPLBG_dwg.png)\r\n\r\n### Middleware in Supabase Auth Documentation\r\n\r\nAt [step 4 — Hook up middleware in Supabase docs](https://supabase.com/docs/guides/auth/server-side/nextjs), you will find   \r\ncode for `middleware.ts` and `utils/supabase/middleware.ts`.\r\n\r\n#### middleware.ts\r\n\r\nThis below code is picked from Supabase documentation.\r\n\r\n```js\r\nimport { type NextRequest } from 'next/server'\r\nimport { updateSession } from '@/utils/supabase/middleware'\r\nexport async function middleware(request: NextRequest) {\r\n return await updateSession(request)\r\n}\r\nexport const config = {\r\n matcher: [\r\n /*\r\n * Match all request paths except for the ones starting with:\r\n * - _next/static (static files)\r\n * - _next/image (image optimization files)\r\n * - favicon.ico (favicon file)\r\n * Feel free to modify this pattern to include more paths.\r\n */\r\n '/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)',\r\n ],\r\n}\r\n```\r\n\r\n`middleware.ts` has a function named `middleware` and const named `config`. These tiny details are important to keep in mind when comparing middleware in other projects in the later section of this article.\r\n\r\n#### utils/supabase/middleware.ts\r\n\r\nThis below code is picked from Supabase documentation.\r\n\r\n```js\r\nimport { createServerClient, type CookieOptions } from '@supabase/ssr'\r\nimport { cookies } from 'next/headers'\r\n\r\nexport async function createClient() {\r\n  const cookieStore = await cookies()\r\n\r\n  return createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        getAll() {\r\n          return cookieStore.getAll()\r\n        },\r\n        setAll(cookiesToSet) {\r\n          try {\r\n            cookiesToSet.forEach(({ name, value, options }) =>\r\n              cookieStore.set(name, value, options)\r\n            )\r\n          } catch {\r\n            // The `setAll` method was called from a Server Component.\r\n            // This can be ignored if you have middleware refreshing\r\n            // user sessions.\r\n          }\r\n        },\r\n      },\r\n    }\r\n  )\r\n}\r\n```\r\n\r\nImportant steps performed here are:\r\n\r\n1. Create a response object using NextResponse.\r\n    \r\n2. Then create a Supabase client using `CreateServerClient`, response from above step is to `set` and `get` cookies.\r\n    \r\n3. Make a call to getUser(). This step is really important and make sure not to write any additional logic between `createServerClient` and this `getUser` function.\r\n    \r\n4. Redirect if the user is not logged in.\r\n    \r\n5. Return SupabaseResponse.\r\n    \r\n\r\nAlso make sure to read the comments provided to help you understand the code better.\r\n\r\n### Middleware in Nextjs-Subscription-Payments\r\n\r\nBased on the information from the above, found in Supabase Auth documentation, we need to review these below two files:\r\n\r\n* [middleware.ts](https://github.com/vercel/nextjs-subscription-payments/blob/main/middleware.ts)\r\n    \r\n* [utils/supabase/middleware.ts](https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/middleware.ts)\r\n    \r\n\r\n#### middleware.ts file\r\n\r\nThis below code is picked from [nextjs-subscriptions-payments](https://github.com/vercel/nextjs-subscription-payments/blob/main/middleware.ts).\r\n\r\n```js\r\nimport { type NextRequest } from 'next/server';\r\nimport { updateSession } from '@/utils/supabase/middleware';\r\n\r\nexport async function middleware(request: NextRequest) {\r\n  return await updateSession(request);\r\n}\r\n\r\nexport const config = {\r\n  matcher: [\r\n    /*\r\n     * Match all request paths except:\r\n     * - _next/static (static files)\r\n     * - _next/image (image optimization files)\r\n     * - favicon.ico (favicon file)\r\n     * - images - .svg, .png, .jpg, .jpeg, .gif, .webp\r\n     * Feel free to modify this pattern to include more paths.\r\n     */\r\n    '/((?!_next/static|_next/image|favicon.ico|.*\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)'\r\n  ]\r\n};\r\n```\r\n\r\nComparing this with what is provided in Supabase auth documentation, there isn’t much difference.\r\n\r\n#### utils/supabase/middleware.ts\r\n\r\nThis below code is picked from [utils/supabase/middleware.ts](https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/middleware.ts).\r\n\r\n```js\r\nimport { createServerClient, type CookieOptions } from '@supabase/ssr';\r\nimport { type NextRequest, NextResponse } from 'next/server';\r\n\r\nexport const createClient = (request: NextRequest) => {\r\n  // Create an unmodified response\r\n  let response = NextResponse.next({\r\n    request: {\r\n      headers: request.headers\r\n    }\r\n  });\r\n\r\n  const supabase = createServerClient(\r\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n    {\r\n      cookies: {\r\n        get(name: string) {\r\n          return request.cookies.get(name)?.value;\r\n        },\r\n        set(name: string, value: string, options: CookieOptions) {\r\n          // If the cookie is updated, update the cookies for the request and response\r\n          request.cookies.set({\r\n            name,\r\n            value,\r\n            ...options\r\n          });\r\n          response = NextResponse.next({\r\n            request: {\r\n              headers: request.headers\r\n            }\r\n          });\r\n          response.cookies.set({\r\n            name,\r\n            value,\r\n            ...options\r\n          });\r\n        },\r\n        remove(name: string, options: CookieOptions) {\r\n          // If the cookie is removed, update the cookies for the request and response\r\n          request.cookies.set({\r\n            name,\r\n            value: '',\r\n            ...options\r\n          });\r\n          response = NextResponse.next({\r\n            request: {\r\n              headers: request.headers\r\n            }\r\n          });\r\n          response.cookies.set({\r\n            name,\r\n            value: '',\r\n            ...options\r\n          });\r\n        }\r\n      }\r\n    }\r\n  );\r\n\r\n  return { supabase, response };\r\n};\r\n\r\nexport const updateSession = async (request: NextRequest) => {\r\n  try {\r\n    // This `try/catch` block is only here for the interactive tutorial.\r\n    // Feel free to remove once you have Supabase connected.\r\n    const { supabase, response } = createClient(request);\r\n\r\n    // This will refresh session if expired - required for Server Components\r\n    // https://supabase.com/docs/guides/auth/server-side/nextjs\r\n    await supabase.auth.getUser();\r\n\r\n    return response;\r\n  } catch (e) {\r\n    // If you are here, a Supabase client could not be created!\r\n    // This is likely because you have not set up environment variables.\r\n    // Check out http://localhost:3000 for Next Steps.\r\n    return NextResponse.next({\r\n      request: {\r\n        headers: request.headers\r\n      }\r\n    });\r\n  }\r\n};\r\n```\r\n\r\nComparing this with documentation, you will see the below differences:\r\n\r\n1. `updateSession` function is found in both, the documentation and this example above.\r\n    \r\n2. There is a difference in the way client is created. In the Supabase Auth documentation, Supabase client is created with in the `updateSession` function itself, you do not see another function called. This is the  \r\n    case in `updateSession`. `createClient` function is called.\r\n    \r\n3. `createClient` looks very similar to the documentation. Except the cookies are handled differently. You will see functions such as `set` and `get` in this above example, whereas the Supabase auth documentation  \r\n    uses methods such as `setAll` and `getAll`. Both of these found to update the necessary cookies on `request` and `response`.\r\n    \r\n4. The important step here is to call the `await supabase.auth.getUser()` and the comment just above this line in the above example —   \r\n    “  \r\n    // This will refresh session if expired — required for Server Components  \r\n    // [https://supabase.com/docs/guides/auth/server-side/nextjs](https://supabase.com/docs/guides/auth/server-side/nextjs)  \r\n    “  \r\n    signifies that this line here is really important.\r\n    \r\n5. There are redirects found to be happening in this example’s `updateSession`, but in the Supabase Auth documentation, you will see some redirects happening if the user does not exist. That’s not to say  \r\n    [nextjs-supscription-payments](https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/middleware.ts) does not have redirects, it just happens in a different file. For example — [signin/\\[id\\]/page.tsx](https://github.com/vercel/nextjs-subscription-payments/blob/main/app/signin/%5Bid%5D/page.tsx#L47-L55)\r\n    \r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://supabase.com/docs/guides/auth/server-side/nextjs](https://supabase.com/docs/guides/auth/server-side/nextjs)\r\n    \r\n2. [https://github.com/midday-ai/midday/blob/main/apps/dashboard/src/middleware.ts](https://github.com/midday-ai/midday/blob/main/apps/dashboard/src/middleware.ts)\r\n    \r\n3. [https://github.com/vercel/nextjs-subscription-payments/blob/main/middleware.ts](https://github.com/vercel/nextjs-subscription-payments/blob/main/middleware.ts)\r\n    \r\n4. [https://github.com/vercel/nextjs-subscription-payments/blob/main/app/signin/%5Bid%5D/page.tsx#L47-L55](https://github.com/vercel/nextjs-subscription-payments/blob/main/app/signin/%5Bid%5D/page.tsx#L47-L55)\r\n",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),N=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},a=(n,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(n,r)&&r!==s&&c(n,r,{get:()=>e[r],enumerable:!(o=p(e,r))||o.enumerable});return n};var f=(n,e,s)=>(s=n!=null?h(m(n)):{},a(e||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),g=n=>a(c({},\"__esModule\",{value:!0}),n);var F=b((j,i)=>{i.exports=_jsx_runtime});var x={};N(x,{default:()=>d,frontmatter:()=>w});var l=f(F()),w={title:\"Comparison of the middleware implementation between Supabase Auth documentation and the nextjs-stripe-supabase.\"};function t(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:\"In this article, we are going to compare the middleware implementation between Supabase Auth documentation and the nextjs-stripe-supabase.\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"Supabase Auth Documentation\"}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"This is a good starting point for us to understand how the Supabase Auth middleware is configured so we can use that knowledge and draw some conclusions when we compare it with opensource projects such as nextjs-stripe-supabase\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[\"Middleware in \",(0,l.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/middleware.ts\",children:\"nextjs-subscription-payments\"}),\".\"]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"But what\\u2019s the point of this? well, you will learn few techniques about how middleware for Supabase Auth can be configured.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*ChbTsBQq6lY55VPLBG_dwg.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"middleware-in-supabase-auth-documentation\",children:\"Middleware in Supabase Auth Documentation\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"At \",(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/server-side/nextjs\",children:\"step 4\\u200A\\u2014\\u200AHook up middleware in Supabase docs\"}),\", you will find\\xA0\",(0,l.jsx)(e.br,{}),`\n`,\"code for \",(0,l.jsx)(e.code,{children:\"middleware.ts\"}),\" and \",(0,l.jsx)(e.code,{children:\"utils/supabase/middleware.ts\"}),\".\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"middlewarets\",children:\"middleware.ts\"}),`\n`,(0,l.jsx)(e.p,{children:\"This below code is picked from Supabase documentation.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextRequest \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next/server'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" updateSession \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/utils/supabase/middleware'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" middleware\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NextRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" updateSession\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" config \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" matcher\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" /*\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Match all request paths except for the ones starting with:\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * - _next/static (static files)\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * - _next/image (image optimization files)\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * - favicon.ico (favicon file)\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Feel free to modify this pattern to include more paths.\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/((?!_next/static|_next/image|favicon.ico|.*\\\\\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ],\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"middleware.ts\"}),\" has a function named \",(0,l.jsx)(e.code,{children:\"middleware\"}),\" and const named \",(0,l.jsx)(e.code,{children:\"config\"}),\". These tiny details are important to keep in mind when comparing middleware in other projects in the later section of this article.\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"utilssupabasemiddlewarets\",children:\"utils/supabase/middleware.ts\"}),`\n`,(0,l.jsx)(e.p,{children:\"This below code is picked from Supabase documentation.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createServerClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" CookieOptions \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/ssr'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookies \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next/headers'\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookieStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createServerClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_ANON_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        getAll\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cookieStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getAll\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        setAll\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cookiesToSet\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          try\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            cookiesToSet\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"forEach\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              cookieStore\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            )\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" catch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" The `setAll` method was called from a Server Component.\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" This can be ignored if you have middleware refreshing\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" user sessions.\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Important steps performed here are:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"Create a response object using NextResponse.\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[\"Then create a Supabase client using \",(0,l.jsx)(e.code,{children:\"CreateServerClient\"}),\", response from above step is to \",(0,l.jsx)(e.code,{children:\"set\"}),\" and \",(0,l.jsx)(e.code,{children:\"get\"}),\" cookies.\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[\"Make a call to getUser(). This step is really important and make sure not to write any additional logic between \",(0,l.jsx)(e.code,{children:\"createServerClient\"}),\" and this \",(0,l.jsx)(e.code,{children:\"getUser\"}),\" function.\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"Redirect if the user is not logged in.\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"Return SupabaseResponse.\"}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"Also make sure to read the comments provided to help you understand the code better.\"}),`\n`,(0,l.jsx)(e.h3,{id:\"middleware-in-nextjs-subscription-payments\",children:\"Middleware in Nextjs-Subscription-Payments\"}),`\n`,(0,l.jsx)(e.p,{children:\"Based on the information from the above, found in Supabase Auth documentation, we need to review these below two files:\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/middleware.ts\",children:\"middleware.ts\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/middleware.ts\",children:\"utils/supabase/middleware.ts\"})}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(e.h4,{id:\"middlewarets-file\",children:\"middleware.ts file\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"This below code is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/middleware.ts\",children:\"nextjs-subscriptions-payments\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextRequest \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next/server'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" updateSession \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/utils/supabase/middleware'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" middleware\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NextRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" updateSession\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" config \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  matcher\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    /*\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"     * Match all request paths except:\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"     * - _next/static (static files)\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"     * - _next/image (image optimization files)\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"     * - favicon.ico (favicon file)\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"     * - images - .svg, .png, .jpg, .jpeg, .gif, .webp\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"     * Feel free to modify this pattern to include more paths.\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     */\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    '/((?!_next/static|_next/image|favicon.ico|.*\\\\\\\\.(?:svg|png|jpg|jpeg|gif|webp)$).*)'\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ]\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Comparing this with what is provided in Supabase auth documentation, there isn\\u2019t much difference.\"}),`\n`,(0,l.jsx)(e.h4,{id:\"utilssupabasemiddlewarets-1\",children:\"utils/supabase/middleware.ts\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"This below code is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/middleware.ts\",children:\"utils/supabase/middleware.ts\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createServerClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" CookieOptions \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/ssr'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextResponse \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next/server'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NextRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Create an unmodified response\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" response \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextResponse\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      headers\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"headers\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createServerClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_ANON_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        get\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CookieOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" If the cookie is updated, update the cookies for the request and response\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            ...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"options\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          });\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          response \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextResponse\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              headers\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"headers\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          });\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          response\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            ...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"options\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"        remove\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CookieOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" If the cookie is removed, update the cookies for the request and response\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ''\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            ...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"options\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          });\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          response \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextResponse\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              headers\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"headers\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          });\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          response\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cookies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ''\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            ...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"options\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  );\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" response \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" updateSession\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NextRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  try\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" This `try/catch` block is only here for the interactive tutorial.\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Feel free to remove once you have Supabase connected.\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" response \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" This will refresh session if expired - required for Server Components\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://supabase.com/docs/guides/auth/server-side/nextjs\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"auth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getUser\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" response\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" catch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" If you are here, a Supabase client could not be created!\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" This is likely because you have not set up environment variables.\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Check out http://localhost:3000 for Next Steps.\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextResponse\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"next\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        headers\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"headers\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Comparing this with documentation, you will see the below differences:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"updateSession\"}),\" function is found in both, the documentation and this example above.\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[\"There is a difference in the way client is created. In the Supabase Auth documentation, Supabase client is created with in the \",(0,l.jsx)(e.code,{children:\"updateSession\"}),\" function itself, you do not see another function called. This is the\",(0,l.jsx)(e.br,{}),`\n`,\"case in \",(0,l.jsx)(e.code,{children:\"updateSession\"}),\". \",(0,l.jsx)(e.code,{children:\"createClient\"}),\" function is called.\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"createClient\"}),\" looks very similar to the documentation. Except the cookies are handled differently. You will see functions such as \",(0,l.jsx)(e.code,{children:\"set\"}),\" and \",(0,l.jsx)(e.code,{children:\"get\"}),\" in this above example, whereas the Supabase auth documentation\",(0,l.jsx)(e.br,{}),`\n`,\"uses methods such as \",(0,l.jsx)(e.code,{children:\"setAll\"}),\" and \",(0,l.jsx)(e.code,{children:\"getAll\"}),\". Both of these found to update the necessary cookies on \",(0,l.jsx)(e.code,{children:\"request\"}),\" and \",(0,l.jsx)(e.code,{children:\"response\"}),\".\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[\"The important step here is to call the \",(0,l.jsx)(e.code,{children:\"await supabase.auth.getUser()\"}),\" and the comment just above this line in the above example\\u200A\\u2014\\u200A\",(0,l.jsx)(e.br,{}),`\n`,\"\\u201C\",(0,l.jsx)(e.br,{}),`\n`,\"// This will refresh session if expired\\u200A\\u2014\\u200Arequired for Server Components\",(0,l.jsx)(e.br,{}),`\n`,\"// \",(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/server-side/nextjs\",children:\"https://supabase.com/docs/guides/auth/server-side/nextjs\"}),(0,l.jsx)(e.br,{}),`\n`,\"\\u201C\",(0,l.jsx)(e.br,{}),`\n`,\"signifies that this line here is really important.\"]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[\"There are redirects found to be happening in this example\\u2019s \",(0,l.jsx)(e.code,{children:\"updateSession\"}),\", but in the Supabase Auth documentation, you will see some redirects happening if the user does not exist. That\\u2019s not to say\",(0,l.jsx)(e.br,{}),`\n`,(0,l.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/middleware.ts\",children:\"nextjs-supscription-payments\"}),\" does not have redirects, it just happens in a different file. For example\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/app/signin/%5Bid%5D/page.tsx#L47-L55\",children:\"signin/[id]/page.tsx\"})]}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://supabase.com/docs/guides/auth/server-side/nextjs\",children:\"https://supabase.com/docs/guides/auth/server-side/nextjs\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/midday-ai/midday/blob/main/apps/dashboard/src/middleware.ts\",children:\"https://github.com/midday-ai/midday/blob/main/apps/dashboard/src/middleware.ts\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/middleware.ts\",children:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/middleware.ts\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/app/signin/%5Bid%5D/page.tsx#L47-L55\",children:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/app/signin/%5Bid%5D/page.tsx#L47-L55\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return g(x);})();\n;return Component;"
        },
        "_id": "blog/middleware-in-supabase-auth-example.mdx",
        "_raw": {
          "sourceFilePath": "blog/middleware-in-supabase-auth-example.mdx",
          "sourceFileName": "middleware-in-supabase-auth-example.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/middleware-in-supabase-auth-example"
        },
        "type": "Doc",
        "slug": "/blog/middleware-in-supabase-auth-example",
        "slugAsParams": "middleware-in-supabase-auth-example"
      },
      "documentHash": "1740489186350",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/mri-scan-cli-flags.mdx": {
      "document": {
        "title": "Scan for CLI flags and arguments using MRI package\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, an overview of MRI package is provided with a usage example picked from [Changesets source code](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L1C18-L1C21).\r\n\r\n### MRI package:\r\n\r\nYou can use MRI package to quickly scan for flags and arguments. It is an alternative to [yargs-parser](https://github.com/yargs/yargs-parser).\r\n\r\n#### Install\r\n\r\n```plaintext\r\nnpm install - save mri\r\n```\r\n\r\n#### Usage\r\n\r\n```plaintext\r\n// Example CLI with options \r\n$ demo-cli - foo - bar=baz -mtv - hello world\r\n```\r\n\r\nThe following code is picked from [MRI npm package documentation](https://www.npmjs.com/package/mri).\r\n\r\n```plaintext\r\nconst mri = require('mri');\r\nconst argv = process.argv.slice(2);\r\nmri(argv);\r\n//=> { _: ['hello', 'world'], foo:true, bar:'baz', m:true, t:true, v:true }\r\nmri(argv, { boolean:['bar'] });\r\n//=> { _: ['baz', 'hello', 'world'], foo:true, bar:true, m:true, t:true, v:true }\r\nmri(argv, {\r\n alias: {\r\n b: 'bar',\r\n foo: ['f', 'fuz']\r\n }\r\n});\r\n//=> { _: ['hello', 'world'], foo:true, f:true, fuz:true, b:'baz', bar:'baz', m:true, t:true, v:true }\r\n```\r\n\r\nRead more about the options:\r\n\r\n* [Alias](https://www.npmjs.com/package/mri#optionsalias)\r\n    \r\n* [Boolean](https://www.npmjs.com/package/mri#optionsboolean)\r\n    \r\n* [Default](https://www.npmjs.com/package/mri#optionsdefault)\r\n    \r\n\r\nIn essence, we get the CLI args converted into an object. Now that we understand the basics of MRI, it is time we look at its usage in Changesets.\r\n\r\n### MRI usage in Changesets:\r\n\r\nMRI is found to be imported in [Changesets CLI package](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L1)\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*824-bK3Ybw6r2Y59S43vNQ.png)\r\n\r\nWhen you [add a changeset](https://github.com/changesets/changesets/blob/main/docs/intro-to-using-changesets.md#adding-changesets) using the command `npx changeset add` or `npx changeset`, these are accessed in the CLI package as shown below.\r\n\r\n```plaintext\r\nconst args = process.argv.slice(2);\r\n```\r\n\r\n#### Parsing CLI args in changeset\r\n\r\nThe below code shows how mri used in Changeset CLI package\r\n\r\n```plaintext\r\nconst parsed = mri(args, {\r\n boolean: [\"sinceMaster\", \"verbose\", \"empty\", \"open\", \"gitTag\", \"snapshot\"],\r\n string: [\r\n \"output\",\r\n \"otp\",\r\n \"since\",\r\n \"ignore\",\r\n \"tag\",\r\n \"snapshot\",\r\n \"snapshotPrereleaseTemplate\",\r\n ],\r\n alias: {\r\n // Short flags\r\n v: \"verbose\",\r\n o: \"output\",\r\n // Support kebab-case flags\r\n \"since-master\": \"sinceMaster\",\r\n \"git-tag\": \"gitTag\",\r\n \"snapshot-prerelease-template\": \"snapshotPrereleaseTemplate\",\r\n // Deprecated flags\r\n \"update-changelog\": \"updateChangelog\",\r\n \"is-public\": \"isPublic\",\r\n \"skip-c-i\": \"skipCI\",\r\n },\r\n default: {\r\n gitTag: true,\r\n },\r\n});\r\n```\r\n\r\n`parsed` value will look like below, I deduced this based on the documentation:\r\n\r\n```plaintext\r\n{\r\n // string value (if you have used 'add' in npx changeset add)\r\n ['add'],\r\n// boolean values\r\n \"sinceMaster\": true, \r\n \"verbose\": true, \r\n \"empty\": true, \r\n \"open\": true, \r\n \"gitTag\": true, \r\n \"snapshot\": true\r\n// string values\r\n // Note: if you have passed these options in your CLI, these keys will be parsed as string, no matter the what you pass in\r\n // example: if you pass in - otp=123, 123 here, even though is a number, gets parsed as string since otp is configured to be parsed as\r\n // string in the above code\r\n \"output\",\r\n \"otp\",\r\n \"since\",\r\n \"ignore\",\r\n \"tag\",\r\n \"snapshot\",\r\n \"snapshotPrereleaseTemplate\",\r\n// The alias option in mri allows you to define alternative names (aliases) for CLI arguments.\r\n // This is particularly useful for supporting:\r\n// Short flags: Such as -v for - verbose.\r\n // Kebab-case flags: Allowing flags like - since-master to map to camelCase variables in JavaScript (e.g., sinceMaster).\r\n // Deprecated flags: If you want to support older names for backward compatibility but still map them to the current property names.\r\n}\r\n```\r\n\r\nparsed variable is used in a function named run imported from [/run.ts](https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L75-L88)\r\n\r\n```plaintext\r\n// run function call\r\nrun(parsed._, parsed, cwd).catch((err)\r\n```\r\n\r\nThe first parameter is `pared._` because in the documentation, it is provided that parsed commands like ‘add’ looks like `{ _: [‘add’]}`\r\n\r\n```plaintext\r\n// run function definition\r\nexport async function run(\r\n input: string[],\r\n flags: { [name: string]: any },\r\n cwd: string\r\n) {\r\n```\r\n\r\n`parsed` contains mri parsed object based on the CLI args and the configuration set for booleans, strings, defaults, aliases.\r\n\r\ncwd is a current working directory, you can get this with `process.cwd()`\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://www.npmjs.com/package/mri](https://www.npmjs.com/package/mri)\r\n    \r\n2. [https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L1C18-L1C21](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L1C18-L1C21)\r\n    \r\n3. [https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L9](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L9)\r\n",
          "code": "var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),N=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!f.call(a,i)&&i!==s&&l(a,i,{get:()=>e[i],enumerable:!(r=m(e,i))||r.enumerable});return a};var w=(a,e,s)=>(s=a!=null?o(u(a)):{},c(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),k=a=>c(l({},\"__esModule\",{value:!0}),a);var h=b((C,t)=>{t.exports=_jsx_runtime});var y={};N(y,{default:()=>p,frontmatter:()=>v});var n=w(h()),v={title:\"Scan for CLI flags and arguments using MRI\\xA0package\"};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, an overview of MRI package is provided with a usage example picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L1C18-L1C21\",children:\"Changesets source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"mri-package\",children:\"MRI package:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can use MRI package to quickly scan for flags and arguments. It is an alternative to \",(0,n.jsx)(e.a,{href:\"https://github.com/yargs/yargs-parser\",children:\"yargs-parser\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"install\",children:\"Install\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npm install - save mri\"})})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Example CLI with options \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"$ demo-cli - foo - bar=baz -mtv - hello world\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The following code is picked from \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/mri\",children:\"MRI npm package documentation\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const mri = require('mri');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const argv = process.argv.slice(2);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"mri(argv);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"//=> { _: ['hello', 'world'], foo:true, bar:'baz', m:true, t:true, v:true }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"mri(argv, { boolean:['bar'] });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"//=> { _: ['baz', 'hello', 'world'], foo:true, bar:true, m:true, t:true, v:true }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"mri(argv, {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" alias: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" b: 'bar',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" foo: ['f', 'fuz']\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"//=> { _: ['hello', 'world'], foo:true, f:true, fuz:true, b:'baz', bar:'baz', m:true, t:true, v:true }\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Read more about the options:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/mri#optionsalias\",children:\"Alias\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/mri#optionsboolean\",children:\"Boolean\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/mri#optionsdefault\",children:\"Default\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"In essence, we get the CLI args converted into an object. Now that we understand the basics of MRI, it is time we look at its usage in Changesets.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"mri-usage-in-changesets\",children:\"MRI usage in Changesets:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"MRI is found to be imported in \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L1\",children:\"Changesets CLI package\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*824-bK3Ybw6r2Y59S43vNQ.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/docs/intro-to-using-changesets.md#adding-changesets\",children:\"add a changeset\"}),\" using the command \",(0,n.jsx)(e.code,{children:\"npx changeset add\"}),\" or \",(0,n.jsx)(e.code,{children:\"npx changeset\"}),\", these are accessed in the CLI package as shown below.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const args = process.argv.slice(2);\"})})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"parsing-cli-args-in-changeset\",children:\"Parsing CLI args in changeset\"}),`\n`,(0,n.jsx)(e.p,{children:\"The below code shows how mri used in Changeset CLI package\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const parsed = mri(args, {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' boolean: [\"sinceMaster\", \"verbose\", \"empty\", \"open\", \"gitTag\", \"snapshot\"],'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" string: [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"output\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"otp\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"since\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"ignore\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"tag\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"snapshot\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"snapshotPrereleaseTemplate\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" alias: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Short flags\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' v: \"verbose\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' o: \"output\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Support kebab-case flags\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"since-master\": \"sinceMaster\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"git-tag\": \"gitTag\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"snapshot-prerelease-template\": \"snapshotPrereleaseTemplate\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Deprecated flags\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"update-changelog\": \"updateChangelog\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"is-public\": \"isPublic\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"skip-c-i\": \"skipCI\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" default: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" gitTag: true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"parsed\"}),\" value will look like below, I deduced this based on the documentation:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // string value (if you have used 'add' in npx changeset add)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ['add'],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// boolean values\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"sinceMaster\": true, '})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"verbose\": true, '})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"empty\": true, '})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"open\": true, '})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"gitTag\": true, '})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"snapshot\": true'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// string values\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Note: if you have passed these options in your CLI, these keys will be parsed as string, no matter the what you pass in\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // example: if you pass in - otp=123, 123 here, even though is a number, gets parsed as string since otp is configured to be parsed as\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // string in the above code\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"output\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"otp\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"since\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"ignore\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"tag\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"snapshot\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"snapshotPrereleaseTemplate\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// The alias option in mri allows you to define alternative names (aliases) for CLI arguments.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // This is particularly useful for supporting:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Short flags: Such as -v for - verbose.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Kebab-case flags: Allowing flags like - since-master to map to camelCase variables in JavaScript (e.g., sinceMaster).\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Deprecated flags: If you want to support older names for backward compatibility but still map them to the current property names.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"parsed variable is used in a function named run imported from \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/run.ts#L75-L88\",children:\"/run.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// run function call\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"run(parsed._, parsed, cwd).catch((err)\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The first parameter is \",(0,n.jsx)(e.code,{children:\"pared._\"}),\" because in the documentation, it is provided that parsed commands like \\u2018add\\u2019 looks like \",(0,n.jsx)(e.code,{children:\"{ _: [\\u2018add\\u2019]}\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// run function definition\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export async function run(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" input: string[],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" flags: { [name: string]: any },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" cwd: string\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\") {\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"parsed\"}),\" contains mri parsed object based on the CLI args and the configuration set for booleans, strings, defaults, aliases.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"cwd is a current working directory, you can get this with \",(0,n.jsx)(e.code,{children:\"process.cwd()\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/mri\",children:\"https://www.npmjs.com/package/mri\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L1C18-L1C21\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L1C18-L1C21\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L9\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L9\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return k(y);})();\n;return Component;"
        },
        "_id": "blog/mri-scan-cli-flags.mdx",
        "_raw": {
          "sourceFilePath": "blog/mri-scan-cli-flags.mdx",
          "sourceFileName": "mri-scan-cli-flags.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/mri-scan-cli-flags"
        },
        "type": "Doc",
        "slug": "/blog/mri-scan-cli-flags",
        "slugAsParams": "mri-scan-cli-flags"
      },
      "documentHash": "1740489186354",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/next-runtime-env-regex-test.mdx": {
      "document": {
        "title": "Here's how next-runtime-env applies regex test in Array.prototype.filter()\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse a code snippet from [next-runtime-env](https://github.com/expatfile/next-runtime-env/tree/development) that applies regular expression test in [Array.prototype.filter function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter). next-runtime-env populates your environment at runtime rather than build time, it is an open-source project written by [ExpatFile](https://github.com/expatfile).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*wdfQ-HSFuWe0MpAm31TAZw.png)\r\n\r\nThe below code snippet is picked from [helpers/public-env.ts](https://github.com/expatfile/next-runtime-env/blob/development/src/helpers/get-public-env.ts#L6).\r\n\r\n```ts\r\nimport { ProcessEnv } from '../typings/process-env';\r\n/**\r\n * Gets a list of environment variables that start with `NEXT_PUBLIC_`.\r\n */\r\nexport function getPublicEnv() {\r\n const publicEnv = Object.keys(process.env)\r\n   .filter((key) => /^NEXT_PUBLIC_/i.test(key))\r\n   .reduce(\r\n     (env, key) => ({\r\n       …env,\r\n       [key]: process.env[key],\r\n     }),\r\n     {} as ProcessEnv,\r\n   );\r\n  return publicEnv;\r\n}\r\n```\r\n\r\nLet’s analyse what’s happening in this function.\r\n\r\n#### Object.keys(process.env)\r\n\r\n`Object.keys(process.env)` returns an array of environment key names since process.env is an object. For example, say you have the below in your .env in your Next.js project.\r\n\r\n```ts\r\nNEXT_PUBLIC_SUPABASE_ANON_KEY=id_123\r\nDATABASE_URL=https://some-database-url\r\n```\r\n\r\nWhen you do `Object.keys(process.env)` based on the above .env file, you will have an array containing the key names.\r\n\r\n```ts\r\n[\r\n \"NEXT_PUBLIC_SUPABASE_ANON_KEY\",\r\n \"DATABASE_URL\"\r\n]\r\n```\r\n\r\n#### filter with regex test\r\n\r\nIn Next.js, if your environment variable name is prefixed with `NEXT_PUBLIC_`, it is exposed to the public and can be found in the build. In the below code snippet, filter applies regex test to get the env variables prefixed with `NEXT_PUBLIC_`.\r\n\r\n```ts\r\n.filter((key) => /^NEXT_PUBLIC_/i.test(key))\r\n```\r\n\r\nThis way, you will have an array of env variable names prefixed with NEXT\\_PUBLIC\\_. Read more about [regular expression test](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test).\r\n\r\n#### reduce\r\n\r\n`reduce` in the below code snippet is used to generate an JSON object that only contains env variable names prefixed with `NEXT_PUBLIC_`, in other words, public env variables that are exposed in build.\r\n\r\n```ts\r\n.reduce(\r\n (env, key) => ({\r\n …env,\r\n [key]: process.env[key],\r\n }),\r\n {} as ProcessEnv,\r\n);\r\n```\r\n\r\nRead more about [Array.prototype.reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/expatfile/next-runtime-env/blob/development/src/script/public-env-script.tsx](https://github.com/expatfile/next-runtime-env/blob/development/src/script/public-env-script.tsx)\r\n    \r\n2. [https://github.com/expatfile/next-runtime-env/blob/development/src/helpers/get-public-env.ts#L6](https://github.com/expatfile/next-runtime-env/blob/development/src/helpers/get-public-env.ts#L6)\r\n    \r\n3. [https://github.com/expatfile](https://github.com/expatfile)\r\n    \r\n4. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)\r\n    \r\n5. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/RegExp/test](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test)\r\n    \r\n6. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Array/reduce](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce)",
          "code": "var Component=(()=>{var F=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var r in e)s(l,r,{get:e[r],enumerable:!0})},a=(l,e,r,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(l,c)&&c!==r&&s(l,c,{get:()=>e[c],enumerable:!(t=p(e,c))||t.enumerable});return l};var f=(l,e,r)=>(r=l!=null?F(m(l)):{},a(e||!l||!l.__esModule?s(r,\"default\",{value:l,enumerable:!0}):r,l)),v=l=>a(s({},\"__esModule\",{value:!0}),l);var i=b((j,o)=>{o.exports=_jsx_runtime});var N={};g(N,{default:()=>d,frontmatter:()=>x});var n=f(i()),x={title:\"Here's how next-runtime-env applies regex test in Array.prototype.filter()\"};function h(l){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse a code snippet from \",(0,n.jsx)(e.a,{href:\"https://github.com/expatfile/next-runtime-env/tree/development\",children:\"next-runtime-env\"}),\" that applies regular expression test in \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\",children:\"Array.prototype.filter function\"}),\". next-runtime-env populates your environment at runtime rather than build time, it is an open-source project written by \",(0,n.jsx)(e.a,{href:\"https://github.com/expatfile\",children:\"ExpatFile\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*wdfQ-HSFuWe0MpAm31TAZw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below code snippet is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/expatfile/next-runtime-env/blob/development/src/helpers/get-public-env.ts#L6\",children:\"helpers/public-env.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ProcessEnv \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../typings/process-env'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Gets a list of environment variables that start with `NEXT_PUBLIC_`.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getPublicEnv\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" publicEnv \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Object\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"keys\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   .\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" /^NEXT_PUBLIC_/i\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"test\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   .\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"reduce\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"       \\u2026env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"       [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]:\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" process\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"],\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     }),\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     {}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ProcessEnv\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   );\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" publicEnv\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Let\\u2019s analyse what\\u2019s happening in this function.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"objectkeysprocessenv\",children:\"Object.keys(process.env)\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Object.keys(process.env)\"}),\" returns an array of environment key names since process.env is an object. For example, say you have the below in your\\xA0.env in your Next.js project.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_SUPABASE_ANON_KEY\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"id_123\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"DATABASE_URL\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"https\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"some-database-url\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you do \",(0,n.jsx)(e.code,{children:\"Object.keys(process.env)\"}),\" based on the above\\xA0.env file, you will have an array containing the key names.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"NEXT_PUBLIC_SUPABASE_ANON_KEY\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"DATABASE_URL\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"filter-with-regextest\",children:\"filter with regex\\xA0test\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In Next.js, if your environment variable name is prefixed with \",(0,n.jsx)(e.code,{children:\"NEXT_PUBLIC_\"}),\", it is exposed to the public and can be found in the build. In the below code snippet, filter applies regex test to get the env variables prefixed with \",(0,n.jsx)(e.code,{children:\"NEXT_PUBLIC_\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" /^NEXT_PUBLIC_/i\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"test\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This way, you will have an array of env variable names prefixed with NEXT_PUBLIC_. Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test\",children:\"regular expression test\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"reduce\",children:\"reduce\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"reduce\"}),\" in the below code snippet is used to generate an JSON object that only contains env variable names prefixed with \",(0,n.jsx)(e.code,{children:\"NEXT_PUBLIC_\"}),\", in other words, public env variables that are exposed in build.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"reduce\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \\u2026env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]:\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" process\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"],\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }),\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ProcessEnv\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\",children:\"Array.prototype.reduce\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/expatfile/next-runtime-env/blob/development/src/script/public-env-script.tsx\",children:\"https://github.com/expatfile/next-runtime-env/blob/development/src/script/public-env-script.tsx\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/expatfile/next-runtime-env/blob/development/src/helpers/get-public-env.ts#L6\",children:\"https://github.com/expatfile/next-runtime-env/blob/development/src/helpers/get-public-env.ts#L6\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/expatfile\",children:\"https://github.com/expatfile\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce\"})}),`\n`]}),`\n`]})]})}function d(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(h,{...l})}):h(l)}return v(N);})();\n;return Component;"
        },
        "_id": "blog/next-runtime-env-regex-test.mdx",
        "_raw": {
          "sourceFilePath": "blog/next-runtime-env-regex-test.mdx",
          "sourceFileName": "next-runtime-env-regex-test.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/next-runtime-env-regex-test"
        },
        "type": "Doc",
        "slug": "/blog/next-runtime-env-regex-test",
        "slugAsParams": "next-runtime-env-regex-test"
      },
      "documentHash": "1740489186357",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/nextruntimeenv-in-documenso.mdx": {
      "document": {
        "title": "next-runtime-env usage in Documenso source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse `next-runtime-env` usage in [Documenso source code](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L2) and what is `next-runtime-env`.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*Ya-10RsM-QMMpFnP0I7x9A.png)\r\n\r\n### What is next-runtime-env?\r\n\r\nUsing `next-runtime-env`, you can effortlessly populate your environment at runtime, not just at build time. Read more about [next-runtime-env](https://www.npmjs.com/package/next-runtime-env).\r\n\r\nnext-runtime-env dynamically injects environment variables into your Next.js application at runtime. This approach adheres to the “build once, deploy many” principle, allowing the same build to be used across various environments without rebuilds.\r\n\r\n#### Quick start\r\n\r\n1. Add `PublicEnvScript` in the root layout.tsx.\r\n    \r\n\r\n```js\r\n// app/layout.tsx\r\nimport { PublicEnvScript } from 'next-runtime-env';\r\nexport default function RootLayout({ children }) {\r\n return (\r\n   <html lang=\"en\">\r\n     <head>\r\n       <PublicEnvScript />\r\n     </head>\r\n     <body>\r\n       {children}\r\n     </body>\r\n   </html>\r\n );\r\n}\r\n```\r\n\r\nThe PublicEnvScript component automatically exposes all environment variables prefixed with NEXT\\_PUBLIC\\_ to the browser\r\n\r\n2\\. Access your environment variables.\r\n\r\n```js\r\n// app/client-page.tsx\r\n'use client';\r\n\r\nimport { env } from 'next-runtime-env';\r\n\r\nexport default function SomePage() {\r\n const NEXT_PUBLIC_FOO = env('NEXT_PUBLIC_FOO');\r\n return <main>NEXT_PUBLIC_FOO: {NEXT_PUBLIC_FOO}</main>;\r\n}\r\n```\r\n\r\n### next-runtime-env usage in Documenso\r\n\r\nBased on the documentation, the first step was to add PublicEnvScript in the root layout. You will find this in [app/layout.tsx](https://github.com/documenso/documenso/blob/main/apps/web/src/app/layout.tsx#L73).\r\n\r\n```js\r\n<head>\r\n <link rel=\"apple-touch-icon\" sizes=\"180x180\" href=\"/apple-touch-icon.png\" />\r\n <link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/favicon-32x32.png\" />\r\n <link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href=\"/favicon-16x16.png\" />\r\n <link rel=\"manifest\" href=\"/site.webmanifest\" />\r\n {IS_APP_WEB_I18N_ENABLED && <meta name=\"google\" content=\"notranslate\" />}\r\n <PublicEnvScript />\r\n</head>\r\n```\r\n\r\nAnd the next step was accesing `env` variables. One such example is found in [put-file.ts](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L49)\r\n\r\n```js\r\nexport const putFile = async (file: File) => {\r\n  \r\n  const NEXT_PUBLIC_UPLOAD_TRANSPORT = env('NEXT_PUBLIC_UPLOAD_TRANSPORT');\r\n\r\n  return await match(NEXT_PUBLIC_UPLOAD_TRANSPORT)\r\n   .with('s3', async () => putFileInS3(file))\r\n   .otherwise(async () => putFileInDatabase(file));\r\n};\r\n```\r\n\r\nHere `env` is used to access an environment variable called `NEXT_PUBLIC_UPLOAD_TRANSPORT`. This way, when you change your env variables, you don’t have to rebuild your Next.js application.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L2](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L2)\r\n    \r\n2. [https://www.npmjs.com/package/next-runtime-env](https://www.npmjs.com/package/next-runtime-env)",
          "code": "var Component=(()=>{var d=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),f=(l,e)=>{for(var c in e)r(l,c,{get:e[c],enumerable:!0})},a=(l,e,c,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of y(e))!u.call(l,s)&&s!==c&&r(l,s,{get:()=>e[s],enumerable:!(o=p(e,s))||o.enumerable});return l};var b=(l,e,c)=>(c=l!=null?d(m(l)):{},a(e||!l||!l.__esModule?r(c,\"default\",{value:l,enumerable:!0}):c,l)),N=l=>a(r({},\"__esModule\",{value:!0}),l);var i=g((_,F)=>{F.exports=_jsx_runtime});var x={};f(x,{default:()=>h,frontmatter:()=>v});var n=b(i()),v={title:\"next-runtime-env usage in Documenso source\\xA0code\"};function t(l){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse \",(0,n.jsx)(e.code,{children:\"next-runtime-env\"}),\" usage in \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L2\",children:\"Documenso source code\"}),\" and what is \",(0,n.jsx)(e.code,{children:\"next-runtime-env\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*Ya-10RsM-QMMpFnP0I7x9A.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"what-is-next-runtime-env\",children:\"What is next-runtime-env?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Using \",(0,n.jsx)(e.code,{children:\"next-runtime-env\"}),\", you can effortlessly populate your environment at runtime, not just at build time. Read more about \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/next-runtime-env\",children:\"next-runtime-env\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"next-runtime-env dynamically injects environment variables into your Next.js application at runtime. This approach adheres to the \\u201Cbuild once, deploy many\\u201D principle, allowing the same build to be used across various environments without rebuilds.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"quick-start\",children:\"Quick start\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Add \",(0,n.jsx)(e.code,{children:\"PublicEnvScript\"}),\" in the root layout.tsx.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" app/layout.tsx\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" PublicEnvScript \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next-runtime-env'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" RootLayout\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" children \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"html lang\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"en\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"head\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"       <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"PublicEnvScript \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/>\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     </\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"head\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"body\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"       {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"children\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     </\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"body\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   </\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"html\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"The PublicEnvScript component automatically exposes all environment variables prefixed with NEXT_PUBLIC_ to the browser\"}),`\n`,(0,n.jsx)(e.p,{children:\"2. Access your environment variables.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" app/client-page.tsx\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'use client'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" env \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next-runtime-env'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" SomePage\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NEXT_PUBLIC_FOO \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'NEXT_PUBLIC_FOO'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"main\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_FOO: \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_FOO\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}</\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"main\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"next-runtime-env-usage-in-documenso\",children:\"next-runtime-env usage in Documenso\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Based on the documentation, the first step was to add PublicEnvScript in the root layout. You will find this in \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/layout.tsx#L73\",children:\"app/layout.tsx\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"head\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"link rel\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"apple-touch-icon\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" sizes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"180x180\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" href\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"/apple-touch-icon.png\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"link rel\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"icon\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"image/png\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" sizes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"32x32\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" href\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"/favicon-32x32.png\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"link rel\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"icon\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"image/png\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" sizes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"16x16\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" href\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"/favicon-16x16.png\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"link rel\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"manifest\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" href\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"/site.webmanifest\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"IS_APP_WEB_I18N_ENABLED \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"&&\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"meta name\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"google\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" content\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"notranslate\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"PublicEnvScript \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/>\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"</\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"head\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"And the next step was accesing \",(0,n.jsx)(e.code,{children:\"env\"}),\" variables. One such example is found in \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L49\",children:\"put-file.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" putFile\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" File\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  \"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NEXT_PUBLIC_UPLOAD_TRANSPORT \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" env\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'NEXT_PUBLIC_UPLOAD_TRANSPORT'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" match\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   .\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"with\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'s3'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" putFileInS3\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   .\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"otherwise\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" putFileInDatabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Here \",(0,n.jsx)(e.code,{children:\"env\"}),\" is used to access an environment variable called \",(0,n.jsx)(e.code,{children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),\". This way, when you change your env variables, you don\\u2019t have to rebuild your Next.js application.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L2\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L2\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/next-runtime-env\",children:\"https://www.npmjs.com/package/next-runtime-env\"})}),`\n`]}),`\n`]})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(t,{...l})}):t(l)}return N(x);})();\n;return Component;"
        },
        "_id": "blog/nextruntimeenv-in-documenso.mdx",
        "_raw": {
          "sourceFilePath": "blog/nextruntimeenv-in-documenso.mdx",
          "sourceFileName": "nextruntimeenv-in-documenso.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/nextruntimeenv-in-documenso"
        },
        "type": "Doc",
        "slug": "/blog/nextruntimeenv-in-documenso",
        "slugAsParams": "nextruntimeenv-in-documenso"
      },
      "documentHash": "1740489186360",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/nodejs-util-module.mdx": {
      "document": {
        "title": "Node.js util module usage in Changesets\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nYou will find this below import at [line 4 in Changesets source code](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4)\r\n\r\n```plaintext\r\nimport { format } from \"util\";\r\n```\r\n\r\nIn this article, an overview of util module and its usage in Changesets is provided.\r\n\r\n### Util module\r\n\r\nThe util module is primarily designed to support the needs of Node.js’ own internal APIs. However, many of the utilities are useful for application and module developers as well. It can be accessed using:\r\n\r\n```plaintext\r\nconst util = require('util');\r\n```\r\n\r\nYou can read more about Util module [here](https://nodejs.org/docs/latest-v8.x/api/util.html).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*pLyBJFlAaaKiVXfK8YFN-A.png)\r\n\r\nUtil module has quite some APIs, but we are interested in Format API as this is what is found to be used in Changesets source code.\r\n\r\n### util.format\r\n\r\nThe util.format() method returns a formatted string using the first argument as a printf-like format.\r\n\r\nThe first argument is a string containing zero or more placeholder tokens. Each placeholder token is replaced with the converted value from the corresponding argument. Supported placeholders are:\r\n\r\n* %s — String.\r\n    \r\n* %d — Number (integer or floating point value).\r\n    \r\n* %i — Integer.\r\n    \r\n* %f — Floating point value.\r\n    \r\n* %j — JSON. Replaced with the string ‘\\[Circular\\]’ if the argument contains circular references.\r\n    \r\n* %o — Object. A string representation of an object with generic JavaScript object formatting. Similar to   \r\n    util.inspect() with options \\{ showHidden: true, depth: 4, showProxy: true \\}. This will show the full object   \r\n    including non-enumerable symbols and properties.\r\n    \r\n* %O — Object. A string representation of an object with generic JavaScript object formatting. Similar to util.inspect()   \r\n    without options. This will show the full object not including non-enumerable symbols and properties.\r\n    \r\n* %% — single percent sign (‘%’). This does not consume an argument.\r\n    \r\n\r\nIf the placeholder does not have a corresponding argument, the placeholder is not replaced.\r\n\r\n```plaintext\r\nutil.format('%s:%s', 'foo');\r\n// Returns: 'foo:%s'\r\n```\r\n\r\nIf there are more arguments passed to the util.format() method than the number of placeholders, the extra arguments are coerced into strings then concatenated to the returned string, each delimited by a space. Excessive arguments whose typeof is ‘object’ or ‘symbol’ (except null) will be transformed by util.inspect().\r\n\r\n```plaintext\r\nutil.format('%s:%s', 'foo', 'bar', 'baz'); // 'foo:bar baz'\r\n```\r\n\r\nIf the first argument is not a string then util.format() returns a string that is the concatenation of all arguments separated by spaces. Each argument is converted to a string using util.inspect().\r\n\r\n```plaintext\r\nutil.format(1, 2, 3); // '1 2 3'\r\n```\r\n\r\nIf only one argument is passed to util.format(), it is returned as it is without any formatting.\r\n\r\n```plaintext\r\nutil.format('%% %s'); // '%% %s'\r\n```\r\n\r\nNow that we understand the basics of Util module and the format API, let’s now look at format usage in Changesets.\r\n\r\n### util.format usage in Changesets\r\n\r\nSearching for format, I found [2 instances where format is used](https://github.com/search?q=repo%3Achangesets%2Fchangesets+format%28&type=code).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*_hrWkFg_3ndxW8BKYrWKLg.png)\r\n\r\n```plaintext\r\n${format(\"\", err).replace(process.cwd(), \"<cwd>\")}\r\n```\r\n\r\nThis just outputs error and there are no replacements to be made since the first argument is an empty string.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*_hrWkFg_3ndxW8BKYrWKLg.png)\r\n\r\n```plaintext\r\nutil\r\n .format(\"\", …args)\r\n .split(\"\\n\")\r\n .join(\"\\n\" + fullPrefix + \" \")\r\n```\r\n\r\nThis produces a string separated by a space, assuming …args is comma separated\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://www.npmjs.com/package/util](https://www.npmjs.com/package/util)\r\n    \r\n2. [https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4)\r\n    \r\n3. [https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88)\r\n    \r\n4. [https://nodejs.org/docs/latest-v8.x/api/util.html#util\\_util\\_format\\_format\\_args](https://nodejs.org/docs/latest-v8.x/api/util.html#util_util_format_format_args)\r\n    \r\n5. [https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L23](https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L23)\r\n    \r\n6. [https://github.com/changesets/changesets/blob/main/packages/get-github-info/src/index.test.ts#L127](https://github.com/changesets/changesets/blob/main/packages/get-github-info/src/index.test.ts#L127)\r\n    \r\n7. [https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88](https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88)",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),x=(n,e)=>{for(var a in e)r(n,a,{get:e[a],enumerable:!0})},l=(n,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!f.call(n,i)&&i!==a&&r(n,i,{get:()=>e[i],enumerable:!(s=m(e,i))||s.enumerable});return n};var w=(n,e,a)=>(a=n!=null?p(u(n)):{},l(e||!n||!n.__esModule?r(a,\"default\",{value:n,enumerable:!0}):a,n)),y=n=>l(r({},\"__esModule\",{value:!0}),n);var h=b((N,c)=>{c.exports=_jsx_runtime});var j={};x(j,{default:()=>o,frontmatter:()=>k});var t=w(h()),k={title:\"Node.js util module usage in Changesets\"};function d(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"You will find this below import at \",(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4\",children:\"line 4 in Changesets source code\"})]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:'import { format } from \"util\";'})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"In this article, an overview of util module and its usage in Changesets is provided.\"}),`\n`,(0,t.jsx)(e.h3,{id:\"util-module\",children:\"Util module\"}),`\n`,(0,t.jsx)(e.p,{children:\"The util module is primarily designed to support the needs of Node.js\\u2019 own internal APIs. However, many of the utilities are useful for application and module developers as well. It can be accessed using:\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"const util = require('util');\"})})})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"You can read more about Util module \",(0,t.jsx)(e.a,{href:\"https://nodejs.org/docs/latest-v8.x/api/util.html\",children:\"here\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*pLyBJFlAaaKiVXfK8YFN-A.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Util module has quite some APIs, but we are interested in Format API as this is what is found to be used in Changesets source code.\"}),`\n`,(0,t.jsx)(e.h3,{id:\"utilformat\",children:\"util.format\"}),`\n`,(0,t.jsx)(e.p,{children:\"The util.format() method returns a formatted string using the first argument as a printf-like format.\"}),`\n`,(0,t.jsx)(e.p,{children:\"The first argument is a string containing zero or more placeholder tokens. Each placeholder token is replaced with the converted value from the corresponding argument. Supported placeholders are:\"}),`\n`,(0,t.jsxs)(e.ul,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%s\\u200A\\u2014\\u200AString.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%d\\u200A\\u2014\\u200ANumber (integer or floating point value).\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%i\\u200A\\u2014\\u200AInteger.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%f\\u200A\\u2014\\u200AFloating point value.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%j\\u200A\\u2014\\u200AJSON. Replaced with the string \\u2018[Circular]\\u2019 if the argument contains circular references.\"}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"%o\\u200A\\u2014\\u200AObject. A string representation of an object with generic JavaScript object formatting. Similar to\\xA0\",(0,t.jsx)(e.br,{}),`\n`,\"util.inspect() with options { showHidden: true, depth: 4, showProxy: true }. This will show the full object\\xA0\",(0,t.jsx)(e.br,{}),`\n`,\"including non-enumerable symbols and properties.\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsxs)(e.p,{children:[\"%O\\u200A\\u2014\\u200AObject. A string representation of an object with generic JavaScript object formatting. Similar to util.inspect()\\xA0\",(0,t.jsx)(e.br,{}),`\n`,\"without options. This will show the full object not including non-enumerable symbols and properties.\"]}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:\"%%\\u200A\\u2014\\u200Asingle percent sign (\\u2018%\\u2019). This does not consume an argument.\"}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:\"If the placeholder does not have a corresponding argument, the placeholder is not replaced.\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"util.format('%s:%s', 'foo');\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"// Returns: 'foo:%s'\"})})]})})}),`\n`,(0,t.jsx)(e.p,{children:\"If there are more arguments passed to the util.format() method than the number of placeholders, the extra arguments are coerced into strings then concatenated to the returned string, each delimited by a space. Excessive arguments whose typeof is \\u2018object\\u2019 or \\u2018symbol\\u2019 (except null) will be transformed by util.inspect().\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"util.format('%s:%s', 'foo', 'bar', 'baz'); // 'foo:bar baz'\"})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"If the first argument is not a string then util.format() returns a string that is the concatenation of all arguments separated by spaces. Each argument is converted to a string using util.inspect().\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"util.format(1, 2, 3); // '1 2 3'\"})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"If only one argument is passed to util.format(), it is returned as it is without any formatting.\"}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"util.format('%% %s'); // '%% %s'\"})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"Now that we understand the basics of Util module and the format API, let\\u2019s now look at format usage in Changesets.\"}),`\n`,(0,t.jsx)(e.h3,{id:\"utilformat-usage-in-changesets\",children:\"util.format usage in Changesets\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"Searching for format, I found \",(0,t.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Achangesets%2Fchangesets+format%28&type=code\",children:\"2 instances where format is used\"}),\".\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*_hrWkFg_3ndxW8BKYrWKLg.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:'${format(\"\", err).replace(process.cwd(), \"<cwd>\")}'})})})})}),`\n`,(0,t.jsx)(e.p,{children:\"This just outputs error and there are no replacements to be made since the first argument is an empty string.\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*_hrWkFg_3ndxW8BKYrWKLg.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"util\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:' .format(\"\", \\u2026args)'})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:' .split(\"\\\\n\")'})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:' .join(\"\\\\n\" + fullPrefix + \" \")'})})]})})}),`\n`,(0,t.jsx)(e.p,{children:\"This produces a string separated by a space, assuming\\xA0\\u2026args is comma separated\"}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://www.npmjs.com/package/util\",children:\"https://www.npmjs.com/package/util\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L4\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://nodejs.org/docs/latest-v8.x/api/util.html#util_util_format_format_args\",children:\"https://nodejs.org/docs/latest-v8.x/api/util.html#util_util_format_format_args\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L23\",children:\"https://github.com/changesets/changesets/blob/main/packages/logger/src/index.ts#L23\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/get-github-info/src/index.test.ts#L127\",children:\"https://github.com/changesets/changesets/blob/main/packages/get-github-info/src/index.test.ts#L127\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88\",children:\"https://github.com/changesets/changesets/blob/main/packages/cli/src/index.ts#L88\"})}),`\n`]}),`\n`]})]})}function o(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}return y(j);})();\n;return Component;"
        },
        "_id": "blog/nodejs-util-module.mdx",
        "_raw": {
          "sourceFilePath": "blog/nodejs-util-module.mdx",
          "sourceFileName": "nodejs-util-module.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/nodejs-util-module"
        },
        "type": "Doc",
        "slug": "/blog/nodejs-util-module",
        "slugAsParams": "nodejs-util-module"
      },
      "documentHash": "1740489186364",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/novel-ai-powered.mdx": {
      "document": {
        "title": "Here's how AI-powered autocompletion is implemented in Novel, an open-source text editor\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse how Novel implements AI-powered autocompletion in its beautiful editor.\r\n\r\nNovel is an open-source Notion-style WYSIWYG editor with AI-powered autocompletion. This built on top of [TipTap](https://tiptap.dev/). Tiptap is the headless and open source editor framework. Integrate over 100+ extensions and paid features like collaboration and AI agents to create the UX you want.\r\n\r\nSince we are interested in learning about the AI-powered autocompletion, you first need to know where you see “Ask AI”. Open [Novel](https://novel.sh/) and select some text using your mouse in the editor that is rendered by default. It can be any text. You will see this widget popup as shown below:\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*N3p-asijoa5SKRsgX1uzAA.png)\r\n\r\nIt is about the time we should find the code that is responsible for this widget. How to do that? Novel repository is a monorepo. it has a workspace folder named `web` in [apps](https://github.com/steven-tey/novel/tree/main/apps/web).\r\n\r\nSince this is a Next.js based project and uses app router, in the [page.tsx](https://github.com/steven-tey/novel/blob/main/apps/web/app/page.tsx#L37), a component named `TailwindAdvancedEditor`\r\n\r\n```plaintext\r\nexport default function Page() {\r\n  return (\r\n    <div className=\"flex min-h-screen flex-col items-center gap-4 py-4 sm:px-5\">\r\n      <div className=\"flex w-full max-w-screen-lg items-center gap-2 px-4 sm:mb-[calc(20vh)]\">\r\n        <Button size=\"icon\" variant=\"outline\">\r\n          <a href=\"https://github.com/steven-tey/novel\" target=\"_blank\" rel=\"noreferrer\">\r\n            <GithubIcon />\r\n          </a>\r\n        </Button>\r\n        <Dialog>\r\n          <DialogTrigger asChild>\r\n            <Button className=\"ml gap-2\">\r\n              <BookOpen className=\"h-4 w-4\" />\r\n              Usage in dialog\r\n            </Button>\r\n          </DialogTrigger>\r\n          <DialogContent className=\"flex max-w-3xl h-[calc(100vh-24px)]\">\r\n            <ScrollArea className=\"max-h-screen\">\r\n              <TailwindAdvancedEditor />\r\n            </ScrollArea>\r\n          </DialogContent>\r\n        </Dialog>\r\n        <Link href=\"/docs\" className=\"ml-auto\">\r\n          <Button variant=\"ghost\">Documentation</Button>\r\n        </Link>\r\n        <Menu />\r\n      </div>\r\n\r\n      <TailwindAdvancedEditor /> // Here is the Editor component\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\nThis component named TailwindAdvancedEditor is imported from [components/tailwind/advanced-editor.tsx](https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/advanced-editor.tsx), at [line 123](https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/advanced-editor.tsx), you will find a component named `GenerativeMenuSwitch`. This is the widget you will see when you select some text in the Novel text editor.\r\n\r\n```plaintext\r\n<GenerativeMenuSwitch open={openAI} onOpenChange={setOpenAI}>\r\n  <Separator orientation=\"vertical\" />\r\n  <NodeSelector open={openNode} onOpenChange={setOpenNode} />\r\n  <Separator orientation=\"vertical\" />\r\n  \r\n  <LinkSelector open={openLink} onOpenChange={setOpenLink} />\r\n  <Separator orientation=\"vertical\" />\r\n  <MathSelector />\r\n  <Separator orientation=\"vertical\" />\r\n  <TextButtons />\r\n  <Separator orientation=\"vertical\" />\r\n  <ColorSelector open={openColor} onOpenChange={setOpenColor} />\r\n</GenerativeMenuSwitch>\r\n```\r\n\r\n### Generative Menu Switch\r\n\r\nAt line 41 in [generative-menu-switch.tsx](https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/generative-menu-switch.tsx#L14), you will find the code for “Ask AI”\r\n\r\n```plaintext\r\n{!open && (\r\n  <Fragment>\r\n    <Button\r\n      className=\"gap-1 rounded-none text-purple-500\"\r\n      variant=\"ghost\"\r\n      onClick={() => onOpenChange(true)}\r\n      size=\"sm\"\r\n    >\r\n      <Magic className=\"h-5 w-5\" />\r\n      Ask AI\r\n    </Button>\r\n    {children}\r\n  </Fragment>\r\n)}\r\n```\r\n\r\nWhen you click on this “Ask AI” button, a new widget is shown.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*e6eKSK40WyeILAo9ARbhiw.png)\r\n\r\nThis widget is rendered based on this condition shown below.\r\n\r\n```plaintext\r\n{open && <AISelector open={open} onOpenChange={onOpenChange} />}\r\n{!open && (\r\n  <Fragment>\r\n    <Button\r\n      className=\"gap-1 rounded-none text-purple-500\"\r\n      variant=\"ghost\"\r\n      onClick={() => onOpenChange(true)}\r\n      size=\"sm\"\r\n    >\r\n      <Magic className=\"h-5 w-5\" />\r\n      Ask AI\r\n    </Button>\r\n    {children}\r\n  </Fragment>\r\n)}\r\n```\r\n\r\nWe need to analyse [ai-selector.tsx](https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/ai-selector.tsx#L25) at this point.\r\n\r\n### AI Selector\r\n\r\nWhen you enter some input and submit that information, [ai-selector.tsx](https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/ai-selector.tsx#L69) has the code that handles this auto completion. When you click this [ArrowUp button](https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/ai-selector.tsx#L93) shown below:\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*LjKOrpmZ7hX_unnnRTT6PQ.png)\r\n\r\nThere’s this onClick handler that calls a function named complete.\r\n\r\n```plaintext\r\nonClick={() => {\r\n  if (completion)\r\n    return complete(completion, {\r\n      body: { option: \"zap\", command: inputValue },\r\n    }).then(() => setInputValue(\"\"));\r\n  \r\n  const slice = editor.state.selection.content();\r\n  const text = editor.storage.markdown.serializer.serialize(slice.content);\r\n  \r\n  complete(text, {\r\n    body: { option: \"zap\", command: inputValue },\r\n  }).then(() => setInputValue(\"\"));\r\n}\r\n```\r\n\r\ncomplete is returned by useCompletion hook as shown below\r\n\r\n```plaintext\r\nconst { completion, complete, isLoading } = useCompletion({\r\n    // id: \"novel\",\r\n    api: \"/api/generate\",\r\n    onResponse: (response) => {\r\n      if (response.status === 429) {\r\n        toast.error(\"You have reached your request limit for the day.\");\r\n        return;\r\n      }\r\n    },\r\n    onError: (e) => {\r\n      toast.error(e.message);\r\n    },\r\n});\r\n```\r\n\r\nuseCompletion is a hook provided by [ai/react](https://sdk.vercel.ai/docs/reference/ai-sdk-ui/use-completion), and allows you to create text completion based capabilities for your application. It enables the streaming of text completions from your AI provider, manages the state for chat input, and updates the UI automatically as new messages are received.\r\n\r\nThis rings a bell for me, you will find similar api endpoint configuration to be made in CopilotKit to integrate AI capabilities into your system. I read about configuring an endpoint in [CopilotKit quick start](https://docs.copilotkit.ai/quickstart).\r\n\r\n### /api/generate Route\r\n\r\nIn this file named [api/generate/route.ts](https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts), you will find a lot of things happening. I will try to provide an overview of what this route does.\r\n\r\n* There is a POST Method and it configures OpenAI\r\n    \r\n\r\n```plaintext\r\nexport async function POST(req: Request): Promise<Response> {\r\n  const openai = new OpenAI({\r\n    apiKey: process.env.OPENAI_API_KEY,\r\n    baseURL: process.env.OPENAI_BASE_URL || \"https://api.openai.com/v1\",\r\n  });\r\n```\r\n\r\n* Ratelimit is applied based on the IP address using \\[Upstash rate limiting strategy\\]([https://github.com/upstash/ratelimit-js](https://github.com/upstash/ratelimit-js))\r\n    \r\n\r\n```plaintext\r\nif (process.env.KV_REST_API_URL && process.env.KV_REST_API_TOKEN) {\r\n    const ip = req.headers.get(\"x-forwarded-for\");\r\n    const ratelimit = new Ratelimit({\r\n      redis: kv,\r\n      limiter: Ratelimit.slidingWindow(50, \"1 d\"),\r\n    });\r\n\r\n    const { success, limit, reset, remaining } = await ratelimit.limit(`novel_ratelimit_${ip}`);\r\n\r\n    if (!success) {\r\n      return new Response(\"You have reached your request limit for the day.\", {\r\n        status: 429,\r\n        headers: {\r\n          \"X-RateLimit-Limit\": limit.toString(),\r\n          \"X-RateLimit-Remaining\": remaining.toString(),\r\n          \"X-RateLimit-Reset\": reset.toString(),\r\n        },\r\n      });\r\n    }\r\n  }\r\n```\r\n\r\n* From [lines 45–123](https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts#L45-L123), you will find prompt messages configured.\r\n    \r\n* You feed that message to the Open AI API at [Line 125](https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts#L125)\r\n    \r\n* Finally response is converted into friendly text-stream and this POST method return a new StreamingTextReponse found at the [end of file](https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts#L137-L140).\r\n    \r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### Conclusion\r\n\r\nThis is how you would configure an AI-powered completion. This is definitely worth trying/experimenting.\r\n\r\nImportant concepts here to remember are configuring an API endpoint, ensuring there’s a rate limit in place based on IP address to prevent spam and how streaming response should be handled.\r\n\r\n### References:\r\n\r\n1. [https://github.com/steven-tey/novel/tree/main](https://github.com/steven-tey/novel/tree/main)\r\n    \r\n2. [https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/advanced-editor.tsx](https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/advanced-editor.tsx)\r\n    \r\n3. [https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/generative-menu-switch.tsx](https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/generative-menu-switch.tsx)\r\n    \r\n4. [https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/ai-selector.tsx#L25](https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/ai-selector.tsx#L25)\r\n    \r\n5. [https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts](https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts)\r\n    \r\n6. [https://vercel.com/templates/next.js/platforms-starter-kit](https://vercel.com/templates/next.js/platforms-starter-kit)\r\n    \r\n7. [https://tiptap.dev/](https://tiptap.dev/)\r\n    \r\n8. [https://docs.copilotkit.ai/quickstart](https://docs.copilotkit.ai/quickstart)\r\n    \r\n9. [https://github.com/upstash/ratelimit-js](https://github.com/upstash/ratelimit-js)",
          "code": "var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),v=(a,e)=>{for(var i in e)l(a,i,{get:e[i],enumerable:!0})},r=(a,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of u(e))!N.call(a,s)&&s!==i&&l(a,s,{get:()=>e[s],enumerable:!(t=m(e,s))||t.enumerable});return a};var f=(a,e,i)=>(i=a!=null?o(g(a)):{},r(e||!a||!a.__esModule?l(i,\"default\",{value:a,enumerable:!0}):i,a)),w=a=>r(l({},\"__esModule\",{value:!0}),a);var h=b((A,c)=>{c.exports=_jsx_runtime});var x={};v(x,{default:()=>d,frontmatter:()=>y});var n=f(h()),y={title:\"Here's how AI-powered autocompletion is implemented in Novel, an open-source text\\xA0editor\"};function p(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this article, we analyse how Novel implements AI-powered autocompletion in its beautiful editor.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Novel is an open-source Notion-style WYSIWYG editor with AI-powered autocompletion. This built on top of \",(0,n.jsx)(e.a,{href:\"https://tiptap.dev/\",children:\"TipTap\"}),\". Tiptap is the headless and open source editor framework. Integrate over 100+ extensions and paid features like collaboration and AI agents to create the UX you want.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Since we are interested in learning about the AI-powered autocompletion, you first need to know where you see \\u201CAsk AI\\u201D. Open \",(0,n.jsx)(e.a,{href:\"https://novel.sh/\",children:\"Novel\"}),\" and select some text using your mouse in the editor that is rendered by default. It can be any text. You will see this widget popup as shown below:\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*N3p-asijoa5SKRsgX1uzAA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"It is about the time we should find the code that is responsible for this widget. How to do that? Novel repository is a monorepo. it has a workspace folder named \",(0,n.jsx)(e.code,{children:\"web\"}),\" in \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/tree/main/apps/web\",children:\"apps\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Since this is a Next.js based project and uses app router, in the \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/app/page.tsx#L37\",children:\"page.tsx\"}),\", a component named \",(0,n.jsx)(e.code,{children:\"TailwindAdvancedEditor\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export default function Page() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    <div className=\"flex min-h-screen flex-col items-center gap-4 py-4 sm:px-5\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      <div className=\"flex w-full max-w-screen-lg items-center gap-2 px-4 sm:mb-[calc(20vh)]\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'        <Button size=\"icon\" variant=\"outline\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          <a href=\"https://github.com/steven-tey/novel\" target=\"_blank\" rel=\"noreferrer\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            <GithubIcon />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          </a>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        </Button>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        <Dialog>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          <DialogTrigger asChild>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'            <Button className=\"ml gap-2\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'              <BookOpen className=\"h-4 w-4\" />'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"              Usage in dialog\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            </Button>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          </DialogTrigger>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          <DialogContent className=\"flex max-w-3xl h-[calc(100vh-24px)]\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'            <ScrollArea className=\"max-h-screen\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"              <TailwindAdvancedEditor />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"            </ScrollArea>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          </DialogContent>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        </Dialog>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'        <Link href=\"/docs\" className=\"ml-auto\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          <Button variant=\"ghost\">Documentation</Button>'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        </Link>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        <Menu />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      </div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <TailwindAdvancedEditor /> // Here is the Editor component\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This component named TailwindAdvancedEditor is imported from \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/advanced-editor.tsx\",children:\"components/tailwind/advanced-editor.tsx\"}),\", at \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/advanced-editor.tsx\",children:\"line 123\"}),\", you will find a component named \",(0,n.jsx)(e.code,{children:\"GenerativeMenuSwitch\"}),\". This is the widget you will see when you select some text in the Novel text editor.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"<GenerativeMenuSwitch open={openAI} onOpenChange={setOpenAI}>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  <Separator orientation=\"vertical\" />'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  <NodeSelector open={openNode} onOpenChange={setOpenNode} />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  <Separator orientation=\"vertical\" />'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  <LinkSelector open={openLink} onOpenChange={setOpenLink} />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  <Separator orientation=\"vertical\" />'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  <MathSelector />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  <Separator orientation=\"vertical\" />'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  <TextButtons />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  <Separator orientation=\"vertical\" />'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  <ColorSelector open={openColor} onOpenChange={setOpenColor} />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"</GenerativeMenuSwitch>\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"generative-menuswitch\",children:\"Generative Menu\\xA0Switch\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"At line 41 in \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/generative-menu-switch.tsx#L14\",children:\"generative-menu-switch.tsx\"}),\", you will find the code for \\u201CAsk AI\\u201D\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{!open && (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  <Fragment>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <Button\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      className=\"gap-1 rounded-none text-purple-500\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      variant=\"ghost\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      onClick={() => onOpenChange(true)}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      size=\"sm\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    >\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      <Magic className=\"h-5 w-5\" />'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      Ask AI\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </Button>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    {children}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  </Fragment>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\")}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"When you click on this \\u201CAsk AI\\u201D button, a new widget is shown.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*e6eKSK40WyeILAo9ARbhiw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"This widget is rendered based on this condition shown below.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{open && <AISelector open={open} onOpenChange={onOpenChange} />}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{!open && (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  <Fragment>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <Button\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      className=\"gap-1 rounded-none text-purple-500\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      variant=\"ghost\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      onClick={() => onOpenChange(true)}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      size=\"sm\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    >\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      <Magic className=\"h-5 w-5\" />'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      Ask AI\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </Button>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    {children}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  </Fragment>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\")}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"We need to analyse \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/ai-selector.tsx#L25\",children:\"ai-selector.tsx\"}),\" at this point.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"ai-selector\",children:\"AI Selector\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you enter some input and submit that information, \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/ai-selector.tsx#L69\",children:\"ai-selector.tsx\"}),\" has the code that handles this auto completion. When you click this \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/ai-selector.tsx#L93\",children:\"ArrowUp button\"}),\" shown below:\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*LjKOrpmZ7hX_unnnRTT6PQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"There\\u2019s this onClick handler that calls a function named complete.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"onClick={() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (completion)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return complete(completion, {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      body: { option: \"zap\", command: inputValue },'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    }).then(() => setInputValue(\"\"));'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const slice = editor.state.selection.content();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const text = editor.storage.markdown.serializer.serialize(slice.content);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  complete(text, {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    body: { option: \"zap\", command: inputValue },'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  }).then(() => setInputValue(\"\"));'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"complete is returned by useCompletion hook as shown below\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const { completion, complete, isLoading } = useCompletion({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    // id: \"novel\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    api: \"/api/generate\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    onResponse: (response) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      if (response.status === 429) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'        toast.error(\"You have reached your request limit for the day.\");'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        return;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    onError: (e) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      toast.error(e.message);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"useCompletion is a hook provided by \",(0,n.jsx)(e.a,{href:\"https://sdk.vercel.ai/docs/reference/ai-sdk-ui/use-completion\",children:\"ai/react\"}),\", and allows you to create text completion based capabilities for your application. It enables the streaming of text completions from your AI provider, manages the state for chat input, and updates the UI automatically as new messages are received.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"This rings a bell for me, you will find similar api endpoint configuration to be made in CopilotKit to integrate AI capabilities into your system. I read about configuring an endpoint in \",(0,n.jsx)(e.a,{href:\"https://docs.copilotkit.ai/quickstart\",children:\"CopilotKit quick start\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"apigenerate-route\",children:\"/api/generate Route\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In this file named \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts\",children:\"api/generate/route.ts\"}),\", you will find a lot of things happening. I will try to provide an overview of what this route does.\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"There is a POST Method and it configures OpenAI\"}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export async function POST(req: Request): Promise<Response> {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const openai = new OpenAI({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    apiKey: process.env.OPENAI_API_KEY,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    baseURL: process.env.OPENAI_BASE_URL || \"https://api.openai.com/v1\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  });\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[\"Ratelimit is applied based on the IP address using [Upstash rate limiting strategy](\",(0,n.jsx)(e.a,{href:\"https://github.com/upstash/ratelimit-js\",children:\"https://github.com/upstash/ratelimit-js\"}),\")\"]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (process.env.KV_REST_API_URL && process.env.KV_REST_API_TOKEN) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    const ip = req.headers.get(\"x-forwarded-for\");'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const ratelimit = new Ratelimit({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      redis: kv,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      limiter: Ratelimit.slidingWindow(50, \"1 d\"),'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const { success, limit, reset, remaining } = await ratelimit.limit(`novel_ratelimit_${ip}`);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    if (!success) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      return new Response(\"You have reached your request limit for the day.\", {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        status: 429,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        headers: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          \"X-RateLimit-Limit\": limit.toString(),'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          \"X-RateLimit-Remaining\": remaining.toString(),'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          \"X-RateLimit-Reset\": reset.toString(),'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"From \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts#L45-L123\",children:\"lines 45\\u2013123\"}),\", you will find prompt messages configured.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"You feed that message to the Open AI API at \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts#L125\",children:\"Line 125\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Finally response is converted into friendly text-stream and this POST method return a new StreamingTextReponse found at the \",(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts#L137-L140\",children:\"end of file\"}),\".\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"conclusion\",children:\"Conclusion\"}),`\n`,(0,n.jsx)(e.p,{children:\"This is how you would configure an AI-powered completion. This is definitely worth trying/experimenting.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Important concepts here to remember are configuring an API endpoint, ensuring there\\u2019s a rate limit in place based on IP address to prevent spam and how streaming response should be handled.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/tree/main\",children:\"https://github.com/steven-tey/novel/tree/main\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/advanced-editor.tsx\",children:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/advanced-editor.tsx\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/generative-menu-switch.tsx\",children:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/generative-menu-switch.tsx\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/ai-selector.tsx#L25\",children:\"https://github.com/steven-tey/novel/blob/main/apps/web/components/tailwind/generative/ai-selector.tsx#L25\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts\",children:\"https://github.com/steven-tey/novel/blob/main/apps/web/app/api/generate/route.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://vercel.com/templates/next.js/platforms-starter-kit\",children:\"https://vercel.com/templates/next.js/platforms-starter-kit\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://tiptap.dev/\",children:\"https://tiptap.dev/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://docs.copilotkit.ai/quickstart\",children:\"https://docs.copilotkit.ai/quickstart\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/upstash/ratelimit-js\",children:\"https://github.com/upstash/ratelimit-js\"})}),`\n`]}),`\n`]})]})}function d(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(p,{...a})}):p(a)}return w(x);})();\n;return Component;"
        },
        "_id": "blog/novel-ai-powered.mdx",
        "_raw": {
          "sourceFilePath": "blog/novel-ai-powered.mdx",
          "sourceFileName": "novel-ai-powered.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/novel-ai-powered"
        },
        "type": "Doc",
        "slug": "/blog/novel-ai-powered",
        "slugAsParams": "novel-ai-powered"
      },
      "documentHash": "1740489186367",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/object-usage-in-zustand.mdx": {
      "document": {
        "title": "Object.is() usage in Zustand source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will explore how Object.is() method is used in [Zustand’s source code](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71). \r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*CMnT4oJcS6-EjWECujm5ZQ.png)\r\n\r\nThe above code snippet is picked from [vanilla.ts](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71)\r\n\r\nObject.is() method is used in setState (more articles on this later on).\r\n\r\nLet’s first understand what an Object.is() method is.\r\n\r\n### [Object.is()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)\r\n\r\nThe [`Object.is()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is) static method determines whether two values are [the same value](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value_equality_using_object.is).\r\n\r\nThe below example is picked from MDN Docs:\r\n\r\n```javascript\r\nconsole.log(Object.is('1', 1));\r\n// Expected output: false\r\n\r\nconsole.log(Object.is(NaN, NaN));\r\n// Expected output: true\r\n\r\nconsole.log(Object.is(-0, 0));\r\n// Expected output: false\r\n\r\nconst obj = {};\r\nconsole.log(Object.is(obj, {}));\r\n// Expected output: false\r\n```\r\n\r\nHere is a bit complicated JSON example:\r\n\r\n```javascript\r\nconst jsonObject1 = {\r\n    name: \"foo\",\r\n    age: 30\r\n};\r\n\r\nconst jsonObject2 = {\r\n    name: \"bar\",\r\n    age: 30\r\n};\r\n\r\nconsole.log(Object.is(jsonObject1, jsonObject2)); // false\r\n```\r\n\r\n#### Why does `Object.is()` return `false`?\r\n\r\nEven though `jsonObject1` and `jsonObject2` have the same content, they are different objects in memory. In JavaScript, objects are compared by reference, not by their content. Since these two objects are stored at different memory locations, `Object.is()` returns `false`.\r\n\r\n### Object.is(nextState, state)\r\n\r\nIn the below code snippet from Zustand, the `Object.is()` method is used to determine whether the `nextState` is truly different from the current `state` before proceeding to update the state and notify listeners. This check is crucial for performance and avoiding unnecessary state updates.\r\n\r\n```typescript\r\nconst setState: StoreApi<TState>['setState'] = (partial, replace) => {\r\n  // TODO: Remove type assertion once https://github.com/microsoft/TypeScript/issues/37663 is resolved\r\n  // https://github.com/microsoft/TypeScript/issues/37663#issuecomment-759728342\r\n  const nextState =\r\n    typeof partial === 'function'\r\n      ? (partial as (state: TState) => TState)(state)\r\n      : partial\r\n  if (!Object.is(nextState, state)) {\r\n    const previousState = state\r\n    state =\r\n      (replace ?? (typeof nextState !== 'object' || nextState === null))\r\n        ? (nextState as TState)\r\n        : Object.assign({}, state, nextState)\r\n    listeners.forEach((listener) => listener(state, previousState))\r\n  }\r\n}\r\n```\r\n\r\nThe below image shows the Object.is() in action\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*wkLCVrd_hdUJqRqRJ4ontg.png)\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*B1C9X61Rr7faIhczJnyS7Q.png)\r\n\r\nTo add the above log statements, I compiled Zustand using the command `pnpm run build` and copied the dist into `examples/demo/src`. Looks hacky, but hey we are experimenting and figuring out how Zustand works internally.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*1FOi8LhNb04F4-x1neQ5vA.png)\r\n\r\n```javascript\r\nconst useStore = create((set) => ({\r\n  count: 1,\r\n  inc: () => set((state) => ({ count: state.count + 1 })),\r\n}))\r\n```\r\n\r\nCalling inc somehow triggers the setState, we will figure out how in the upcoming articles.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71)\r\n    \r\n2. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Object/is](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)\r\n    \r\n3. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality\\_comparisons\\_and\\_sameness#same-value\\_equality\\_using\\_object.is](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value_equality_using_object.is)\r\n",
          "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var s in e)r(n,s,{get:e[s],enumerable:!0})},t=(n,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(n,c)&&c!==s&&r(n,c,{get:()=>e[c],enumerable:!(o=p(e,c))||o.enumerable});return n};var f=(n,e,s)=>(s=n!=null?h(m(n)):{},t(e||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),j=n=>t(r({},\"__esModule\",{value:!0}),n);var F=g((O,a)=>{a.exports=_jsx_runtime});var v={};b(v,{default:()=>d,frontmatter:()=>N});var l=f(F()),N={title:\"Object.is() usage in Zustand source\\xA0code\"};function i(n){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we will explore how Object.is() method is used in \",(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71\",children:\"Zustand\\u2019s source code\"}),\".\\xA0\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*CMnT4oJcS6-EjWECujm5ZQ.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"The above code snippet is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71\",children:\"vanilla.ts\"})]}),`\n`,(0,l.jsx)(e.p,{children:\"Object.is() method is used in setState (more articles on this later on).\"}),`\n`,(0,l.jsx)(e.p,{children:\"Let\\u2019s first understand what an Object.is() method is.\"}),`\n`,(0,l.jsx)(e.h3,{id:\"objectis\",children:(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",children:\"Object.is()\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"The \",(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",children:(0,l.jsx)(e.code,{children:\"Object.is()\"})}),\" static method determines whether two values are \",(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value_equality_using_object.is\",children:\"the same value\"}),\".\"]}),`\n`,(0,l.jsx)(e.p,{children:\"The below example is picked from MDN Docs:\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'1'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: false\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(NaN,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" NaN));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: true\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(-0,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: false\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" obj \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {};\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"obj\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {}));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: false\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Here is a bit complicated JSON example:\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" jsonObject1 \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"foo\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    age\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 30\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" jsonObject2 \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"bar\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    age\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 30\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"jsonObject1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" jsonObject2\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" false\"})]})]})})}),`\n`,(0,l.jsxs)(e.h4,{id:\"why-does-objectis-returnfalse\",children:[\"Why does \",(0,l.jsx)(e.code,{children:\"Object.is()\"}),\" return\\xA0\",(0,l.jsx)(e.code,{children:\"false\"}),\"?\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Even though \",(0,l.jsx)(e.code,{children:\"jsonObject1\"}),\" and \",(0,l.jsx)(e.code,{children:\"jsonObject2\"}),\" have the same content, they are different objects in memory. In JavaScript, objects are compared by reference, not by their content. Since these two objects are stored at different memory locations, \",(0,l.jsx)(e.code,{children:\"Object.is()\"}),\" returns \",(0,l.jsx)(e.code,{children:\"false\"}),\".\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"objectisnextstate-state\",children:\"Object.is(nextState, state)\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"In the below code snippet from Zustand, the \",(0,l.jsx)(e.code,{children:\"Object.is()\"}),\" method is used to determine whether the \",(0,l.jsx)(e.code,{children:\"nextState\"}),\" is truly different from the current \",(0,l.jsx)(e.code,{children:\"state\"}),\" before proceeding to update the state and notify listeners. This check is crucial for performance and avoiding unnecessary state updates.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" setState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'setState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"partial\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" replace\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" TODO: Remove type assertion once https://github.com/microsoft/TypeScript/issues/37663 is resolved\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://github.com/microsoft/TypeScript/issues/37663#issuecomment-759728342\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'function'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"partial \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" previousState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    state \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"replace \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'object'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null))\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"assign\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({},\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    listeners\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"forEach\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" previousState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"The below image shows the Object.is() in action\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*wkLCVrd_hdUJqRqRJ4ontg.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*B1C9X61Rr7faIhczJnyS7Q.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"To add the above log statements, I compiled Zustand using the command \",(0,l.jsx)(e.code,{children:\"pnpm run build\"}),\" and copied the dist into \",(0,l.jsx)(e.code,{children:\"examples/demo/src\"}),\". Looks hacky, but hey we are experimenting and figuring out how Zustand works internally.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*1FOi8LhNb04F4-x1neQ5vA.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  inc\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"count \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}))\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Calling inc somehow triggers the setState, we will figure out how in the upcoming articles.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71\",children:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value_equality_using_object.is\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value_equality_using_object.is\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return j(v);})();\n;return Component;"
        },
        "_id": "blog/object-usage-in-zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/object-usage-in-zustand.mdx",
          "sourceFileName": "object-usage-in-zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/object-usage-in-zustand"
        },
        "type": "Doc",
        "slug": "/blog/object-usage-in-zustand",
        "slugAsParams": "object-usage-in-zustand"
      },
      "documentHash": "1740489186370",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/objectassign-usage-in-Zustand.mdx": {
      "document": {
        "title": "Object.assign() usage in Zustand source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\n### In this article, we will understand how [Object.assign()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign) is used in [Zustand’s source code](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76).\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*EyRIG5AtyItQSDOHES6hsA.png)\r\n\r\nThe above code snippet is from [vanilla.ts](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76), when you set a state, Object.assign is used to update your state object.\r\n\r\nLet’s first understand the basics of Object.assign:\r\n\r\n### Object.assign()\r\n\r\nThe `Object.assign()` static method copies all [enumerable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/propertyIsEnumerable) [own properties](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn) from one or more *source objects* to a *target object*. It returns the modified target object.\r\n\r\n```javascript\r\nconst target = { a: 1, b: 2 };\r\nconst source = { b: 4, c: 5 };\r\n\r\nconst returnedTarget = Object.assign(target, source);\r\n\r\nconsole.log(target);\r\n// Expected output: Object { a: 1, b: 4, c: 5 }\r\n\r\nconsole.log(returnedTarget === target);\r\n// Expected output: true\r\n```\r\n\r\nb value in the target object is replaced with b value in source object.\r\n\r\nReally simple right? let’s now run some experiments and understand how Zustand’s setState leverages Object.assign() method.\r\n\r\n### Object.assign() in Zustand’s source code:\r\n\r\n```javascript\r\n// pulled from: https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\r\nstate = (replace != null ? \r\n              replace : \r\n              typeof nextState !== \"object\" || \r\n              nextState === null) ? \r\n                nextState : \r\n                Object.assign({}, state, nextState);\r\n```\r\n\r\nThat’s nested ternary operator there in the above code snippet. if the `replace` is not null, state will be replace or if the nextState is not an object, just return nextState as is but what we are interested in is `Object.assign({}, state, newState)`.\r\n\r\nLet’s first log and see what is in state and nextState when you update your state. The example I picked is from [demo](https://github.com/pmndrs/zustand/tree/main/examples/demo) example in Zustand’s source code. I modified the code a bit so we can put some console statements and run these experiments.\r\n\r\n![](https://cdn-images-1.medium.com/max/1500/1*6_VK0nCD5AqYJQEQr5GtAg.png)\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*O8JfLEqI0ikMLlTTSfDnOA.png)\r\n\r\nIn this simple example, when the count is incremented, it comes down to updating the state object using Object.assign.\r\n\r\nNext time, you are trying to perform some updates on your JSON object, use the Object.assign.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76)\r\n    \r\n2. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Object/assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\r\n",
          "code": "var Component=(()=>{var F=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),b=(t,e)=>{for(var s in e)r(t,s,{get:e[s],enumerable:!0})},a=(t,e,s,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of m(e))!y.call(t,l)&&l!==s&&r(t,l,{get:()=>e[l],enumerable:!(c=p(e,l))||c.enumerable});return t};var j=(t,e,s)=>(s=t!=null?F(u(t)):{},a(e||!t||!t.__esModule?r(s,\"default\",{value:t,enumerable:!0}):s,t)),f=t=>a(r({},\"__esModule\",{value:!0}),t);var i=g((x,o)=>{o.exports=_jsx_runtime});var w={};b(w,{default:()=>d,frontmatter:()=>v});var n=j(i()),v={title:\"Object.assign() usage in Zustand source\\xA0code.\"};function h(t){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h3,{id:\"in-this-article-we-will-understand-how-objectassign-is-used-in-zustands-source-code\",children:[\"In this article, we will understand how \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\",children:\"Object.assign()\"}),\" is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\",children:\"Zustand\\u2019s source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*EyRIG5AtyItQSDOHES6hsA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The above code snippet is from \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\",children:\"vanilla.ts\"}),\", when you set a state, Object.assign is used to update your state object.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Let\\u2019s first understand the basics of Object.assign:\"}),`\n`,(0,n.jsx)(e.h3,{id:\"objectassign\",children:\"Object.assign()\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"Object.assign()\"}),\" static method copies all \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/propertyIsEnumerable\",children:\"enumerable\"}),\" \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn\",children:\"own properties\"}),\" from one or more \",(0,n.jsx)(e.em,{children:\"source objects\"}),\" to a \",(0,n.jsx)(e.em,{children:\"target object\"}),\". It returns the modified target object.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" target \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" a\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 2\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" source \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 4,\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" c\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 5\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" returnedTarget \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Object\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"assign\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"target\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" source\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"target\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: Object { a: 1, b: 4, c: 5 }\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"returnedTarget \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" target\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: true\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"b value in the target object is replaced with b value in source object.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Really simple right? let\\u2019s now run some experiments and understand how Zustand\\u2019s setState leverages Object.assign() method.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"objectassign-in-zustands-sourcecode\",children:\"Object.assign() in Zustand\\u2019s source\\xA0code:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" pulled from: https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"replace \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              replace \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"              typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"object\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              nextState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null)\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"                nextState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"                Object\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"assign\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({},\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"That\\u2019s nested ternary operator there in the above code snippet. if the \",(0,n.jsx)(e.code,{children:\"replace\"}),\" is not null, state will be replace or if the nextState is not an object, just return nextState as is but what we are interested in is \",(0,n.jsx)(e.code,{children:\"Object.assign({}, state, newState)\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s first log and see what is in state and nextState when you update your state. The example I picked is from \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/tree/main/examples/demo\",children:\"demo\"}),\" example in Zustand\\u2019s source code. I modified the code a bit so we can put some console statements and run these experiments.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1500/1*6_VK0nCD5AqYJQEQr5GtAg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*O8JfLEqI0ikMLlTTSfDnOA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"In this simple example, when the count is incremented, it comes down to updating the state object using Object.assign.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Next time, you are trying to perform some updates on your JSON object, use the Object.assign.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\",children:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(h,{...t})}):h(t)}return f(w);})();\n;return Component;"
        },
        "_id": "blog/objectassign-usage-in-Zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/objectassign-usage-in-Zustand.mdx",
          "sourceFileName": "objectassign-usage-in-Zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/objectassign-usage-in-Zustand"
        },
        "type": "Doc",
        "slug": "/blog/objectassign-usage-in-Zustand",
        "slugAsParams": "objectassign-usage-in-Zustand"
      },
      "documentHash": "1740489186374",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/ObjectpreventExtensions-in-JavaScript.mdx": {
      "document": {
        "title": "Object.preventExtensions in JavaScript.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze [Object.preventExtensions()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions) usage in React source code.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*DrTzV-A96VATYa8xcbQiKg.png)\r\n\r\n`Object.preventExtensions()` is called when the flag `hasBadMapPolyfill` is false and `typeof Object.preventExtensions` is a function.\r\n\r\nBut what does Object.preventExtensions() do?\r\n\r\n# **Object.preventExtensions**\r\n\r\nThe Object.preventExtensions() static method prevents new properties from ever being added to an object (i.e. prevents future extensions to the object). It also prevents the object’s prototype from being re-assigned.\r\n\r\n```plaintext\r\n// Example picked from MDN docs\r\nconst object1 = {};\r\nObject.preventExtensions(object1);\r\ntry {\r\n Object.defineProperty(object1, 'property1', {\r\n value: 42,\r\n });\r\n} catch (e) {\r\n console.log(e);\r\n // Expected output: \r\n // TypeError: Cannot define property property1, object is not extensible\r\n}\r\n```\r\n\r\nRead MDN docs about [Object.preventExtension()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions)\r\n\r\n# **How React uses Object.preventExtension?**\r\n\r\nThere must be a good reason why extensions are not allowed to be added. I followed along the function in which this is used, [FiberNode function](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L136)  \r\ncalls Object.preventExtension on `this`, but which function calls `FiberNode`?\r\n\r\n\\[createFiberImplClass\\]([https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L213-L226](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L213-L226))  \r\ncalls Object.preventExtension.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*tXzY7-RKWhTvHKDUI-nRNg.png)\r\n\r\nThis comment provides an explanation why an Object cannot be extended.\r\n\r\nAlthough, I do not fully understand these functions, but found out how Object.preventExtensions can be used in real-world open-source projects.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n* [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Object/preventExtensions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions)\r\n    \r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L207](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L207)\r\n    \r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L298](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L298)\r\n    \r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L136](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L136)\r\n    \r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L213-L226](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L213-L226)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascirpt?source=post_page-----6730a26b3961--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var a=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(c,e)=>()=>(e||c((e={exports:{}}).exports,e),e.exports),j=(c,e)=>{for(var t in e)a(c,t,{get:e[t],enumerable:!0})},o=(c,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!g.call(c,r)&&r!==t&&a(c,r,{get:()=>e[r],enumerable:!(i=b(e,r))||i.enumerable});return c};var v=(c,e,t)=>(t=c!=null?p(u(c)):{},o(e||!c||!c.__esModule?a(t,\"default\",{value:c,enumerable:!0}):t,c)),x=c=>o(a({},\"__esModule\",{value:!0}),c);var d=f((O,s)=>{s.exports=_jsx_runtime});var y={};j(y,{default:()=>l,frontmatter:()=>k});var n=v(d()),k={title:\"Object.preventExtensions in JavaScript.\"};function h(c){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...c.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions\",children:\"Object.preventExtensions()\"}),\" usage in React source code.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*DrTzV-A96VATYa8xcbQiKg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"Object.preventExtensions()\"}),\" is called when the flag \",(0,n.jsx)(e.code,{children:\"hasBadMapPolyfill\"}),\" is false and \",(0,n.jsx)(e.code,{children:\"typeof Object.preventExtensions\"}),\" is a function.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"But what does Object.preventExtensions() do?\"}),`\n`,(0,n.jsx)(e.h1,{id:\"objectpreventextensions\",children:(0,n.jsx)(e.strong,{children:\"Object.preventExtensions\"})}),`\n`,(0,n.jsx)(e.p,{children:\"The Object.preventExtensions() static method prevents new properties from ever being added to an object (i.e. prevents future extensions to the object). It also prevents the object\\u2019s prototype from being re-assigned.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Example picked from MDN docs\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const object1 = {};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"Object.preventExtensions(object1);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"try {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" Object.defineProperty(object1, 'property1', {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" value: 42,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"} catch (e) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" console.log(e);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // Expected output: \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // TypeError: Cannot define property property1, object is not extensible\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read MDN docs about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions\",children:\"Object.preventExtension()\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"how-react-uses-objectpreventextension\",children:(0,n.jsx)(e.strong,{children:\"How React uses Object.preventExtension?\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"There must be a good reason why extensions are not allowed to be added. I followed along the function in which this is used, \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L136\",children:\"FiberNode function\"}),(0,n.jsx)(e.br,{}),`\n`,\"calls Object.preventExtension on \",(0,n.jsx)(e.code,{children:\"this\"}),\", but which function calls \",(0,n.jsx)(e.code,{children:\"FiberNode\"}),\"?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"[createFiberImplClass](\",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L213-L226\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L213-L226\"}),\")\",(0,n.jsx)(e.br,{}),`\n`,\"calls Object.preventExtension.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*tXzY7-RKWhTvHKDUI-nRNg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"This comment provides an explanation why an Object cannot be extended.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Although, I do not fully understand these functions, but found out how Object.preventExtensions can be used in real-world open-source projects.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L207\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L207\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L298\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L298\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L136\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L136\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L213-L226\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react-reconciler/src/ReactFiber.js#L213-L226\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascirpt?source=post_page-----6730a26b3961--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function l(c={}){let{wrapper:e}=c.components||{};return e?(0,n.jsx)(e,{...c,children:(0,n.jsx)(h,{...c})}):h(c)}return x(y);})();\n;return Component;"
        },
        "_id": "blog/ObjectpreventExtensions-in-JavaScript.mdx",
        "_raw": {
          "sourceFilePath": "blog/ObjectpreventExtensions-in-JavaScript.mdx",
          "sourceFileName": "ObjectpreventExtensions-in-JavaScript.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/ObjectpreventExtensions-in-JavaScript"
        },
        "type": "Doc",
        "slug": "/blog/ObjectpreventExtensions-in-JavaScript",
        "slugAsParams": "ObjectpreventExtensions-in-JavaScript"
      },
      "documentHash": "1740489186212",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/organize-your-components.mdx": {
      "document": {
        "title": "Organize your components and layouts in your pages-based Next.js application this way.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nWhen building a Next.js application, organizing your components and layouts efficiently is crucial for maintaining a clean, scalable codebase. In this blog post, we will look at a practical example of structuring your components and layouts using a page-based approach, inspired by [Supabase’s codebase](https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx).\r\n\r\n# **Understanding the Page-Based Approach**\r\n\r\nNext.js uses a pages directory where each file corresponds to a route in your application. This structure is intuitive, but as your app grows, it is very important to organize components and layouts in a way that promotes reusability and clarity.\r\n\r\n## **Example: Sign-In Page Structure**\r\n\r\nLet’s look at real-world example by examining the structure of a `SignInPage` component in [Supabase source code](https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*CK6fCYcelMlQct4ofriCoQ.png)\r\n\r\n> *We are building a platform that teaches best practices, drawing inspiration from the open-source community.* [*Give us a star on Github*](https://github.com/thinkthroo/thinkthroo)*.*\r\n\r\n# **Components and Layouts: A Clear Separation**\r\n\r\nNotice how the components and layouts are organized:\r\n\r\n* `components/interfaces/SignIn/SignInForm`: This directory holds the `SignInForm` component, specifically related to the Sign-In interface. By organizing components within a relevant interface folder, you ensure that related components are grouped together, making them easier to find and manage.\r\n    \r\n* `components/layouts/SignInLayout/SignInLayout`: The `SignInLayout` component is separated into its own layout directory. This keeps the layout logic distinct from the individual components, allowing you to reuse the layout across different pages.\r\n    \r\n* `lib/constants`: The `IS_PLATFORM` constant is imported from a centralized location. This is a good practice for managing global constants that might be used across multiple components.\r\n    \r\n\r\n[![](https://miro.medium.com/v2/resize:fit:875/0*QlUA8-jvrCQnSBIJ.png)](https://app.thinkthroo.com/best-practices)\r\n\r\nIn fact, [Supabase component folder](https://github.com/supabase/supabase/tree/master/apps/studio/components) has a good explanation about this approach.\r\n\r\n[![](https://miro.medium.com/v2/resize:fit:875/1*KFOZ9Dwmp4G8vMvITn9C2Q.png)](https://github.com/supabase/supabase/tree/master/apps/studio/components)\r\n\r\n# **Adding the Layout**\r\n\r\nOne of the strengths of Next.js is its ability to define layouts on a [per-page basis](https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts#per-page-layouts). The `SignInPage` component is wrapped in a `SignInLayout` that defines the overall structure of the page:\r\n\r\n```plaintext\r\nSignInPage.getLayout = (page) => (\r\n  <SignInLayout\r\n    heading=\"Welcome back\"\r\n    subheading=\"Sign in to your account\"\r\n    logoLinkToMarketingSite={true}\r\n  >\r\n    {page}\r\n  </SignInLayout>\r\n)\r\n\r\nexport default SignInPage\r\n```\r\n\r\n# **Conclusion**\r\n\r\nOrganizing your components and layouts in a pages-based Next.js application this way promotes a clean, scalable structure. By grouping related components and separating layout logic, you create a maintainable codebase that’s easy to extend as your application grows.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **Further reading:**\r\n\r\n1. [https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx](https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx)\r\n    \r\n2. [https://github.com/supabase/supabase/tree/master/apps/studio/components/interfaces](https://github.com/supabase/supabase/tree/master/apps/studio/components/interfaces)\r\n    \r\n3. [https://github.com/supabase/supabase/tree/master/apps/studio/components/layouts](https://github.com/supabase/supabase/tree/master/apps/studio/components/layouts)\r\n    \r\n4. [https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts#per-page-layouts](https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts#per-page-layouts)\r\n",
          "code": "var Component=(()=>{var d=Object.create;var s=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var y=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var t in e)s(a,t,{get:e[t],enumerable:!0})},o=(a,e,t,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!b.call(a,i)&&i!==t&&s(a,i,{get:()=>e[i],enumerable:!(r=u(e,i))||r.enumerable});return a};var x=(a,e,t)=>(t=a!=null?d(m(a)):{},o(e||!a||!a.__esModule?s(t,\"default\",{value:a,enumerable:!0}):t,a)),w=a=>o(s({},\"__esModule\",{value:!0}),a);var p=y((j,c)=>{c.exports=_jsx_runtime});var k={};f(k,{default:()=>l,frontmatter:()=>S});var n=x(p()),S={title:\"Organize your components and layouts in your pages-based Next.js application this way.\"};function h(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"When building a Next.js application, organizing your components and layouts efficiently is crucial for maintaining a clean, scalable codebase. In this blog post, we will look at a practical example of structuring your components and layouts using a page-based approach, inspired by \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx\",children:\"Supabase\\u2019s codebase\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"understanding-the-page-based-approach\",children:(0,n.jsx)(e.strong,{children:\"Understanding the Page-Based Approach\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Next.js uses a pages directory where each file corresponds to a route in your application. This structure is intuitive, but as your app grows, it is very important to organize components and layouts in a way that promotes reusability and clarity.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"example-sign-in-page-structure\",children:(0,n.jsx)(e.strong,{children:\"Example: Sign-In Page Structure\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s look at real-world example by examining the structure of a \",(0,n.jsx)(e.code,{children:\"SignInPage\"}),\" component in \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx\",children:\"Supabase source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*CK6fCYcelMlQct4ofriCoQ.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"We are building a platform that teaches best practices, drawing inspiration from the open-source community.\"}),\" \",(0,n.jsx)(e.a,{href:\"https://github.com/thinkthroo/thinkthroo\",children:(0,n.jsx)(e.em,{children:\"Give us a star on Github\"})}),(0,n.jsx)(e.em,{children:\".\"})]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"components-and-layouts-a-clear-separation\",children:(0,n.jsx)(e.strong,{children:\"Components and Layouts: A Clear Separation\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Notice how the components and layouts are organized:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"components/interfaces/SignIn/SignInForm\"}),\": This directory holds the \",(0,n.jsx)(e.code,{children:\"SignInForm\"}),\" component, specifically related to the Sign-In interface. By organizing components within a relevant interface folder, you ensure that related components are grouped together, making them easier to find and manage.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"components/layouts/SignInLayout/SignInLayout\"}),\": The \",(0,n.jsx)(e.code,{children:\"SignInLayout\"}),\" component is separated into its own layout directory. This keeps the layout logic distinct from the individual components, allowing you to reuse the layout across different pages.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"lib/constants\"}),\": The \",(0,n.jsx)(e.code,{children:\"IS_PLATFORM\"}),\" constant is imported from a centralized location. This is a good practice for managing global constants that might be used across multiple components.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/0*QlUA8-jvrCQnSBIJ.png\",alt:\"\"})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"In fact, \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/studio/components\",children:\"Supabase component folder\"}),\" has a good explanation about this approach.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/studio/components\",children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*KFOZ9Dwmp4G8vMvITn9C2Q.png\",alt:\"\"})})}),`\n`,(0,n.jsx)(e.h1,{id:\"adding-the-layout\",children:(0,n.jsx)(e.strong,{children:\"Adding the Layout\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"One of the strengths of Next.js is its ability to define layouts on a \",(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts#per-page-layouts\",children:\"per-page basis\"}),\". The \",(0,n.jsx)(e.code,{children:\"SignInPage\"}),\" component is wrapped in a \",(0,n.jsx)(e.code,{children:\"SignInLayout\"}),\" that defines the overall structure of the page:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"SignInPage.getLayout = (page) => (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  <SignInLayout\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    heading=\"Welcome back\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    subheading=\"Sign in to your account\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    logoLinkToMarketingSite={true}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  >\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    {page}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  </SignInLayout>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\")\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export default SignInPage\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"conclusion\",children:(0,n.jsx)(e.strong,{children:\"Conclusion\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Organizing your components and layouts in a pages-based Next.js application this way promotes a clean, scalable structure. By grouping related components and separating layout logic, you create a maintainable codebase that\\u2019s easy to extend as your application grows.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"further-reading\",children:(0,n.jsx)(e.strong,{children:\"Further reading:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx\",children:\"https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/studio/components/interfaces\",children:\"https://github.com/supabase/supabase/tree/master/apps/studio/components/interfaces\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps/studio/components/layouts\",children:\"https://github.com/supabase/supabase/tree/master/apps/studio/components/layouts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts#per-page-layouts\",children:\"https://nextjs.org/docs/pages/building-your-application/routing/pages-and-layouts#per-page-layouts\"})}),`\n`]}),`\n`]})]})}function l(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return w(k);})();\n;return Component;"
        },
        "_id": "blog/organize-your-components.mdx",
        "_raw": {
          "sourceFilePath": "blog/organize-your-components.mdx",
          "sourceFileName": "organize-your-components.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/organize-your-components"
        },
        "type": "Doc",
        "slug": "/blog/organize-your-components",
        "slugAsParams": "organize-your-components"
      },
      "documentHash": "1740489186377",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/oxlint-json-in-Preact.mdx": {
      "document": {
        "title": "oxlint.json in Preact source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI found a file named [oxlint.json in Preact source code](https://github.com/preactjs/preact/blob/main/oxlint.json). I wanted to learn more about this. In this article, you will learn what this file is about.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*3BjclbA45jFAYA2w8JHWYA.png)\r\n\r\n### Oxlint is a linter\r\n\r\n[oxc-project](https://github.com/oxc-project) is an organization that provides a collection of JavaScript tools written in Rust. Oxlint is a linter.\r\n\r\nThe below information is picked from [oxc docs](https://oxc.rs/docs/guide/usage/linter).\r\n\r\n> Oxlint is designed to catch erroneous or useless code without requiring any configurations by default.\r\n\r\n> Note: \r\n\r\n> At the current stage, oxlint is not intended to fully replace ESLint; it serves as an enhancement when ESLint’s slowness becomes a bottleneck in your workflow.\r\n\r\n> We recommend running oxlint before ESLint in your lint-staged or CI setup for a quicker feedback loop, considering it only takes a few seconds to run on large codebases.\r\n\r\n#### Features\r\n\r\n* 50–100 times faster than ESLint, and scales with the number of CPU cores ([benchmark](https://github.com/oxc-project/bench-javascript-linter)).\r\n    \r\n* Over 480 rules with a growing list from `eslint`, `typescript`, `eslint-plugin-react`, `eslint-plugin-jest`, `eslint-plugin-unicorn`, `eslint-plugin-jsx-a11y` and [many more](https://github.com/oxc-project/oxc/issues/481).\r\n    \r\n* Supports\r\n    \r\n\r\n1. [.eslintignore](https://eslint.org/docs/latest/use/configure/ignore#the-eslintignore-file).\r\n    \r\n2. [ESLint comment disabling](https://eslint.org/docs/latest/use/configure/rules#disabling-rules).\r\n    \r\n3. [Partial ESLint v8 Configuration](https://oxc.rs/docs/guide/usage/linter/config) in `json` format\r\n    \r\n\r\nRead more about [Oxlint](https://oxc.rs/docs/guide/usage/linter).\r\n\r\n### Oxlint script in package.json\r\n\r\nIn the Preact’s package.json, you will find the [below script at line 144](https://github.com/preactjs/preact/blob/main/package.json#L144).\r\n\r\n```plaintext\r\n \"oxlint\": \"oxlint -c oxlint.json src test/browser test/node test/shared debug compat hooks test-utils\",\r\n```\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/preactjs/preact/blob/main/oxlint.json](https://github.com/preactjs/preact/blob/main/oxlint.json)\r\n    \r\n2. [https://github.com/preactjs/preact/blob/main/package.json#L144](https://github.com/preactjs/preact/blob/main/package.json#L144)\r\n    \r\n3. [https://oxc.rs/docs/guide/usage/linter](https://oxc.rs/docs/guide/usage/linter)\r\n    \r\n4. [https://oxc.rs/](https://oxc.rs/)\r\n    \r\n5. [https://oxc.rs/docs/guide/usage/linter/config.html](https://oxc.rs/docs/guide/usage/linter/config.html)\r\n    \r\n6. [https://github.com/oxc-project](https://github.com/oxc-project)",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),x=(t,e)=>{for(var i in e)c(t,i,{get:e[i],enumerable:!0})},a=(t,e,i,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!b.call(t,r)&&r!==i&&c(t,r,{get:()=>e[r],enumerable:!(o=u(e,r))||o.enumerable});return t};var j=(t,e,i)=>(i=t!=null?p(g(t)):{},a(e||!t||!t.__esModule?c(i,\"default\",{value:t,enumerable:!0}):i,t)),k=t=>a(c({},\"__esModule\",{value:!0}),t);var l=f((v,h)=>{h.exports=_jsx_runtime});var y={};x(y,{default:()=>d,frontmatter:()=>w});var n=j(l()),w={title:\"oxlint.json in Preact source\\xA0code.\"};function s(t){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I found a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/oxlint.json\",children:\"oxlint.json in Preact source code\"}),\". I wanted to learn more about this. In this article, you will learn what this file is about.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*3BjclbA45jFAYA2w8JHWYA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"oxlint-is-alinter\",children:\"Oxlint is a\\xA0linter\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/oxc-project\",children:\"oxc-project\"}),\" is an organization that provides a collection of JavaScript tools written in Rust. Oxlint is a linter.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below information is picked from \",(0,n.jsx)(e.a,{href:\"https://oxc.rs/docs/guide/usage/linter\",children:\"oxc docs\"}),\".\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Oxlint is designed to catch erroneous or useless code without requiring any configurations by default.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Note:\\xA0\"}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"At the current stage, oxlint is not intended to fully replace ESLint; it serves as an enhancement when ESLint\\u2019s slowness becomes a bottleneck in your workflow.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"We recommend running oxlint before ESLint in your lint-staged or CI setup for a quicker feedback loop, considering it only takes a few seconds to run on large codebases.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h4,{id:\"features\",children:\"Features\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"50\\u2013100 times faster than ESLint, and scales with the number of CPU cores (\",(0,n.jsx)(e.a,{href:\"https://github.com/oxc-project/bench-javascript-linter\",children:\"benchmark\"}),\").\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Over 480 rules with a growing list from \",(0,n.jsx)(e.code,{children:\"eslint\"}),\", \",(0,n.jsx)(e.code,{children:\"typescript\"}),\", \",(0,n.jsx)(e.code,{children:\"eslint-plugin-react\"}),\", \",(0,n.jsx)(e.code,{children:\"eslint-plugin-jest\"}),\", \",(0,n.jsx)(e.code,{children:\"eslint-plugin-unicorn\"}),\", \",(0,n.jsx)(e.code,{children:\"eslint-plugin-jsx-a11y\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://github.com/oxc-project/oxc/issues/481\",children:\"many more\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Supports\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://eslint.org/docs/latest/use/configure/ignore#the-eslintignore-file\",children:\".eslintignore\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://eslint.org/docs/latest/use/configure/rules#disabling-rules\",children:\"ESLint comment disabling\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://oxc.rs/docs/guide/usage/linter/config\",children:\"Partial ESLint v8 Configuration\"}),\" in \",(0,n.jsx)(e.code,{children:\"json\"}),\" format\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://oxc.rs/docs/guide/usage/linter\",children:\"Oxlint\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"oxlint-script-in-packagejson\",children:\"Oxlint script in package.json\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the Preact\\u2019s package.json, you will find the \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/package.json#L144\",children:\"below script at line 144\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"oxlint\": \"oxlint -c oxlint.json src test/browser test/node test/shared debug compat hooks test-utils\",'})})})})}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/oxlint.json\",children:\"https://github.com/preactjs/preact/blob/main/oxlint.json\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/package.json#L144\",children:\"https://github.com/preactjs/preact/blob/main/package.json#L144\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://oxc.rs/docs/guide/usage/linter\",children:\"https://oxc.rs/docs/guide/usage/linter\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://oxc.rs/\",children:\"https://oxc.rs/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://oxc.rs/docs/guide/usage/linter/config.html\",children:\"https://oxc.rs/docs/guide/usage/linter/config.html\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/oxc-project\",children:\"https://github.com/oxc-project\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(s,{...t})}):s(t)}return k(y);})();\n;return Component;"
        },
        "_id": "blog/oxlint-json-in-Preact.mdx",
        "_raw": {
          "sourceFilePath": "blog/oxlint-json-in-Preact.mdx",
          "sourceFileName": "oxlint-json-in-Preact.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/oxlint-json-in-Preact"
        },
        "type": "Doc",
        "slug": "/blog/oxlint-json-in-Preact",
        "slugAsParams": "oxlint-json-in-Preact"
      },
      "documentHash": "1741000041140",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/part-1-npm-package-install.mdx": {
      "document": {
        "title": "Part 1-How to install npm packages programmatically?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we review how [Father, an NPM package development tool](https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17) is installs npm dependencies programmatically.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*rLf-G1IlanRswz_VhplkeQ.png)\r\n\r\n# **How did I find this code snippet?**\r\n\r\nI wrote an article about Father and in its README.md, I found that it supports micro generators that adds commonly used engineering capabilities to projects, such as setting up Jest for testing. This is similar to the [CLI tool I am building](https://github.com/ramu-narasinga/thinkthroo/tree/main/packages/thinkthroo), to generate code for authentication or S3 upload in Next.js.\r\n\r\nI started searching for the micro generators code and found a folder named [commands/generators](https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*rLf-G1IlanRswz_VhplkeQ.png)\r\n\r\n# **Common pattern in the generators**\r\n\r\nYou will see that there is a common pattern in the way these generators are defined.\r\n\r\n## [**generators/eslint.ts**](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/eslint.ts)\r\n\r\n[eslint.ts](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/eslint.ts) has the below code\r\n\r\n```javascript\r\nimport { GeneratorType } from '@umijs/core';\r\nimport { logger } from '../../utils';\r\nimport fg from 'fast-glob';\r\nimport { writeFileSync } from 'fs';\r\nimport { join } from 'path';\r\nimport { IApi } from '../../types';\r\nimport { GeneratorHelper } from './utils';\r\n\r\nexport default (api: IApi) => {\r\n  api.describe({\r\n    key: 'generator:eslint',\r\n  });\r\n\r\n  api.registerGenerator({\r\n    key: 'eslint',\r\n    name: 'Enable ESLint',\r\n    description: 'Setup ESLint Configuration',\r\n    type: GeneratorType.enable,\r\n    checkEnable: () => {\r\n      ...\r\n    },\r\n    disabledDescription:\r\n      'ESLint has already enabled. You can remove .eslintrc, then run this again to re-setup.',\r\n    fn: async () => {\r\n      ....\r\n    },\r\n  });\r\n};\r\n```\r\n\r\n## [**generators/jest.ts**](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42)\r\n\r\n[jest.ts](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42) has the below definition:\r\n\r\n```javascript\r\nimport { GeneratorType } from '@umijs/core';\r\nimport { logger } from '../../utils';\r\nimport { existsSync, writeFileSync } from 'fs';\r\nimport { join } from 'path';\r\nimport { IApi } from '../../types';\r\nimport { GeneratorHelper, promptsExitWhenCancel } from './utils';\r\n\r\nexport default (api: IApi) => {\r\n  api.describe({\r\n    key: 'generator:jest',\r\n  });\r\n\r\n  api.registerGenerator({\r\n    key: 'jest',\r\n    name: 'Enable Jest',\r\n    description: 'Setup Jest Configuration',\r\n    type: GeneratorType.enable,\r\n    checkEnable: () => {\r\n      ...\r\n    },\r\n    disabledDescription:\r\n      'Jest has already enabled. You can remove jest.config.{ts,js}, then run this again to re-setup.',\r\n    fn: async () => {\r\n      ...\r\n    },\r\n  });\r\n};\r\n```\r\n\r\nDo you see the common pattern in these two definitions above? there is\r\n\r\n* api.describe\r\n    \r\n\r\nThis accepts an object that has the below properties:\r\n\r\n1. key\r\n    \r\n\r\n* api.registerGenerator\r\n    \r\n\r\nThis accepts an object that has the below properties:\r\n\r\n1. key\r\n    \r\n2. name\r\n    \r\n3. description\r\n    \r\n4. type\r\n    \r\n5. checkEnable\r\n    \r\n6. disabledDescription\r\n    \r\n7. fn\r\n    \r\n\r\n# **h.installDeps()**\r\n\r\n[At line 97 in generators/jest.ts](https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators), you find this below code snippet\r\n\r\n```javascript\r\nh.installDeps();\r\n```\r\n\r\nWhat is h here? [At line 27](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42), you will see h is initialized as shown below:\r\n\r\n```javascript\r\nconst h = new GeneratorHelper(api);\r\n```\r\n\r\nTo see how the installDeps is defined, we need to review [GeneratorHelper](https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L6)\r\n\r\n# **GeneratorHelper**\r\n\r\n[GeneratorHelper](https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L19) has the below shown functions at the time of writing this article\r\n\r\n```javascript\r\nimport { getNpmClient, installWithNpmClient, prompts } from '@umijs/utils';\r\nimport { writeFileSync } from 'fs';\r\nimport { IApi } from '../../types';\r\nimport { logger } from '../../utils';\r\n\r\nexport class GeneratorHelper {\r\n  constructor(readonly api: IApi) {}\r\n\r\n  addDevDeps(deps: Record<string, string>) {\r\n    ...\r\n  }\r\n\r\n  addScript(name: string, cmd: string) {\r\n    ...\r\n  }\r\n\r\n  private addScriptToPkg(name: string, cmd: string) {\r\n    ...\r\n  }\r\n\r\n  installDeps() {\r\n    ...  \r\n  }\r\n}\r\n```\r\n\r\n## **installDeps**\r\n\r\n[installDeps](https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L41C3-L48C4) is defined as shown below in GeneratorHelper.\r\n\r\n```javascript\r\ninstallDeps() {\r\n    const { api } = this;\r\n    const npmClient = getNpmClient({ cwd: api.cwd });\r\n    installWithNpmClient({\r\n      npmClient,\r\n    });\r\n    logger.quietExpect.info(`Install dependencies with ${npmClient}`);\r\n  }\r\n```\r\n\r\nThere are two functions that we need to learn about to understand how Father installs npm deps programmatically.\r\n\r\n* getNpmClient\r\n    \r\n* installWithNpmClient\r\n    \r\n\r\nThis will be discussed in part 2, i.e., in the next article.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [src/commands/generators/jest.ts#L97](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L97)\r\n    \r\n2. [src/commands/generators/utils.ts#L1](https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L1)\r\n    \r\n3. [/search?q=repo%3Aumijs%2Ffather%20%40umijs%2Futils&type=code](https://github.com/search?q=repo%3Aumijs%2Ffather+%40umijs%2Futils&type=code)\r\n    \r\n4. [https://github.com/orgs/umijs/repositories?q=utils](https://github.com/orgs/umijs/repositories?q=utils)\r\n    \r\n5. [https://www.npmjs.com/package/@umijs/utils](https://www.npmjs.com/package/@umijs/utils)\r\n    \r\n6. [https://github.com/umijs/umi/blob/master/package.json#L82](https://github.com/umijs/umi/blob/master/package.json#L82)\r\n    \r\n7. [https://github.com/umijs/umi/tree/master/packages/utils](https://github.com/umijs/umi/tree/master/packages/utils)\r\n    \r\n8. [/packages/utils/src/npmClient.ts#L13](https://github.com/umijs/umi/blob/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/src/npmClient.ts#L13)\r\n    \r\n9. [/packages/utils/compiled](https://github.com/umijs/umi/tree/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/compiled)",
          "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},o=(n,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!g.call(n,r)&&r!==s&&c(n,r,{get:()=>e[r],enumerable:!(a=p(e,r))||a.enumerable});return n};var b=(n,e,s)=>(s=n!=null?d(m(n)):{},o(e||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),N=n=>o(c({},\"__esModule\",{value:!0}),n);var F=u((v,i)=>{i.exports=_jsx_runtime});var w={};f(w,{default:()=>h,frontmatter:()=>j});var l=b(F()),j={title:\"Part 1-How to install npm packages programmatically?\"};function t(n){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we review how \",(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17\",children:\"Father, an NPM package development tool\"}),\" is installs npm dependencies programmatically.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*rLf-G1IlanRswz_VhplkeQ.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h1,{id:\"how-did-i-find-this-code-snippet\",children:(0,l.jsx)(e.strong,{children:\"How did I find this code snippet?\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"I wrote an article about Father and in its README.md, I found that it supports micro generators that adds commonly used engineering capabilities to projects, such as setting up Jest for testing. This is similar to the \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga/thinkthroo/tree/main/packages/thinkthroo\",children:\"CLI tool I am building\"}),\", to generate code for authentication or S3 upload in Next.js.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"I started searching for the micro generators code and found a folder named \",(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators\",children:\"commands/generators\"}),\".\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*rLf-G1IlanRswz_VhplkeQ.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h1,{id:\"common-pattern-in-the-generators\",children:(0,l.jsx)(e.strong,{children:\"Common pattern in the generators\"})}),`\n`,(0,l.jsx)(e.p,{children:\"You will see that there is a common pattern in the way these generators are defined.\"}),`\n`,(0,l.jsx)(e.h2,{id:\"generatorseslintts\",children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/eslint.ts\",children:(0,l.jsx)(e.strong,{children:\"generators/eslint.ts\"})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/eslint.ts\",children:\"eslint.ts\"}),\" has the below code\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorType \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@umijs/core'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" logger \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fg \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'fast-glob'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" writeFileSync \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'fs'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" join \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'path'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" IApi \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../types'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorHelper \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" IApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"describe\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'generator:eslint'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"registerGenerator\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'eslint'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'Enable ESLint'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    description\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'Setup ESLint Configuration'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorType\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"enable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    checkEnable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    disabledDescription\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      'ESLint has already enabled. You can remove .eslintrc, then run this again to re-setup.'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    fn\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ....\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"generatorsjestts\",children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42\",children:(0,l.jsx)(e.strong,{children:\"generators/jest.ts\"})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42\",children:\"jest.ts\"}),\" has the below definition:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorType \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@umijs/core'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" logger \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" existsSync\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" writeFileSync \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'fs'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" join \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'path'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" IApi \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../types'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorHelper\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" promptsExitWhenCancel \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" IApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"describe\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'generator:jest'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"registerGenerator\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'jest'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'Enable Jest'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    description\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'Setup Jest Configuration'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorType\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"enable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    checkEnable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    disabledDescription\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      'Jest has already enabled. You can remove jest.config.{ts,js}, then run this again to re-setup.'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    fn\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Do you see the common pattern in these two definitions above? there is\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"api.describe\"}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"This accepts an object that has the below properties:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsx)(e.li,{children:\"key\"}),`\n`]}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"api.registerGenerator\"}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"This accepts an object that has the below properties:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"key\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"name\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"description\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"type\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"checkEnable\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"disabledDescription\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"fn\"}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(e.h1,{id:\"hinstalldeps\",children:(0,l.jsx)(e.strong,{children:\"h.installDeps()\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators\",children:\"At line 97 in generators/jest.ts\"}),\", you find this below code snippet\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"h\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"installDeps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"What is h here? \",(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L27C7-L27C42\",children:\"At line 27\"}),\", you will see h is initialized as shown below:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" h \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GeneratorHelper\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"To see how the installDeps is defined, we need to review \",(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L6\",children:\"GeneratorHelper\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"generatorhelper\",children:(0,l.jsx)(e.strong,{children:\"GeneratorHelper\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L19\",children:\"GeneratorHelper\"}),\" has the below shown functions at the time of writing this article\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getNpmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" installWithNpmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" prompts \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@umijs/utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" writeFileSync \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'fs'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" IApi \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../types'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" logger \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../utils'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" class\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" GeneratorHelper\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  constructor(readonly\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" IApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {}\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  addDevDeps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"deps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Record\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">)\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  addScript\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cmd\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  private\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" addScriptToPkg\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cmd\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  installDeps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  \"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"installdeps\",children:(0,l.jsx)(e.strong,{children:\"installDeps\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L41C3-L48C4\",children:\"installDeps\"}),\" is defined as shown below in GeneratorHelper.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"installDeps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" npmClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getNpmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cwd\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cwd \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    installWithNpmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      npmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    });\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    logger\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"quietExpect\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"info\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`Install dependencies with ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"npmClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"There are two functions that we need to learn about to understand how Father installs npm deps programmatically.\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"getNpmClient\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"installWithNpmClient\"}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"This will be discussed in part 2, i.e., in the next article.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"references\",children:(0,l.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L97\",children:\"src/commands/generators/jest.ts#L97\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L1\",children:\"src/commands/generators/utils.ts#L1\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Aumijs%2Ffather+%40umijs%2Futils&type=code\",children:\"/search?q=repo%3Aumijs%2Ffather%20%40umijs%2Futils&type=code\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/orgs/umijs/repositories?q=utils\",children:\"https://github.com/orgs/umijs/repositories?q=utils\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://www.npmjs.com/package/@umijs/utils\",children:\"https://www.npmjs.com/package/@umijs/utils\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/umi/blob/master/package.json#L82\",children:\"https://github.com/umijs/umi/blob/master/package.json#L82\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/umi/tree/master/packages/utils\",children:\"https://github.com/umijs/umi/tree/master/packages/utils\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/umi/blob/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/src/npmClient.ts#L13\",children:\"/packages/utils/src/npmClient.ts#L13\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/umijs/umi/tree/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/compiled\",children:\"/packages/utils/compiled\"})}),`\n`]}),`\n`]})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return N(w);})();\n;return Component;"
        },
        "_id": "blog/part-1-npm-package-install.mdx",
        "_raw": {
          "sourceFilePath": "blog/part-1-npm-package-install.mdx",
          "sourceFileName": "part-1-npm-package-install.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/part-1-npm-package-install"
        },
        "type": "Doc",
        "slug": "/blog/part-1-npm-package-install",
        "slugAsParams": "part-1-npm-package-install"
      },
      "documentHash": "1740489186380",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/part-2-npm-package-install.mdx": {
      "document": {
        "title": "Part 2-How to install npm packages programmatically?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "In the [previous article](https://medium.com/@thinkthroo/part-1-how-to-install-npm-packages-programmatically-b35f1a2c0142), we reviewed some code in [Father, an NPM package development tool](https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17), related to installing npm packages programmatically and this led us to discover two functions in the [installDeps](https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L41C3-L48C4).\r\n\r\n```javascript\r\ninstallDeps() {\r\n  const { api } = this;\r\n  const npmClient = getNpmClient({ cwd: api.cwd });\r\n  installWithNpmClient({\r\n    npmClient,\r\n  });\r\n  logger.quietExpect.info(`Install dependencies with ${npmClient}`);\r\n}\r\n```\r\n\r\nWe will review the two functions listed below:\r\n\r\n* getNpmClient\r\n    \r\n* installWithNpmClient\r\n    \r\n\r\n# **getNpmClient**\r\n\r\ngetNpmClient is imported as shown below\r\n\r\n```javascript\r\nimport { getNpmClient, installWithNpmClient, prompts } from '@umijs/utils';\r\n```\r\n\r\nI did search for [utils repo in the umijs organisation](https://github.com/orgs/umijs/repositories?q=utils).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*uLMDR1SSkl62dUgSxJjChg.png)\r\n\r\nSince Father codebase is a not a monorepo, @umijs/utils has to be an [npm package.](https://www.npmjs.com/package/@umijs/utils) You will find this [utils package in umi repository](https://github.com/umijs/umi/tree/master/packages/utils).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*xn7AfjyAJkgn7KkRNBWmVQ.png)\r\n\r\nFinally, getNpmClient code can be found in [utils/npmClient.ts](https://github.com/umijs/umi/blob/master/packages/utils/src/npmClient.ts#L13)\r\n\r\n```javascript\r\nexport const getNpmClient = (opts: { cwd: string }): NpmClient => {\r\n  const tnpmRegistries = ['.alibaba-inc.', '.antgroup-inc.'];\r\n  const tcnpmLockPath = join(opts.cwd, 'node_modules', '.package-lock.json');\r\n  const chokidarPkg = require('chokidar/package.json');\r\n\r\n  // detect tnpm/cnpm client\r\n  // all situations:\r\n  //   - npminstall mode + native fs => generate _resolved field in package.json\r\n  //   - npminstall mode + rapid fs => generate .package-lock.json in node_modules\r\n  //   - npm mode + native fs => generate .package-lock.json in node_modules\r\n  //   - npm mode + rapid fs => generate .package-lock.json in node_modules\r\n  // all conditions:\r\n  //   - has _resolved field or .package-lock.json means tnpm/cnpm\r\n  //   - _resolved field or .package-lock.json contains tnpm registry means tnpm\r\n  if (chokidarPkg._resolved) {\r\n    return tnpmRegistries.some((r) => chokidarPkg._resolved.includes(r))\r\n      ? 'tnpm'\r\n      : 'cnpm';\r\n  } else if (existsSync(tcnpmLockPath)) {\r\n    const tcnpmLock = readFileSync(tcnpmLockPath, 'utf-8');\r\n\r\n    return tnpmRegistries.some((r) => tcnpmLock.includes(r)) ? 'tnpm' : 'cnpm';\r\n  }\r\n\r\n  const chokidarPath = require.resolve('chokidar');\r\n  if (\r\n    chokidarPath.includes('.pnpm') ||\r\n    existsSync(join(opts.cwd, 'node_modules', '.pnpm'))\r\n  ) {\r\n    return 'pnpm';\r\n  }\r\n  if (\r\n    existsSync(join(opts.cwd, 'yarn.lock')) ||\r\n    existsSync(join(opts.cwd, 'node_modules', '.yarn-integrity'))\r\n  ) {\r\n    return 'yarn';\r\n  }\r\n  return 'npm';\r\n};\r\n```\r\n\r\n## **Detect tnpm/cnpm client**\r\n\r\n> *has \\_resolved field or .package-loc.json means tnpm/cnpm*\r\n\r\nThis comment explains what this below if block is about\r\n\r\n```javascript\r\nif (chokidarPkg._resolved) {\r\n    return tnpmRegistries.some((r) => chokidarPkg._resolved.includes(r))\r\n      ? 'tnpm'\r\n      : 'cnpm';\r\n}\r\n```\r\n\r\n> *\\- \\_resolved field or .package-lock.json contains tnpm registry means tnpm*\r\n\r\nThis comment above explains the else if block below\r\n\r\n```javascript\r\nelse if (existsSync(tcnpmLockPath)) {\r\n  const tcnpmLock = readFileSync(tcnpmLockPath, 'utf-8');\r\n\r\n  return tnpmRegistries.some((r) => tcnpmLock.includes(r)) ? 'tnpm' : 'cnpm';\r\n}\r\n```\r\n\r\nThis is the first time I am learning about tnpm or cnpm. I will write an article about these.\r\n\r\n## **Detect pnpm client**\r\n\r\n```javascript\r\nconst chokidarPath = require.resolve('chokidar');\r\n  if (\r\n    chokidarPath.includes('.pnpm') ||\r\n    existsSync(join(opts.cwd, 'node_modules', '.pnpm'))\r\n  ) {\r\n    return 'pnpm';\r\n  }\r\n```\r\n\r\n## **Detect yarn client**\r\n\r\n```javascript\r\nif (\r\n    existsSync(join(opts.cwd, 'yarn.lock')) ||\r\n    existsSync(join(opts.cwd, 'node_modules', '.yarn-integrity'))\r\n  ) {\r\n    return 'yarn';\r\n  }\r\n```\r\n\r\nif none of the above conditions are met, this function defaults to “npm”.\r\n\r\n# **installWithNpmClient**\r\n\r\nIn the same [packages/utils/npmClient.ts fiile](https://github.com/umijs/umi/blob/master/packages/utils/src/npmClient.ts#L53), you will find the installWithNpmClient.\r\n\r\n```javascript\r\nexport const installWithNpmClient = ({\r\n  npmClient,\r\n  cwd,\r\n}: {\r\n  npmClient: NpmClient;\r\n  cwd?: string;\r\n}): void => {\r\n  const { sync } = require('../compiled/cross-spawn');\r\n  // pnpm install will not install devDependencies when NODE_ENV === 'production'\r\n  // we should remove NODE_ENV to make sure devDependencies can be installed\r\n  const { NODE_ENV: _, ...env } = process.env;\r\n  const npm = sync(npmClient, [npmClient === 'yarn' ? '' : 'install'], {\r\n    stdio: 'inherit',\r\n    cwd,\r\n    env,\r\n  });\r\n  if (npm.error) {\r\n    throw npm.error;\r\n  }\r\n};\r\n```\r\n\r\nWe need to learn more about sync function. sync is required from [compiled/cross-spawn](https://github.com/umijs/umi/blob/master/packages/utils/compiled/cross-spawn/package.json). Uncompiled cross-spawn can be found at [node-cross-spawn](https://github.com/moxystudio/node-cross-spawn/blob/master/index.js). How do I know? both of these have the common name mentioned — André Cruz in [utils/compiled/cross-spawn/package.json](https://github.com/umijs/umi/blob/master/packages/utils/compiled/cross-spawn/package.json) and in [node-cross-spawn package.json](https://github.com/moxystudio/node-cross-spawn/blob/master/package.json#L15).\r\n\r\nSeeing this “compiled” rings a bell for me. I have seen similar [compiled folder in Next.js source code](https://github.com/vercel/next.js/tree/canary/packages/next/src/compiled).\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [src/commands/generators/jest.ts#L97](https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L97)\r\n    \r\n2. [src/commands/generators/utils.ts#L1](https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L1)\r\n    \r\n3. [/search?q=repo%3Aumijs%2Ffather%20%40umijs%2Futils&type=code](https://github.com/search?q=repo%3Aumijs%2Ffather+%40umijs%2Futils&type=code)\r\n    \r\n4. [https://github.com/orgs/umijs/repositories?q=utils](https://github.com/orgs/umijs/repositories?q=utils)\r\n    \r\n5. [https://www.npmjs.com/package/@umijs/utils](https://www.npmjs.com/package/@umijs/utils)\r\n    \r\n6. [https://github.com/umijs/umi/blob/master/package.json#L82](https://github.com/umijs/umi/blob/master/package.json#L82)\r\n    \r\n7. [https://github.com/umijs/umi/tree/master/packages/utils](https://github.com/umijs/umi/tree/master/packages/utils)\r\n    \r\n8. [/packages/utils/src/npmClient.ts#L13](https://github.com/umijs/umi/blob/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/src/npmClient.ts#L13)\r\n    \r\n9. [/packages/utils/compiled](https://github.com/umijs/umi/tree/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/compiled)",
          "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,l)=>()=>(l||n((l={exports:{}}).exports,l),l.exports),f=(n,l)=>{for(var s in l)r(n,s,{get:l[s],enumerable:!0})},o=(n,l,s,F)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let c of y(l))!u.call(n,c)&&c!==s&&r(n,c,{get:()=>l[c],enumerable:!(F=p(l,c))||F.enumerable});return n};var N=(n,l,s)=>(s=n!=null?h(m(n)):{},o(l||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),b=n=>o(r({},\"__esModule\",{value:!0}),n);var i=g((v,a)=>{a.exports=_jsx_runtime});var j={};f(j,{default:()=>d,frontmatter:()=>k});var e=N(i()),k={title:\"Part 2-How to install npm packages programmatically?\"};function t(n){let l={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(l.p,{children:[\"In the \",(0,e.jsx)(l.a,{href:\"https://medium.com/@thinkthroo/part-1-how-to-install-npm-packages-programmatically-b35f1a2c0142\",children:\"previous article\"}),\", we reviewed some code in \",(0,e.jsx)(l.a,{href:\"https://github.com/umijs/father/tree/a95a4ead36ecb4788728348fcb45a83507a0fb17\",children:\"Father, an NPM package development tool\"}),\", related to installing npm packages programmatically and this led us to discover two functions in the \",(0,e.jsx)(l.a,{href:\"https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L41C3-L48C4\",children:\"installDeps\"}),\".\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"installDeps\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" api \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" this\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" npmClient \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" getNpmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" api\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cwd \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"});\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  installWithNpmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    npmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  logger\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"quietExpect\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"info\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"`Install dependencies with ${\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"npmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"We will review the two functions listed below:\"}),`\n`,(0,e.jsxs)(l.ul,{children:[`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:\"getNpmClient\"}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:\"installWithNpmClient\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(l.h1,{id:\"getnpmclient\",children:(0,e.jsx)(l.strong,{children:\"getNpmClient\"})}),`\n`,(0,e.jsx)(l.p,{children:\"getNpmClient is imported as shown below\"}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,e.jsx)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" getNpmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" installWithNpmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" prompts \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '@umijs/utils'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"I did search for \",(0,e.jsx)(l.a,{href:\"https://github.com/orgs/umijs/repositories?q=utils\",children:\"utils repo in the umijs organisation\"}),\".\"]}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*uLMDR1SSkl62dUgSxJjChg.png\",alt:\"\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"Since Father codebase is a not a monorepo, @umijs/utils has to be an \",(0,e.jsx)(l.a,{href:\"https://www.npmjs.com/package/@umijs/utils\",children:\"npm package.\"}),\" You will find this \",(0,e.jsx)(l.a,{href:\"https://github.com/umijs/umi/tree/master/packages/utils\",children:\"utils package in umi repository\"}),\".\"]}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*xn7AfjyAJkgn7KkRNBWmVQ.png\",alt:\"\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"Finally, getNpmClient code can be found in \",(0,e.jsx)(l.a,{href:\"https://github.com/umijs/umi/blob/master/packages/utils/src/npmClient.ts#L13\",children:\"utils/npmClient.ts\"})]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" getNpmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"opts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" string \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}):\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NpmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" tnpmRegistries \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'.alibaba-inc.'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '.antgroup-inc.'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"];\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" tcnpmLockPath \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" join\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"opts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'node_modules'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '.package-lock.json'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" chokidarPkg \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" require\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'chokidar/package.json'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" detect tnpm/cnpm client\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" all situations:\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\"   - npminstall mode + native fs => generate _resolved field in package.json\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\"   - npminstall mode + rapid fs => generate .package-lock.json in node_modules\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\"   - npm mode + native fs => generate .package-lock.json in node_modules\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\"   - npm mode + rapid fs => generate .package-lock.json in node_modules\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" all conditions:\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\"   - has _resolved field or .package-lock.json means tnpm/cnpm\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\"   - _resolved field or .package-lock.json contains tnpm registry means tnpm\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"chokidarPkg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"_resolved\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" tnpmRegistries\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"some\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" chokidarPkg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"_resolved\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      ?\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'tnpm'\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      :\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'cnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"existsSync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"tcnpmLockPath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" tcnpmLock \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" readFileSync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"tcnpmLockPath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'utf-8'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" tnpmRegistries\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"some\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" tcnpmLock\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'tnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'cnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" chokidarPath \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" require\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"resolve\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'chokidar'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    chokidarPath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'.pnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ||\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    existsSync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"opts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'node_modules'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '.pnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  )\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'pnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    existsSync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"opts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'yarn.lock'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ||\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    existsSync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"opts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'node_modules'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '.yarn-integrity'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  )\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'yarn'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'npm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"detect-tnpmcnpm-client\",children:(0,e.jsx)(l.strong,{children:\"Detect tnpm/cnpm client\"})}),`\n`,(0,e.jsxs)(l.blockquote,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.em,{children:\"has _resolved field or .package-loc.json means tnpm/cnpm\"})}),`\n`]}),`\n`,(0,e.jsx)(l.p,{children:\"This comment explains what this below if block is about\"}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"chokidarPkg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"_resolved\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" tnpmRegistries\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"some\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" chokidarPkg\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"_resolved\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      ?\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'tnpm'\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      :\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'cnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsxs)(l.blockquote,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.em,{children:\"- _resolved field or .package-lock.json contains tnpm registry means tnpm\"})}),`\n`]}),`\n`,(0,e.jsx)(l.p,{children:\"This comment above explains the else if block below\"}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"else\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"existsSync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"tcnpmLockPath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" tcnpmLock \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" readFileSync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"tcnpmLockPath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'utf-8'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" tnpmRegistries\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"some\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" tcnpmLock\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'tnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'cnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"This is the first time I am learning about tnpm or cnpm. I will write an article about these.\"}),`\n`,(0,e.jsx)(l.h2,{id:\"detect-pnpm-client\",children:(0,e.jsx)(l.strong,{children:\"Detect pnpm client\"})}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" chokidarPath \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" require\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"resolve\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'chokidar'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    chokidarPath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'.pnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ||\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    existsSync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"opts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'node_modules'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '.pnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  )\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'pnpm'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})})]})})}),`\n`,(0,e.jsx)(l.h2,{id:\"detect-yarn-client\",children:(0,e.jsx)(l.strong,{children:\"Detect yarn client\"})}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    existsSync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"opts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'yarn.lock'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ||\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    existsSync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"opts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'node_modules'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" '.yarn-integrity'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  )\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'yarn'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"if none of the above conditions are met, this function defaults to \\u201Cnpm\\u201D.\"}),`\n`,(0,e.jsx)(l.h1,{id:\"installwithnpmclient\",children:(0,e.jsx)(l.strong,{children:\"installWithNpmClient\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"In the same \",(0,e.jsx)(l.a,{href:\"https://github.com/umijs/umi/blob/master/packages/utils/src/npmClient.ts#L53\",children:\"packages/utils/npmClient.ts fiile\"}),\", you will find the installWithNpmClient.\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" installWithNpmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  npmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}:\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  npmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NpmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}):\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" void \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" sync \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" require\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"'../compiled/cross-spawn'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" pnpm install will not install devDependencies when NODE_ENV === 'production'\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" we should remove NODE_ENV to make sure devDependencies can be installed\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" NODE_ENV\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" _\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ...\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"env \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" process\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" npm \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" sync\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"npmClient\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"npmClient \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'yarn'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ''\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'install'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"],\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    stdio\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 'inherit'\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    cwd\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    env\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"npm\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    throw\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" npm\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"We need to learn more about sync function. sync is required from \",(0,e.jsx)(l.a,{href:\"https://github.com/umijs/umi/blob/master/packages/utils/compiled/cross-spawn/package.json\",children:\"compiled/cross-spawn\"}),\". Uncompiled cross-spawn can be found at \",(0,e.jsx)(l.a,{href:\"https://github.com/moxystudio/node-cross-spawn/blob/master/index.js\",children:\"node-cross-spawn\"}),\". How do I know? both of these have the common name mentioned \\u2014 Andr\\xE9 Cruz in \",(0,e.jsx)(l.a,{href:\"https://github.com/umijs/umi/blob/master/packages/utils/compiled/cross-spawn/package.json\",children:\"utils/compiled/cross-spawn/package.json\"}),\" and in \",(0,e.jsx)(l.a,{href:\"https://github.com/moxystudio/node-cross-spawn/blob/master/package.json#L15\",children:\"node-cross-spawn package.json\"}),\".\"]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Seeing this \\u201Ccompiled\\u201D rings a bell for me. I have seen similar \",(0,e.jsx)(l.a,{href:\"https://github.com/vercel/next.js/tree/canary/packages/next/src/compiled\",children:\"compiled folder in Next.js source code\"}),\".\"]}),`\n`,(0,e.jsx)(l.h1,{id:\"about-me\",children:(0,e.jsx)(l.strong,{children:\"About me:\"})}),`\n`,(0,e.jsx)(l.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.em,{children:(0,e.jsxs)(l.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(l.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"My Github \\u2014 \",(0,e.jsx)(l.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My website \\u2014 \",(0,e.jsx)(l.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My Youtube channel \\u2014 \",(0,e.jsx)(l.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Learning platform \\u2014 \",(0,e.jsx)(l.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Codebase Architecture \\u2014 \",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Best practices \\u2014 \",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Production-grade projects \\u2014 \",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(l.h1,{id:\"references\",children:(0,e.jsx)(l.strong,{children:\"References:\"})}),`\n`,(0,e.jsxs)(l.ol,{children:[`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/umijs/father/blob/a95a4ead36ecb4788728348fcb45a83507a0fb17/src/commands/generators/jest.ts#L97\",children:\"src/commands/generators/jest.ts#L97\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/umijs/father/blob/master/src/commands/generators/utils.ts#L1\",children:\"src/commands/generators/utils.ts#L1\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/search?q=repo%3Aumijs%2Ffather+%40umijs%2Futils&type=code\",children:\"/search?q=repo%3Aumijs%2Ffather%20%40umijs%2Futils&type=code\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/orgs/umijs/repositories?q=utils\",children:\"https://github.com/orgs/umijs/repositories?q=utils\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://www.npmjs.com/package/@umijs/utils\",children:\"https://www.npmjs.com/package/@umijs/utils\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/umijs/umi/blob/master/package.json#L82\",children:\"https://github.com/umijs/umi/blob/master/package.json#L82\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/umijs/umi/tree/master/packages/utils\",children:\"https://github.com/umijs/umi/tree/master/packages/utils\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/umijs/umi/blob/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/src/npmClient.ts#L13\",children:\"/packages/utils/src/npmClient.ts#L13\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/umijs/umi/tree/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/compiled\",children:\"/packages/utils/compiled\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:l}=n.components||{};return l?(0,e.jsx)(l,{...n,children:(0,e.jsx)(t,{...n})}):t(n)}return b(j);})();\n;return Component;"
        },
        "_id": "blog/part-2-npm-package-install.mdx",
        "_raw": {
          "sourceFilePath": "blog/part-2-npm-package-install.mdx",
          "sourceFileName": "part-2-npm-package-install.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/part-2-npm-package-install"
        },
        "type": "Doc",
        "slug": "/blog/part-2-npm-package-install",
        "slugAsParams": "part-2-npm-package-install"
      },
      "documentHash": "1740489186382",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/pdf-file-upload-in-documenso.mdx": {
      "document": {
        "title": "How Documenso, an open-source Docusign alternative, handles pdf file upload in Next.js?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse how [Documenso](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L65)[,](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L65%29,) an open-source Docusign alternative, handles pdf file upload in Next.js app router.\r\n\r\nBut first, where is the code that takes care of upload? To find that out, we first need to know where in the user interface on Documenso we upload pdf files.\r\n\r\n### Where is the file upload related code?\r\n\r\nWhen you visit [/documents](https://app.documenso.com/documents), you see a widget shown below that lets you   \r\nupload pdf files in the Documenso dashboard.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*pNvloo-Sx81qc6tAhAEFpA.png)\r\n\r\nSince Documenso uses Next.js app router and the url ends with `/documents`, we are looking for a folder named `documents` in the Documenso source code. You will find this in the [(dashboard)/documents/page.tsx](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/page.tsx), but straight away you don’t see anything that says “upload”.\r\n\r\n```js\r\nexport default async function DocumentsPage({ searchParams = {} }: DocumentsPageProps) {\r\n  await setupI18nSSR();\r\n\r\n  const { user } = await getRequiredServerComponentSession();\r\n\r\n  return (\r\n    <>\r\n      <UpcomingProfileClaimTeaser user={user} />\r\n      <DocumentsPageView searchParams={searchParams} />\r\n    </>\r\n  );\r\n}\r\n```\r\n\r\nThis means, we now have to search for “upload” in `DocumentsPageView` and `UpcomingProfileClaimTeaser`. Looking at the imports used in [documents/upcoming-profile-claim-teaser.tsx](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upcoming-profile-claim-teaser.tsx)[,](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upcoming-profile-claim-teaser.tsx%29,) there’s nothing related to “upload”, that means, it has to be in `DocumentsPageView`.\r\n\r\nIn the [documents-page-view.tsx](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/documents-page-view.tsx#L41)[,](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/documents-page-view.tsx#L41%29,) you will find this below shown import at [line 27](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/documents-page-view.tsx#L27).\r\n\r\n```js\r\nimport { UploadDocument } from './upload-document';\r\n```\r\n\r\nand this Component is the first in order in this [documents-page-view.tsx](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/documents-page-view.tsx#L102C5-L107C21), as shown below:\r\n\r\n```js\r\n<div className=\"mx-auto w-full max-w-screen-xl px-4 md:px-8\">\r\n      <UploadDocument team={currentTeam} />\r\n\r\n      <div className=\"mt-12 flex flex-wrap items-center justify-between gap-x-4 gap-y-8\">\r\n        <div className=\"flex flex-row items-center\">\r\n          {team && (\r\n```\r\n\r\nHence the reason why you see the Upload widget followed by list of documents that you may have uploaded before.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*P5EDROYdr-c70LQBuX9dcw.png)\r\n\r\n### DocumentDropzone\r\n\r\nYou will find this below code at line 133 in the [upload-document.tsx](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L133C8-L133C24)[,](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L133C8-L133C24%29,)  \r\nthat is imported from document-dropzone.tsx\r\n\r\n```js\r\n<DocumentDropzone\r\n className=\"h-[min(400px,50vh)]\"\r\n disabled={remaining.documents === 0 || !session?.user.emailVerified}\r\n disabledMessage={disabledMessage}\r\n onDrop={onFileDrop}\r\n onDropRejected={onFileDropRejected}\r\n/>\r\n```\r\n\r\nwe are interested in `onFileDrop` function. This function has [50+ lines of code](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L61-L120)[.](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L61-L120%29.) Let’s focus only on core functionality that does the upload.\r\n\r\n```js\r\nconst { type, data } = await putPdfFile(file);\r\n\r\nconst { id: documentDataId } = await createDocumentData({\r\n  type,\r\n  data,\r\n});\r\n\r\nconst { id } = await createDocument({\r\n  title: file.name,\r\n  documentDataId,\r\n  teamId: team?.id,\r\n});\r\n```\r\n\r\nThis code is picked from [onFileDrop function](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L65C7-L76C10)[.](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L65C7-L76C10%29.) `putPdfFile` is a function imported from [lib/universal/upload/put-file.ts](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22)\r\n\r\n#### putPdfFile\r\n\r\n```js\r\n/**\r\n * Uploads a document file to the appropriate storage location and creates\r\n * a document data record.\r\n */\r\nexport const putPdfFile = async (file: File) => {\r\n  const isEncryptedDocumentsAllowed = await getFlag('app_allow_encrypted_documents').catch(\r\n    () => false,\r\n  );\r\n\r\n  // This will prevent uploading encrypted PDFs or anything that can't be opened.\r\n  if (!isEncryptedDocumentsAllowed) {\r\n    await PDFDocument.load(await file.arrayBuffer()).catch((e) => {\r\n      console.error(`PDF upload parse error: ${e.message}`);\r\n\r\n      throw new AppError('INVALID_DOCUMENT_FILE');\r\n    });\r\n  }\r\n\r\n  if (!file.name.endsWith('.pdf')) {\r\n    file.name = `${file.name}.pdf`;\r\n  }\r\n\r\n  const { type, data } = await putFile(file);\r\n\r\n  return await createDocumentData({ type, data });\r\n};\r\n```\r\n\r\nThis function above has some checks against [uploading encrypted document](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L28).\r\n\r\n#### putFile\r\n\r\nThis below code is picked from [upload/put-file.ts](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L48)\r\n\r\n```js\r\n/**\r\n * Uploads a file to the appropriate storage location.\r\n */\r\nexport const putFile = async (file: File) => {\r\n  const NEXT_PUBLIC_UPLOAD_TRANSPORT = env('NEXT_PUBLIC_UPLOAD_TRANSPORT');\r\n\r\n  return await match(NEXT_PUBLIC_UPLOAD_TRANSPORT)\r\n    .with('s3', async () => putFileInS3(file))\r\n    .otherwise(async () => putFileInDatabase(file));\r\n};\r\n```\r\n\r\nso this function supports file uploads to either `S3` or upload to database. Interesting.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/documenso/documenso/tree/main](https://github.com/documenso/documenso/tree/main)\r\n    \r\n2. [https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/page.tsx](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/page.tsx)\r\n    \r\n3. [https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upcoming-profile-claim-teaser.tsx](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upcoming-profile-claim-teaser.tsx)\r\n    \r\n4. [https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/documents-page-view.tsx#L41](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/documents-page-view.tsx#L41)\r\n    \r\n5. [https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L65](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L65)\r\n    \r\n6. [https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22)",
          "code": "var Component=(()=>{var h=Object.create;var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var s in e)o(n,s,{get:e[s],enumerable:!0})},r=(n,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of m(e))!u.call(n,c)&&c!==s&&o(n,c,{get:()=>e[c],enumerable:!(a=p(e,c))||a.enumerable});return n};var g=(n,e,s)=>(s=n!=null?h(y(n)):{},r(e||!n||!n.__esModule?o(s,\"default\",{value:n,enumerable:!0}):s,n)),w=n=>r(o({},\"__esModule\",{value:!0}),n);var t=b((L,F)=>{F.exports=_jsx_runtime});var x={};f(x,{default:()=>d,frontmatter:()=>N});var l=g(t()),N={title:\"How Documenso, an open-source Docusign alternative, handles pdf file upload in\\xA0Next.js?\"};function i(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we analyse how \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L65\",children:\"Documenso\"}),(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L65%29,\",children:\",\"}),\" an open-source Docusign alternative, handles pdf file upload in Next.js app router.\"]}),`\n`,(0,l.jsx)(e.p,{children:\"But first, where is the code that takes care of upload? To find that out, we first need to know where in the user interface on Documenso we upload pdf files.\"}),`\n`,(0,l.jsx)(e.h3,{id:\"where-is-the-file-upload-relatedcode\",children:\"Where is the file upload related\\xA0code?\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"When you visit \",(0,l.jsx)(e.a,{href:\"https://app.documenso.com/documents\",children:\"/documents\"}),\", you see a widget shown below that lets you\\xA0\",(0,l.jsx)(e.br,{}),`\n`,\"upload pdf files in the Documenso dashboard.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*pNvloo-Sx81qc6tAhAEFpA.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Since Documenso uses Next.js app router and the url ends with \",(0,l.jsx)(e.code,{children:\"/documents\"}),\", we are looking for a folder named \",(0,l.jsx)(e.code,{children:\"documents\"}),\" in the Documenso source code. You will find this in the \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/page.tsx\",children:\"(dashboard)/documents/page.tsx\"}),\", but straight away you don\\u2019t see anything that says \\u201Cupload\\u201D.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" DocumentsPage\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" searchParams \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" DocumentsPageProps\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setupI18nSSR\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" user \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getRequiredServerComponentSession\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    <>\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"UpcomingProfileClaimTeaser user\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"user\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"DocumentsPageView searchParams\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"searchParams\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    </>\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  );\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"This means, we now have to search for \\u201Cupload\\u201D in \",(0,l.jsx)(e.code,{children:\"DocumentsPageView\"}),\" and \",(0,l.jsx)(e.code,{children:\"UpcomingProfileClaimTeaser\"}),\". Looking at the imports used in \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upcoming-profile-claim-teaser.tsx\",children:\"documents/upcoming-profile-claim-teaser.tsx\"}),(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upcoming-profile-claim-teaser.tsx%29,\",children:\",\"}),\" there\\u2019s nothing related to \\u201Cupload\\u201D, that means, it has to be in \",(0,l.jsx)(e.code,{children:\"DocumentsPageView\"}),\".\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"In the \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/documents-page-view.tsx#L41\",children:\"documents-page-view.tsx\"}),(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/documents-page-view.tsx#L41%29,\",children:\",\"}),\" you will find this below shown import at \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/documents-page-view.tsx#L27\",children:\"line 27\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" UploadDocument \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './upload-document'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"and this Component is the first in order in this \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/documents-page-view.tsx#L102C5-L107C21\",children:\"documents-page-view.tsx\"}),\", as shown below:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div className\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"mx-auto w-full max-w-screen-xl px-4 md:px-8\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"UploadDocument team\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"currentTeam\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div className\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"mt-12 flex flex-wrap items-center justify-between gap-x-4 gap-y-8\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div className\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"flex flex-row items-center\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"team \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"&&\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Hence the reason why you see the Upload widget followed by list of documents that you may have uploaded before.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*P5EDROYdr-c70LQBuX9dcw.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"documentdropzone\",children:\"DocumentDropzone\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"You will find this below code at line 133 in the \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L133C8-L133C24\",children:\"upload-document.tsx\"}),(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L133C8-L133C24%29,\",children:\",\"}),(0,l.jsx)(e.br,{}),`\n`,\"that is imported from document-dropzone.tsx\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"DocumentDropzone\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" className\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"h-[min(400px,50vh)]\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" disabled\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"remaining\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"documents \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" !\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"session\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"user\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"emailVerified\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" disabledMessage\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"disabledMessage\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" onDrop\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"onFileDrop\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" onDropRejected\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"onFileDropRejected\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/>\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"we are interested in \",(0,l.jsx)(e.code,{children:\"onFileDrop\"}),\" function. This function has \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L61-L120\",children:\"50+ lines of code\"}),(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L61-L120%29.\",children:\".\"}),\" Let\\u2019s focus only on core functionality that does the upload.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" putPdfFile\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" id\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" documentDataId \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createDocumentData\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" id \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createDocument\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  title\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  documentDataId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  teamId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" team\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"id\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"This code is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L65C7-L76C10\",children:\"onFileDrop function\"}),(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L65C7-L76C10%29.\",children:\".\"}),\" \",(0,l.jsx)(e.code,{children:\"putPdfFile\"}),\" is a function imported from \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22\",children:\"lib/universal/upload/put-file.ts\"})]}),`\n`,(0,l.jsx)(e.h4,{id:\"putpdffile\",children:\"putPdfFile\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Uploads a document file to the appropriate storage location and creates\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * a document data record.\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" putPdfFile\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" File\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" isEncryptedDocumentsAllowed \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getFlag\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'app_allow_encrypted_documents'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"catch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  );\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" This will prevent uploading encrypted PDFs or anything that can't be opened.\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isEncryptedDocumentsAllowed\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" PDFDocument\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"load\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"arrayBuffer\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()).\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"catch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`PDF upload parse error: ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"e\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"message\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      throw\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" AppError\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'INVALID_DOCUMENT_FILE'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"endsWith\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'.pdf'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}.pdf`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" putFile\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createDocumentData\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"This function above has some checks against \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L28\",children:\"uploading encrypted document\"}),\".\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"putfile\",children:\"putFile\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"This below code is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L48\",children:\"upload/put-file.ts\"})]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Uploads a file to the appropriate storage location.\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" putFile\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" File\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NEXT_PUBLIC_UPLOAD_TRANSPORT \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'NEXT_PUBLIC_UPLOAD_TRANSPORT'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" match\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    .\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"with\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'s3'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" putFileInS3\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    .\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"otherwise\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" putFileInDatabase\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"so this function supports file uploads to either \",(0,l.jsx)(e.code,{children:\"S3\"}),\" or upload to database. Interesting.\"]}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/tree/main\",children:\"https://github.com/documenso/documenso/tree/main\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/page.tsx\",children:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/page.tsx\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upcoming-profile-claim-teaser.tsx\",children:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upcoming-profile-claim-teaser.tsx\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/documents-page-view.tsx#L41\",children:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/documents-page-view.tsx#L41\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L65\",children:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L65\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L22\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return w(x);})();\n;return Component;"
        },
        "_id": "blog/pdf-file-upload-in-documenso.mdx",
        "_raw": {
          "sourceFilePath": "blog/pdf-file-upload-in-documenso.mdx",
          "sourceFileName": "pdf-file-upload-in-documenso.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/pdf-file-upload-in-documenso"
        },
        "type": "Doc",
        "slug": "/blog/pdf-file-upload-in-documenso",
        "slugAsParams": "pdf-file-upload-in-documenso"
      },
      "documentHash": "1740489186385",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/preact-in-react-scan.mdx": {
      "document": {
        "title": "Preact usage in react-scan source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze how Preact is used in react-scan source code. \r\n\r\n### What is Preact?\r\n\r\nPreact is a fast 3kB alternative to React with the same modern API. There is a [Preact tutorial](https://preactjs.com/guide/v10/tutorial) available. \r\n\r\n#### Preact’s Goals\r\n\r\nPreact aims to deliver on a few key goals:\r\n\r\n* **Performance:** Render quickly & efficiently\r\n    \r\n* **Size:** Small size, lightweight *(approximately 3.5 kB)*\r\n    \r\n* **Efficiency:** Effective memory usage *(avoiding GC thrash)*\r\n    \r\n* **Understandability:** Understanding the codebase should take no more than a few hours\r\n    \r\n* **Compatibility:** Preact aims to be *largely compatible* with the React API. [preact/compat](https://preactjs.com/guide/v10/switching-to-preact) attempts to achieve as much compatibility with React as possible.\r\n    \r\n\r\nRead more about [Preact goals](https://preactjs.com/about/project-goals/) and what features are [intentionally omitted in Preact](https://preactjs.com/about/project-goals/).\r\n\r\nNow that we understand what Preact is, let’s see how this library is used in react-scan source code.\r\n\r\n### Preact import in react-scan source code\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*zUjxwJOA810Sipbw_o0qKg.png)\r\n\r\nIt looks like only the types, ComponentType and ReactNode, are imported in a file, [packages/scan/src/core/index.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L9). \r\n\r\nI did search for Preact in the react-scan codebase and it is used in a lot of other files too. Approximately in 38 files at the time of writing this article.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*aSJ3oD6CbfyK1pvbQfa_HA.png)\r\n\r\nI did not stop my research here, I wanted to find out if react-scan used react at all because you see it as a dependency in its [package.json](https://github.com/aidenybai/react-scan/blob/244f7c4741083944268753f299115703005f47e6/packages/scan/package.json#L281)\r\n\r\n```plaintext\r\n\"devDependencies\": {\r\n    ...\r\n    \"react\": \"*\",\r\n    \"react-dom\": \"*\",\r\n    \"react-router\": \"^5.0.0\"\r\n```\r\n\r\nBut if you search carefully to find any imports from “react”, you will find nothing but one import in the react-scan package.\r\n\r\n[constants.ts](https://github.com/aidenybai/react-scan/blob/244f7c4741083944268753f299115703005f47e6/packages/scan/src/core/monitor/constants.ts#L15) is the only file where there’s an import from “react”.\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://preactjs.com/](https://preactjs.com/)\r\n    \r\n2. [https://preactjs.com/about/project-goals/](https://preactjs.com/about/project-goals/)\r\n    \r\n3. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L9](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L9)\r\n    \r\n4. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L10](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L10)",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var a in e)c(t,a,{get:e[a],enumerable:!0})},s=(t,e,a,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!f.call(t,r)&&r!==a&&c(t,r,{get:()=>e[r],enumerable:!(i=m(e,r))||i.enumerable});return t};var w=(t,e,a)=>(a=t!=null?p(g(t)):{},s(e||!t||!t.__esModule?c(a,\"default\",{value:t,enumerable:!0}):a,t)),k=t=>s(c({},\"__esModule\",{value:!0}),t);var o=b((v,h)=>{h.exports=_jsx_runtime});var x={};y(x,{default:()=>d,frontmatter:()=>j});var n=w(o()),j={title:\"Preact usage in react-scan source\\xA0code.\"};function l(t){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this article, we analyze how Preact is used in react-scan source code.\\xA0\"}),`\n`,(0,n.jsx)(e.h3,{id:\"what-ispreact\",children:\"What is\\xA0Preact?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Preact is a fast 3kB alternative to React with the same modern API. There is a \",(0,n.jsx)(e.a,{href:\"https://preactjs.com/guide/v10/tutorial\",children:\"Preact tutorial\"}),\" available.\\xA0\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"preacts-goals\",children:\"Preact\\u2019s Goals\"}),`\n`,(0,n.jsx)(e.p,{children:\"Preact aims to deliver on a few key goals:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Performance:\"}),\" Render quickly & efficiently\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Size:\"}),\" Small size, lightweight \",(0,n.jsx)(e.em,{children:\"(approximately 3.5 kB)\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Efficiency:\"}),\" Effective memory usage \",(0,n.jsx)(e.em,{children:\"(avoiding GC thrash)\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Understandability:\"}),\" Understanding the codebase should take no more than a few hours\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Compatibility:\"}),\" Preact aims to be \",(0,n.jsx)(e.em,{children:\"largely compatible\"}),\" with the React API. \",(0,n.jsx)(e.a,{href:\"https://preactjs.com/guide/v10/switching-to-preact\",children:\"preact/compat\"}),\" attempts to achieve as much compatibility with React as possible.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://preactjs.com/about/project-goals/\",children:\"Preact goals\"}),\" and what features are \",(0,n.jsx)(e.a,{href:\"https://preactjs.com/about/project-goals/\",children:\"intentionally omitted in Preact\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Now that we understand what Preact is, let\\u2019s see how this library is used in react-scan source code.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"preact-import-in-react-scan-sourcecode\",children:\"Preact import in react-scan source\\xA0code\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*zUjxwJOA810Sipbw_o0qKg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"It looks like only the types, ComponentType and ReactNode, are imported in a file, \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L9\",children:\"packages/scan/src/core/index.ts\"}),\".\\xA0\"]}),`\n`,(0,n.jsx)(e.p,{children:\"I did search for Preact in the react-scan codebase and it is used in a lot of other files too. Approximately in 38 files at the time of writing this article.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*aSJ3oD6CbfyK1pvbQfa_HA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I did not stop my research here, I wanted to find out if react-scan used react at all because you see it as a dependency in its \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/244f7c4741083944268753f299115703005f47e6/packages/scan/package.json#L281\",children:\"package.json\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"devDependencies\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    ...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"react\": \"*\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"react-dom\": \"*\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    \"react-router\": \"^5.0.0\"'})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"But if you search carefully to find any imports from \\u201Creact\\u201D, you will find nothing but one import in the react-scan package.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/244f7c4741083944268753f299115703005f47e6/packages/scan/src/core/monitor/constants.ts#L15\",children:\"constants.ts\"}),\" is the only file where there\\u2019s an import from \\u201Creact\\u201D.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://preactjs.com/\",children:\"https://preactjs.com/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://preactjs.com/about/project-goals/\",children:\"https://preactjs.com/about/project-goals/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L9\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L9\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L10\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L10\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(l,{...t})}):l(t)}return k(x);})();\n;return Component;"
        },
        "_id": "blog/preact-in-react-scan.mdx",
        "_raw": {
          "sourceFilePath": "blog/preact-in-react-scan.mdx",
          "sourceFileName": "preact-in-react-scan.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/preact-in-react-scan"
        },
        "type": "Doc",
        "slug": "/blog/preact-in-react-scan",
        "slugAsParams": "preact-in-react-scan"
      },
      "documentHash": "1740996959806",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/pretty-bytes-in-unbuild.mdx": {
      "document": {
        "title": "pretty-bytes usage in unbuild source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nFor this week, I have been reading [unbuild](https://github.com/unjs/unbuild) source code and found few packages that I have never seen before or used. I wanted to share some interesting packages that are used in these OSS projects so we can learn a thing or two ;)\r\n\r\nThe following are discussed in this article:\r\n\r\n1. What is pretty-bytes?\r\n    \r\n2. pretty-bytes usage in unbuild\r\n    \r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*7dHMX48rbJ_5coQGR5dTcw.png)\r\n\r\n### What is pretty-bytes?\r\n\r\n[pretty-bytes is written by Sindre](https://github.com/sindresorhus/pretty-bytes). It converts bytes to a human readable string: 1337 → 1.34 kB.\r\n\r\n#### Install\r\n\r\n```js\r\nnpm install pretty-bytes\r\n```\r\n\r\n#### Usage\r\n\r\n```js\r\nimport prettyBytes from 'pretty-bytes';\r\n\r\nprettyBytes(1337);\r\n//=> '1.34 kB'\r\n\r\nprettyBytes(100);\r\n//=> '100 B'\r\n\r\n// Display with units of bits\r\nprettyBytes(1337, {bits: true});\r\n//=> '1.34 kbit'\r\n\r\n// Display file size differences\r\nprettyBytes(42, {signed: true});\r\n//=> '+42 B'\r\n\r\n// Localized output using German locale\r\nprettyBytes(1337, {locale: 'de'});\r\n//=> '1,34 kB'\r\n```\r\n\r\n### pretty-bytes usage in unbuild\r\n\r\npretty-bytes is found to be [at line 10 in build.ts](https://github.com/unjs/unbuild/blob/main/src/build.ts#L10).\r\n\r\n```js\r\nimport prettyBytes from \"pretty-bytes\";\r\n```\r\n\r\n[Then at line 332](https://github.com/unjs/unbuild/blob/main/src/build.ts#L332C5-L342C11), you will find this below code:\r\n\r\n```js\r\nlet line =\r\n      `  ${colors.bold(rPath(entry.path))} (` +\r\n      [\r\n        totalBytes && `total size: ${colors.cyan(prettyBytes(totalBytes))}`,\r\n        entry.bytes && `chunk size: ${colors.cyan(prettyBytes(entry.bytes))}`,\r\n        entry.exports?.length &&\r\n          `exports: ${colors.gray(entry.exports.join(\", \"))}`,\r\n      ]\r\n        .filter(Boolean)\r\n        .join(\", \") +\r\n      \")\";\r\n```\r\n\r\npretty-bytes is applied to get human readable string, in this case, it is used to report total size, chunk size.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1. [https://www.npmjs.com/package/pretty-bytes](https://www.npmjs.com/package/pretty-bytes)\r\n    \r\n2. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L10](https://github.com/unjs/unbuild/blob/main/src/build.ts#L10)\r\n    \r\n3. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L335](https://github.com/unjs/unbuild/blob/main/src/build.ts#L335)",
          "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var s in e)c(l,s,{get:e[s],enumerable:!0})},a=(l,e,s,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(l,r)&&r!==s&&c(l,r,{get:()=>e[r],enumerable:!(t=p(e,r))||t.enumerable});return l};var f=(l,e,s)=>(s=l!=null?d(m(l)):{},a(e||!l||!l.__esModule?c(s,\"default\",{value:l,enumerable:!0}):s,l)),N=l=>a(c({},\"__esModule\",{value:!0}),l);var i=b((B,o)=>{o.exports=_jsx_runtime});var w={};g(w,{default:()=>h,frontmatter:()=>j});var n=f(i()),j={title:\"pretty-bytes usage in\\xA0unbuild source code\"};function F(l){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"For this week, I have been reading \",(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild\",children:\"unbuild\"}),\" source code and found few packages that I have never seen before or used. I wanted to share some interesting packages that are used in these OSS projects so we can learn a thing or two\\xA0;)\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The following are discussed in this article:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What is pretty-bytes?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"pretty-bytes usage in unbuild\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*7dHMX48rbJ_5coQGR5dTcw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"what-is-pretty-bytes\",children:\"What is pretty-bytes?\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/sindresorhus/pretty-bytes\",children:\"pretty-bytes is written by Sindre\"}),\". It converts bytes to a human readable string: 1337 \\u2192 1.34 kB.\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"install\",children:\"Install\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"npm install pretty\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"-\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"bytes\"})]})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" prettyBytes \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'pretty-bytes'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prettyBytes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(1337);\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"=> '1.34 kB'\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prettyBytes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(100);\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"=> '100 B'\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Display with units of bits\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prettyBytes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(1337,\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"bits\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true});\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"=> '1.34 kbit'\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Display file size differences\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prettyBytes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(42,\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"signed\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true});\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"=> '+42 B'\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Localized output using German locale\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prettyBytes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(1337,\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"locale\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'de'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"=> '1,34 kB'\"})]})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"pretty-bytes-usage-inunbuild\",children:\"pretty-bytes usage in\\xA0unbuild\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"pretty-bytes is found to be \",(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L10\",children:\"at line 10 in build.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" prettyBytes \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"pretty-bytes\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L332C5-L342C11\",children:\"Then at line 332\"}),\", you will find this below code:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"let\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" line \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      `  ${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"colors\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"bold\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"rPath\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"entry\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"} (`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" +\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      [\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        totalBytes \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"&&\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `total size: ${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"colors\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cyan\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prettyBytes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"totalBytes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        entry\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"bytes \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"&&\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `chunk size: ${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"colors\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cyan\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"prettyBytes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"entry\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"bytes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        entry\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"exports\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"length \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"&&\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          `exports: ${\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"colors\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"gray\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"entry\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"exports\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\", \"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ]\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        .\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"filter\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Boolean\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        .\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"join\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\", \"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" +\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'      \")\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"pretty-bytes is applied to get human readable string, in this case, it is used to report total size, chunk size.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/pretty-bytes\",children:\"https://www.npmjs.com/package/pretty-bytes\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L10\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L10\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L335\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L335\"})}),`\n`]}),`\n`]})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(F,{...l})}):F(l)}return N(w);})();\n;return Component;"
        },
        "_id": "blog/pretty-bytes-in-unbuild.mdx",
        "_raw": {
          "sourceFilePath": "blog/pretty-bytes-in-unbuild.mdx",
          "sourceFileName": "pretty-bytes-in-unbuild.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/pretty-bytes-in-unbuild"
        },
        "type": "Doc",
        "slug": "/blog/pretty-bytes-in-unbuild",
        "slugAsParams": "pretty-bytes-in-unbuild"
      },
      "documentHash": "1740489186388",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/process-env-type.mdx": {
      "document": {
        "title": "ProcessEnv type in next-runtime-env source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse the ProcessEnv type found in [next-runtime-env source code](https://github.com/expatfile/next-runtime-env/blob/development/src/typings/process-env.ts#L3) and review the [StackOverflow answe](https://stackoverflow.com/questions/45194598/using-process-env-in-typescript)r and also [Matt Pocock’s article](https://www.totaltypescript.com/how-to-strongly-type-process-env).\r\n\r\n### ProcessEnv type\r\n\r\nProcessEnv is imported as shown below\r\n\r\n```ts\r\nimport { ProcessEnv } from '../typings/process-env';\r\n```\r\n\r\nIn the [typings/process-env](https://github.com/expatfile/next-runtime-env/blob/development/src/typings/process-env.ts#L3), you will find the below code:\r\n\r\n```ts\r\nimport { type Dict } from './dict';\r\nexport type ProcessEnv = Dict<string>;\r\n```\r\n\r\nIt is a Dict of type string, but Dict type is imported from `/dict` and has the below code\r\n\r\n```ts\r\nexport type Dict<T> = {\r\n [key: string]: T | undefined;\r\n};\r\n```\r\n\r\n### Matt Pococok’s article\r\n\r\nIn the Total TypeScript article — [How to strongly type process.env](https://www.totaltypescript.com/how-to-strongly-type-process-env),  \r\nit is stated that “a common problem in TypeScript is that process.env doesn’t give you autocomplete for the environment variables that actually exist in your system” and Matt suggests two solutions:\r\n\r\n\\- [Augment the global type](https://www.totaltypescript.com/how-to-strongly-type-process-env#solution-1-augment-the-global-type)  \r\n\\- [Validate at Runtime with t3-env](https://www.totaltypescript.com/how-to-strongly-type-process-env#solution-2-validate-it-at-runtime-with-t3-env)\r\n\r\n> These approaches do not mention anything about defining your ProcessEnv types, but you will see this suggestion/accepted answer on Stackoverflow. Read further to find out.\r\n\r\n### Stackoverflow Accepted Answer\r\n\r\nThere was a [question titled — using process.env in TypeScript](https://stackoverflow.com/questions/45194598/using-process-env-in-typescript) on Stackverflow. It has 21 answers but I like the accepted answer more and you will similar approach in next-runtime-env source code.\r\n\r\nThe [accepted answer](https://stackoverflow.com/a/45195359) tells you to define a ProcessEnv type with the below code:\r\n\r\n```ts\r\nexport interface ProcessEnv {\r\n [key: string]: string | undefined\r\n}\r\n```\r\n\r\nnext-runtime-env has the same type, only difference is, the defined type is assigned to a variable named `Dict`.\r\n\r\n```ts\r\nimport { type Dict } from './dict';\r\nexport type ProcessEnv = Dict<string>;\r\n```\r\n\r\nDict type:\r\n\r\n```ts\r\nexport type Dict<T> = {\r\n [key: string]: T | undefined;\r\n};\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/expatfile/next-runtime-env/blob/development/src/typings/process-env.ts#L3](https://github.com/expatfile/next-runtime-env/blob/development/src/typings/process-env.ts#L3)\r\n    \r\n2. [https://www.totaltypescript.com/how-to-strongly-type-process-env](https://www.totaltypescript.com/how-to-strongly-type-process-env)\r\n    \r\n3. [https://stackoverflow.com/questions/45194598/using-process-env-in-typescript](https://stackoverflow.com/questions/45194598/using-process-env-in-typescript)\r\n    \r\n4. [https://stackoverflow.com/a/45195359](https://stackoverflow.com/a/45195359)",
          "code": "var Component=(()=>{var p=Object.create;var o=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),f=(t,e)=>{for(var r in e)o(t,r,{get:e[r],enumerable:!0})},c=(t,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of y(e))!u.call(t,l)&&l!==r&&o(t,l,{get:()=>e[l],enumerable:!(s=F(e,l))||s.enumerable});return t};var v=(t,e,r)=>(r=t!=null?p(m(t)):{},c(e||!t||!t.__esModule?o(r,\"default\",{value:t,enumerable:!0}):r,t)),w=t=>c(o({},\"__esModule\",{value:!0}),t);var i=g((N,a)=>{a.exports=_jsx_runtime});var k={};f(k,{default:()=>d,frontmatter:()=>b});var n=v(i()),b={title:\"ProcessEnv type in next-runtime-env source\\xA0code\"};function h(t){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse the ProcessEnv type found in \",(0,n.jsx)(e.a,{href:\"https://github.com/expatfile/next-runtime-env/blob/development/src/typings/process-env.ts#L3\",children:\"next-runtime-env source code\"}),\" and review the \",(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/45194598/using-process-env-in-typescript\",children:\"StackOverflow answe\"}),\"r and also \",(0,n.jsx)(e.a,{href:\"https://www.totaltypescript.com/how-to-strongly-type-process-env\",children:\"Matt Pocock\\u2019s article\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"processenv-type\",children:\"ProcessEnv type\"}),`\n`,(0,n.jsx)(e.p,{children:\"ProcessEnv is imported as shown below\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ProcessEnv \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../typings/process-env'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.a,{href:\"https://github.com/expatfile/next-runtime-env/blob/development/src/typings/process-env.ts#L3\",children:\"typings/process-env\"}),\", you will find the below code:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Dict \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './dict'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ProcessEnv\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Dict\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"string\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"It is a Dict of type string, but Dict type is imported from \",(0,n.jsx)(e.code,{children:\"/dict\"}),\" and has the below code\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Dict\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"T\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]:\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" T\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" undefined\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"matt-pococoks-article\",children:\"Matt Pococok\\u2019s article\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the Total TypeScript article\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.totaltypescript.com/how-to-strongly-type-process-env\",children:\"How to strongly type process.env\"}),\",\",(0,n.jsx)(e.br,{}),`\n`,\"it is stated that \\u201Ca common problem in TypeScript is that process.env doesn\\u2019t give you autocomplete for the environment variables that actually exist in your system\\u201D and Matt suggests two solutions:\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"- \",(0,n.jsx)(e.a,{href:\"https://www.totaltypescript.com/how-to-strongly-type-process-env#solution-1-augment-the-global-type\",children:\"Augment the global type\"}),(0,n.jsx)(e.br,{}),`\n`,\"- \",(0,n.jsx)(e.a,{href:\"https://www.totaltypescript.com/how-to-strongly-type-process-env#solution-2-validate-it-at-runtime-with-t3-env\",children:\"Validate at Runtime with t3-env\"})]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"These approaches do not mention anything about defining your ProcessEnv types, but you will see this suggestion/accepted answer on Stackoverflow. Read further to find out.\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"stackoverflow-acceptedanswer\",children:\"Stackoverflow Accepted\\xA0Answer\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"There was a \",(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/45194598/using-process-env-in-typescript\",children:\"question titled\\u200A\\u2014\\u200Ausing process.env in TypeScript\"}),\" on Stackverflow. It has 21 answers but I like the accepted answer more and you will similar approach in next-runtime-env source code.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/a/45195359\",children:\"accepted answer\"}),\" tells you to define a ProcessEnv type with the below code:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" interface\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ProcessEnv\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]:\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"|\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" undefined\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"next-runtime-env has the same type, only difference is, the defined type is assigned to a variable named \",(0,n.jsx)(e.code,{children:\"Dict\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Dict \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './dict'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ProcessEnv\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Dict\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"string\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Dict type:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Dict\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"T\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]:\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" T\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" undefined\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/expatfile/next-runtime-env/blob/development/src/typings/process-env.ts#L3\",children:\"https://github.com/expatfile/next-runtime-env/blob/development/src/typings/process-env.ts#L3\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.totaltypescript.com/how-to-strongly-type-process-env\",children:\"https://www.totaltypescript.com/how-to-strongly-type-process-env\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/45194598/using-process-env-in-typescript\",children:\"https://stackoverflow.com/questions/45194598/using-process-env-in-typescript\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/a/45195359\",children:\"https://stackoverflow.com/a/45195359\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(h,{...t})}):h(t)}return w(k);})();\n;return Component;"
        },
        "_id": "blog/process-env-type.mdx",
        "_raw": {
          "sourceFilePath": "blog/process-env-type.mdx",
          "sourceFileName": "process-env-type.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/process-env-type"
        },
        "type": "Doc",
        "slug": "/blog/process-env-type",
        "slugAsParams": "process-env-type"
      },
      "documentHash": "1740489186392",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/queueMacroTask-in-React-source.mdx": {
      "document": {
        "title": "queueMacroTask in React source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze queueMacroTask in [React source code](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*-UpgzB4PpLH6s5_zxrA5Ng.png)\r\n\r\nAlthough, file and function are named as enqueueTask, it is imported as queueMacroTask. Unlike window.queueMicroTask, there is no function such as window.queueMarcoTask. setTimeout is an example of MacroTask.\r\n\r\nRead more about [event loop, micro task and macro task](https://javascript.info/event-loop).\r\n\r\n# **React’s enqueueTask:**\r\n\r\n```plaintext\r\n/**\r\n * Copyright © Meta Platforms, Inc. and affiliates.\r\n *\r\n * This source code is licensed under the MIT license found in the\r\n * LICENSE file in the root directory of this source tree.\r\n *\r\n * @flow\r\n */\r\nlet didWarnAboutMessageChannel = false;\r\nlet enqueueTaskImpl = null;\r\nexport default function enqueueTask(task: () => void): void {\r\n   if (enqueueTaskImpl === null) {\r\n     try {\r\n       // read require off the module object to get around the bundlers.\r\n       // we don't want them to detect a require and bundle a Node polyfill.\r\n       const requireString = ('require' + Math.random()).slice(0, 7);\r\n       // $FlowFixMe[invalid-computed-prop]\r\n       const nodeRequire = module && module[requireString];\r\n       // assuming we're in node, let's try to get node's\r\n       // version of setImmediate, bypassing fake timers if any.\r\n       enqueueTaskImpl = nodeRequire.call(module, 'timers').setImmediate;\r\n       } catch (_err) {\r\n       // we're in a browser\r\n       // we can't use regular timers because they may still be faked\r\n       // so we try MessageChannel+postMessage instead\r\n       enqueueTaskImpl = function (callback: () => void) {\r\n       if (__DEV__) {\r\n         if (didWarnAboutMessageChannel === false) {\r\n           didWarnAboutMessageChannel = true;\r\n           if (typeof MessageChannel === 'undefined') {\r\n             console.error(\r\n             'This browser does not have a MessageChannel implementation, ' +\r\n             'so enqueuing tasks via await act(async () => …) will fail. ' +\r\n             'Please file an issue at https://github.com/facebook/react/issues ' +\r\n             'if you encounter this warning.',\r\n             );\r\n           }\r\n         }\r\n       }\r\n       const channel = new MessageChannel();\r\n       channel.port1.onmessage = callback;\r\n       channel.port2.postMessage(undefined);\r\n     };\r\n   }\r\n  }\r\n  return enqueueTaskImpl(task);\r\n}\r\n```\r\n\r\nThis code has comments explaining what it does. There are some tricks we could learn here:\r\n\r\n* How to get around bundlers when you are writing your own enqueque trask.\r\n    \r\n* In node env, setImmediate can be used as MacroTask.\r\n    \r\n* In browser env, MessageChannel can be used to create a queueMacroTask effect.\r\n    \r\n\r\nThis enquequeTask is imported as MacroTask in ReactAct.js and is used as a fallback in case window.queueMicroTask does not exist:\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*5LrG6mdpwrJwfUGHl31q4Q.png)\r\n\r\nAt the following lines:\r\n\r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L196](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L196)\r\n    \r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L121](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L121)\r\n    \r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References**\r\n\r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L366](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L366)\r\n    \r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js)  \r\n    3\\. [https://javascript.info/event-loop](https://javascript.info/event-loop)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----88a6e0f39ee1--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var g=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),k=(a,e)=>{for(var s in e)i(a,s,{get:e[s],enumerable:!0})},l=(a,e,s,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of m(e))!f.call(a,c)&&c!==s&&i(a,c,{get:()=>e[c],enumerable:!(r=u(e,c))||r.enumerable});return a};var N=(a,e,s)=>(s=a!=null?p(b(a)):{},l(e||!a||!a.__esModule?i(s,\"default\",{value:a,enumerable:!0}):s,a)),w=a=>l(i({},\"__esModule\",{value:!0}),a);var d=g((y,t)=>{t.exports=_jsx_runtime});var M={};k(M,{default:()=>o,frontmatter:()=>q});var n=N(d()),q={title:\"queueMacroTask in React source code\"};function h(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze queueMacroTask in \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js\",children:\"React source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*-UpgzB4PpLH6s5_zxrA5Ng.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Although, file and function are named as enqueueTask, it is imported as queueMacroTask. Unlike window.queueMicroTask, there is no function such as window.queueMarcoTask. setTimeout is an example of MacroTask.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://javascript.info/event-loop\",children:\"event loop, micro task and macro task\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"reacts-enqueuetask\",children:(0,n.jsx)(e.strong,{children:\"React\\u2019s enqueueTask:\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Copyright \\xA9 Meta Platforms, Inc. and affiliates.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * This source code is licensed under the MIT license found in the\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * LICENSE file in the root directory of this source tree.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * @flow\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let didWarnAboutMessageChannel = false;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let enqueueTaskImpl = null;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export default function enqueueTask(task: () => void): void {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   if (enqueueTaskImpl === null) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     try {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       // read require off the module object to get around the bundlers.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       // we don't want them to detect a require and bundle a Node polyfill.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       const requireString = ('require' + Math.random()).slice(0, 7);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       // $FlowFixMe[invalid-computed-prop]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       const nodeRequire = module && module[requireString];\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       // assuming we're in node, let's try to get node's\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       // version of setImmediate, bypassing fake timers if any.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       enqueueTaskImpl = nodeRequire.call(module, 'timers').setImmediate;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       } catch (_err) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       // we're in a browser\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       // we can't use regular timers because they may still be faked\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       // so we try MessageChannel+postMessage instead\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       enqueueTaskImpl = function (callback: () => void) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       if (__DEV__) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"         if (didWarnAboutMessageChannel === false) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"           didWarnAboutMessageChannel = true;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"           if (typeof MessageChannel === 'undefined') {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"             console.error(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"             'This browser does not have a MessageChannel implementation, ' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"             'so enqueuing tasks via await act(async () => \\u2026) will fail. ' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"             'Please file an issue at https://github.com/facebook/react/issues ' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"             'if you encounter this warning.',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"             );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"           }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"         }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       const channel = new MessageChannel();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       channel.port1.onmessage = callback;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       channel.port2.postMessage(undefined);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return enqueueTaskImpl(task);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This code has comments explaining what it does. There are some tricks we could learn here:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"How to get around bundlers when you are writing your own enqueque trask.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"In node env, setImmediate can be used as MacroTask.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"In browser env, MessageChannel can be used to create a queueMacroTask effect.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"This enquequeTask is imported as MacroTask in ReactAct.js and is used as a fallback in case window.queueMicroTask does not exist:\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*5LrG6mdpwrJwfUGHl31q4Q.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"At the following lines:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L196\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L196\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L121\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L121\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References\"})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L366\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L366\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/shared/enqueueTask.js\"}),(0,n.jsx)(e.br,{}),`\n`,\"3. \",(0,n.jsx)(e.a,{href:\"https://javascript.info/event-loop\",children:\"https://javascript.info/event-loop\"})]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----88a6e0f39ee1--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return w(M);})();\n;return Component;"
        },
        "_id": "blog/queueMacroTask-in-React-source.mdx",
        "_raw": {
          "sourceFilePath": "blog/queueMacroTask-in-React-source.mdx",
          "sourceFileName": "queueMacroTask-in-React-source.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/queueMacroTask-in-React-source"
        },
        "type": "Doc",
        "slug": "/blog/queueMacroTask-in-React-source",
        "slugAsParams": "queueMacroTask-in-React-source"
      },
      "documentHash": "1740489186394",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/queueMicroTask-in-JavaScript.mdx": {
      "document": {
        "title": "queueMicroTask in JavaScript\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze queueMicroTask function in [React source code](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L361)  \r\nReact uses queueMicroTask in a file named ReactAct.js. This is a [public API, act](https://react.dev/reference/react/act).\r\n\r\nact is a test helper to apply pending React updates before making assertions.\r\n\r\n```plaintext\r\nawait act(async actFn)\r\n```\r\n\r\n[ReactAct.js](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L361) has a lot of code, let’s narrow down our focus on to queueMicroTask.\r\n\r\n# **Where is queueMicroTask called in ReactAct.js?**\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*PlQpveiCXPPH8TMk27pXvQ.png)\r\n\r\n`queueSeveralMicrotasks` is found at the end of this ReactAct.js file and calls queueMicroTask with a callback and has detailed comment explaining its purpose.\r\n\r\nqueueSeveralMicrotasks is found to be called in two places:\r\n\r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L121](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L121)\r\n    \r\n\r\n```plaintext\r\n// Warn if the an `act` call with an async scope is not awaited. In a\r\n // future release, consider making this an error.\r\n queueSeveralMicrotasks(() => {\r\n   if (!didAwaitActCall && !didWarnNoAwaitAct) {\r\n     didWarnNoAwaitAct = true;\r\n     console.error(\r\n       'You called act(async () => …) without await. ' +\r\n       'This could lead to unexpected testing behaviour, ' +\r\n       'interleaving multiple act calls and mixing their ' +\r\n       'scopes. ' +\r\n       'You should - await act(async () => …);',\r\n     );\r\n   }\r\n });\r\n```\r\n\r\n* [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L196](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L196)\r\n    \r\n\r\n```plaintext\r\n// Warn if something suspends but the `act` call is not awaited.\r\n// In a future release, consider making this an error.\r\nif (queue.length !== 0) {\r\n queueSeveralMicrotasks(() => {\r\n if (!didAwaitActCall && !didWarnNoAwaitAct) {\r\n   didWarnNoAwaitAct = true;\r\n   console.error(\r\n     'A component suspended inside an `act` scope, but the ' +\r\n     '`act` call was not awaited. When testing React ' +\r\n     'components that depend on asynchronous data, you must ' +\r\n     'await the result:\\n\\n' +\r\n     'await act(() => …)',\r\n   );\r\n   }\r\n });\r\n}\r\n```\r\n\r\nNow that we saw how queueMicroTask is used, let’s now understand the definition of queueMicroTask.\r\n\r\n# **queueMicroTask**\r\n\r\nThe queueMicrotask() method of the Window interface queues a microtask to be executed at a safe time prior to control returning to the browser’s event loop.\r\n\r\nThe microtask is a short function which will run after the current task has completed its work and when there is no other code waiting to be run before control of the execution context is returned to the browser’s event loop.\r\n\r\nThis lets your code run without interfering with any other, potentially higher priority, code that is pending, but before the browser regains control over the execution context, potentially depending on work you need to complete.\r\n\r\nRead more about queueMicroTask at [MDN Docs](https://developer.mozilla.org/en-US/docs/Web/API/Window/queueMicrotask).\r\n\r\n## **Example:**\r\n\r\nHere’s an example of how microtasks and macrotasks interact with the browser’s execution:\r\n\r\n```plaintext\r\nconsole.log('Synchronous 1'); // 1\r\nPromise.resolve().then(() => {\r\n console.log('Microtask 1'); // 3\r\n});\r\nconsole.log('Synchronous 2'); // 2\r\nsetTimeout(() => {\r\n console.log('Macrotask 1'); // 5\r\n}, 0);\r\nconsole.log('Synchronous 3'); // 4\r\n```\r\n\r\n## **Breakdown:**\r\n\r\nThe synchronous code runs first, outputting:  \r\n‘Synchronous 1’  \r\n‘Synchronous 2’  \r\n‘Synchronous 3’\r\n\r\nBefore the browser gets a chance to handle any pending rendering or macrotasks, the microtask queue is processed:\r\n\r\nThe Promise.resolve().then(…) callback is added to the microtask queue and is executed right after the synchronous code block is finished, logging:  \r\n‘Microtask 1’\r\n\r\nAfter the microtask queue is emptied, the browser regains control and can:\r\n\r\nRun macrotasks, like the setTimeout callback, which logs:\r\n\r\n‘Macrotask 1’\r\n\r\n## **Final output**\r\n\r\n```plaintext\r\nSynchronous 1\r\nSynchronous 2\r\nSynchronous 3\r\nMicrotask 1\r\nMacrotask 1\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://developer.mozilla.org/en-US/docs/Web/API/Window/queueMicrotask](https://developer.mozilla.org/en-US/docs/Web/API/Window/queueMicrotask)\r\n    \r\n2. [https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L361](https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L361)\r\n    \r\n3. [https://developer.mozilla.org/en-US/docs/Web/API/HTML\\_DOM\\_API/Microtask\\_guide](https://developer.mozilla.org/en-US/docs/Web/API/HTML_DOM_API/Microtask_guide)\r\n    \r\n4. [https://react.dev/reference/react/act](https://react.dev/reference/react/act)\r\n    \r\n5. [https://javascript.info/event-loop](https://javascript.info/event-loop)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----b8796f5562e1--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),k=(a,e)=>{for(var c in e)r(a,c,{get:e[c],enumerable:!0})},s=(a,e,c,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of m(e))!b.call(a,t)&&t!==c&&r(a,t,{get:()=>e[t],enumerable:!(i=u(e,t))||i.enumerable});return a};var w=(a,e,c)=>(c=a!=null?p(g(a)):{},s(e||!a||!a.__esModule?r(c,\"default\",{value:a,enumerable:!0}):c,a)),N=a=>s(r({},\"__esModule\",{value:!0}),a);var d=f((A,l)=>{l.exports=_jsx_runtime});var M={};k(M,{default:()=>h,frontmatter:()=>y});var n=w(d()),y={title:\"queueMicroTask in JavaScript\"};function o(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze queueMicroTask function in \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L361\",children:\"React source code\"}),(0,n.jsx)(e.br,{}),`\n`,\"React uses queueMicroTask in a file named ReactAct.js. This is a \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/act\",children:\"public API, act\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"act is a test helper to apply pending React updates before making assertions.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"await act(async actFn)\"})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L361\",children:\"ReactAct.js\"}),\" has a lot of code, let\\u2019s narrow down our focus on to queueMicroTask.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"where-is-queuemicrotask-called-in-reactactjs\",children:(0,n.jsx)(e.strong,{children:\"Where is queueMicroTask called in ReactAct.js?\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*PlQpveiCXPPH8TMk27pXvQ.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"queueSeveralMicrotasks\"}),\" is found at the end of this ReactAct.js file and calls queueMicroTask with a callback and has detailed comment explaining its purpose.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"queueSeveralMicrotasks is found to be called in two places:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L121\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L121\"})}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Warn if the an `act` call with an async scope is not awaited. In a\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // future release, consider making this an error.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" queueSeveralMicrotasks(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   if (!didAwaitActCall && !didWarnNoAwaitAct) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     didWarnNoAwaitAct = true;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     console.error(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       'You called act(async () => \\u2026) without await. ' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       'This could lead to unexpected testing behaviour, ' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       'interleaving multiple act calls and mixing their ' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       'scopes. ' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       'You should - await act(async () => \\u2026);',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" });\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L196\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L196\"})}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Warn if something suspends but the `act` call is not awaited.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// In a future release, consider making this an error.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (queue.length !== 0) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" queueSeveralMicrotasks(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" if (!didAwaitActCall && !didWarnNoAwaitAct) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   didWarnNoAwaitAct = true;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   console.error(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     'A component suspended inside an `act` scope, but the ' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     '`act` call was not awaited. When testing React ' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     'components that depend on asynchronous data, you must ' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     'await the result:\\\\n\\\\n' +\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     'await act(() => \\u2026)',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Now that we saw how queueMicroTask is used, let\\u2019s now understand the definition of queueMicroTask.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"queuemicrotask\",children:(0,n.jsx)(e.strong,{children:\"queueMicroTask\"})}),`\n`,(0,n.jsx)(e.p,{children:\"The queueMicrotask() method of the Window interface queues a microtask to be executed at a safe time prior to control returning to the browser\\u2019s event loop.\"}),`\n`,(0,n.jsx)(e.p,{children:\"The microtask is a short function which will run after the current task has completed its work and when there is no other code waiting to be run before control of the execution context is returned to the browser\\u2019s event loop.\"}),`\n`,(0,n.jsx)(e.p,{children:\"This lets your code run without interfering with any other, potentially higher priority, code that is pending, but before the browser regains control over the execution context, potentially depending on work you need to complete.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about queueMicroTask at \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/queueMicrotask\",children:\"MDN Docs\"}),\".\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"example\",children:(0,n.jsx)(e.strong,{children:\"Example:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Here\\u2019s an example of how microtasks and macrotasks interact with the browser\\u2019s execution:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log('Synchronous 1'); // 1\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"Promise.resolve().then(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" console.log('Microtask 1'); // 3\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log('Synchronous 2'); // 2\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"setTimeout(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" console.log('Macrotask 1'); // 5\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}, 0);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log('Synchronous 3'); // 4\"})})]})})}),`\n`,(0,n.jsx)(e.h2,{id:\"breakdown\",children:(0,n.jsx)(e.strong,{children:\"Breakdown:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The synchronous code runs first, outputting:\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2018Synchronous 1\\u2019\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2018Synchronous 2\\u2019\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2018Synchronous 3\\u2019\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Before the browser gets a chance to handle any pending rendering or macrotasks, the microtask queue is processed:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The Promise.resolve().then(\\u2026) callback is added to the microtask queue and is executed right after the synchronous code block is finished, logging:\",(0,n.jsx)(e.br,{}),`\n`,\"\\u2018Microtask 1\\u2019\"]}),`\n`,(0,n.jsx)(e.p,{children:\"After the microtask queue is emptied, the browser regains control and can:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Run macrotasks, like the setTimeout callback, which logs:\"}),`\n`,(0,n.jsx)(e.p,{children:\"\\u2018Macrotask 1\\u2019\"}),`\n`,(0,n.jsx)(e.h2,{id:\"final-output\",children:(0,n.jsx)(e.strong,{children:\"Final output\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"Synchronous 1\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"Synchronous 2\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"Synchronous 3\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"Microtask 1\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"Macrotask 1\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/queueMicrotask\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/Window/queueMicrotask\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L361\",children:\"https://github.com/facebook/react/blob/5d19e1c8d1a6c0b5cd7532d43b707191eaf105b7/packages/react/src/ReactAct.js#L361\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/HTML_DOM_API/Microtask_guide\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/HTML_DOM_API/Microtask_guide\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/act\",children:\"https://react.dev/reference/react/act\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://javascript.info/event-loop\",children:\"https://javascript.info/event-loop\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----b8796f5562e1--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(o,{...a})}):o(a)}return N(M);})();\n;return Component;"
        },
        "_id": "blog/queueMicroTask-in-JavaScript.mdx",
        "_raw": {
          "sourceFilePath": "blog/queueMicroTask-in-JavaScript.mdx",
          "sourceFileName": "queueMicroTask-in-JavaScript.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/queueMicroTask-in-JavaScript"
        },
        "type": "Doc",
        "slug": "/blog/queueMicroTask-in-JavaScript",
        "slugAsParams": "queueMicroTask-in-JavaScript"
      },
      "documentHash": "1740489186397",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/react-cache-in-server-components.mdx": {
      "document": {
        "title": "Cache your function computation in React Server Components\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, you will learn what a cache in React is and also analyse how it is used in [nextjs-subscription-payments example](https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*1KSCesWzRdiXjDntmXBbbg.png)\r\n\r\n### Cache\r\n\r\nCache is only for use in React Server Components. React documentation suggests to cache a function that does data fetch or complex computation\r\n\r\nThese three below examples are provided in the React documentation about cache:\r\n\r\n* [Cache an expensive computation](https://react.dev/reference/react/cache#cache-expensive-computation)\r\n    \r\n* [Share a snapshot of data](https://react.dev/reference/react/cache#take-and-share-snapshot-of-data)\r\n    \r\n* [Preload data](https://react.dev/reference/react/cache#preload-data)\r\n    \r\n\r\n> It is important that you read these usage examples and understand the common pitfalls to apply cache.\r\n\r\nRead more about [cache](https://react.dev/reference/react/cache).\r\n\r\n### Cache usage in Nextjs-Subscription-Payments\r\n\r\nIn [queries.ts in nextjs-subscription-payments](https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4), you will find the below code:\r\n\r\n```ts\r\nimport { SupabaseClient } from '@supabase/supabase-js';\r\nimport { cache } from 'react';\r\nexport const getUser = cache(async (supabase: SupabaseClient) => {\r\n const {\r\n data: { user }\r\n } = await supabase.auth.getUser();\r\n return user;\r\n});\r\n```\r\n\r\nNotice the cache applied to the arrow function above. Where is this function called though? you will find this below code in [app/page.tsx](https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12)\r\n\r\n```ts\r\nimport {\r\n getProducts,\r\n getSubscription,\r\n getUser\r\n} from '@/utils/supabase/queries';\r\n\r\nexport default async function PricingPage() {\r\n const supabase = createClient();\r\n const [user, products, subscription] = await Promise.all([\r\n getUser(supabase),\r\n getProducts(supabase),\r\n getSubscription(supabase)\r\n]);\r\n```\r\n\r\nThe usecase, [Preload data](https://react.dev/reference/react/cache#preload-data) applies here. I am going to quote what is provided in preload data usage example\r\n\r\n> When rendering Page, the component calls getUser but note that it doesn’t use the returned data.This early getUser call kicks off the asynchronous database query that occurs while Page is doing other computational work and rendering children.  \r\n> When rendering Profile, we call getUser again. If the initial getUser call has already returned and cached the user data, when Profile asks and waits for this data, it can simply read from the cache without requiring another remote procedure call. If the initial data request hasn’t been completed, preloading data in this pattern reduces delay in data-fetching.\r\n\r\nThere is one more place/file where getUser is called. You will find the below code in [app/account/page.tsx](https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15)\r\n\r\n```ts\r\nimport {\r\n getUserDetails,\r\n getSubscription,\r\n getUser\r\n} from '@/utils/supabase/queries';\r\nexport default async function Account() {\r\n const supabase = createClient();\r\n const [user, userDetails, subscription] = await Promise.all([\r\n getUser(supabase),\r\n getUserDetails(supabase),\r\n getSubscription(supabase)\r\n]);\r\n```\r\n\r\nBoth, app/page.tsx and app/account/page.tsx, are server components.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4](https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4)\r\n    \r\n2. [https://react.dev/reference/react/cache](https://react.dev/reference/react/cache)\r\n    \r\n3. [https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components](https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components)\r\n    \r\n4. [https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12](https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12)\r\n    \r\n5. [https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15](https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15)",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var b=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var s in e)c(l,s,{get:e[s],enumerable:!0})},t=(l,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!m.call(l,r)&&r!==s&&c(l,r,{get:()=>e[r],enumerable:!(a=d(e,r))||a.enumerable});return l};var f=(l,e,s)=>(s=l!=null?p(u(l)):{},t(e||!l||!l.__esModule?c(s,\"default\",{value:l,enumerable:!0}):s,l)),x=l=>t(c({},\"__esModule\",{value:!0}),l);var i=b((j,o)=>{o.exports=_jsx_runtime});var w={};g(w,{default:()=>F,frontmatter:()=>v});var n=f(i()),v={title:\"Cache your function computation in React Server Components\"};function h(l){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, you will learn what a cache in React is and also analyse how it is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4\",children:\"nextjs-subscription-payments example\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*1KSCesWzRdiXjDntmXBbbg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"cache\",children:\"Cache\"}),`\n`,(0,n.jsx)(e.p,{children:\"Cache is only for use in React Server Components. React documentation suggests to cache a function that does data fetch or complex computation\"}),`\n`,(0,n.jsx)(e.p,{children:\"These three below examples are provided in the React documentation about cache:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache#cache-expensive-computation\",children:\"Cache an expensive computation\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache#take-and-share-snapshot-of-data\",children:\"Share a snapshot of data\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache#preload-data\",children:\"Preload data\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"It is important that you read these usage examples and understand the common pitfalls to apply cache.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache\",children:\"cache\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"cache-usage-in-nextjs-subscription-payments\",children:\"Cache usage in Nextjs-Subscription-Payments\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4\",children:\"queries.ts in nextjs-subscription-payments\"}),\", you will find the below code:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" SupabaseClient \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/supabase-js'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cache \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'react'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUser \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cache\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" SupabaseClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" user \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"auth\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getUser\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" user\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Notice the cache applied to the arrow function above. Where is this function called though? you will find this below code in \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12\",children:\"app/page.tsx\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getProducts\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getSubscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUser\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/utils/supabase/queries'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" PricingPage\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"user\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" products\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" subscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Promise\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"all\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"([\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUser\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getProducts\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getSubscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]);\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The usecase, \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache#preload-data\",children:\"Preload data\"}),\" applies here. I am going to quote what is provided in preload data usage example\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"When rendering Page, the component calls getUser but note that it doesn\\u2019t use the returned data.This early getUser call kicks off the asynchronous database query that occurs while Page is doing other computational work and rendering children.\",(0,n.jsx)(e.br,{}),`\n`,\"When rendering Profile, we call getUser again. If the initial getUser call has already returned and cached the user data, when Profile asks and waits for this data, it can simply read from the cache without requiring another remote procedure call. If the initial data request hasn\\u2019t been completed, preloading data in this pattern reduces delay in data-fetching.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"There is one more place/file where getUser is called. You will find the below code in \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15\",children:\"app/account/page.tsx\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUserDetails\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getSubscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUser\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/utils/supabase/queries'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Account\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" supabase \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createClient\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"user\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" userDetails\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" subscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Promise\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"all\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"([\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUser\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getUserDetails\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getSubscription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"supabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]);\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Both, app/page.tsx and app/account/page.tsx, are server components.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4\",children:\"https://github.com/vercel/nextjs-subscription-payments/blob/main/utils/supabase/queries.ts#L4\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/cache\",children:\"https://react.dev/reference/react/cache\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components\",children:\"https://react.dev/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12\",children:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/page.tsx#L12\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15\",children:\"https://github.com/vercel/nextjs-subscription-payments/blob/1623fb9d1820637ba55cd0af1012bb85237118b8/app/account/page.tsx#L15\"})}),`\n`]}),`\n`]})]})}function F(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(h,{...l})}):h(l)}return x(w);})();\n;return Component;"
        },
        "_id": "blog/react-cache-in-server-components.mdx",
        "_raw": {
          "sourceFilePath": "blog/react-cache-in-server-components.mdx",
          "sourceFileName": "react-cache-in-server-components.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/react-cache-in-server-components"
        },
        "type": "Doc",
        "slug": "/blog/react-cache-in-server-components",
        "slugAsParams": "react-cache-in-server-components"
      },
      "documentHash": "1740489186399",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/react-scan-options-validate.mdx": {
      "document": {
        "title": "Here’s how the options are validated in react-scan source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze how the options you pass into scan function are validated.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*lQyYHoMNNxmuEZvCvsQiyw.png)\r\n\r\n# **Options**\r\n\r\nIn the example provided in react-scan repository, you will find this below code in [aidenybai/react-scan/examples/sierpinski/src/index.jsx](https://github.com/aidenybai/react-scan/blob/main/examples/sierpinski/src/index.jsx).\r\n\r\n```javascript\r\n...\r\nimport { scan } from 'react-scan';\r\n...\r\nscan({\r\n  enabled: true,\r\n  // report: true,\r\n  // log: true,\r\n  // clearLog: true,\r\n  // playSound: true,\r\n  // renderCountThreshold: 100,\r\n  alwaysShowLabels: true,\r\n  runInProduction: true,\r\n});\r\n```\r\n\r\nThe object passed as a parameter to the scan function is what we analyze to understand how its validated.\r\n\r\nRead more about [Options in react-scan](https://github.com/aidenybai/react-scan/tree/main?tab=readme-ov-file#api-reference).\r\n\r\n# **validateOptions**\r\n\r\nvalidateOptions has almost 100 lines of code at the time of writing this article.\r\n\r\nLet’s review the main concepts.\r\n\r\n```javascript\r\nconst validateOptions = (options: Partial<Options>): Partial<Options> => {\r\n  const errors: Array<string> = [];\r\n  const validOptions: Partial<Options> = {};\r\n```\r\n\r\nThis is how the function is defined and errors is an array of string.\r\n\r\n```javascript\r\n for (const key in options) {\r\n    if (!isOptionKey(key)) continue;\r\n\r\n    const value = options[key];\r\n    switch (key) {\r\n```\r\n\r\nkey in options is looped through and there is a switch case used to validate options.\r\n\r\n## **Boolean validation**\r\n\r\n```javascript\r\n case 'enabled':\r\n// case 'includeChildren':\r\ncase 'log':\r\ncase 'showToolbar':\r\n// case 'report':\r\n// case 'alwaysShowLabels':\r\ncase 'dangerouslyForceRunInProduction':\r\n  if (typeof value !== 'boolean') {\r\n    errors.push(`- ${key} must be a boolean. Got \"${value}\"`);\r\n  } else {\r\n    validOptions[key] = value;\r\n  }\r\n  break;\r\n```\r\n\r\nerrors array is pushed with some error message specific to boolean check.\r\n\r\n## **Function validation**\r\n\r\n```javascript\r\ncase 'onCommitStart':\r\n  if (typeof value !== 'function') {\r\n    errors.push(`- ${key} must be a function. Got \"${value}\"`);\r\n  } else {\r\n    validOptions.onCommitStart = value as () => void;\r\n  }\r\n  break;\r\ncase 'onCommitFinish':\r\n  if (typeof value !== 'function') {\r\n    errors.push(`- ${key} must be a function. Got \"${value}\"`);\r\n  } else {\r\n    validOptions.onCommitFinish = value as () => void;\r\n  }\r\n  break;\r\ncase 'onRender':\r\n  if (typeof value !== 'function') {\r\n    errors.push(`- ${key} must be a function. Got \"${value}\"`);\r\n  } else {\r\n    validOptions.onRender = value as (\r\n      fiber: Fiber,\r\n      renders: Array<Render>,\r\n    ) => void;\r\n  }\r\n  break;\r\n```\r\n\r\nThese checks validate that options such as onCommitStart, onCommitFinish, onRender are functions otherwise, respective errors are pushed into the array.\r\n\r\n## **Default case**\r\n\r\n```javascript\r\ndefault:\r\n        errors.push(`- Unknown option \"${key}\"`);\r\n```\r\n\r\nBy default, if you pass an option that react-scan does not support, you will see this error in your CLI\r\n\r\n# **About me:**\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com/). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/aidenybai/react-scan/blob/main/examples/sierpinski/src/index.jsx](https://github.com/aidenybai/react-scan/blob/main/examples/sierpinski/src/index.jsx)\r\n    \r\n2. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L399](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L399)\r\n    \r\n3. [https://github.com/aidenybai/react-scan?tab=readme-ov-file#api-reference](https://github.com/aidenybai/react-scan?tab=readme-ov-file#api-reference)\r\n    \r\n4. [https://github.com/aidenybai/react-scan/tree/main?tab=readme-ov-file#api-reference](https://github.com/aidenybai/react-scan/tree/main?tab=readme-ov-file#api-reference)",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},o=(n,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(n,r)&&r!==s&&c(n,r,{get:()=>e[r],enumerable:!(a=p(e,r))||a.enumerable});return n};var b=(n,e,s)=>(s=n!=null?h(m(n)):{},o(e||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),v=n=>o(c({},\"__esModule\",{value:!0}),n);var i=g((j,F)=>{F.exports=_jsx_runtime});var k={};f(k,{default:()=>d,frontmatter:()=>N});var l=b(i()),N={title:\"Here\\u2019s how the options are validated in react-scan source code.\"};function t(n){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:\"In this article, we analyze how the options you pass into scan function are validated.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*lQyYHoMNNxmuEZvCvsQiyw.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h1,{id:\"options\",children:(0,l.jsx)(e.strong,{children:\"Options\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"In the example provided in react-scan repository, you will find this below code in \",(0,l.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/examples/sierpinski/src/index.jsx\",children:\"aidenybai/react-scan/examples/sierpinski/src/index.jsx\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"...\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" scan \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'react-scan'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"...\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"scan\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  enabled\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" report: true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" log: true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" clearLog: true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" playSound: true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" renderCountThreshold: 100,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  alwaysShowLabels\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  runInProduction\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"The object passed as a parameter to the scan function is what we analyze to understand how its validated.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"Read more about \",(0,l.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/tree/main?tab=readme-ov-file#api-reference\",children:\"Options in react-scan\"}),\".\"]}),`\n`,(0,l.jsx)(e.h1,{id:\"validateoptions\",children:(0,l.jsx)(e.strong,{children:\"validateOptions\"})}),`\n`,(0,l.jsx)(e.p,{children:\"validateOptions has almost 100 lines of code at the time of writing this article.\"}),`\n`,(0,l.jsx)(e.p,{children:\"Let\\u2019s review the main concepts.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" validateOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Partial\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Partial\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" errors\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [];\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" validOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Partial\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {};\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"This is how the function is defined and errors is an array of string.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" for\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" key \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"in\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isOptionKey\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" continue;\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"];\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    switch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"key in options is looped through and there is a switch case used to validate options.\"}),`\n`,(0,l.jsx)(e.h2,{id:\"boolean-validation\",children:(0,l.jsx)(e.strong,{children:\"Boolean validation\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'enabled'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" case 'includeChildren':\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'log'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'showToolbar'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" case 'report':\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" case 'alwaysShowLabels':\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'dangerouslyForceRunInProduction'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'boolean'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    errors\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"push\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`- ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'} must be a boolean. Got \"${'}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'}\"`'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    validOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  break;\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"errors array is pushed with some error message specific to boolean check.\"}),`\n`,(0,l.jsx)(e.h2,{id:\"function-validation\",children:(0,l.jsx)(e.strong,{children:\"Function validation\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'onCommitStart'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'function'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    errors\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"push\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`- ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'} must be a function. Got \"${'}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'}\"`'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    validOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"onCommitStart \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  break;\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'onCommitFinish'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'function'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    errors\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"push\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`- ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'} must be a function. Got \"${'}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'}\"`'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    validOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"onCommitFinish \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  break;\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'onRender'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'function'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    errors\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"push\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`- ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'} must be a function. Got \"${'}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'}\"`'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    validOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"onRender \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      fiber\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Fiber\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      renders\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Array\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Render\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    )\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  break;\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"These checks validate that options such as onCommitStart, onCommitFinish, onRender are functions otherwise, respective errors are pushed into the array.\"}),`\n`,(0,l.jsx)(e.h2,{id:\"default-case\",children:(0,l.jsx)(e.strong,{children:\"Default case\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"default\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        errors\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"push\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'`- Unknown option \"${'}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"key\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'}\"`'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"By default, if you pass an option that react-scan does not support, you will see this error in your CLI\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Hey, my name is \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"references\",children:(0,l.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/examples/sierpinski/src/index.jsx\",children:\"https://github.com/aidenybai/react-scan/blob/main/examples/sierpinski/src/index.jsx\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L399\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L399\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan?tab=readme-ov-file#api-reference\",children:\"https://github.com/aidenybai/react-scan?tab=readme-ov-file#api-reference\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/tree/main?tab=readme-ov-file#api-reference\",children:\"https://github.com/aidenybai/react-scan/tree/main?tab=readme-ov-file#api-reference\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return v(k);})();\n;return Component;"
        },
        "_id": "blog/react-scan-options-validate.mdx",
        "_raw": {
          "sourceFilePath": "blog/react-scan-options-validate.mdx",
          "sourceFileName": "react-scan-options-validate.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/react-scan-options-validate"
        },
        "type": "Doc",
        "slug": "/blog/react-scan-options-validate",
        "slugAsParams": "react-scan-options-validate"
      },
      "documentHash": "1740996959807",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/react-scan-source-code.mdx": {
      "document": {
        "title": "DOMParser() usage in react-scan source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI found [DOMParser](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser) in [react-scan source code](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L54) as shown below.\r\n\r\n```javascript\r\nconst iconSprite = new DOMParser().parseFromString(\r\n    ICONS,\r\n    'image/svg+xml',\r\n  ).documentElement;\r\n```\r\n\r\nThis picked from [line 54 in packages/scan/src/core/index.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L54). In this article, we understand\r\n\r\n* What is DOMParser?\r\n    \r\n* How it is used in react-scan?\r\n    \r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*CGQtnCtVP4TWBVsX7q0pKw.png)\r\n\r\n# **What is DOMParser?**\r\n\r\nThe `DOMParser` interface provides the ability to parse [XML](https://developer.mozilla.org/en-US/docs/Glossary/XML) or [HTML](https://developer.mozilla.org/en-US/docs/Glossary/HTML) source code from a string into a DOM [`Document`](https://developer.mozilla.org/en-US/docs/Web/API/Document).\r\n\r\nYou can perform the opposite operation — converting a DOM tree into XML or HTML source — using the [`XMLSerializer`](https://developer.mozilla.org/en-US/docs/Web/API/XMLSerializer) interface.\r\n\r\nIn the case of an HTML document, you can also replace portions of the DOM with new DOM trees built from HTML by setting the value of the [`Element.innerHTML`](https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML) and [`outerHTML`](https://developer.mozilla.org/en-US/docs/Web/API/Element/outerHTML) properties. These properties can also be read to fetch HTML fragments corresponding to the corresponding DOM subtree.\r\n\r\nNote that [`XMLHttpRequest`](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) can parse XML and HTML directly from a URL-addressable resource, returning a `Document` in its [`response`](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/response) property.\r\n\r\nRead more about [DOMParser](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser).\r\n\r\n# **How it is used in react-scan?**\r\n\r\nDOMParser is used in a function called [initRootContainer](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L39).\r\n\r\n```javascript\r\nconst initRootContainer = (): RootContainer => {\r\n  ...\r\n  const fragment = document.createDocumentFragment();\r\n  const cssStyles = document.createElement('style');\r\n  cssStyles.textContent = styles;\r\n\r\n  const iconSprite = new DOMParser().parseFromString(\r\n    ICONS,\r\n    'image/svg+xml',\r\n  ).documentElement;\r\n\r\n  fragment.appendChild(iconSprite);\r\n  ...\r\n  return { rootContainer, shadowRoot };\r\n};\r\n```\r\n\r\niconSprite is assigned a value returned by DOMParser.documentElement. `parseFromString` accepts ICONS that is imported from [packages/scan/src/web/assets/svgs/svgs.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/assets/svgs/svgs.ts).\r\n\r\nNow then, this [svgs.ts has ICONS](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/assets/svgs/svgs.ts) variable that contains svg as string as shown below\r\n\r\n```javascript\r\nexport const ICONS = `\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">\r\n  <symbol id=\"icon-inspect\" viewBox=\"0 0 24 24\" fill=\"none\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n    <path d=\"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z\"/>\r\n    <path d=\"M5 3a2 2 0 0 0-2 2\"/>\r\n    <path d=\"M19 3a2 2 0 0 1 2 2\"/>\r\n    ...\r\n```\r\n\r\nThis below code snippet converts to:\r\n\r\n```javascript\r\nnew DOMParser().parseFromString(\r\n  ICONS,\r\n  'image/svg+xml',\r\n)\r\n```\r\n\r\nThis string is converted into a DOM document hence you have .documentElement that is assigned to [iconSprite](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L54).\r\n\r\n# **About me:**\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com/). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://developer.mozilla.org/en-US/docs/Web/API/DOMParser](https://developer.mozilla.org/en-US/docs/Web/API/DOMParser)\r\n    \r\n2. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L54](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L54)",
          "code": "var Component=(()=>{var p=Object.create;var a=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),b=(r,e)=>{for(var l in e)a(r,l,{get:e[l],enumerable:!0})},t=(r,e,l,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of m(e))!g.call(r,s)&&s!==l&&a(r,s,{get:()=>e[s],enumerable:!(c=F(e,s))||c.enumerable});return r};var f=(r,e,l)=>(l=r!=null?p(y(r)):{},t(e||!r||!r.__esModule?a(l,\"default\",{value:r,enumerable:!0}):l,r)),v=r=>t(a({},\"__esModule\",{value:!0}),r);var i=u((S,o)=>{o.exports=_jsx_runtime});var N={};b(N,{default:()=>h,frontmatter:()=>M});var n=f(i()),M={title:\"DOMParser() usage in react-scan source code.\"};function d(r){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I found \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\",children:\"DOMParser\"}),\" in \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L54\",children:\"react-scan source code\"}),\" as shown below.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" iconSprite \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" DOMParser\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"parseFromString\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    ICONS\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    'image/svg+xml'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ).\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"documentElement\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L54\",children:\"line 54 in packages/scan/src/core/index.ts\"}),\". In this article, we understand\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What is DOMParser?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"How it is used in react-scan?\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*CGQtnCtVP4TWBVsX7q0pKw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"what-is-domparser\",children:(0,n.jsx)(e.strong,{children:\"What is DOMParser?\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"DOMParser\"}),\" interface provides the ability to parse \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Glossary/XML\",children:\"XML\"}),\" or \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Glossary/HTML\",children:\"HTML\"}),\" source code from a string into a DOM \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Document\",children:(0,n.jsx)(e.code,{children:\"Document\"})}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can perform the opposite operation \\u2014 converting a DOM tree into XML or HTML source \\u2014 using the \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/XMLSerializer\",children:(0,n.jsx)(e.code,{children:\"XMLSerializer\"})}),\" interface.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the case of an HTML document, you can also replace portions of the DOM with new DOM trees built from HTML by setting the value of the \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Element/innerHTML\",children:(0,n.jsx)(e.code,{children:\"Element.innerHTML\"})}),\" and \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Element/outerHTML\",children:(0,n.jsx)(e.code,{children:\"outerHTML\"})}),\" properties. These properties can also be read to fetch HTML fragments corresponding to the corresponding DOM subtree.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Note that \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\",children:(0,n.jsx)(e.code,{children:\"XMLHttpRequest\"})}),\" can parse XML and HTML directly from a URL-addressable resource, returning a \",(0,n.jsx)(e.code,{children:\"Document\"}),\" in its \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/response\",children:(0,n.jsx)(e.code,{children:\"response\"})}),\" property.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\",children:\"DOMParser\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"how-it-is-used-in-react-scan\",children:(0,n.jsx)(e.strong,{children:\"How it is used in react-scan?\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"DOMParser is used in a function called \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L39\",children:\"initRootContainer\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" initRootContainer\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ():\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" RootContainer\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ...\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fragment \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" document\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createDocumentFragment\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cssStyles \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" document\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createElement\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'style'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  cssStyles\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"textContent \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" styles\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" iconSprite \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" DOMParser\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"parseFromString\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    ICONS\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    'image/svg+xml'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ).\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"documentElement\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  fragment\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"appendChild\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"iconSprite\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ...\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" rootContainer\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" shadowRoot \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"iconSprite is assigned a value returned by DOMParser.documentElement. \",(0,n.jsx)(e.code,{children:\"parseFromString\"}),\" accepts ICONS that is imported from \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/assets/svgs/svgs.ts\",children:\"packages/scan/src/web/assets/svgs/svgs.ts\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Now then, this \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/web/assets/svgs/svgs.ts\",children:\"svgs.ts has ICONS\"}),\" variable that contains svg as string as shown below\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ICONS \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" `\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'<svg xmlns=\"http://www.w3.org/2000/svg\" style=\"display: none;\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'  <symbol id=\"icon-inspect\" viewBox=\"0 0 24 24\" fill=\"none\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    <path d=\"M12.034 12.681a.498.498 0 0 1 .647-.647l9 3.5a.5.5 0 0 1-.033.943l-3.444 1.068a1 1 0 0 0-.66.66l-1.067 3.443a.5.5 0 0 1-.943.033z\"/>'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    <path d=\"M5 3a2 2 0 0 0-2 2\"/>'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'    <path d=\"M19 3a2 2 0 0 1 2 2\"/>'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ...\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This below code snippet converts to:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" DOMParser\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"parseFromString\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  ICONS\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  'image/svg+xml'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This string is converted into a DOM document hence you have .documentElement that is assigned to \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L54\",children:\"iconSprite\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L54\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L54\"})}),`\n`]}),`\n`]})]})}function h(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(d,{...r})}):d(r)}return v(N);})();\n;return Component;"
        },
        "_id": "blog/react-scan-source-code.mdx",
        "_raw": {
          "sourceFilePath": "blog/react-scan-source-code.mdx",
          "sourceFileName": "react-scan-source-code.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/react-scan-source-code"
        },
        "type": "Doc",
        "slug": "/blog/react-scan-source-code",
        "slugAsParams": "react-scan-source-code"
      },
      "documentHash": "1741249312628",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/ReactDOMunstablebatchedUpdates-in-zustand.mdx": {
      "document": {
        "title": "ReactDOM.unstable_batchedUpdates in Zustand testcase.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will look into the use of `ReactDOM.unstable_batchedUpdates` within a test case, specifically in Zustand, a popular state management library for React. We'll also break down the test and explain how batched updates enhance performance in React by minimizing unnecessary re-renders.\r\n\r\n# **Understanding the Test Case**\r\n\r\nHere is the test case we’ll be examining:\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*LLesFA1QatYEPErFCmQ_oA.png)\r\n\r\nThis test case is written to verify that batched updates can be applied when using Zustand with React’s rendering system.\r\n\r\n# **Breaking Down the Test Case**\r\n\r\n**1\\. Zustand Store Setup:** The first step involves creating a Zustand store using the `create` function:\r\n\r\n```plaintext\r\nconst useBoundStore = create<CounterState>(\r\n  (set) => ({   \r\n  count: 0,   \r\n  inc: () => set((state) => ({ count: state.count + 1 })), }))\r\n```\r\n\r\nHere, the store maintains a simple state with a `count` property initialized to 0 and an `inc` function to increment the count. The `set` function is Zustand’s way of updating the state, similar to `setState` in React.\r\n\r\n**2\\. Counter Component:** The `Counter` component uses the `useBoundStore` to retrieve the current `count` and the `inc` function:\r\n\r\n```plaintext\r\nconst { count, inc } = useBoundStore()\r\n```\r\n\r\nThis component subscribes to the store’s state, and any changes to `count` will cause it to re-render with the new value.\r\n\r\n**3\\. Using** `ReactDOM.unstable_batchedUpdates` **for Performance:** Inside the `useEffect` hook, the `inc` function is called twice within a `ReactDOM.unstable_batchedUpdates` block:\r\n\r\n```plaintext\r\nuseEffect(() => {   \r\n  ReactDOM.unstable_batchedUpdates(() => {     \r\n    inc()     \r\n    inc()   \r\n  }) \r\n}, [inc])\r\n```\r\n\r\nThis is where the magic happens. Normally, each call to `inc()` would trigger a separate update, causing two renders. However, by wrapping these calls in `unstable_batchedUpdates`, React is able to process them together in a single update, resulting in only one render. This optimizes performance by reducing the number of renders, which is especially useful in performance-critical applications.\r\n\r\n**4\\. Rendering the Component and Asserting the Result** Finally, the component is rendered, and the test waits for the `count` to reach 2:\r\n\r\n```plaintext\r\nconst { findByText } = render(\r\n  <>     \r\n    <Counter />   \r\n  </>, \r\n)  \r\n\r\nawait findByText('count: 2')\r\n```\r\n\r\nThis assertion ensures that after two increments, the `count` is correctly updated and rendered as \"count: 2\".\r\n\r\n# **What is** `ReactDOM.unstable_batchedUpdates`?\r\n\r\n`ReactDOM.unstable_batchedUpdates` is a method provided by React that allows multiple state updates to be processed in a single render cycle. By default, React batches updates triggered inside event handlers (for example, click event), meaning that if you update multiple states in response to a user interaction, React will render the component only once. However, outside of event handlers (like within `setTimeout` or `useEffect`), updates are not batched automatically.\r\n\r\nBut this has changed after React 18. Below are the screenshots picked from [react.dev](https://react.dev/blog/2022/03/08/react-18-upgrade-guide#automatic-batching)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*lG7738BQKryZzAyAK3p6UQ.png)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*yJylBoQho0Dqb3JXkFPfSA.png)\r\n\r\nKeep in mind, [documentation](https://react.dev/blog/2022/03/08/react-18-upgrade-guide#automatic-batching) suggests that updates inside of timeouts, promises, native event handlers or any other event will batch the same way as updates inside of React events. But in this [Zustand’s test case](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L166), batch updates are applied inside ``useEffect`.``This is where `unstable_batchedUpdates` becomes useful. It forces React to group multiple state updates into a single render, even outside of event-driven contexts, minimizing re-renders and improving performance.\r\n\r\n**Example:**\r\n\r\nWithout `unstable_batchedUpdates`:\r\n\r\n```plaintext\r\ninc()  // triggers one render\r\ninc()  // triggers another render\r\n```\r\n\r\nWith `unstable_batchedUpdates`:\r\n\r\n```plaintext\r\nReactDOM.unstable_batchedUpdates(() => {\r\n  inc()  // triggers only one render for both updates\r\n  inc()\r\n})\r\n```\r\n\r\nThe method is labeled “unstable” because it’s not part of React’s official public API, but it is still widely used in the community for performance optimizations. It may become more stable or integrated as part of React’s new concurrent rendering capabilities in the future.\r\n\r\nFun fact: Zustand’s 4.5.5 release uses the version — 19.0.0-rc.0\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*DeB6dAYRCXAHkZNsYJbZtg.png)\r\n\r\n# **Why Use** `ReactDOM.unstable_batchedUpdates` in Zustand?\r\n\r\nZustand is a lightweight state management library that works with React’s component lifecycle. Although Zustand efficiently handles state updates, React’s reactivity system will trigger renders every time the state changes. In scenarios where multiple state changes occur in a short period, using `ReactDOM.unstable_batchedUpdates` can prevent multiple re-renders and batch the updates, allowing for a smoother, more efficient user experience.\r\n\r\nIn the test case provided, calling `inc` twice within a batched update ensures that the `count` only updates once, making it more efficient compared to running each update individually.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L175C7-L175C39](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L175C7-L175C39)\r\n    \r\n2. [https://dev.to/devmoustafa97/do-you-know-unstablebatchedupdates-in-react-enforce-batching-state-update-5cn2](https://dev.to/devmoustafa97/do-you-know-unstablebatchedupdates-in-react-enforce-batching-state-update-5cn2)\r\n    \r\n3. [https://dev.to/jackbuchananconroy/react-18-what-s-changed-automatic-batching-13ec](https://dev.to/jackbuchananconroy/react-18-what-s-changed-automatic-batching-13ec)\r\n    \r\n4. [https://react.dev/blog/2022/03/08/react-18-upgrade-guide#automatic-batching](https://react.dev/blog/2022/03/08/react-18-upgrade-guide#automatic-batching)\r\n    \r\n5. [https://github.com/pmndrs/zustand/blob/v4.5.5/package.json#L246C4-L247C32](https://github.com/pmndrs/zustand/blob/v4.5.5/package.json#L246C4-L247C32)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----165300ceea8c--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),y=(n,e)=>{for(var a in e)c(n,a,{get:e[a],enumerable:!0})},s=(n,e,a,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!b.call(n,i)&&i!==a&&c(n,i,{get:()=>e[i],enumerable:!(r=u(e,i))||r.enumerable});return n};var w=(n,e,a)=>(a=n!=null?p(g(n)):{},s(e||!n||!n.__esModule?c(a,\"default\",{value:n,enumerable:!0}):a,n)),v=n=>s(c({},\"__esModule\",{value:!0}),n);var h=f((N,d)=>{d.exports=_jsx_runtime});var k={};y(k,{default:()=>o,frontmatter:()=>x});var t=w(h()),x={title:\"ReactDOM.unstable_batchedUpdates in Zustand testcase.\"};function l(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[\"In this article, we will look into the use of \",(0,t.jsx)(e.code,{children:\"ReactDOM.unstable_batchedUpdates\"}),\" within a test case, specifically in Zustand, a popular state management library for React. We'll also break down the test and explain how batched updates enhance performance in React by minimizing unnecessary re-renders.\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"understanding-the-test-case\",children:(0,t.jsx)(e.strong,{children:\"Understanding the Test Case\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Here is the test case we\\u2019ll be examining:\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*LLesFA1QatYEPErFCmQ_oA.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:\"This test case is written to verify that batched updates can be applied when using Zustand with React\\u2019s rendering system.\"}),`\n`,(0,t.jsx)(e.h1,{id:\"breaking-down-the-test-case\",children:(0,t.jsx)(e.strong,{children:\"Breaking Down the Test Case\"})}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"1. Zustand Store Setup:\"}),\" The first step involves creating a Zustand store using the \",(0,t.jsx)(e.code,{children:\"create\"}),\" function:\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"const useBoundStore = create<CounterState>(\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  (set) => ({   \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  count: 0,   \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  inc: () => set((state) => ({ count: state.count + 1 })), }))\"})})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Here, the store maintains a simple state with a \",(0,t.jsx)(e.code,{children:\"count\"}),\" property initialized to 0 and an \",(0,t.jsx)(e.code,{children:\"inc\"}),\" function to increment the count. The \",(0,t.jsx)(e.code,{children:\"set\"}),\" function is Zustand\\u2019s way of updating the state, similar to \",(0,t.jsx)(e.code,{children:\"setState\"}),\" in React.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"2. Counter Component:\"}),\" The \",(0,t.jsx)(e.code,{children:\"Counter\"}),\" component uses the \",(0,t.jsx)(e.code,{children:\"useBoundStore\"}),\" to retrieve the current \",(0,t.jsx)(e.code,{children:\"count\"}),\" and the \",(0,t.jsx)(e.code,{children:\"inc\"}),\" function:\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"const { count, inc } = useBoundStore()\"})})})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"This component subscribes to the store\\u2019s state, and any changes to \",(0,t.jsx)(e.code,{children:\"count\"}),\" will cause it to re-render with the new value.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"3. Using\"}),\" \",(0,t.jsx)(e.code,{children:\"ReactDOM.unstable_batchedUpdates\"}),\" \",(0,t.jsx)(e.strong,{children:\"for Performance:\"}),\" Inside the \",(0,t.jsx)(e.code,{children:\"useEffect\"}),\" hook, the \",(0,t.jsx)(e.code,{children:\"inc\"}),\" function is called twice within a \",(0,t.jsx)(e.code,{children:\"ReactDOM.unstable_batchedUpdates\"}),\" block:\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"useEffect(() => {   \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  ReactDOM.unstable_batchedUpdates(() => {     \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"    inc()     \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"    inc()   \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  }) \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"}, [inc])\"})})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"This is where the magic happens. Normally, each call to \",(0,t.jsx)(e.code,{children:\"inc()\"}),\" would trigger a separate update, causing two renders. However, by wrapping these calls in \",(0,t.jsx)(e.code,{children:\"unstable_batchedUpdates\"}),\", React is able to process them together in a single update, resulting in only one render. This optimizes performance by reducing the number of renders, which is especially useful in performance-critical applications.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:\"4. Rendering the Component and Asserting the Result\"}),\" Finally, the component is rendered, and the test waits for the \",(0,t.jsx)(e.code,{children:\"count\"}),\" to reach 2:\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"const { findByText } = render(\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  <>     \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"    <Counter />   \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  </>, \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\")  \"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"await findByText('count: 2')\"})})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"This assertion ensures that after two increments, the \",(0,t.jsx)(e.code,{children:\"count\"}),' is correctly updated and rendered as \"count: 2\".']}),`\n`,(0,t.jsxs)(e.h1,{id:\"what-is-reactdomunstable_batchedupdates\",children:[(0,t.jsx)(e.strong,{children:\"What is\"}),\" \",(0,t.jsx)(e.code,{children:\"ReactDOM.unstable_batchedUpdates\"}),\"?\"]}),`\n`,(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:\"ReactDOM.unstable_batchedUpdates\"}),\" is a method provided by React that allows multiple state updates to be processed in a single render cycle. By default, React batches updates triggered inside event handlers (for example, click event), meaning that if you update multiple states in response to a user interaction, React will render the component only once. However, outside of event handlers (like within \",(0,t.jsx)(e.code,{children:\"setTimeout\"}),\" or \",(0,t.jsx)(e.code,{children:\"useEffect\"}),\"), updates are not batched automatically.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"But this has changed after React 18. Below are the screenshots picked from \",(0,t.jsx)(e.a,{href:\"https://react.dev/blog/2022/03/08/react-18-upgrade-guide#automatic-batching\",children:\"react.dev\"})]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*lG7738BQKryZzAyAK3p6UQ.png\",alt:\"\"})}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*yJylBoQho0Dqb3JXkFPfSA.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Keep in mind, \",(0,t.jsx)(e.a,{href:\"https://react.dev/blog/2022/03/08/react-18-upgrade-guide#automatic-batching\",children:\"documentation\"}),\" suggests that updates inside of timeouts, promises, native event handlers or any other event will batch the same way as updates inside of React events. But in this \",(0,t.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L166\",children:\"Zustand\\u2019s test case\"}),\", batch updates are applied inside \",(0,t.jsx)(e.code,{children:\"useEffect`.\"}),\"This is where \",(0,t.jsx)(e.code,{children:\"unstable_batchedUpdates\"}),\" becomes useful. It forces React to group multiple state updates into a single render, even outside of event-driven contexts, minimizing re-renders and improving performance.\"]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:\"Example:\"})}),`\n`,(0,t.jsxs)(e.p,{children:[\"Without \",(0,t.jsx)(e.code,{children:\"unstable_batchedUpdates\"}),\":\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"inc()  // triggers one render\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"inc()  // triggers another render\"})})]})})}),`\n`,(0,t.jsxs)(e.p,{children:[\"With \",(0,t.jsx)(e.code,{children:\"unstable_batchedUpdates\"}),\":\"]}),`\n`,(0,t.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,t.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,t.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"ReactDOM.unstable_batchedUpdates(() => {\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  inc()  // triggers only one render for both updates\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"  inc()\"})}),`\n`,(0,t.jsx)(e.span,{className:\"line\",children:(0,t.jsx)(e.span,{children:\"})\"})})]})})}),`\n`,(0,t.jsx)(e.p,{children:\"The method is labeled \\u201Cunstable\\u201D because it\\u2019s not part of React\\u2019s official public API, but it is still widely used in the community for performance optimizations. It may become more stable or integrated as part of React\\u2019s new concurrent rendering capabilities in the future.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Fun fact: Zustand\\u2019s 4.5.5 release uses the version \\u2014 19.0.0-rc.0\"}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*DeB6dAYRCXAHkZNsYJbZtg.png\",alt:\"\"})}),`\n`,(0,t.jsxs)(e.h1,{id:\"why-use-reactdomunstable_batchedupdates-in-zustand\",children:[(0,t.jsx)(e.strong,{children:\"Why Use\"}),\" \",(0,t.jsx)(e.code,{children:\"ReactDOM.unstable_batchedUpdates\"}),\" in Zustand?\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Zustand is a lightweight state management library that works with React\\u2019s component lifecycle. Although Zustand efficiently handles state updates, React\\u2019s reactivity system will trigger renders every time the state changes. In scenarios where multiple state changes occur in a short period, using \",(0,t.jsx)(e.code,{children:\"ReactDOM.unstable_batchedUpdates\"}),\" can prevent multiple re-renders and batch the updates, allowing for a smoother, more efficient user experience.\"]}),`\n`,(0,t.jsxs)(e.p,{children:[\"In the test case provided, calling \",(0,t.jsx)(e.code,{children:\"inc\"}),\" twice within a batched update ensures that the \",(0,t.jsx)(e.code,{children:\"count\"}),\" only updates once, making it more efficient compared to running each update individually.\"]}),`\n`,(0,t.jsx)(e.h1,{id:\"about-me\",children:(0,t.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,t.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,t.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,t.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,t.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,t.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,t.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,t.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,t.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,t.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,t.jsx)(e.h1,{id:\"references\",children:(0,t.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L175C7-L175C39\",children:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L175C7-L175C39\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://dev.to/devmoustafa97/do-you-know-unstablebatchedupdates-in-react-enforce-batching-state-update-5cn2\",children:\"https://dev.to/devmoustafa97/do-you-know-unstablebatchedupdates-in-react-enforce-batching-state-update-5cn2\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://dev.to/jackbuchananconroy/react-18-what-s-changed-automatic-batching-13ec\",children:\"https://dev.to/jackbuchananconroy/react-18-what-s-changed-automatic-batching-13ec\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://react.dev/blog/2022/03/08/react-18-upgrade-guide#automatic-batching\",children:\"https://react.dev/blog/2022/03/08/react-18-upgrade-guide#automatic-batching\"})}),`\n`]}),`\n`,(0,t.jsxs)(e.li,{children:[`\n`,(0,t.jsx)(e.p,{children:(0,t.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/package.json#L246C4-L247C32\",children:\"https://github.com/pmndrs/zustand/blob/v4.5.5/package.json#L246C4-L247C32\"})}),`\n`]}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:(0,t.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----165300ceea8c--------------------------------\",children:[(0,t.jsx)(e.br,{}),`\n`]})})]})}function o(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}return v(k);})();\n;return Component;"
        },
        "_id": "blog/ReactDOMunstablebatchedUpdates-in-zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/ReactDOMunstablebatchedUpdates-in-zustand.mdx",
          "sourceFileName": "ReactDOMunstablebatchedUpdates-in-zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/ReactDOMunstablebatchedUpdates-in-zustand"
        },
        "type": "Doc",
        "slug": "/blog/ReactDOMunstablebatchedUpdates-in-zustand",
        "slugAsParams": "ReactDOMunstablebatchedUpdates-in-zustand"
      },
      "documentHash": "1740489186215",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/reactportal-type-in-tiptap.mdx": {
      "document": {
        "title": "ReactPortal type in TipTap source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review the ReactPortal type in [TipTap source code](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/Editor.ts#L2).\r\n\r\nThe below code is picked from [tiptap/packages/react/src/Editor.js](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/Editor.ts#L2)\r\n\r\n```js\r\nimport { Editor } from '@tiptap/core'\r\nimport { ReactPortal } from 'react'\r\n\r\nimport { ReactRenderer } from './ReactRenderer.js'\r\n\r\nexport type EditorWithContentComponent = Editor & { contentComponent?: ContentComponent | null }\r\nexport type ContentComponent = {\r\n  setRenderer(id: string, renderer: ReactRenderer): void;\r\n  removeRenderer(id: string): void;\r\n  subscribe: (callback: () => void) => () => void;\r\n  getSnapshot: () => Record<string, ReactPortal>;\r\n  getServerSnapshot: () => Record<string, ReactPortal>;\r\n}\r\n```\r\n\r\n`ReactPortal` is used as a type here in getSnapshot. This getSnapshot function is supposed to return a value of type `Record<string, ReactPortal>`. Similar declaration is found for `getServerSnapshot`.\r\n\r\nI have seen this “portal” related code in the wild before but I could not recall. When I googled “Portal in React”, I found [createPortal in React documentation](https://react.dev/reference/react-dom/createPortal).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:1400/1*ZoZDVuHpW26xd3KMjYHd8A.png)\r\n\r\nBut is createPortal related to ReactPortal type? what is `createPortal` anyway? createPortal lets you render some children into a different part of the DOM.\r\n\r\nBelow is a simple example picked from React docs.\r\n\r\n```js\r\nimport { createPortal } from 'react-dom';\r\n\r\nexport default function MyComponent() {\r\n  return (\r\n    <div style={{ border: '2px solid black' }}>\r\n      <p>This child is placed in the parent div.</p>\r\n      {createPortal(\r\n        <p>This child is placed in the document body.</p>,\r\n        document.body\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n```\r\n\r\nI liked this [example related to showing modal](https://react.dev/reference/react-dom/createPortal#rendering-a-modal-dialog-with-a-portal) more.\r\n\r\nI really was hoping to find that this function returns a value of type `ReactPortal`. I mean, it’s got matching word “Portal” but to my surprise, in the [documentation it is mentioned](https://react.dev/reference/react-dom/createPortal#returns) that `createPortal` returns a value of type, ReactNode.\r\n\r\nIt is also worth mentioning that `createPortal` is imported from `react-dom`, whereas `ReactPortal` is imported from `react`. createPortal is a function and ReactPortal is a type.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/Editor.ts#L2](https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/Editor.ts#L2)\r\n    \r\n2. [https://react.dev/reference/react-dom/createPortal](https://react.dev/reference/react-dom/createPortal)\r\n    \r\n3. [https://react.dev/reference/react-dom/createPortal#rendering-a-modal-dialog-with-a-portal](https://react.dev/reference/react-dom/createPortal#rendering-a-modal-dialog-with-a-portal)\r\n    \r\n4. [https://react.dev/reference/react-dom/createPortal#returns](https://react.dev/reference/react-dom/createPortal#returns)",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var u=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),f=(r,e)=>{for(var n in e)c(r,n,{get:e[n],enumerable:!0})},a=(r,e,n,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of y(e))!g.call(r,o)&&o!==n&&c(r,o,{get:()=>e[o],enumerable:!(t=p(e,o))||t.enumerable});return r};var b=(r,e,n)=>(n=r!=null?h(m(r)):{},a(e||!r||!r.__esModule?c(n,\"default\",{value:r,enumerable:!0}):n,r)),v=r=>a(c({},\"__esModule\",{value:!0}),r);var i=u((w,s)=>{s.exports=_jsx_runtime});var N={};f(N,{default:()=>d,frontmatter:()=>P});var l=b(i()),P={title:\"ReactPortal type in TipTap source code.\"};function F(r){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...r.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we will review the ReactPortal type in \",(0,l.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/Editor.ts#L2\",children:\"TipTap source code\"}),\".\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"The below code is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/Editor.ts#L2\",children:\"tiptap/packages/react/src/Editor.js\"})]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Editor \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@tiptap/core'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ReactPortal \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'react'\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ReactRenderer \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './ReactRenderer.js'\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" EditorWithContentComponent\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Editor\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" &\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" contentComponent\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ContentComponent\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ContentComponent\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  setRenderer\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"id\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" renderer\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ReactRenderer\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  removeRenderer\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"id\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  subscribe\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"callback\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  getSnapshot\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Record\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ReactPortal\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  getServerSnapshot\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Record\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ReactPortal\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"ReactPortal\"}),\" is used as a type here in getSnapshot. This getSnapshot function is supposed to return a value of type \",(0,l.jsx)(e.code,{children:\"Record<string, ReactPortal>\"}),\". Similar declaration is found for \",(0,l.jsx)(e.code,{children:\"getServerSnapshot\"}),\".\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"I have seen this \\u201Cportal\\u201D related code in the wild before but I could not recall. When I googled \\u201CPortal in React\\u201D, I found \",(0,l.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/createPortal\",children:\"createPortal in React documentation\"}),\".\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:1400/1*ZoZDVuHpW26xd3KMjYHd8A.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"But is createPortal related to ReactPortal type? what is \",(0,l.jsx)(e.code,{children:\"createPortal\"}),\" anyway? createPortal lets you render some children into a different part of the DOM.\"]}),`\n`,(0,l.jsx)(e.p,{children:\"Below is a simple example picked from React docs.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createPortal \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'react-dom'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" MyComponent\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div style\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" border\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '2px solid black'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }}>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"This child is placed in the parent div.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"</\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createPortal\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"This child is placed in the document body.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"</\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        document\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"body\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      )}\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    </\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  );\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"I liked this \",(0,l.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/createPortal#rendering-a-modal-dialog-with-a-portal\",children:\"example related to showing modal\"}),\" more.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"I really was hoping to find that this function returns a value of type \",(0,l.jsx)(e.code,{children:\"ReactPortal\"}),\". I mean, it\\u2019s got matching word \\u201CPortal\\u201D but to my surprise, in the \",(0,l.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/createPortal#returns\",children:\"documentation it is mentioned\"}),\" that \",(0,l.jsx)(e.code,{children:\"createPortal\"}),\" returns a value of type, ReactNode.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"It is also worth mentioning that \",(0,l.jsx)(e.code,{children:\"createPortal\"}),\" is imported from \",(0,l.jsx)(e.code,{children:\"react-dom\"}),\", whereas \",(0,l.jsx)(e.code,{children:\"ReactPortal\"}),\" is imported from \",(0,l.jsx)(e.code,{children:\"react\"}),\". createPortal is a function and ReactPortal is a type.\"]}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"references\",children:(0,l.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/Editor.ts#L2\",children:\"https://github.com/ueberdosis/tiptap/blob/develop/packages/react/src/Editor.ts#L2\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/createPortal\",children:\"https://react.dev/reference/react-dom/createPortal\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/createPortal#rendering-a-modal-dialog-with-a-portal\",children:\"https://react.dev/reference/react-dom/createPortal#rendering-a-modal-dialog-with-a-portal\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://react.dev/reference/react-dom/createPortal#returns\",children:\"https://react.dev/reference/react-dom/createPortal#returns\"})}),`\n`]}),`\n`]})]})}function d(r={}){let{wrapper:e}=r.components||{};return e?(0,l.jsx)(e,{...r,children:(0,l.jsx)(F,{...r})}):F(r)}return v(N);})();\n;return Component;"
        },
        "_id": "blog/reactportal-type-in-tiptap.mdx",
        "_raw": {
          "sourceFilePath": "blog/reactportal-type-in-tiptap.mdx",
          "sourceFileName": "reactportal-type-in-tiptap.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/reactportal-type-in-tiptap"
        },
        "type": "Doc",
        "slug": "/blog/reactportal-type-in-tiptap",
        "slugAsParams": "reactportal-type-in-tiptap"
      },
      "documentHash": "1740489186403",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/renovate-in-lobechat.mdx": {
      "document": {
        "title": "renovate.json file in Lobechat source code explained\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, let’s review the [renovate.json file in Lobechat](https://github.com/lobehub/lobe-chat/blob/main/renovate.json). The following concepts are discussed:\r\n\r\n* What is renovate.json file?\r\n    \r\n* renovate.json configuration in Lobechat\r\n    \r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*2G92o6rcBmGXlUbHs9XMWw.png)\r\n\r\n### What is renovate.json file?\r\n\r\nRenovate is an automated dependency update tool. It helps to update dependencies in your code without needing to do it manually. When Renovate runs on your repo, it looks for references to dependencies (both public and private) and, if there are newer versions available, Renovate   \r\ncan create pull requests to update your versions automatically.\r\n\r\nRead more about [Renovate](https://github.com/renovatebot/renovate) and its [documentation](https://docs.renovatebot.com/).\r\n\r\nYou will also find a lot of [usecase in the getting started docs](https://docs.renovatebot.com/getting-started/use-cases/).\r\n\r\nThis documentation is massive, let’s use the Lobechat’s renovate configuration as a reference and compare it against the documentation, but before that let’s understand how to install renovate in a project.\r\n\r\n#### Usage\r\n\r\nBased on this [installing and onboarding documentation](https://docs.renovatebot.com/getting-started/installing-onboarding/), you would first need to install the Renovate App and this creates a PR to your main branch from a branch named renovate/configure.\r\n\r\nI tried to find such a branch name in Lobechat and Unbuild, but could not find it. I have added this tool into my [best-practices](https://app.thinkthroo.com/best-practices), collection and will prepare a course where I will discuss this tool in great detail by configuring it a demo project because this setup is not straightforward and documentation itself tells you take your time to read the documentation and make sure you understand renovate enough before you can start using this tool.\r\n\r\nAs part of installation, there is a [configuration location](https://docs.renovatebot.com/getting-started/installing-onboarding/#configuration-location) section in the documentation and this explains that as part of configure renovate PR, this PR includes renovate.json file in the root directory with some default settings.\r\n\r\nIf you don’t want a renovate.json file in your repository you can use one of the following files instead:\r\n\r\n* renovate.json5\r\n    \r\n* .github/renovate.json\r\n    \r\n* .github/renovate.json5 \r\n    \r\n* .gitlab/renovate.json\r\n    \r\n* .gitlab/renovate.json5\r\n    \r\n* .renovaterc\r\n    \r\n* .renovaterc.json\r\n    \r\n* .renovaterc.json5\r\n    \r\n\r\nNow that we understand how renovate.json file is created and what it is about, let’s review the renovate.json in Lobechat and then the renovate.json in unbuild.\r\n\r\n### renovate.json in Lobechat\r\n\r\nYou will find the below code in [Lobechat’s renovate.json](https://github.com/lobehub/lobe-chat/blob/main/renovate.json)\r\n\r\n```js\r\n{\r\n \"$schema\": \"https://docs.renovatebot.com/renovate-schema.json\",\r\n \"automerge\": false,\r\n \"dependencyDashboard\": true,\r\n \"ignoreDeps\": [],\r\n \"labels\": [\"dependencies\"],\r\n \"postUpdateOptions\": [\"yarnDedupeHighest\"],\r\n \"prConcurrentLimit\": 30,\r\n \"prHourlyLimit\": 0,\r\n \"rebaseWhen\": \"conflicted\",\r\n \"schedule\": \"on sunday before 6:00am\",\r\n \"timezone\": \"UTC\"\r\n}\r\n```\r\n\r\nNow let’s compare these options against the [configuration documentation](https://docs.renovatebot.com/config-overview/).\r\n\r\n#### $schema\r\n\r\nWhen the renovate.json is created as part of Configure Renovate PR, it only contains $schema. Read more about this in [onboarding config](https://docs.renovatebot.com/config-overview/#onboarding-config).\r\n\r\n#### automerge\r\n\r\nWhether to automerge branches/PRs automatically, without human intervention. Lobechat set this to false, which means there  \r\nwill be human intervention to merge PR created by renovate.\r\n\r\nRead more about [automerge configuration](https://docs.renovatebot.com/configuration-options/#automerge).\r\n\r\n#### dependencyDashboard\r\n\r\nWhether to create a “Dependency Dashboard” issue in the repository. Lobechat has this set to true.\r\n\r\nCheck this [Dependency Dashboard issue in Lobechat](https://github.com/lobehub/lobe-chat/issues/194), it contains list  \r\nof PRs based on their status such as:\r\n\r\n* Awaiting Schedule\r\n    \r\n* Edited/Blocked\r\n    \r\n* Open\r\n    \r\n* Ignored or Blocked\r\n    \r\n* Detected dependencies\r\n    \r\n\r\nRead more about [dependencyDashboard configuration](https://docs.renovatebot.com/configuration-options/#dependencydashboard).\r\n\r\n#### ignoreDeps\r\n\r\nDependencies to ignore. Lobechat has this set to empty array.\r\n\r\nRead more about [ignoreDeps configuration](https://docs.renovatebot.com/configuration-options/#ignoredeps)\r\n\r\n#### labels\r\n\r\nLabels to set in Pull Request. Lobechat has this set to “dependencies”.\r\n\r\nRead more about [labels configuration](https://docs.renovatebot.com/configuration-options/#labels).\r\n\r\n#### postUpdateOptions\r\n\r\nEnable post-update options to be run after package/artifact updating. Lobechat has this set to `[“yarnDedupeHighest”],`. Not really sure what it means though. I found what it means in the docs and I quoted it below\r\n\r\n> yarnDedupeHighest — Run yarn-deduplicate — strategy highest (yarn dedupe — strategy highest for Yarn &gt;=2.2.0) after yarn.lock updates.\r\n\r\nBut Lobechat uses pnpm as their package manager, still not sure why this option does.\r\n\r\nRead more about [postUpdateOptions configuration](https://docs.renovatebot.com/configuration-options/#postupdateoptions).\r\n\r\n#### prConcurrentLimit\r\n\r\nThis setting — if enabled — limits Renovate to a maximum of x concurrent PRs open at any time. This limit is enforced on a per-repository basis. Lobechat has this set to 30. This means there cannot be more than 30 PRs from renovate open in this Lobechat repository.\r\n\r\nRead more about [prConcurrentLimit configuration](https://docs.renovatebot.com/configuration-options/#prconcurrentlimit)\r\n\r\n#### prHourlyLimit\r\n\r\nRate limit PRs to maximum x created per hour. 0 means no limit. Lobechat has this set to 0, which means there is no limit to the number of PRs created per hour. Docs suggests that it can be overwhelming on your CI and the tests run, pretty bold move from Lobechat authors.\r\n\r\nRead more about [prHourlyLimit configuration](https://docs.renovatebot.com/configuration-options/#prhourlylimit).\r\n\r\n#### rebaseWhen\r\n\r\nControls when Renovate rebases an existing branch. Lobechat has this set to `conflicted`.\r\n\r\nRead more about [rebaseWhen configuration](https://docs.renovatebot.com/configuration-options/#rebasewhen). Also read about [what a git rebase means](https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase#:~:text=Rebasing%20is%20the%20process%20of,of%20a%20feature%20branching%20workflow).\r\n\r\n#### schedule\r\n\r\nLimit branch creation to these times of day or week. Lobechat has this set to `on sunday before 6:00am` and I double checked this by [searching for renovate in open PRs](https://github.com/lobehub/lobe-chat/pulls?q=is%3Apr+is%3Aopen+renovate).\r\n\r\nTurns out, Lobechat has the renovate PRs created only on sunday between 12am — 6am. Interesting. So you would begin your week with some PRs to be merged, that is if you don’t work on Sundays. (\\*wink\\*)\r\n\r\nRead more about [schedule configuration](https://docs.renovatebot.com/configuration-options/#schedule).\r\n\r\n#### timezone\r\n\r\nMust conform to [IANA Time Zone format](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones). This can only be used when you have schedule set and that you want Renovate to evaluate the schedule in your timezone.\r\n\r\nLobechat has timezone set to `UTC`.\r\n\r\nRead more about [timezone configuration](https://docs.renovatebot.com/configuration-options/#timezone).\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/unjs/renovate-config/blob/main/renovate.json](https://github.com/unjs/renovate-config/blob/main/renovate.json)\r\n    \r\n2. [https://github.com/unjs/unbuild/blob/main/renovate.json](https://github.com/unjs/unbuild/blob/main/renovate.json)\r\n    \r\n3. [https://github.com/lobehub/lobe-chat/blob/main/renovate.json](https://github.com/lobehub/lobe-chat/blob/main/renovate.json)\r\n    \r\n4. [https://docs.renovatebot.com/](https://docs.renovatebot.com/)\r\n    \r\n5. [https://docs.renovatebot.com/key-concepts/dashboard/#require-approval-for-major-updates](https://docs.renovatebot.com/key-concepts/dashboard/#require-approval-for-major-updates)\r\n    \r\n6. [https://docs.renovatebot.com/getting-started/installing-onboarding/](https://docs.renovatebot.com/getting-started/installing-onboarding/)",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),F=(t,e)=>{for(var o in e)i(t,o,{get:e[o],enumerable:!0})},s=(t,e,o,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!g.call(t,r)&&r!==o&&i(t,r,{get:()=>e[r],enumerable:!(a=u(e,r))||a.enumerable});return t};var y=(t,e,o)=>(o=t!=null?p(b(t)):{},s(e||!t||!t.__esModule?i(o,\"default\",{value:t,enumerable:!0}):o,t)),v=t=>s(i({},\"__esModule\",{value:!0}),t);var h=f((k,c)=>{c.exports=_jsx_runtime});var j={};F(j,{default:()=>d,frontmatter:()=>w});var n=y(h()),w={title:\"renovate.json file in Lobechat source code explained\"};function l(t){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",ul:\"ul\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, let\\u2019s review the \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/renovate.json\",children:\"renovate.json file in Lobechat\"}),\". The following concepts are discussed:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What is renovate.json file?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"renovate.json configuration in Lobechat\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*2G92o6rcBmGXlUbHs9XMWw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"what-is-renovatejson-file\",children:\"What is renovate.json file?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Renovate is an automated dependency update tool. It helps to update dependencies in your code without needing to do it manually. When Renovate runs on your repo, it looks for references to dependencies (both public and private) and, if there are newer versions available, Renovate\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"can create pull requests to update your versions automatically.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://github.com/renovatebot/renovate\",children:\"Renovate\"}),\" and its \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/\",children:\"documentation\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will also find a lot of \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/getting-started/use-cases/\",children:\"usecase in the getting started docs\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"This documentation is massive, let\\u2019s use the Lobechat\\u2019s renovate configuration as a reference and compare it against the documentation, but before that let\\u2019s understand how to install renovate in a project.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Based on this \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/getting-started/installing-onboarding/\",children:\"installing and onboarding documentation\"}),\", you would first need to install the Renovate App and this creates a PR to your main branch from a branch named renovate/configure.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I tried to find such a branch name in Lobechat and Unbuild, but could not find it. I have added this tool into my \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"best-practices\"}),\", collection and will prepare a course where I will discuss this tool in great detail by configuring it a demo project because this setup is not straightforward and documentation itself tells you take your time to read the documentation and make sure you understand renovate enough before you can start using this tool.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"As part of installation, there is a \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/getting-started/installing-onboarding/#configuration-location\",children:\"configuration location\"}),\" section in the documentation and this explains that as part of configure renovate PR, this PR includes renovate.json file in the root directory with some default settings.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"If you don\\u2019t want a renovate.json file in your repository you can use one of the following files instead:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"renovate.json5\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\".github/renovate.json\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\".github/renovate.json5\\xA0\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\".gitlab/renovate.json\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\".gitlab/renovate.json5\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\".renovaterc\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\".renovaterc.json\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\".renovaterc.json5\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Now that we understand how renovate.json file is created and what it is about, let\\u2019s review the renovate.json in Lobechat and then the renovate.json in unbuild.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"renovatejson-inlobechat\",children:\"renovate.json in\\xA0Lobechat\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find the below code in \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/renovate.json\",children:\"Lobechat\\u2019s renovate.json\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"$schema\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"https://docs.renovatebot.com/renovate-schema.json\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"automerge\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"false,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"dependencyDashboard\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"true,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"ignoreDeps\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[],\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"labels\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"dependencies\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"],\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"postUpdateOptions\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"yarnDedupeHighest\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"],\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"prConcurrentLimit\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"30,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"prHourlyLimit\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"0,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"rebaseWhen\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"conflicted\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"schedule\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"on sunday before 6:00am\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"timezone\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"UTC\"'})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Now let\\u2019s compare these options against the \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/config-overview/\",children:\"configuration documentation\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"schema\",children:\"$schema\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"When the renovate.json is created as part of Configure Renovate PR, it only contains $schema. Read more about this in \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/config-overview/#onboarding-config\",children:\"onboarding config\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"automerge\",children:\"automerge\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Whether to automerge branches/PRs automatically, without human intervention. Lobechat set this to false, which means there\",(0,n.jsx)(e.br,{}),`\n`,\"will be human intervention to merge PR created by renovate.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/configuration-options/#automerge\",children:\"automerge configuration\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"dependencydashboard\",children:\"dependencyDashboard\"}),`\n`,(0,n.jsx)(e.p,{children:\"Whether to create a \\u201CDependency Dashboard\\u201D issue in the repository. Lobechat has this set to true.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Check this \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/issues/194\",children:\"Dependency Dashboard issue in Lobechat\"}),\", it contains list\",(0,n.jsx)(e.br,{}),`\n`,\"of PRs based on their status such as:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Awaiting Schedule\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Edited/Blocked\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Open\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Ignored or Blocked\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Detected dependencies\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/configuration-options/#dependencydashboard\",children:\"dependencyDashboard configuration\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"ignoredeps\",children:\"ignoreDeps\"}),`\n`,(0,n.jsx)(e.p,{children:\"Dependencies to ignore. Lobechat has this set to empty array.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/configuration-options/#ignoredeps\",children:\"ignoreDeps configuration\"})]}),`\n`,(0,n.jsx)(e.h4,{id:\"labels\",children:\"labels\"}),`\n`,(0,n.jsx)(e.p,{children:\"Labels to set in Pull Request. Lobechat has this set to \\u201Cdependencies\\u201D.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/configuration-options/#labels\",children:\"labels configuration\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"postupdateoptions\",children:\"postUpdateOptions\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Enable post-update options to be run after package/artifact updating. Lobechat has this set to \",(0,n.jsx)(e.code,{children:\"[\\u201CyarnDedupeHighest\\u201D],\"}),\". Not really sure what it means though. I found what it means in the docs and I quoted it below\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"yarnDedupeHighest\\u200A\\u2014\\u200ARun yarn-deduplicate\\u200A\\u2014\\u200Astrategy highest (yarn dedupe\\u200A\\u2014\\u200Astrategy highest for Yarn >=2.2.0) after yarn.lock updates.\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"But Lobechat uses pnpm as their package manager, still not sure why this option does.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/configuration-options/#postupdateoptions\",children:\"postUpdateOptions configuration\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"prconcurrentlimit\",children:\"prConcurrentLimit\"}),`\n`,(0,n.jsx)(e.p,{children:\"This setting\\u200A\\u2014\\u200Aif enabled\\u200A\\u2014\\u200Alimits Renovate to a maximum of x concurrent PRs open at any time. This limit is enforced on a per-repository basis. Lobechat has this set to 30. This means there cannot be more than 30 PRs from renovate open in this Lobechat repository.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/configuration-options/#prconcurrentlimit\",children:\"prConcurrentLimit configuration\"})]}),`\n`,(0,n.jsx)(e.h4,{id:\"prhourlylimit\",children:\"prHourlyLimit\"}),`\n`,(0,n.jsx)(e.p,{children:\"Rate limit PRs to maximum x created per hour. 0 means no limit. Lobechat has this set to 0, which means there is no limit to the number of PRs created per hour. Docs suggests that it can be overwhelming on your CI and the tests run, pretty bold move from Lobechat authors.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/configuration-options/#prhourlylimit\",children:\"prHourlyLimit configuration\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"rebasewhen\",children:\"rebaseWhen\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Controls when Renovate rebases an existing branch. Lobechat has this set to \",(0,n.jsx)(e.code,{children:\"conflicted\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/configuration-options/#rebasewhen\",children:\"rebaseWhen configuration\"}),\". Also read about \",(0,n.jsx)(e.a,{href:\"https://www.atlassian.com/git/tutorials/rewriting-history/git-rebase#:~:text=Rebasing%20is%20the%20process%20of,of%20a%20feature%20branching%20workflow\",children:\"what a git rebase means\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"schedule\",children:\"schedule\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Limit branch creation to these times of day or week. Lobechat has this set to \",(0,n.jsx)(e.code,{children:\"on sunday before 6:00am\"}),\" and I double checked this by \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/pulls?q=is%3Apr+is%3Aopen+renovate\",children:\"searching for renovate in open PRs\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Turns out, Lobechat has the renovate PRs created only on sunday between 12am\\u200A\\u2014\\u200A6am. Interesting. So you would begin your week with some PRs to be merged, that is if you don\\u2019t work on Sundays. (*wink*)\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/configuration-options/#schedule\",children:\"schedule configuration\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"timezone\",children:\"timezone\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Must conform to \",(0,n.jsx)(e.a,{href:\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\",children:\"IANA Time Zone format\"}),\". This can only be used when you have schedule set and that you want Renovate to evaluate the schedule in your timezone.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Lobechat has timezone set to \",(0,n.jsx)(e.code,{children:\"UTC\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/configuration-options/#timezone\",children:\"timezone configuration\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/renovate-config/blob/main/renovate.json\",children:\"https://github.com/unjs/renovate-config/blob/main/renovate.json\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/renovate.json\",children:\"https://github.com/unjs/unbuild/blob/main/renovate.json\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/renovate.json\",children:\"https://github.com/lobehub/lobe-chat/blob/main/renovate.json\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/\",children:\"https://docs.renovatebot.com/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/key-concepts/dashboard/#require-approval-for-major-updates\",children:\"https://docs.renovatebot.com/key-concepts/dashboard/#require-approval-for-major-updates\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://docs.renovatebot.com/getting-started/installing-onboarding/\",children:\"https://docs.renovatebot.com/getting-started/installing-onboarding/\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(l,{...t})}):l(t)}return v(j);})();\n;return Component;"
        },
        "_id": "blog/renovate-in-lobechat.mdx",
        "_raw": {
          "sourceFilePath": "blog/renovate-in-lobechat.mdx",
          "sourceFileName": "renovate-in-lobechat.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/renovate-in-lobechat"
        },
        "type": "Doc",
        "slug": "/blog/renovate-in-lobechat",
        "slugAsParams": "renovate-in-lobechat"
      },
      "documentHash": "1740489186405",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/rollup-plugin-analyzer-usage.mdx": {
      "document": {
        "title": "rollup-plugin-analyzer usage in trpc scripts\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn the previous article, we provided a mental picture of functions in [analyzeSizeChange.ts file](https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts), In this article, let’s find out how the actual size change is analyzed.\r\n\r\n```plaintext\r\nimport analyze from 'rollup-plugin-analyzer';\r\nexport default function analyzeSizeChange(packageDir: string) {\r\n let analyzePluginIterations = 0;\r\n return analyze({\r\n   summaryOnly: process.env.CI ? undefined : true,\r\n   skipFormatted: process.env.CI ? true : undefined,\r\n   onAnalysis: (analysis) => {\r\n   },\r\n });\r\n}\r\n```\r\n\r\n`analyze` is imported from `rollup-plugin-analyzer`. It’s got an object as param with [options](https://www.npmjs.com/package/rollup-plugin-analyzer#options):\r\n\r\n1. summaryOnly — Only output bundle summary and module usage bar graphs\r\n    \r\n2. skipFormatted — Don’t output formatted string\r\n    \r\n3. onAnalysis — Callback to be invoked with analysis object (I copied the below description for onAnalysis from npm:)\r\n    \r\n\r\nfunction will be invoked with:  \r\n\\- analysisObject (Object)  \r\n\\- bundleSize (Number) — rendered bundle size in bytes  \r\n\\- bundleOrigSize (Number) — original bundle size in bytes  \r\n\\- bundleReduction (Number) — percentage of rendered bundle size reduction  \r\n\\- moduleCount (Number) — Count of all included modules  \r\n\\- modules (Array) — array of module analysis objects  \r\n\\- module (Object)  \r\n\\- id (String) — path of module / rollup module id  \r\n\\- size (Number) — size of rendered module code in bytes  \r\n\\- origSize (Number) — size of module’s original code in bytes  \r\n\\- dependents (Array) — list of dependent module ids / paths  \r\n\\- percent (Number) — percentage of module size relative to entire bundle  \r\n\\- reduction (Number) — percentage of rendered size reduction  \r\n\\- renderedExports (Array) — list of used named exports  \r\n\\- removedExports (Array) — list of unused named exports\r\n\r\nLet’s see how many of these options are actually used in [analyzeSizeChange file.](https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts)  \r\n\\- [bundleSize](https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts#L36)  \r\n\\- [modules](https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts#L38)\r\n\r\nJust these are found to be used in analyzeSizeChange.ts\r\n\r\nBut in what circumstances is this script executed? is it after you check in some code? does it report on a pull request? To find that out, we need to go where the code takes us.\r\n\r\nYou would have to first search for `analyzeSizeChange` to see where it is used. It is found to be used in [script/getRollupConfig.ts](https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/scripts/getRollupConfig.ts#L9)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*RPGfbTRlwfJg8rhGwP-Pvg.png)\r\n\r\nNext, you would have to find out where getRollupConfig is used. It is used in a lot of [packages](https://github.com/search?q=repo%3Atrpc%2Ftrpc+getRollupConfig&type=code).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*zM814-Ubj1vNcOgzudevBw.png)\r\n\r\nbut I picked [packages/client/rollup.config.ts](https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/packages/client/rollup.config.ts#L3), this rollup config is used in the build script.\r\n\r\n```plaintext\r\n\"scripts\": {\r\n \"build\": \"rollup - config rollup.config.ts - configPlugin rollup-plugin-swc3\",\r\n```\r\n\r\nSo the answer, you will have the bundle size changes when you build a package in tRPC source code.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts](https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts)\r\n    \r\n2. [https://github.com/search?q=repo%3Atrpc%2Ftrpc%20getRollupConfig&type=code](https://github.com/search?q=repo%3Atrpc%2Ftrpc+getRollupConfig&type=code)\r\n    \r\n3. [https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/packages/client/rollup.config.ts#L3](https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/packages/client/rollup.config.ts#L3)\r\n    \r\n4. [https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/scripts/getRollupConfig.ts#L9](https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/scripts/getRollupConfig.ts#L9)\r\n    \r\n5. [https://www.npmjs.com/package/rollup-plugin-analyzer#options](https://www.npmjs.com/package/rollup-plugin-analyzer#options) ",
          "code": "var Component=(()=>{var h=Object.create;var a=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var r in e)a(t,r,{get:e[r],enumerable:!0})},l=(t,e,r,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!g.call(t,i)&&i!==r&&a(t,i,{get:()=>e[i],enumerable:!(c=u(e,i))||c.enumerable});return t};var z=(t,e,r)=>(r=t!=null?h(b(t)):{},l(e||!t||!t.__esModule?a(r,\"default\",{value:t,enumerable:!0}):r,t)),w=t=>l(a({},\"__esModule\",{value:!0}),t);var s=f((N,o)=>{o.exports=_jsx_runtime});var C={};y(C,{default:()=>p,frontmatter:()=>k});var n=z(s()),k={title:\"rollup-plugin-analyzer usage in trpc scripts\"};function d(t){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In the previous article, we provided a mental picture of functions in \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts\",children:\"analyzeSizeChange.ts file\"}),\", In this article, let\\u2019s find out how the actual size change is analyzed.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import analyze from 'rollup-plugin-analyzer';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export default function analyzeSizeChange(packageDir: string) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" let analyzePluginIterations = 0;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" return analyze({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   summaryOnly: process.env.CI ? undefined : true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   skipFormatted: process.env.CI ? true : undefined,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   onAnalysis: (analysis) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"analyze\"}),\" is imported from \",(0,n.jsx)(e.code,{children:\"rollup-plugin-analyzer\"}),\". It\\u2019s got an object as param with \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/rollup-plugin-analyzer#options\",children:\"options\"}),\":\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"summaryOnly \\u2014 Only output bundle summary and module usage bar graphs\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"skipFormatted \\u2014 Don\\u2019t output formatted string\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"onAnalysis \\u2014 Callback to be invoked with analysis object (I copied the below description for onAnalysis from npm:)\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"function will be invoked with:\",(0,n.jsx)(e.br,{}),`\n`,\"- analysisObject (Object)\",(0,n.jsx)(e.br,{}),`\n`,\"- bundleSize (Number) \\u2014 rendered bundle size in bytes\",(0,n.jsx)(e.br,{}),`\n`,\"- bundleOrigSize (Number) \\u2014 original bundle size in bytes\",(0,n.jsx)(e.br,{}),`\n`,\"- bundleReduction (Number) \\u2014 percentage of rendered bundle size reduction\",(0,n.jsx)(e.br,{}),`\n`,\"- moduleCount (Number) \\u2014 Count of all included modules\",(0,n.jsx)(e.br,{}),`\n`,\"- modules (Array) \\u2014 array of module analysis objects\",(0,n.jsx)(e.br,{}),`\n`,\"- module (Object)\",(0,n.jsx)(e.br,{}),`\n`,\"- id (String) \\u2014 path of module / rollup module id\",(0,n.jsx)(e.br,{}),`\n`,\"- size (Number) \\u2014 size of rendered module code in bytes\",(0,n.jsx)(e.br,{}),`\n`,\"- origSize (Number) \\u2014 size of module\\u2019s original code in bytes\",(0,n.jsx)(e.br,{}),`\n`,\"- dependents (Array) \\u2014 list of dependent module ids / paths\",(0,n.jsx)(e.br,{}),`\n`,\"- percent (Number) \\u2014 percentage of module size relative to entire bundle\",(0,n.jsx)(e.br,{}),`\n`,\"- reduction (Number) \\u2014 percentage of rendered size reduction\",(0,n.jsx)(e.br,{}),`\n`,\"- renderedExports (Array) \\u2014 list of used named exports\",(0,n.jsx)(e.br,{}),`\n`,\"- removedExports (Array) \\u2014 list of unused named exports\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s see how many of these options are actually used in \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts\",children:\"analyzeSizeChange file.\"}),(0,n.jsx)(e.br,{}),`\n`,\"- \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts#L36\",children:\"bundleSize\"}),(0,n.jsx)(e.br,{}),`\n`,\"- \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts#L38\",children:\"modules\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"Just these are found to be used in analyzeSizeChange.ts\"}),`\n`,(0,n.jsx)(e.p,{children:\"But in what circumstances is this script executed? is it after you check in some code? does it report on a pull request? To find that out, we need to go where the code takes us.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You would have to first search for \",(0,n.jsx)(e.code,{children:\"analyzeSizeChange\"}),\" to see where it is used. It is found to be used in \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/scripts/getRollupConfig.ts#L9\",children:\"script/getRollupConfig.ts\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*RPGfbTRlwfJg8rhGwP-Pvg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Next, you would have to find out where getRollupConfig is used. It is used in a lot of \",(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Atrpc%2Ftrpc+getRollupConfig&type=code\",children:\"packages\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*zM814-Ubj1vNcOgzudevBw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"but I picked \",(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/packages/client/rollup.config.ts#L3\",children:\"packages/client/rollup.config.ts\"}),\", this rollup config is used in the build script.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"scripts\": {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"build\": \"rollup - config rollup.config.ts - configPlugin rollup-plugin-swc3\",'})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"So the answer, you will have the bundle size changes when you build a package in tRPC source code.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts\",children:\"https://github.com/trpc/trpc/blob/next/scripts/analyzeSizeChange.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Atrpc%2Ftrpc+getRollupConfig&type=code\",children:\"https://github.com/search?q=repo%3Atrpc%2Ftrpc%20getRollupConfig&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/packages/client/rollup.config.ts#L3\",children:\"https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/packages/client/rollup.config.ts#L3\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/scripts/getRollupConfig.ts#L9\",children:\"https://github.com/trpc/trpc/blob/3388c9691d122b9d4047b2de0caedcdf611354ab/scripts/getRollupConfig.ts#L9\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/rollup-plugin-analyzer#options\",children:\"https://www.npmjs.com/package/rollup-plugin-analyzer#options\"})}),`\n`]}),`\n`]})]})}function p(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(d,{...t})}):d(t)}return w(C);})();\n;return Component;"
        },
        "_id": "blog/rollup-plugin-analyzer-usage.mdx",
        "_raw": {
          "sourceFilePath": "blog/rollup-plugin-analyzer-usage.mdx",
          "sourceFileName": "rollup-plugin-analyzer-usage.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/rollup-plugin-analyzer-usage"
        },
        "type": "Doc",
        "slug": "/blog/rollup-plugin-analyzer-usage",
        "slugAsParams": "rollup-plugin-analyzer-usage"
      },
      "documentHash": "1740489186407",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Set-usage-in-Zustand.mdx": {
      "document": {
        "title": "Set() usage in Zustand source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will understand how Set() method is used in [Zustand’s source code](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*OmmD1X7HpeX2fPvhRTfuOA.png)\r\n\r\nso the listeners in Zustand are basically a [Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set). The above code snippet is picked from [vanilla.ts](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71)\r\n\r\n# **Set**\r\n\r\nThe `Set` object lets you store unique values of any type, whether [primitive values](https://developer.mozilla.org/en-US/docs/Glossary/Primitive) or object references. `Set` objects are collections of values. A value in the set may only occur once; it is unique in the set's collection. You can iterate through the elements of a set in insertion order. — [MDN Docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)\r\n\r\n```javascript\r\nconst mySet1 = new Set();\r\n\r\nmySet1.add(1); // Set(1) { 1 }\r\nmySet1.add(5); // Set(2) { 1, 5 }\r\nmySet1.add(5); // Set(2) { 1, 5 }\r\nmySet1.add(\"some text\"); // Set(3) { 1, 5, 'some text' }\r\n\r\nfor (const item of mySet1) {\r\n  console.log(item);\r\n}\r\n// 1, 5, 'some text'\r\n```\r\n\r\nlisteners are added in a function subscribe in Zustand. Let’s take a closer look at subscribe\r\n\r\n# **subscribe**\r\n\r\nHow is subscribe used in a React project? the below explanation is picked from Zustand’s Readme.\r\n\r\nThe subscribe function allows components to bind to a state-portion without forcing re-render on changes. Best combine it with useEffect for automatic unsubscribe on unmount. This can make a [drastic](https://codesandbox.io/s/peaceful-johnson-txtws) performance impact when you are allowed to mutate the view directly.\r\n\r\n```javascript\r\nconst useScratchStore = create((set) => ({ scratches: 0, ... }))\r\nconst Component = () => {\r\n  // Fetch initial state\r\n  const scratchRef = useRef(useScratchStore.getState().scratches)\r\n  // Connect to the store on mount, disconnect on unmount, catch state-changes in a reference\r\n  useEffect(() => useScratchStore.subscribe(\r\n    state => (scratchRef.current = state.scratches)\r\n  ), [])\r\n  ...\r\n```\r\n\r\nLet’s now look at the subscribe source code in Zustand.\r\n\r\n```javascript\r\nconst subscribe: StoreApi<TState>['subscribe'] = (listener) => {\r\n    listeners.add(listener)\r\n    // Unsubscribe\r\n    return () => listeners.delete(listener)\r\n}\r\n```\r\n\r\nsubscribe simply adds the listener to the listeners Set.\r\n\r\nLet’s see what the logs from experimentation say. To add the console.log statements, I compiled Zustand using the command `pnpm run build` and copied the dist into `examples/demo/src`. Looks hacky, but hey we are experimenting and figuring out how Zustand works internally.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*ctFSmLkfJb8Y_8K-kYXSPA.png)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*hmwr4QJlEjom-2zCEqpdJg.png)\r\n\r\nThis is how the listeners Set looks like\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*F0iBPkLIR2rdZ3_D4cC_Ag.png)\r\n\r\nI subscribed to changes in App.jsx\r\n\r\n```javascript\r\n// Subscribe to changes in the state\r\nuseStore.subscribe((state) => {\r\n  console.log(\"State changed: \", state);\r\n});\r\n```\r\n\r\nAnother observation is that, there is a additional listener that got added to this set:\r\n\r\n```javascript\r\nƒ () {\r\n  if (checkIfSnapshotChanged(inst)) {\r\n    forceStoreRerender(fiber);\r\n  }\r\n}\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L62](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L62)\r\n    \r\n2. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)\r\n    \r\n3. [https://github.com/pmndrs/zustand/tree/main?tab=readme-ov-file#transient-updates-for-often-occurring-state-changes](https://github.com/pmndrs/zustand/tree/main?tab=readme-ov-file#transient-updates-for-often-occurring-state-changes)\r\n",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),b=(l,e)=>{for(var s in e)c(l,s,{get:e[s],enumerable:!0})},o=(l,e,s,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(l,r)&&r!==s&&c(l,r,{get:()=>e[r],enumerable:!(t=p(e,r))||t.enumerable});return l};var f=(l,e,s)=>(s=l!=null?h(m(l)):{},o(e||!l||!l.__esModule?c(s,\"default\",{value:l,enumerable:!0}):s,l)),S=l=>o(c({},\"__esModule\",{value:!0}),l);var i=g((w,a)=>{a.exports=_jsx_runtime});var N={};b(N,{default:()=>d,frontmatter:()=>v});var n=f(i()),v={title:\"Set() usage in Zustand source code.\"};function F(l){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will understand how Set() method is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71\",children:\"Zustand\\u2019s source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*OmmD1X7HpeX2fPvhRTfuOA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"so the listeners in Zustand are basically a \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\",children:\"Set\"}),\". The above code snippet is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71\",children:\"vanilla.ts\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"set\",children:(0,n.jsx)(e.strong,{children:\"Set\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"Set\"}),\" object lets you store unique values of any type, whether \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Glossary/Primitive\",children:\"primitive values\"}),\" or object references. \",(0,n.jsx)(e.code,{children:\"Set\"}),\" objects are collections of values. A value in the set may only occur once; it is unique in the set's collection. You can iterate through the elements of a set in insertion order. \\u2014 \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\",children:\"MDN Docs\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" mySet1 \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Set\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"mySet1\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(1);\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Set(1) { 1 }\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"mySet1\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(5);\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Set(2) { 1, 5 }\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"mySet1\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(5);\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Set(2) { 1, 5 }\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"mySet1\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"some text\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Set(3) { 1, 5, 'some text' }\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"for\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" item \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"of\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" mySet1\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  console\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"item\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" 1, 5, 'some text'\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"listeners are added in a function subscribe in Zustand. Let\\u2019s take a closer look at subscribe\"}),`\n`,(0,n.jsx)(e.h1,{id:\"subscribe\",children:(0,n.jsx)(e.strong,{children:\"subscribe\"})}),`\n`,(0,n.jsx)(e.p,{children:\"How is subscribe used in a React project? the below explanation is picked from Zustand\\u2019s Readme.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The subscribe function allows components to bind to a state-portion without forcing re-render on changes. Best combine it with useEffect for automatic unsubscribe on unmount. This can make a \",(0,n.jsx)(e.a,{href:\"https://codesandbox.io/s/peaceful-johnson-txtws\",children:\"drastic\"}),\" performance impact when you are allowed to mutate the view directly.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useScratchStore \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" scratches\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0,\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ...\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }))\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Component\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Fetch initial state\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" scratchRef \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useRef\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"useScratchStore\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"scratches\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Connect to the store on mount, disconnect on unmount, catch state-changes in a reference\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  useEffect\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useScratchStore\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"subscribe\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    state \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"scratchRef\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"current \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"scratches\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ),\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [])\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ...\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Let\\u2019s now look at the subscribe source code in Zustand.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" subscribe\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'subscribe'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    listeners\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"add\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Unsubscribe\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" listeners\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"delete\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"subscribe simply adds the listener to the listeners Set.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s see what the logs from experimentation say. To add the console.log statements, I compiled Zustand using the command \",(0,n.jsx)(e.code,{children:\"pnpm run build\"}),\" and copied the dist into \",(0,n.jsx)(e.code,{children:\"examples/demo/src\"}),\". Looks hacky, but hey we are experimenting and figuring out how Zustand works internally.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*ctFSmLkfJb8Y_8K-kYXSPA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*hmwr4QJlEjom-2zCEqpdJg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"This is how the listeners Set looks like\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*F0iBPkLIR2rdZ3_D4cC_Ag.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"I subscribed to changes in App.jsx\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Subscribe to changes in the state\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"useStore\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"subscribe\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  console\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"State changed: \"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Another observation is that, there is a additional listener that got added to this set:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"\\u0192 \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"checkIfSnapshotChanged\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"inst\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    forceStoreRerender\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"fiber\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L62\",children:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L62\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/tree/main?tab=readme-ov-file#transient-updates-for-often-occurring-state-changes\",children:\"https://github.com/pmndrs/zustand/tree/main?tab=readme-ov-file#transient-updates-for-often-occurring-state-changes\"})}),`\n`]}),`\n`]})]})}function d(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(F,{...l})}):F(l)}return S(N);})();\n;return Component;"
        },
        "_id": "blog/Set-usage-in-Zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/Set-usage-in-Zustand.mdx",
          "sourceFileName": "Set-usage-in-Zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Set-usage-in-Zustand"
        },
        "type": "Doc",
        "slug": "/blog/Set-usage-in-Zustand",
        "slugAsParams": "Set-usage-in-Zustand"
      },
      "documentHash": "1740489186216",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/setcursormode-in-grida.mdx": {
      "document": {
        "title": "Toolbar's setCursorMode in Grida codebase explained.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review a function called setCursorMode in Grida source code. To provide more context, you will see this function in [Toolbar component](https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L175C9-L186C11) on the Grida Canvas page.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*K6vI3IpvqLmUaUQ966-_-g.png)\r\n\r\nToolbar is used to draw elements on the canvas. This below code snippet is picked from [Toolbar.tsx](https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L175C9-L186C11)\r\n\r\n```js\r\n<ToolsGroup\r\n  value={value}\r\n  options={[\r\n    { value: \"rectangle\", label: \"Rectangle\", shortcut: \"R\" },\r\n    { value: \"ellipse\", label: \"Ellipse\", shortcut: \"O\" },\r\n    { value: \"line\", label: \"Line\", shortcut: \"L\" },\r\n    { value: \"image\", label: \"Image\" },\r\n  ]}\r\n  onValueChange={(v) => {\r\n    setCursorMode(toolbar_value_to_cursormode(v as ToolbarToolType));\r\n  }}\r\n/>\r\n```\r\n\r\nsetCursorMode is called in the onValueChange function. At this point, we need to understand:\r\n\r\n* What does setCursorMode do?\r\n    \r\n\r\n### What does setCursorMode do?\r\n\r\nTo understand what setCursorMode does, we first need to look at where this function is imported from. The below code is picked from [line 140 in toolbar.tsx](https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L140)\r\n\r\n```js\r\n  const { setCursorMode, cursor_mode } = useEventTarget();\r\n```\r\n\r\nuseEventTarget is a hook in [provider.tsx](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087). Below code is picked from [line 2107 in provider.tsx](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2107)\r\n\r\n```js\r\nconst setCursorMode = useCallback(\r\n    (cursor_mode: CursorMode) => {\r\n      dispatch({\r\n        type: \"surface/cursor-mode\",\r\n        cursor_mode,\r\n      });\r\n    },\r\n    [dispatch]\r\n);\r\n```\r\n\r\nsetCursorMode does one thing, that is to call dispatch function with a object containing type and cursor mode.\r\n\r\ndispatch is a function [destructured from \\_useInternal](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2088C3-L2088C45).\r\n\r\n```js\r\nconst [state, dispatch] = __useInternal();\r\n```\r\n\r\nIn the upcoming articles, we will review this \\_\\_useInternal and the function `toolbar_value_to_cursormode`.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://app.grida.co/canvas](https://app.grida.co/canvas)\r\n    \r\n2. [https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087)\r\n    \r\n3. [https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2107](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2107)",
          "code": "var Component=(()=>{var h=Object.create;var o=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var r in e)o(n,r,{get:e[r],enumerable:!0})},c=(n,e,r,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of y(e))!u.call(n,s)&&s!==r&&o(n,s,{get:()=>e[s],enumerable:!(a=p(e,s))||a.enumerable});return n};var f=(n,e,r)=>(r=n!=null?h(m(n)):{},c(e||!n||!n.__esModule?o(r,\"default\",{value:n,enumerable:!0}):r,n)),v=n=>c(o({},\"__esModule\",{value:!0}),n);var i=g((N,t)=>{t.exports=_jsx_runtime});var x={};b(x,{default:()=>F,frontmatter:()=>w});var l=f(i()),w={title:\"Toolbar's setCursorMode in Grida codebase explained.\"};function d(n){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we will review a function called setCursorMode in Grida source code. To provide more context, you will see this function in \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L175C9-L186C11\",children:\"Toolbar component\"}),\" on the Grida Canvas page.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*K6vI3IpvqLmUaUQ966-_-g.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Toolbar is used to draw elements on the canvas. This below code snippet is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L175C9-L186C11\",children:\"Toolbar.tsx\"})]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"ToolsGroup\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={[\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"rectangle\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"Rectangle\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"R\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"ellipse\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"Ellipse\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"O\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"line\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"Line\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"L\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"image\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"Image\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ]}\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  onValueChange\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"v\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    setCursorMode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"toolbar_value_to_cursormode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"v \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ToolbarToolType\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }}\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/>\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"setCursorMode is called in the onValueChange function. At this point, we need to understand:\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:\"What does setCursorMode do?\"}),`\n`]}),`\n`,(0,l.jsx)(e.h3,{id:\"what-does-setcursormode-do\",children:\"What does setCursorMode do?\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"To understand what setCursorMode does, we first need to look at where this function is imported from. The below code is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L140\",children:\"line 140 in toolbar.tsx\"})]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setCursorMode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cursor_mode \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useEventTarget\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"useEventTarget is a hook in \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087\",children:\"provider.tsx\"}),\". Below code is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2107\",children:\"line 2107 in provider.tsx\"})]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" setCursorMode \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useCallback\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cursor_mode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CursorMode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      dispatch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"surface/cursor-mode\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        cursor_mode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    [\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"dispatch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"setCursorMode does one thing, that is to call dispatch function with a object containing type and cursor mode.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"dispatch is a function \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2088C3-L2088C45\",children:\"destructured from _useInternal\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" dispatch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" __useInternal\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"In the upcoming articles, we will review this __useInternal and the function \",(0,l.jsx)(e.code,{children:\"toolbar_value_to_cursormode\"}),\".\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://app.grida.co/canvas\",children:\"https://app.grida.co/canvas\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2107\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2107\"})}),`\n`]}),`\n`]})]})}function F(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(d,{...n})}):d(n)}return v(x);})();\n;return Component;"
        },
        "_id": "blog/setcursormode-in-grida.mdx",
        "_raw": {
          "sourceFilePath": "blog/setcursormode-in-grida.mdx",
          "sourceFileName": "setcursormode-in-grida.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/setcursormode-in-grida"
        },
        "type": "Doc",
        "slug": "/blog/setcursormode-in-grida",
        "slugAsParams": "setcursormode-in-grida"
      },
      "documentHash": "1740489186412",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/setState-in-zustand.mdx": {
      "document": {
        "title": "setState in Zustand source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, I will provide a review on how setState in Zustand’s source code is written/works. This concept leverages closures in JavaScript and arrow functions.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*j06fhTrBgMVu_tv3D_lTLw.png)\r\n\r\n[StoreApi](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L9) type is straight forward.\r\n\r\n```javascript\r\nexport interface StoreApi<T> {\r\n  setState: SetStateInternal<T>\r\n  getState: () => T\r\n  getInitialState: () => T\r\n  subscribe: (listener: (state: T, prevState: T) => void) => () => void\r\n}\r\n```\r\n\r\nsetState accepts two parameters\r\n\r\n1. partial \r\n    \r\n2. replace\r\n    \r\n\r\nLet’s perform an experiment using the example demo app provided in theZustand repo.\r\n\r\nI added some console statements in the dist to see what’s in partial and replace.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*8MHKhUDAlHQKCh38g_3iXA.png)\r\n\r\nAnd this is what the values are when you update the count in the demo example.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*1l8VM-IDSniIQTEPurunSQ.png)\r\n\r\nSince partial is a function here, \r\n\r\n```javascript\r\nconst nextState = typeof partial === \"function\" ? partial(state) : partial;\r\n```\r\n\r\nIf you look closely, state is initialised when you createStore and is outside the setState function. Does that ring a bell? Refer to [Closures in Javascript](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures).\r\n\r\n`partial` is an [arrow function](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)\r\n\r\n```javascript\r\n(state)=>({\r\n    count: state.count + 1\r\n})\r\n```\r\n\r\nThe beauty is that you can call these functions with a parameter since it returns a function, that is why we have `partial(state)` and state is outside the setState. setState has access to this state variable, thanks to closures in JavaScript.\r\n\r\nYou can run the below code snippet in a browser console and it logs what you sent as a parameter.\r\n\r\n```javascript\r\n(a => console.log(a))(\"test\")\r\n// Output: test\r\n```\r\n\r\nI wrote detailed articles about Object.is and Object.assign usage. Since replace is null,\r\n\r\n```javascript\r\nif (!Object.is(nextState, state)) {\r\n  const previousState = state\r\n  state =\r\n    (replace ?? (typeof nextState !== 'object' || nextState === null))\r\n      ? (nextState as TState)\r\n      : Object.assign({}, state, nextState)\r\n  listeners.forEach((listener) => listener(state, previousState))\r\n}\r\n```\r\n\r\nState is updated using Object.assign. We will look at an advanced use case where replace is not null and understand how setState behaves in the future articles.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L64](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L64)\r\n    \r\n2. [https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L9](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L9)\r\n    \r\n3. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures)\r\n    \r\n4. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow\\_functions](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions)\r\n",
          "code": "var Component=(()=>{var d=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),f=(l,e)=>{for(var t in e)s(l,t,{get:e[t],enumerable:!0})},c=(l,e,t,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(l,r)&&r!==t&&s(l,r,{get:()=>e[r],enumerable:!(a=p(e,r))||a.enumerable});return l};var b=(l,e,t)=>(t=l!=null?d(m(l)):{},c(e||!l||!l.__esModule?s(t,\"default\",{value:l,enumerable:!0}):t,l)),v=l=>c(s({},\"__esModule\",{value:!0}),l);var i=g((x,o)=>{o.exports=_jsx_runtime});var w={};f(w,{default:()=>h,frontmatter:()=>S});var n=b(i()),S={title:\"setState in Zustand source\\xA0code.\"};function F(l){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this article, I will provide a review on how setState in Zustand\\u2019s source code is written/works. This concept leverages closures in JavaScript and arrow functions.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*j06fhTrBgMVu_tv3D_lTLw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L9\",children:\"StoreApi\"}),\" type is straight forward.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" interface\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"T\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  setState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" SetStateInternal\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"T\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  getState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" T\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  getInitialState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" T\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  subscribe\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"listener\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" T\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" prevState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" T\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" void\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"setState accepts two parameters\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"partial\\xA0\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"replace\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Let\\u2019s perform an experiment using the example demo app provided in theZustand repo.\"}),`\n`,(0,n.jsx)(e.p,{children:\"I added some console statements in the dist to see what\\u2019s in partial and replace.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*8MHKhUDAlHQKCh38g_3iXA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"And this is what the values are when you update the count in the demo example.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*1l8VM-IDSniIQTEPurunSQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Since partial is a function here,\\xA0\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"function\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you look closely, state is initialised when you createStore and is outside the setState function. Does that ring a bell? Refer to \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures\",children:\"Closures in Javascript\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"partial\"}),\" is an \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\",children:\"arrow function\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")=>({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    count\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"count \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The beauty is that you can call these functions with a parameter since it returns a function, that is why we have \",(0,n.jsx)(e.code,{children:\"partial(state)\"}),\" and state is outside the setState. setState has access to this state variable, thanks to closures in JavaScript.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"You can run the below code snippet in a browser console and it logs what you sent as a parameter.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"a \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" console\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"a\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"test\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Output: test\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"I wrote detailed articles about Object.is and Object.assign usage. Since replace is null,\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" previousState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  state \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"replace \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'object'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null))\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      :\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Object\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"assign\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({},\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  listeners\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"forEach\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" listener\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" previousState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"State is updated using Object.assign. We will look at an advanced use case where replace is not null and understand how setState behaves in the future articles.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L64\",children:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L64\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L9\",children:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L9\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions\"})}),`\n`]}),`\n`]})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(F,{...l})}):F(l)}return v(w);})();\n;return Component;"
        },
        "_id": "blog/setState-in-zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/setState-in-zustand.mdx",
          "sourceFileName": "setState-in-zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/setState-in-zustand"
        },
        "type": "Doc",
        "slug": "/blog/setState-in-zustand",
        "slugAsParams": "setState-in-zustand"
      },
      "documentHash": "1740489186410",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Shimmer-effect-in-Card.mdx": {
      "document": {
        "title": "Shimmer effect in Card when you load Supabase dashboard.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nWhen loading a dashboard, especially one as feature-rich as Supabase’s, it’s essential to provide visual feedback to users indicating that content is being loaded. A popular and visually appealing way to achieve this is by using a shimmer effect. This effect simulates a loading state and keeps users engaged while the actual content is being fetched.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*t5qVmiFcIDkaIEnvA0tDwA.png)\r\n\r\nLet’s explore how Supabase implements a shimmer effect in their dashboard using the `animate` property and some creative CSS.\r\n\r\n# **Shimmer Effect Using the Animate Property**\r\n\r\nThe [`ShimmeringCard`](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/Home/ProjectList/ShimmeringCard.tsx#L3) component in Supabase's source code showcases how to create a shimmering loading effect using a combination of React and CSS animations.\r\n\r\nHere’s the implementation of the `ShimmeringCard` component:\r\n\r\n```plaintext\r\n// Pulled from \r\n// https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/Home/ProjectList/ShimmeringCard.tsx#L3\r\nimport CardButton from 'components/ui/CardButton'\r\n\r\nconst ShimmeringCard = () => {\r\n  return (\r\n    <CardButton\r\n      className=\"h-44 !px-0 pt-5 pb-0\"\r\n      title={\r\n        <div className=\"w-full justify-between space-y-1.5 px-5\">\r\n          <p className=\"flex-shrink truncate text-sm pr-4 shimmering-loader h-5 w-20\" />\r\n          <p className=\"text-sm lowercase text-foreground-light h-4 w-40 shimmering-loader\" />\r\n        </div>\r\n      }\r\n    />\r\n  )\r\n}\r\nexport default ShimmeringCard\r\n```\r\n\r\nIn this component, `CardButton` is used to create the card structure, and the shimmer effect is applied to the text elements within the card using the `shimmering-loader` class.\r\n\r\n# **The** `shimmering-loader` CSS Class\r\n\r\nThe [`shimmering-loader`](https://github.com/supabase/supabase/blob/ce4213956045da0c174f4881b4300b508e30978c/apps/docs/styles/main.scss#L308C1-L317C2) class is defined in the [`main.scss`](https://github.com/supabase/supabase/blob/ce4213956045da0c174f4881b4300b508e30978c/apps/docs/styles/main.scss#L308C1-L317C2) file and leverages the `animate` property to create the shimmer effect:\r\n\r\n```plaintext\r\n.shimmering-loader {\r\n  animation: shimmer 2s infinite linear;\r\n  background: linear-gradient(\r\n    to right,\r\n    hsl(var(--border-default)) 4%,\r\n    hsl(var(--background-surface-200)) 25%,\r\n    hsl(var(--border-default)) 36%\r\n  );\r\n  background-size: 1000px 100%;\r\n}\r\n```\r\n\r\n# **How It Works**\r\n\r\n1. **Animation Definition**: The `shimmer` keyframes animation moves the background gradient from left to right.\r\n    \r\n2. **Gradient Background**: The background is a linear gradient that creates the shimmer effect. The colors transition smoothly to give the appearance of a light moving across the surface.\r\n    \r\n3. **Animation Application**: The `shimmering-loader` class applies this animation to any element, making it shimmer.\r\n    \r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png)\r\n\r\n> [*Get free courses inspired by the best practices used in open source.*](https://app.thinkthroo.com/best-practices)\r\n\r\n# About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/Home/ProjectList/ShimmeringCard.tsx#L3](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/Home/ProjectList/ShimmeringCard.tsx#L3)\r\n    \r\n2. [https://github.com/supabase/supabase/blob/ce4213956045da0c174f4881b4300b508e30978c/apps/docs/styles/main.scss#L308C1-L317C2](https://github.com/supabase/supabase/blob/ce4213956045da0c174f4881b4300b508e30978c/apps/docs/styles/main.scss#L308C1-L317C2)",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),N=(a,e)=>{for(var i in e)r(a,i,{get:e[i],enumerable:!0})},c=(a,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of u(e))!b.call(a,s)&&s!==i&&r(a,s,{get:()=>e[s],enumerable:!(t=m(e,s))||t.enumerable});return a};var y=(a,e,i)=>(i=a!=null?p(g(a)):{},c(e||!a||!a.__esModule?r(i,\"default\",{value:a,enumerable:!0}):i,a)),k=a=>c(r({},\"__esModule\",{value:!0}),a);var l=f((v,h)=>{h.exports=_jsx_runtime});var C={};N(C,{default:()=>o,frontmatter:()=>x});var n=y(l()),x={title:\"Shimmer effect in Card when you load Supabase dashboard.\"};function d(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"When loading a dashboard, especially one as feature-rich as Supabase\\u2019s, it\\u2019s essential to provide visual feedback to users indicating that content is being loaded. A popular and visually appealing way to achieve this is by using a shimmer effect. This effect simulates a loading state and keeps users engaged while the actual content is being fetched.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*t5qVmiFcIDkaIEnvA0tDwA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s explore how Supabase implements a shimmer effect in their dashboard using the \",(0,n.jsx)(e.code,{children:\"animate\"}),\" property and some creative CSS.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"shimmer-effect-using-the-animate-property\",children:(0,n.jsx)(e.strong,{children:\"Shimmer Effect Using the Animate Property\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/Home/ProjectList/ShimmeringCard.tsx#L3\",children:(0,n.jsx)(e.code,{children:\"ShimmeringCard\"})}),\" component in Supabase's source code showcases how to create a shimmering loading effect using a combination of React and CSS animations.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Here\\u2019s the implementation of the \",(0,n.jsx)(e.code,{children:\"ShimmeringCard\"}),\" component:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Pulled from \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/Home/ProjectList/ShimmeringCard.tsx#L3\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import CardButton from 'components/ui/CardButton'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const ShimmeringCard = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <CardButton\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'      className=\"h-44 !px-0 pt-5 pb-0\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      title={\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'        <div className=\"w-full justify-between space-y-1.5 px-5\">'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          <p className=\"flex-shrink truncate text-sm pr-4 shimmering-loader h-5 w-20\" />'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'          <p className=\"text-sm lowercase text-foreground-light h-4 w-40 shimmering-loader\" />'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        </div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export default ShimmeringCard\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"In this component, \",(0,n.jsx)(e.code,{children:\"CardButton\"}),\" is used to create the card structure, and the shimmer effect is applied to the text elements within the card using the \",(0,n.jsx)(e.code,{children:\"shimmering-loader\"}),\" class.\"]}),`\n`,(0,n.jsxs)(e.h1,{id:\"the-shimmering-loader-css-class\",children:[(0,n.jsx)(e.strong,{children:\"The\"}),\" \",(0,n.jsx)(e.code,{children:\"shimmering-loader\"}),\" CSS Class\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/ce4213956045da0c174f4881b4300b508e30978c/apps/docs/styles/main.scss#L308C1-L317C2\",children:(0,n.jsx)(e.code,{children:\"shimmering-loader\"})}),\" class is defined in the \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/ce4213956045da0c174f4881b4300b508e30978c/apps/docs/styles/main.scss#L308C1-L317C2\",children:(0,n.jsx)(e.code,{children:\"main.scss\"})}),\" file and leverages the \",(0,n.jsx)(e.code,{children:\"animate\"}),\" property to create the shimmer effect:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\".shimmering-loader {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  animation: shimmer 2s infinite linear;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  background: linear-gradient(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    to right,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    hsl(var(--border-default)) 4%,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    hsl(var(--background-surface-200)) 25%,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    hsl(var(--border-default)) 36%\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  background-size: 1000px 100%;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"how-it-works\",children:(0,n.jsx)(e.strong,{children:\"How It Works\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Animation Definition\"}),\": The \",(0,n.jsx)(e.code,{children:\"shimmer\"}),\" keyframes animation moves the background gradient from left to right.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Gradient Background\"}),\": The background is a linear gradient that creates the shimmer effect. The colors transition smoothly to give the appearance of a light moving across the surface.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Animation Application\"}),\": The \",(0,n.jsx)(e.code,{children:\"shimmering-loader\"}),\" class applies this animation to any element, making it shimmer.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:(0,n.jsx)(e.em,{children:\"Get free courses inspired by the best practices used in open source.\"})})}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/Home/ProjectList/ShimmeringCard.tsx#L3\",children:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/Home/ProjectList/ShimmeringCard.tsx#L3\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/ce4213956045da0c174f4881b4300b508e30978c/apps/docs/styles/main.scss#L308C1-L317C2\",children:\"https://github.com/supabase/supabase/blob/ce4213956045da0c174f4881b4300b508e30978c/apps/docs/styles/main.scss#L308C1-L317C2\"})}),`\n`]}),`\n`]})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return k(C);})();\n;return Component;"
        },
        "_id": "blog/Shimmer-effect-in-Card.mdx",
        "_raw": {
          "sourceFilePath": "blog/Shimmer-effect-in-Card.mdx",
          "sourceFileName": "Shimmer-effect-in-Card.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Shimmer-effect-in-Card"
        },
        "type": "Doc",
        "slug": "/blog/Shimmer-effect-in-Card",
        "slugAsParams": "Shimmer-effect-in-Card"
      },
      "documentHash": "1741940934940",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/silence-logs-in-test.mdx": {
      "document": {
        "title": "How to temporarily silence logs in tests\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nLogger package in [Changesets source code](https://github.com/changesets/changesets/tree/main/packages/logger) provides a [documentation about silencing log message in tests](https://github.com/changesets/changesets/tree/main/packages/logger#silencing-messages-in-tests). This got me wonder how Changesets do it and made me look into its source code.\r\n\r\n### Changesets repository search for silencing logs\r\n\r\nI searched for [temporarilySilenceLogs across the Changesets repo](https://github.com/search?q=repo%3Achangesets%2Fchangesets%20temporarilySilenceLogs%20&type=code) using Github search.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*_ZqcNXp45rTSIn686o9O8Q.png)\r\n\r\nWhat made me choose to search for temporarilySilenceLogs is the fact that it is mentioned in the Logger  \r\npackage Readme.\r\n\r\n```plaintext\r\nimport { temporarilySilenceLogs } from \"@changesets/test-utils\";\r\nimport { log } from \"@changesets/logger\";\r\ntemporarilySilenceLogs();\r\n// Now the logs in this test file are not actually logged to std out\r\nlog(\"I am not logged\");\r\n// Use console.log to log messages in tests if required\r\nconsole.log(\"Yay, I am logged\");\r\n```\r\n\r\nWhen you are trying to understand the source code, you can use documentation as your starting point and search for variables and functions to set the direction for your exploration when you are dealing with large projects like [Changesets](https://github.com/changesets/changesets/tree/main/packages/logger).\r\n\r\n### temporarilySilenceLogs\r\n\r\nThe below code is picked from [Changesets source code](https://github.com/changesets/changesets/blob/baf56448606e005577dbe2fb1e78ff457dcaaefd/scripts/test-utils/src/index.ts#L79C1-L88C5).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*O4YHcCSYRlcX3XanwNn9cQ.png)\r\n\r\nThis function accepts a function as argument and then silences the logs using a function named [createLogSilencer](https://github.com/changesets/changesets/blob/baf56448606e005577dbe2fb1e78ff457dcaaefd/scripts/test-utils/src/index.ts#L16).\r\n\r\nPay attention to the setup function here:\r\n\r\n```plaintext\r\nconst dispose = silencer.setup();\r\ntry {\r\n await testFn();\r\n} finally {\r\n dispose();\r\n}\r\n```\r\n\r\n### createLogSilencer\r\n\r\nBelow code is picked from [Changesets](https://github.com/changesets/changesets/blob/baf56448606e005577dbe2fb1e78ff457dcaaefd/scripts/test-utils/src/index.ts#L16)\r\n\r\n```plaintext\r\nconst createLogSilencer = () => {\r\n  const originalLoggerError = logger.error;\r\n  const originalLoggerInfo = logger.info;\r\n  const originalLoggerLog = logger.log;\r\n  const originalLoggerWarn = logger.warn;\r\n  const originalLoggerSuccess = logger.success;\r\n\r\n  const originalConsoleError = console.error;\r\n  const originalConsoleInfo = console.info;\r\n  const originalConsoleLog = console.log;\r\n  const originalConsoleWarn = console.warn;\r\n\r\n  const originalStdoutWrite = process.stdout.write;\r\n  const originalStderrWrite = process.stderr.write;\r\n\r\n  return {\r\n    setup() {\r\n      logger.error = jest.fn();\r\n      logger.info = jest.fn();\r\n      logger.log = jest.fn();\r\n      logger.warn = jest.fn();\r\n      logger.success = jest.fn();\r\n\r\n      console.error = jest.fn();\r\n      console.info = jest.fn();\r\n      console.log = jest.fn();\r\n      console.warn = jest.fn();\r\n\r\n      process.stdout.write = jest.fn();\r\n      process.stderr.write = jest.fn();\r\n\r\n      return () => {\r\n        logger.error = originalLoggerError;\r\n        logger.info = originalLoggerInfo;\r\n        logger.log = originalLoggerLog;\r\n        logger.warn = originalLoggerWarn;\r\n        logger.success = originalLoggerSuccess;\r\n\r\n        console.error = originalConsoleError;\r\n        console.info = originalConsoleInfo;\r\n        console.log = originalConsoleLog;\r\n        console.warn = originalConsoleWarn;\r\n\r\n        process.stdout.write = originalStdoutWrite;\r\n        process.stderr.write = originalStderrWrite;\r\n      };\r\n    },\r\n  };\r\n};\r\n```\r\n\r\nWhat is happening here?\r\n\r\n1. The assignment\r\n    \r\n\r\n```plaintext\r\nconst originalLoggerError = logger.error;\r\nconst originalLoggerInfo = logger.info;\r\nconst originalLoggerLog = logger.log;\r\nconst originalLoggerWarn = logger.warn;\r\nconst originalLoggerSuccess = logger.success;\r\nconst originalConsoleError = console.error;\r\nconst originalConsoleInfo = console.info;\r\nconst originalConsoleLog = console.log;\r\nconst originalConsoleWarn = console.warn;\r\nconst originalStdoutWrite = process.stdout.write;\r\nconst originalStderrWrite = process.stderr.write;\r\n```\r\n\r\n2\\. Returns setup\r\n\r\nIf you noticed above, setup is called inside temporarilySilenceLogs, this is returned by `createLogSilencer`\r\n\r\n```plaintext\r\nreturn {\r\n    setup() {\r\n      logger.error = jest.fn();\r\n      logger.info = jest.fn();\r\n      logger.log = jest.fn();\r\n      logger.warn = jest.fn();\r\n      logger.success = jest.fn();\r\n\r\n      console.error = jest.fn();\r\n      console.info = jest.fn();\r\n      console.log = jest.fn();\r\n      console.warn = jest.fn();\r\n\r\n      process.stdout.write = jest.fn();\r\n      process.stderr.write = jest.fn();\r\n\r\n      return () => {\r\n        logger.error = originalLoggerError;\r\n        logger.info = originalLoggerInfo;\r\n        logger.log = originalLoggerLog;\r\n        logger.warn = originalLoggerWarn;\r\n        logger.success = originalLoggerSuccess;\r\n\r\n        console.error = originalConsoleError;\r\n        console.info = originalConsoleInfo;\r\n        console.log = originalConsoleLog;\r\n        console.warn = originalConsoleWarn;\r\n\r\n        process.stdout.write = originalStdoutWrite;\r\n        process.stderr.write = originalStderrWrite;\r\n      };\r\n    },\r\n  };\r\n```\r\n\r\nWhat is happening in the setup function?\r\n\r\n2.1 Loggers and console API are initialised to jest.fn()\r\n\r\n```plaintext\r\nlogger.error = jest.fn();\r\nlogger.info = jest.fn();\r\nlogger.log = jest.fn();\r\nlogger.warn = jest.fn();\r\nlogger.success = jest.fn();\r\nconsole.error = jest.fn();\r\nconsole.info = jest.fn();\r\nconsole.log = jest.fn();\r\nconsole.warn = jest.fn();\r\nprocess.stdout.write = jest.fn();\r\nprocess.stderr.write = jest.fn();\r\n```\r\n\r\nThis pretty much silences the logs since jest.fn() gets called when you use any logger, hence this is considerd as setup, an important step to silence your logs.\r\n\r\n2.2 setUp returns original loggers\r\n\r\nIf you have noticed, the sequence of function calls are\r\n\r\na. const silencer = createLogSilencer();  \r\nb. const dispose = silencer.setup();  \r\nc. In the finally block.\r\n\r\n```plaintext\r\ntry {\r\n await testFn();\r\n} finally {\r\n dispose();\r\n}\r\n```\r\n\r\ndispose is returned by setup function that is returned by createLogSilencer. This step restores the logging mechanism after executing your test function.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/changesets/changesets/tree/main/packages/logger#silencing-messages-in-tests](https://github.com/changesets/changesets/tree/main/packages/logger#silencing-messages-in-tests)\r\n    \r\n2. [https://github.com/search?q=repo%3Achangesets%2Fchangesets%20temporarilySilenceLogs%20&type=code](https://github.com/search?q=repo%3Achangesets%2Fchangesets%20temporarilySilenceLogs%20&type=code)\r\n    \r\n3. [https://github.com/changesets/changesets/blob/baf56448606e005577dbe2fb1e78ff457dcaaefd/scripts/test-utils/src/index.ts#L16](https://github.com/changesets/changesets/blob/baf56448606e005577dbe2fb1e78ff457dcaaefd/scripts/test-utils/src/index.ts#L16)",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var N=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),b=(s,e)=>{for(var a in e)r(s,a,{get:e[a],enumerable:!0})},c=(s,e,a,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of m(e))!f.call(s,l)&&l!==a&&r(s,l,{get:()=>e[l],enumerable:!(i=g(e,l))||i.enumerable});return s};var y=(s,e,a)=>(a=s!=null?p(u(s)):{},c(e||!s||!s.__esModule?r(a,\"default\",{value:s,enumerable:!0}):a,s)),L=s=>c(r({},\"__esModule\",{value:!0}),s);var o=N((S,t)=>{t.exports=_jsx_runtime});var j={};b(j,{default:()=>d,frontmatter:()=>w});var n=y(o()),w={title:\"How to temporarily silence logs in\\xA0tests\"};function h(s){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...s.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"Logger package in \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/tree/main/packages/logger\",children:\"Changesets source code\"}),\" provides a \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/tree/main/packages/logger#silencing-messages-in-tests\",children:\"documentation about silencing log message in tests\"}),\". This got me wonder how Changesets do it and made me look into its source code.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"changesets-repository-search-for-silencing-logs\",children:\"Changesets repository search for silencing logs\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I searched for \",(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Achangesets%2Fchangesets%20temporarilySilenceLogs%20&type=code\",children:\"temporarilySilenceLogs across the Changesets repo\"}),\" using Github search.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*_ZqcNXp45rTSIn686o9O8Q.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"What made me choose to search for temporarilySilenceLogs is the fact that it is mentioned in the Logger\",(0,n.jsx)(e.br,{}),`\n`,\"package Readme.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { temporarilySilenceLogs } from \"@changesets/test-utils\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { log } from \"@changesets/logger\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"temporarilySilenceLogs();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Now the logs in this test file are not actually logged to std out\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'log(\"I am not logged\");'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Use console.log to log messages in tests if required\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'console.log(\"Yay, I am logged\");'})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you are trying to understand the source code, you can use documentation as your starting point and search for variables and functions to set the direction for your exploration when you are dealing with large projects like \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/tree/main/packages/logger\",children:\"Changesets\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"temporarilysilencelogs\",children:\"temporarilySilenceLogs\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/baf56448606e005577dbe2fb1e78ff457dcaaefd/scripts/test-utils/src/index.ts#L79C1-L88C5\",children:\"Changesets source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*O4YHcCSYRlcX3XanwNn9cQ.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This function accepts a function as argument and then silences the logs using a function named \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/baf56448606e005577dbe2fb1e78ff457dcaaefd/scripts/test-utils/src/index.ts#L16\",children:\"createLogSilencer\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Pay attention to the setup function here:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const dispose = silencer.setup();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"try {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" await testFn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"} finally {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" dispose();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"createlogsilencer\",children:\"createLogSilencer\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/baf56448606e005577dbe2fb1e78ff457dcaaefd/scripts/test-utils/src/index.ts#L16\",children:\"Changesets\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const createLogSilencer = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalLoggerError = logger.error;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalLoggerInfo = logger.info;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalLoggerLog = logger.log;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalLoggerWarn = logger.warn;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalLoggerSuccess = logger.success;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalConsoleError = console.error;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalConsoleInfo = console.info;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalConsoleLog = console.log;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalConsoleWarn = console.warn;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalStdoutWrite = process.stdout.write;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const originalStderrWrite = process.stderr.write;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    setup() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      logger.error = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      logger.info = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      logger.log = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      logger.warn = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      logger.success = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      console.error = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      console.info = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      console.log = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      console.warn = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      process.stdout.write = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      process.stderr.write = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        logger.error = originalLoggerError;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        logger.info = originalLoggerInfo;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        logger.log = originalLoggerLog;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        logger.warn = originalLoggerWarn;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        logger.success = originalLoggerSuccess;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        console.error = originalConsoleError;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        console.info = originalConsoleInfo;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        console.log = originalConsoleLog;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        console.warn = originalConsoleWarn;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        process.stdout.write = originalStdoutWrite;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        process.stderr.write = originalStderrWrite;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"What is happening here?\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"The assignment\"}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalLoggerError = logger.error;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalLoggerInfo = logger.info;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalLoggerLog = logger.log;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalLoggerWarn = logger.warn;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalLoggerSuccess = logger.success;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalConsoleError = console.error;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalConsoleInfo = console.info;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalConsoleLog = console.log;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalConsoleWarn = console.warn;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalStdoutWrite = process.stdout.write;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const originalStderrWrite = process.stderr.write;\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"2. Returns setup\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"If you noticed above, setup is called inside temporarilySilenceLogs, this is returned by \",(0,n.jsx)(e.code,{children:\"createLogSilencer\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"return {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    setup() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      logger.error = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      logger.info = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      logger.log = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      logger.warn = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      logger.success = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      console.error = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      console.info = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      console.log = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      console.warn = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      process.stdout.write = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      process.stderr.write = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        logger.error = originalLoggerError;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        logger.info = originalLoggerInfo;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        logger.log = originalLoggerLog;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        logger.warn = originalLoggerWarn;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        logger.success = originalLoggerSuccess;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        console.error = originalConsoleError;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        console.info = originalConsoleInfo;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        console.log = originalConsoleLog;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        console.warn = originalConsoleWarn;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        process.stdout.write = originalStdoutWrite;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        process.stderr.write = originalStderrWrite;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  };\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"What is happening in the setup function?\"}),`\n`,(0,n.jsx)(e.p,{children:\"2.1 Loggers and console API are initialised to jest.fn()\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"logger.error = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"logger.info = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"logger.log = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"logger.warn = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"logger.success = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.error = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.info = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.warn = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"process.stdout.write = jest.fn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"process.stderr.write = jest.fn();\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This pretty much silences the logs since jest.fn() gets called when you use any logger, hence this is considerd as setup, an important step to silence your logs.\"}),`\n`,(0,n.jsx)(e.p,{children:\"2.2 setUp returns original loggers\"}),`\n`,(0,n.jsx)(e.p,{children:\"If you have noticed, the sequence of function calls are\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"a. const silencer = createLogSilencer();\",(0,n.jsx)(e.br,{}),`\n`,\"b. const dispose = silencer.setup();\",(0,n.jsx)(e.br,{}),`\n`,\"c. In the finally block.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"try {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" await testFn();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"} finally {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" dispose();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"dispose is returned by setup function that is returned by createLogSilencer. This step restores the logging mechanism after executing your test function.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/tree/main/packages/logger#silencing-messages-in-tests\",children:\"https://github.com/changesets/changesets/tree/main/packages/logger#silencing-messages-in-tests\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Achangesets%2Fchangesets%20temporarilySilenceLogs%20&type=code\",children:\"https://github.com/search?q=repo%3Achangesets%2Fchangesets%20temporarilySilenceLogs%20&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/changesets/changesets/blob/baf56448606e005577dbe2fb1e78ff457dcaaefd/scripts/test-utils/src/index.ts#L16\",children:\"https://github.com/changesets/changesets/blob/baf56448606e005577dbe2fb1e78ff457dcaaefd/scripts/test-utils/src/index.ts#L16\"})}),`\n`]}),`\n`]})]})}function d(s={}){let{wrapper:e}=s.components||{};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(h,{...s})}):h(s)}return L(j);})();\n;return Component;"
        },
        "_id": "blog/silence-logs-in-test.mdx",
        "_raw": {
          "sourceFilePath": "blog/silence-logs-in-test.mdx",
          "sourceFileName": "silence-logs-in-test.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/silence-logs-in-test"
        },
        "type": "Doc",
        "slug": "/blog/silence-logs-in-test",
        "slugAsParams": "silence-logs-in-test"
      },
      "documentHash": "1740489186414",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/sizereport-Preact-source-code.mdx": {
      "document": {
        "title": "sizereport.config.js in Preact source code.  \r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nI found a file named [sizereport.config.js in Preact source code](https://github.com/preactjs/preact/blob/main/sizereport.config.js) and it has the below code.\r\n\r\n```plaintext\r\nmodule.exports = {\r\n repo: 'preactjs/preact',\r\n path: ['./{compat,debug,hooks,}/dist/**/!(*.map)'],\r\n branch: 'main'\r\n};\r\n```\r\n\r\nI was trying to find where this config is used, but I couldn’t yet. Below are the [search results](https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code):\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*QmxthZjxJceSFFs6mQ9dWA.png)\r\n\r\nInstead I found something else. There is a [size.yml in the .github folder](https://github.com/preactjs/preact/blob/main/.github/workflows/size.yml)\r\n\r\n### size.yml\r\n\r\n```plaintext\r\nname: Compressed Size\r\n\r\non:\r\n  workflow_call:\r\n\r\njobs:\r\n  build:\r\n    runs-on: ubuntu-latest\r\n    steps:\r\n      - uses: actions/checkout@v4\r\n      - uses: actions/setup-node@v4\r\n        with:\r\n          node-version-file: 'package.json'\r\n          cache: 'npm'\r\n          cache-dependency-path: '**/package-lock.json'\r\n      - uses: preactjs/compressed-size-action@v2\r\n        with:\r\n          repo-token: '${{ secrets.GITHUB_TOKEN }}'\r\n          # Our `prepare` script already builds the app post-install,\r\n          # building it again would be redundant\r\n          build-script: 'npm run --if-present noop'\r\n```\r\n\r\nThis size workflow action contains this above code. It uses preactjs/compressed-size-action@v2. [compressed-sized-action is another repository.](https://github.com/preactjs/compressed-size-action/tree/master)\r\n\r\n### Compressed Size Action\r\n\r\nA GitHub action that reports changes in compressed file sizes on your PRs.\r\n\r\n* Automatically uses `yarn`, `pnpm`, `bun`, or `npm ci` when lockfiles are present\r\n    \r\n* Builds your PR, then builds the target and compares between the two\r\n    \r\n* Doesn’t upload anything or rely on centralized storage\r\n    \r\n* Supports [custom build scripts](https://github.com/preactjs/compressed-size-action/tree/master#customizing-the-build) and [file patterns](https://github.com/preactjs/compressed-size-action/tree/master#customizing-the-list-of-files)\r\n    \r\n\r\nRead more about [compress-size-action](https://github.com/marketplace/actions/compressed-size-action).\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*QAtoXcgYPTKpXqP84GYOUA.png)\r\n\r\nThe above image shows how this Github action reports the size changes, check out this [pull request](https://github.com/preactjs/compressed-size-action/pull/53).\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/preactjs/preact/blob/main/sizereport.config.js](https://github.com/preactjs/preact/blob/main/sizereport.config.js)\r\n    \r\n2. [https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code](https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code)\r\n    \r\n3. [https://github.com/preactjs/compressed-size-action/tree/master](https://github.com/preactjs/compressed-size-action/tree/master)",
          "code": "var Component=(()=>{var d=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),j=(a,e)=>{for(var r in e)i(a,r,{get:e[r],enumerable:!0})},c=(a,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of u(e))!b.call(a,t)&&t!==r&&i(a,t,{get:()=>e[t],enumerable:!(s=m(e,t))||s.enumerable});return a};var y=(a,e,r)=>(r=a!=null?d(g(a)):{},c(e||!a||!a.__esModule?i(r,\"default\",{value:a,enumerable:!0}):r,a)),z=a=>c(i({},\"__esModule\",{value:!0}),a);var l=f((x,h)=>{h.exports=_jsx_runtime});var w={};j(w,{default:()=>p,frontmatter:()=>N});var n=y(l()),N={title:\"sizereport.config.js in Preact source code.\"};function o(a){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I found a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/sizereport.config.js\",children:\"sizereport.config.js in Preact source code\"}),\" and it has the below code.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"module.exports = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" repo: 'preactjs/preact',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" path: ['./{compat,debug,hooks,}/dist/**/!(*.map)'],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" branch: 'main'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I was trying to find where this config is used, but I couldn\\u2019t yet. Below are the \",(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code\",children:\"search results\"}),\":\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*QmxthZjxJceSFFs6mQ9dWA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Instead I found something else. There is a \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/.github/workflows/size.yml\",children:\"size.yml in the\\xA0.github folder\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"sizeyml\",children:\"size.yml\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"name: Compressed Size\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"on:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  workflow_call:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"jobs:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  build:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    runs-on: ubuntu-latest\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    steps:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      - uses: actions/checkout@v4\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      - uses: actions/setup-node@v4\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        with:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          node-version-file: 'package.json'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          cache: 'npm'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          cache-dependency-path: '**/package-lock.json'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      - uses: preactjs/compressed-size-action@v2\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        with:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          repo-token: '${{ secrets.GITHUB_TOKEN }}'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          # Our `prepare` script already builds the app post-install,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          # building it again would be redundant\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          build-script: 'npm run --if-present noop'\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This size workflow action contains this above code. It uses preactjs/compressed-size-action@v2. \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/compressed-size-action/tree/master\",children:\"compressed-sized-action is another repository.\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"compressed-sizeaction\",children:\"Compressed Size\\xA0Action\"}),`\n`,(0,n.jsx)(e.p,{children:\"A GitHub action that reports changes in compressed file sizes on your PRs.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Automatically uses \",(0,n.jsx)(e.code,{children:\"yarn\"}),\", \",(0,n.jsx)(e.code,{children:\"pnpm\"}),\", \",(0,n.jsx)(e.code,{children:\"bun\"}),\", or \",(0,n.jsx)(e.code,{children:\"npm ci\"}),\" when lockfiles are present\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Builds your PR, then builds the target and compares between the two\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Doesn\\u2019t upload anything or rely on centralized storage\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Supports \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/compressed-size-action/tree/master#customizing-the-build\",children:\"custom build scripts\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/compressed-size-action/tree/master#customizing-the-list-of-files\",children:\"file patterns\"})]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://github.com/marketplace/actions/compressed-size-action\",children:\"compress-size-action\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*QAtoXcgYPTKpXqP84GYOUA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The above image shows how this Github action reports the size changes, check out this \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/compressed-size-action/pull/53\",children:\"pull request\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/sizereport.config.js\",children:\"https://github.com/preactjs/preact/blob/main/sizereport.config.js\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code\",children:\"https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/compressed-size-action/tree/master\",children:\"https://github.com/preactjs/compressed-size-action/tree/master\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(o,{...a})}):o(a)}return z(w);})();\n;return Component;"
        },
        "_id": "blog/sizereport-Preact-source-code.mdx",
        "_raw": {
          "sourceFilePath": "blog/sizereport-Preact-source-code.mdx",
          "sourceFileName": "sizereport-Preact-source-code.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/sizereport-Preact-source-code"
        },
        "type": "Doc",
        "slug": "/blog/sizereport-Preact-source-code",
        "slugAsParams": "sizereport-Preact-source-code"
      },
      "documentHash": "1741002722551",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/startTimingTracking-in-react.mdx": {
      "document": {
        "title": "startTimingTracking in react-scan source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we review the below code snippet picked from [event-tracking.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L364)\r\n\r\n```plaintext\r\nexport const startTimingTracking = () => {\r\n  const unSubPerformance = setupPerformancePublisher();\r\n  const unSubDirtyTaskTracking = startDirtyTaskTracking();\r\n  const unSubLongPipelineTracking = startLongPipelineTracking();\r\n\r\n  const onComplete = async (\r\n    _: string,\r\n    finalInteraction: FinalInteraction,\r\n    event: PerformanceEntryChannelEvent,\r\n  ) => {\r\n    toolbarEventStore.getState().actions.addEvent({\r\n      kind: 'interaction',\r\n      id: not_globally_unique_generateId(),\r\n      data: {\r\n        startAt: finalInteraction.detailedTiming.blockingTimeStart,\r\n        endAt: performance.now() + performance.timeOrigin,\r\n        meta: { ...finalInteraction, kind: event.kind }, // TODO, will need interaction specific metadata here\r\n      },\r\n    });\r\n\r\n    const existingCompletedInteractions =\r\n      performanceEntryChannels.getChannelState('recording');\r\n\r\n    finalInteraction.detailedTiming.stopListeningForRenders();\r\n\r\n    if (existingCompletedInteractions.length) {\r\n      // then performance entry and our detailed timing handlers are out of sync, we disregard that entry\r\n      // it may be possible the performance entry returned before detailed timing. If that's the case we should update\r\n      // assumptions and deal with mapping the entry back to the detailed timing here\r\n      performanceEntryChannels.updateChannelState(\r\n        'recording',\r\n        () => new BoundedArray(MAX_CHANNEL_SIZE),\r\n      );\r\n    }\r\n  };\r\n  const unSubDetailedPointerTiming = setupDetailedPointerTimingListener(\r\n    'pointer',\r\n    {\r\n      onComplete,\r\n    },\r\n  );\r\n  const unSubDetailedKeyboardTiming = setupDetailedPointerTimingListener(\r\n    'keyboard',\r\n    {\r\n      onComplete,\r\n    },\r\n  );\r\n\r\n  const unSubInteractions = listenForPerformanceEntryInteractions(\r\n    (completedInteraction) => {\r\n      interactionStore.setState(\r\n        BoundedArray.fromArray(\r\n          interactionStore.getCurrentState().concat(completedInteraction),\r\n          MAX_INTERACTION_BATCH,\r\n        ),\r\n      );\r\n    },\r\n  );\r\n\r\n  return () => {\r\n    unSubDirtyTaskTracking();\r\n    unSubLongPipelineTracking();\r\n    unSubPerformance();\r\n    unSubDetailedPointerTiming();\r\n    unSubInteractions();\r\n    unSubDetailedKeyboardTiming();\r\n  };\r\n};\r\n```\r\n\r\nLet’s go over this function in chunks.\r\n\r\n```plaintext\r\nconst unSubPerformance = setupPerformancePublisher();\r\nconst unSubDirtyTaskTracking = startDirtyTaskTracking();\r\nconst unSubLongPipelineTracking = startLongPipelineTracking();\r\n```\r\n\r\nthis calls three functions — setupPerformancePublisher, startDirtyTaskTracking, startLongPipelineTracking.\r\n\r\nstartDirtyTaskTracking and startLongPipelineTracking are defined in the same event-tracking.ts file except for the setupPerformancePublisher which is imported from [core/notifications/performance.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333).\r\n\r\n> If there is one thing that I noticed, it is the cleanup involved across the react-scan codebase to avoid memory leaks.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*lzkeqQJsvALHF4CPpJrftQ.png)\r\n\r\n### onComplete function:\r\n\r\n```plaintext\r\nconst onComplete = async (\r\n    _: string,\r\n    finalInteraction: FinalInteraction,\r\n    event: PerformanceEntryChannelEvent,\r\n  ) => {\r\n    toolbarEventStore.getState().actions.addEvent({\r\n      kind: 'interaction',\r\n      id: not_globally_unique_generateId(),\r\n      data: {\r\n        startAt: finalInteraction.detailedTiming.blockingTimeStart,\r\n        endAt: performance.now() + performance.timeOrigin,\r\n        meta: { ...finalInteraction, kind: event.kind }, // TODO, will need interaction specific metadata here\r\n      },\r\n    });\r\n\r\n    const existingCompletedInteractions =\r\n      performanceEntryChannels.getChannelState('recording');\r\n\r\n    finalInteraction.detailedTiming.stopListeningForRenders();\r\n\r\n    if (existingCompletedInteractions.length) {\r\n      // then performance entry and our detailed timing handlers are out of sync, we disregard that entry\r\n      // it may be possible the performance entry returned before detailed timing. If that's the case we should update\r\n      // assumptions and deal with mapping the entry back to the detailed timing here\r\n      performanceEntryChannels.updateChannelState(\r\n        'recording',\r\n        () => new BoundedArray(MAX_CHANNEL_SIZE),\r\n      );\r\n    }\r\n  };\r\n```\r\n\r\nthis onComplete arrow function is defined in startTimingTracking. There’s an “interaction” event added and then there is this comment explaining what that if block is about:\r\n\r\n```plaintext\r\n// then performance entry and our detailed timing handlers are out of sync, we disregard that entry\r\n// it may be possible the performance entry returned before detailed timing. If that's the case we should update\r\n// assumptions and deal with mapping the entry back to the detailed timing here\r\n```\r\n\r\n```plaintext\r\nconst unSubDetailedPointerTiming = setupDetailedPointerTimingListener(\r\n    'pointer',\r\n    {\r\n      onComplete,\r\n    },\r\n  );\r\n  const unSubDetailedKeyboardTiming = setupDetailedPointerTimingListener(\r\n    'keyboard',\r\n    {\r\n      onComplete,\r\n    },\r\n  );\r\n\r\n  const unSubInteractions = listenForPerformanceEntryInteractions(\r\n    (completedInteraction) => {\r\n      interactionStore.setState(\r\n        BoundedArray.fromArray(\r\n          interactionStore.getCurrentState().concat(completedInteraction),\r\n          MAX_INTERACTION_BATCH,\r\n        ),\r\n      );\r\n    },\r\n  );\r\n```\r\n\r\nThese 2 functions — setupDetailedPointerTimingListener and listenForPerformanceEntryInteractions are defined in [performance.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333)\r\n\r\n```plaintext\r\nreturn () => {\r\n    unSubDirtyTaskTracking();\r\n    unSubLongPipelineTracking();\r\n    unSubPerformance();\r\n    unSubDetailedPointerTiming();\r\n    unSubInteractions();\r\n    unSubDetailedKeyboardTiming();\r\n  };\r\n```\r\n\r\nThis function in the end returns an arrow function that triggers unsubscription/cleanup.\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L364](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L364)\r\n    \r\n2. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L365](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L365)\r\n    \r\n3. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L423](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L423)\r\n    \r\n4. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333)\r\n    \r\n5. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333)",
          "code": "var Component=(()=>{var o=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var f=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),b=(a,n)=>{for(var i in n)c(a,i,{get:n[i],enumerable:!0})},l=(a,n,i,r)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let s of g(n))!N.call(a,s)&&s!==i&&c(a,s,{get:()=>n[s],enumerable:!(r=m(n,s))||r.enumerable});return a};var y=(a,n,i)=>(i=a!=null?o(u(a)):{},l(n||!a||!a.__esModule?c(i,\"default\",{value:a,enumerable:!0}):i,a)),k=a=>l(c({},\"__esModule\",{value:!0}),a);var d=f((P,t)=>{t.exports=_jsx_runtime});var S={};b(S,{default:()=>p,frontmatter:()=>T});var e=y(d()),T={title:\"startTimingTracking in react-scan source\\xA0code.\"};function h(a){let n={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.p,{children:[\"In this article, we review the below code snippet picked from \",(0,e.jsx)(n.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L364\",children:\"event-tracking.ts\"})]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"export const startTimingTracking = () => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const unSubPerformance = setupPerformancePublisher();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const unSubDirtyTaskTracking = startDirtyTaskTracking();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const unSubLongPipelineTracking = startLongPipelineTracking();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const onComplete = async (\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    _: string,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    finalInteraction: FinalInteraction,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    event: PerformanceEntryChannelEvent,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  ) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    toolbarEventStore.getState().actions.addEvent({\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      kind: 'interaction',\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      id: not_globally_unique_generateId(),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      data: {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        startAt: finalInteraction.detailedTiming.blockingTimeStart,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        endAt: performance.now() + performance.timeOrigin,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        meta: { ...finalInteraction, kind: event.kind }, // TODO, will need interaction specific metadata here\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    });\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    const existingCompletedInteractions =\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      performanceEntryChannels.getChannelState('recording');\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    finalInteraction.detailedTiming.stopListeningForRenders();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    if (existingCompletedInteractions.length) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      // then performance entry and our detailed timing handlers are out of sync, we disregard that entry\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      // it may be possible the performance entry returned before detailed timing. If that's the case we should update\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      // assumptions and deal with mapping the entry back to the detailed timing here\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      performanceEntryChannels.updateChannelState(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        'recording',\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        () => new BoundedArray(MAX_CHANNEL_SIZE),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  };\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const unSubDetailedPointerTiming = setupDetailedPointerTimingListener(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    'pointer',\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      onComplete,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const unSubDetailedKeyboardTiming = setupDetailedPointerTimingListener(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    'keyboard',\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      onComplete,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const unSubInteractions = listenForPerformanceEntryInteractions(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    (completedInteraction) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      interactionStore.setState(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        BoundedArray.fromArray(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"          interactionStore.getCurrentState().concat(completedInteraction),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"          MAX_INTERACTION_BATCH,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        ),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  return () => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubDirtyTaskTracking();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubLongPipelineTracking();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubPerformance();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubDetailedPointerTiming();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubInteractions();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubDetailedKeyboardTiming();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  };\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"};\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"Let\\u2019s go over this function in chunks.\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const unSubPerformance = setupPerformancePublisher();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const unSubDirtyTaskTracking = startDirtyTaskTracking();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const unSubLongPipelineTracking = startLongPipelineTracking();\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"this calls three functions\\u200A\\u2014\\u200AsetupPerformancePublisher, startDirtyTaskTracking, startLongPipelineTracking.\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"startDirtyTaskTracking and startLongPipelineTracking are defined in the same event-tracking.ts file except for the setupPerformancePublisher which is imported from \",(0,e.jsx)(n.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333\",children:\"core/notifications/performance.ts\"}),\".\"]}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsx)(n.p,{children:\"If there is one thing that I noticed, it is the cleanup involved across the react-scan codebase to avoid memory leaks.\"}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*lzkeqQJsvALHF4CPpJrftQ.png\",alt:\"\"})}),`\n`,(0,e.jsx)(n.h3,{id:\"oncomplete-function\",children:\"onComplete function:\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const onComplete = async (\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    _: string,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    finalInteraction: FinalInteraction,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    event: PerformanceEntryChannelEvent,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  ) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    toolbarEventStore.getState().actions.addEvent({\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      kind: 'interaction',\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      id: not_globally_unique_generateId(),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      data: {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        startAt: finalInteraction.detailedTiming.blockingTimeStart,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        endAt: performance.now() + performance.timeOrigin,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        meta: { ...finalInteraction, kind: event.kind }, // TODO, will need interaction specific metadata here\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    });\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    const existingCompletedInteractions =\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      performanceEntryChannels.getChannelState('recording');\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    finalInteraction.detailedTiming.stopListeningForRenders();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    if (existingCompletedInteractions.length) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      // then performance entry and our detailed timing handlers are out of sync, we disregard that entry\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      // it may be possible the performance entry returned before detailed timing. If that's the case we should update\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      // assumptions and deal with mapping the entry back to the detailed timing here\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      performanceEntryChannels.updateChannelState(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        'recording',\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        () => new BoundedArray(MAX_CHANNEL_SIZE),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  };\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"this onComplete arrow function is defined in startTimingTracking. There\\u2019s an \\u201Cinteraction\\u201D event added and then there is this comment explaining what that if block is about:\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// then performance entry and our detailed timing handlers are out of sync, we disregard that entry\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// it may be possible the performance entry returned before detailed timing. If that's the case we should update\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// assumptions and deal with mapping the entry back to the detailed timing here\"})})]})})}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const unSubDetailedPointerTiming = setupDetailedPointerTimingListener(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    'pointer',\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      onComplete,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const unSubDetailedKeyboardTiming = setupDetailedPointerTimingListener(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    'keyboard',\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      onComplete,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const unSubInteractions = listenForPerformanceEntryInteractions(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    (completedInteraction) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      interactionStore.setState(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        BoundedArray.fromArray(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"          interactionStore.getCurrentState().concat(completedInteraction),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"          MAX_INTERACTION_BATCH,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        ),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  );\"})})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"These 2 functions\\u200A\\u2014\\u200AsetupDetailedPointerTimingListener and listenForPerformanceEntryInteractions are defined in \",(0,e.jsx)(n.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333\",children:\"performance.ts\"})]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"return () => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubDirtyTaskTracking();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubLongPipelineTracking();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubPerformance();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubDetailedPointerTiming();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubInteractions();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    unSubDetailedKeyboardTiming();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  };\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"This function in the end returns an arrow function that triggers unsubscription/cleanup.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Hey, my name is \",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.em,{children:(0,e.jsxs)(n.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(n.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(n.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L364\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L364\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L365\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L365\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L423\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/event-tracking.ts#L423\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/notifications/performance.ts#L333\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(h,{...a})}):h(a)}return k(S);})();\n;return Component;"
        },
        "_id": "blog/startTimingTracking-in-react.mdx",
        "_raw": {
          "sourceFilePath": "blog/startTimingTracking-in-react.mdx",
          "sourceFileName": "startTimingTracking-in-react.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/startTimingTracking-in-react"
        },
        "type": "Doc",
        "slug": "/blog/startTimingTracking-in-react",
        "slugAsParams": "startTimingTracking-in-react"
      },
      "documentHash": "1741594967081",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/State-management-in-react.mdx": {
      "document": {
        "title": "State management in react-scan codebase.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we review how the store is managed in react-scan source code. The below code is picked from [packages/scan/core/src/index.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L260).\r\n\r\n```plaintext\r\nexport const Store: StoreType = {\r\n  wasDetailsOpen: signal(true),\r\n  isInIframe: signal(\r\n    typeof window !== 'undefined' && window.self !== window.top,\r\n  ),\r\n  inspectState: signal<States>({\r\n    kind: 'uninitialized',\r\n  }),\r\n  monitor: signal<Monitor | null>(null),\r\n  fiberRoots: new Set<Fiber>(),\r\n  reportData: new Map<number, RenderData>(),\r\n  legacyReportData: new Map<string, RenderData>(),\r\n  lastReportTime: signal(0),\r\n};\r\n```\r\n\r\nYou will find Set, Map but I don’t know what signal here is. Let’s find out.\r\n\r\nsignal is imported from preact as shown below\r\n\r\n```plaintext\r\nimport { type Signal, signal } from '@preact/signals';\r\n```\r\n\r\n### Signals in Preact\r\n\r\nSignals are reactive primitives for managing application state.\r\n\r\nWhat makes Signals unique is that state changes automatically update components and UI in the most efficient way possible. Automatic state binding and dependency tracking allows Signals to provide excellent ergonomics and productivity while eliminating the most common state management footguns.\r\n\r\nSignals are effective in applications of any size, with ergonomics that speed up the development of small apps, and performance characteristics that ensure apps of any size are fast by default.\r\n\r\nRead more about [Signals](https://preactjs.com/guide/v10/signals/).\r\n\r\n### How this state is used in react-scan?\r\n\r\nI [searched for signals](https://github.com/search?q=repo%3Aaidenybai%2Freact-scan%20Store&type=code) and found that it is used in 30 files.\r\n\r\n![](https://cdn-images-1.medium.com/max/1200/1*AfCQH8COP5KAQwFMps8PyQ.png)\r\n\r\nI have picked some instances where this state is used.\r\n\r\n#### [core/monitor/performance.ts](https://github.com/aidenybai/react-scan/blob/244f7c4741083944268753f299115703005f47e6/packages/scan/src/core/monitor/performance.ts#L177)\r\n\r\n```plaintext\r\n// todo: update monitoring api to expose filters for component names\r\nexport function initPerformanceMonitoring(options?: Partial<PathFilters>) {\r\n  const filters = { ...DEFAULT_FILTERS, ...options };\r\n  const monitor = Store.monitor.value;\r\n  if (!monitor) return;\r\n```\r\n\r\n#### [scan/web/views/index.tsx](https://github.com/aidenybai/react-scan/blob/244f7c4741083944268753f299115703005f47e6/packages/scan/src/web/views/index.tsx#L13)\r\n\r\n```plaintext\r\nexport const Content = () => {\r\n  const isInspecting = useComputed(\r\n    () => Store.inspectState.value.kind === 'inspecting',\r\n  );\r\n\r\n  return }\r\n    <div\r\n```\r\n\r\n#### [scan/src/web/widget/resize-handle.tsx](https://github.com/aidenybai/react-scan/blob/244f7c4741083944268753f299115703005f47e6/packages/scan/src/web/widget/resize-handle.tsx#L54)\r\n\r\n```plaintext\r\n const updateVisibility = () => {\r\n      const isFocused = Store.inspectState.value.kind === 'focused';\r\n      const shouldShow = signalWidgetViews.value.view !== 'none';\r\n      const isVisible =\r\n        (isFocused || shouldShow) &&\r\n        getHandleVisibility(\r\n          position,\r\n          signalWidget.value.corner,\r\n          signalWidget.value.dimensions.isFullWidth,\r\n          signalWidget.value.dimensions.isFullHeight,\r\n        );\r\n```\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L260](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L260)\r\n    \r\n2. [https://github.com/search?q=repo%3Aaidenybai%2Freact-scan%20Store&type=code](https://github.com/search?q=repo%3Aaidenybai%2Freact-scan%20Store&type=code)\r\n    \r\n3. [https://github.com/aidenybai/react-scan?tab=readme-ov-file#api-reference](https://github.com/aidenybai/react-scan?tab=readme-ov-file#api-reference)\r\n    \r\n4. [https://preactjs.com/guide/v10/signals/](https://preactjs.com/guide/v10/signals/)",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),w=(a,e)=>{for(var i in e)s(a,i,{get:e[i],enumerable:!0})},r=(a,e,i,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of g(e))!f.call(a,t)&&t!==i&&s(a,t,{get:()=>e[t],enumerable:!(c=m(e,t))||c.enumerable});return a};var y=(a,e,i)=>(i=a!=null?p(u(a)):{},r(e||!a||!a.__esModule?s(i,\"default\",{value:a,enumerable:!0}):i,a)),N=a=>r(s({},\"__esModule\",{value:!0}),a);var d=b((S,l)=>{l.exports=_jsx_runtime});var v={};w(v,{default:()=>o,frontmatter:()=>x});var n=y(d()),x={title:\"State management in react-scan codebase.\"};function h(a){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we review how the store is managed in react-scan source code. The below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L260\",children:\"packages/scan/core/src/index.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const Store: StoreType = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  wasDetailsOpen: signal(true),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  isInIframe: signal(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    typeof window !== 'undefined' && window.self !== window.top,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  ),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  inspectState: signal<States>({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    kind: 'uninitialized',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  monitor: signal<Monitor | null>(null),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  fiberRoots: new Set<Fiber>(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  reportData: new Map<number, RenderData>(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  legacyReportData: new Map<string, RenderData>(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  lastReportTime: signal(0),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"You will find Set, Map but I don\\u2019t know what signal here is. Let\\u2019s find out.\"}),`\n`,(0,n.jsx)(e.p,{children:\"signal is imported from preact as shown below\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { type Signal, signal } from '@preact/signals';\"})})})})}),`\n`,(0,n.jsx)(e.h3,{id:\"signals-inpreact\",children:\"Signals in\\xA0Preact\"}),`\n`,(0,n.jsx)(e.p,{children:\"Signals are reactive primitives for managing application state.\"}),`\n`,(0,n.jsx)(e.p,{children:\"What makes Signals unique is that state changes automatically update components and UI in the most efficient way possible. Automatic state binding and dependency tracking allows Signals to provide excellent ergonomics and productivity while eliminating the most common state management footguns.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Signals are effective in applications of any size, with ergonomics that speed up the development of small apps, and performance characteristics that ensure apps of any size are fast by default.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://preactjs.com/guide/v10/signals/\",children:\"Signals\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"how-this-state-is-used-in-react-scan\",children:\"How this state is used in react-scan?\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I \",(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Aaidenybai%2Freact-scan%20Store&type=code\",children:\"searched for signals\"}),\" and found that it is used in 30 files.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1200/1*AfCQH8COP5KAQwFMps8PyQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"I have picked some instances where this state is used.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"coremonitorperformancets\",children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/244f7c4741083944268753f299115703005f47e6/packages/scan/src/core/monitor/performance.ts#L177\",children:\"core/monitor/performance.ts\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// todo: update monitoring api to expose filters for component names\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function initPerformanceMonitoring(options?: Partial<PathFilters>) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const filters = { ...DEFAULT_FILTERS, ...options };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const monitor = Store.monitor.value;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (!monitor) return;\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"scanwebviewsindextsx\",children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/244f7c4741083944268753f299115703005f47e6/packages/scan/src/web/views/index.tsx#L13\",children:\"scan/web/views/index.tsx\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const Content = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const isInspecting = useComputed(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    () => Store.inspectState.value.kind === 'inspecting',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <div\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"scansrcwebwidgetresize-handletsx\",children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/244f7c4741083944268753f299115703005f47e6/packages/scan/src/web/widget/resize-handle.tsx#L54\",children:\"scan/src/web/widget/resize-handle.tsx\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const updateVisibility = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      const isFocused = Store.inspectState.value.kind === 'focused';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      const shouldShow = signalWidgetViews.value.view !== 'none';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      const isVisible =\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        (isFocused || shouldShow) &&\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        getHandleVisibility(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          position,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          signalWidget.value.corner,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          signalWidget.value.dimensions.isFullWidth,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          signalWidget.value.dimensions.isFullHeight,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        );\"})})]})})}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L260\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L260\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Aaidenybai%2Freact-scan%20Store&type=code\",children:\"https://github.com/search?q=repo%3Aaidenybai%2Freact-scan%20Store&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan?tab=readme-ov-file#api-reference\",children:\"https://github.com/aidenybai/react-scan?tab=readme-ov-file#api-reference\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://preactjs.com/guide/v10/signals/\",children:\"https://preactjs.com/guide/v10/signals/\"})}),`\n`]}),`\n`]})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return N(v);})();\n;return Component;"
        },
        "_id": "blog/State-management-in-react.mdx",
        "_raw": {
          "sourceFilePath": "blog/State-management-in-react.mdx",
          "sourceFileName": "State-management-in-react.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/State-management-in-react"
        },
        "type": "Doc",
        "slug": "/blog/State-management-in-react",
        "slugAsParams": "State-management-in-react"
      },
      "documentHash": "1740997723993",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Stop-saying-you-forgot-to.mdx": {
      "document": {
        "title": "Stop saying “you forgot to …” in code review\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse a file named [dangerfile.js](https://github.com/facebook/react/blob/main/dangerfile.js) in React source code.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*5CsCitxiOUMGLB4kBiiRxg.png)\r\n\r\nThe above screenshot is from [React source code](https://github.com/facebook/react/blob/main/dangerfile.js).\r\n\r\n# **What is Danger.js?**\r\n\r\nDanger runs during your CI process, and gives your team the chance to automate common code review chores such as enforcing changelogs, encouraging smaller PRs, show useful info on a PR.\r\n\r\nThis provides another logical step in your build, through this Danger can help lint your rote tasks in daily code review.\r\n\r\nDanger leaves messages inside your PRs based on rules that you create with JavaScript or TypeScript.\r\n\r\nOver time, as rules are adhered to, the message is amended to reflect the current state of the code review.\r\n\r\n# **An example from React PR:**\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*ozkVVfTl4ywx-NuLLJgeow.png)\r\n\r\nThis [pull request has a comment](https://github.com/facebook/react/pull/31013#issuecomment-2364645268) left by dangerJs about critical size changes.\r\n\r\n# **Danger has good documentation:**\r\n\r\nDangerjs provides good documentation:\r\n\r\n1. [Getting Started with Danger JS](https://danger.systems/js/guides/getting_started)\r\n    \r\n2. [Extending Dange](https://danger.systems/js/usage/extending-danger)r\r\n    \r\n3. [Danger + Node Library](https://danger.systems/js/tutorials/node-library)\r\n    \r\n\r\nThere’s more do checkout [dangerjs website](https://danger.systems/js/).\r\n\r\n# **An overview of react/dangerfile.js**\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*8qD2sdeATINYu3Jrhz33Hw.png)\r\n\r\nFrom the looks of [react/dangerfile.js](https://github.com/facebook/react/blob/main/dangerfile.js), React uses this file mainly to compute critical built size changes.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*WedCb8yAv_xkaVYiQ7Iy0Q.png)\r\n\r\n```plaintext\r\nconst {markdown, danger, warn} = require('danger');\r\n```\r\n\r\nThis import is found at the top of the file. Let’s find out what these functions are and how they are used in react/dangerfile.js.\r\n\r\nmarkdown and warn, these are the functions which you use in rules to provide feedback during code review. Assuming Danger has access to write a comment, then `warn`and `markdown` will report directly inline.\r\n\r\n```plaintext\r\n// Adds raw markdown into the Danger comment, under the table\r\nmarkdown(message: MarkdownString, file?: string, line?: number) => void\r\n\r\n// Highlights low-priority issues, but does not fail the build. Message is shown inside a HTML table.\r\nwarn(message: MarkdownString, file?: string, line?: number) => void\r\n```\r\n\r\nmarkdown is used at the end of the file\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*RawSl-kvBjMR0S_aK3bsrw.png)\r\n\r\nwarn is found to be used in catch block\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*La0XFcdpQVEKiyzf2HzTfQ.png)\r\n\r\ndanger is further used in 5 places and below is its usecase:\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*sIakwWoNU_74UWY5ZBVAiQ.png)\r\n\r\n```plaintext\r\n\r\n// Details specific to the git changes within the code changes. Currently, this is just the raw file paths that have been added, removed or modified.\r\ndanger.git: GitDSL\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://danger.systems/js/](https://danger.systems/js/)\r\n    \r\n2. [https://github.com/facebook/react/blob/main/dangerfile.js](https://github.com/facebook/react/blob/main/dangerfile.js)\r\n    \r\n3. [https://github.com/facebook/react/pull/31013](https://github.com/facebook/react/pull/31013)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var a=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),w=(t,e)=>{for(var r in e)a(t,r,{get:e[r],enumerable:!0})},c=(t,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!f.call(t,i)&&i!==r&&a(t,i,{get:()=>e[i],enumerable:!(s=m(e,i))||s.enumerable});return t};var y=(t,e,r)=>(r=t!=null?p(u(t)):{},c(e||!t||!t.__esModule?a(r,\"default\",{value:t,enumerable:!0}):r,t)),k=t=>c(a({},\"__esModule\",{value:!0}),t);var o=b((D,h)=>{h.exports=_jsx_runtime});var j={};w(j,{default:()=>l,frontmatter:()=>v});var n=y(o()),v={title:\"Stop saying \\u201Cyou forgot to \\u2026\\u201D in code review\"};function d(t){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/dangerfile.js\",children:\"dangerfile.js\"}),\" in React source code.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*5CsCitxiOUMGLB4kBiiRxg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The above screenshot is from \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/dangerfile.js\",children:\"React source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"what-is-dangerjs\",children:(0,n.jsx)(e.strong,{children:\"What is Danger.js?\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Danger runs during your CI process, and gives your team the chance to automate common code review chores such as enforcing changelogs, encouraging smaller PRs, show useful info on a PR.\"}),`\n`,(0,n.jsx)(e.p,{children:\"This provides another logical step in your build, through this Danger can help lint your rote tasks in daily code review.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Danger leaves messages inside your PRs based on rules that you create with JavaScript or TypeScript.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Over time, as rules are adhered to, the message is amended to reflect the current state of the code review.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"an-example-from-react-pr\",children:(0,n.jsx)(e.strong,{children:\"An example from React PR:\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*ozkVVfTl4ywx-NuLLJgeow.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/pull/31013#issuecomment-2364645268\",children:\"pull request has a comment\"}),\" left by dangerJs about critical size changes.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"danger-has-good-documentation\",children:(0,n.jsx)(e.strong,{children:\"Danger has good documentation:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Dangerjs provides good documentation:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://danger.systems/js/guides/getting_started\",children:\"Getting Started with Danger JS\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://danger.systems/js/usage/extending-danger\",children:\"Extending Dange\"}),\"r\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://danger.systems/js/tutorials/node-library\",children:\"Danger + Node Library\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"There\\u2019s more do checkout \",(0,n.jsx)(e.a,{href:\"https://danger.systems/js/\",children:\"dangerjs website\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"an-overview-of-reactdangerfilejs\",children:(0,n.jsx)(e.strong,{children:\"An overview of react/dangerfile.js\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*8qD2sdeATINYu3Jrhz33Hw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"From the looks of \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/dangerfile.js\",children:\"react/dangerfile.js\"}),\", React uses this file mainly to compute critical built size changes.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*WedCb8yAv_xkaVYiQ7Iy0Q.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const {markdown, danger, warn} = require('danger');\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"This import is found at the top of the file. Let\\u2019s find out what these functions are and how they are used in react/dangerfile.js.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"markdown and warn, these are the functions which you use in rules to provide feedback during code review. Assuming Danger has access to write a comment, then \",(0,n.jsx)(e.code,{children:\"warn\"}),\"and \",(0,n.jsx)(e.code,{children:\"markdown\"}),\" will report directly inline.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Adds raw markdown into the Danger comment, under the table\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"markdown(message: MarkdownString, file?: string, line?: number) => void\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Highlights low-priority issues, but does not fail the build. Message is shown inside a HTML table.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"warn(message: MarkdownString, file?: string, line?: number) => void\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"markdown is used at the end of the file\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*RawSl-kvBjMR0S_aK3bsrw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"warn is found to be used in catch block\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*La0XFcdpQVEKiyzf2HzTfQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"danger is further used in 5 places and below is its usecase:\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*sIakwWoNU_74UWY5ZBVAiQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Details specific to the git changes within the code changes. Currently, this is just the raw file paths that have been added, removed or modified.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"danger.git: GitDSL\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://danger.systems/js/\",children:\"https://danger.systems/js/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/dangerfile.js\",children:\"https://github.com/facebook/react/blob/main/dangerfile.js\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/pull/31013\",children:\"https://github.com/facebook/react/pull/31013\"})}),`\n`]}),`\n`]})]})}function l(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(d,{...t})}):d(t)}return k(j);})();\n;return Component;"
        },
        "_id": "blog/Stop-saying-you-forgot-to.mdx",
        "_raw": {
          "sourceFilePath": "blog/Stop-saying-you-forgot-to.mdx",
          "sourceFileName": "Stop-saying-you-forgot-to.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Stop-saying-you-forgot-to"
        },
        "type": "Doc",
        "slug": "/blog/Stop-saying-you-forgot-to",
        "slugAsParams": "Stop-saying-you-forgot-to"
      },
      "documentHash": "1740489186219",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Stringraw-in-Tailwind.mdx": {
      "document": {
        "title": "String.raw in Tailwind CSS source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze the usage of `String.raw` in [Tailwindcss source code](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/tests/ui.spec.ts).\r\n\r\n# **String.raw**\r\n\r\n[MDN documentation](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/raw) says that:  \r\n“The String.raw() static method is a tag function of template literals.  \r\nThis is similar to the r prefix in Python, or the @ prefix in C# for string literals.  \r\nIt’s used to get the raw string form of template literals — that is, substitutions  \r\n(e.g. $\\{foo\\}) are processed, but escape sequences (e.g. \\\\n) are not.“\r\n\r\n## **Example 1:**\r\n\r\nThe below example is picked from MDN:\r\n\r\n```plaintext\r\n// Create a variable that uses a Windows\r\n// path without escaping the backslashes:\r\nconst filePath = String.raw`C:\\Development\\profile\\aboutme.html`;\r\nconsole.log(`The file was uploaded from: ${filePath}`);\r\n// Expected output: \"The file was uploaded from: C:\\Development\\profile\\aboutme.html\"\r\n```\r\n\r\nThis above example’s execution result looks like this:\r\n\r\n```plaintext\r\n> \"The file was uploaded from: C:\\Development\\profile\\aboutme.html\"\r\n```\r\n\r\n## **Example 2:**\r\n\r\nIf you run the same example without String.raw using the code below:\r\n\r\n```plaintext\r\n// Create a variable that uses a Windows\r\n// path without escaping the backslashes:\r\nconst filePath = `C:\\Development\\profile\\aboutme.html`;\r\nconsole.log(`The file was uploaded from: ${filePath}`);\r\n// Expected output: \"The file was uploaded from: C:\\Development\\profile\\aboutme.html\"\r\n```\r\n\r\nResult looks like this:\r\n\r\n```plaintext\r\n> \"The file was uploaded from: C:Developmentprofileaboutme.html\"\r\n```\r\n\r\n## **Example 3:**\r\n\r\nIf you run the same example involving \\\\n using the code below:\r\n\r\n```plaintext\r\nconst filePathWithoutStringRaw = `\\nC:\\Development\\profile\\aboutme.html`;\r\nconst filePathWithStringRaw = String.raw`\\nC:\\Development\\profile\\aboutme.html`;\r\nconsole.log(\"filePathWithoutStringRaw:\", filePathWithoutStringRaw)\r\nconsole.log(\"*******\")\r\nconsole.log(\"filePathWithStringRaw:\", filePathWithStringRaw)\r\n```\r\n\r\nResult looks like this:\r\n\r\n```plaintext\r\n> \"filePathWithoutStringRaw:\" \"\r\nC:Developmentprofileaboutme.html\"\r\n> \"*******\"\r\n> \"filePathWithStringRaw:\" \"\\nC:\\Development\\profile\\aboutme.html\"\r\n```\r\n\r\n![](https://miro.medium.com/v2/resize:fit:660/1*q2X-1hKCp-8HUsoMGF3X-g.png)\r\n\r\n# **How Tailwindcss uses String.raw:**\r\n\r\n[ui.spec.ts test file](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/tests/ui.spec.ts) assigns String.raw to `html` and `css`.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*jAiDhMrci3wBzrM73A0Ojg.png)\r\n\r\n`html` is found to be used in a lot of tests written in [ui.spec.ts](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/tests/ui.spec.ts)  \r\n  \r\nLet’s take a closer look at this test code:\r\n\r\n```plaintext\r\nfor (let [classes, expected] of [\r\n [\r\n 'bg-linear-to-r from-red-500',\r\n 'linear-gradient(to right, rgb(239, 68, 68) 0%, rgba(0, 0, 0, 0) 100%)',\r\n ],\r\n [\r\n 'bg-linear-to-r via-red-500',\r\n 'linear-gradient(to right, rgba(0, 0, 0, 0) 0%, rgb(239, 68, 68) 50%, rgba(0, 0, 0, 0) 100%)',\r\n ],\r\n [\r\n 'bg-linear-to-r to-red-500',\r\n 'linear-gradient(to right, rgba(0, 0, 0, 0) 0%, rgb(239, 68, 68) 100%)',\r\n ],\r\n [\r\n 'bg-linear-to-r from-red-500 to-blue-500',\r\n 'linear-gradient(to right, rgb(239, 68, 68) 0%, rgb(59, 130, 246) 100%)',\r\n ],\r\n [\r\n 'bg-linear-to-r via-red-500 to-blue-500',\r\n 'linear-gradient(to right, rgba(0, 0, 0, 0) 0%, rgb(239, 68, 68) 50%, rgb(59, 130, 246) 100%)',\r\n ],\r\n [\r\n 'bg-linear-to-r from-red-500 via-green-500 to-blue-500',\r\n 'linear-gradient(to right, rgb(239, 68, 68) 0%, rgb(34, 197, 94) 50%, rgb(59, 130, 246) 100%)',\r\n ],\r\n [\r\n 'bg-linear-[to_right,var( - color-red-500),var( - color-green-500),var( - color-blue-500)]',\r\n 'linear-gradient(to right, rgb(239, 68, 68), rgb(34, 197, 94), rgb(59, 130, 246))',\r\n ],\r\n]) {\r\n test(`background gradient, \"${classes}\"`, async ({ page }) => {\r\n   let { getPropertyValue } = await render(\r\n   page,\r\n   html`<div id=\"x\" class=\"${classes}\">Hello world</div>`,\r\n   )\r\n   expect(await getPropertyValue('#x', 'background-image')).toEqual(expected)\r\n })\r\n}\r\n```\r\n\r\nIt is interesting to see an entire array defined with in a `for` loop.\r\n\r\n```plaintext\r\nhtml`<div id=\"x\" class=\"${classes}\">Hello world</div>`,\r\n```\r\n\r\n`${classes}` gets replaced with first item of the below array:\r\n\r\n```plaintext\r\n[\r\n 'bg-linear-to-r from-red-500',\r\n 'linear-gradient(to right, rgb(239, 68, 68) 0%, rgba(0, 0, 0, 0) 100%)',\r\n],\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/tests/ui.spec.ts](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/tests/ui.spec.ts)\r\n    \r\n2. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/String/raw](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/raw)\r\n    \r\n3. https://stackoverflow.com/questions/34772762/what-are-the-actual-uses-of-es6-raw-string-access\r\n",
          "code": "var Component=(()=>{var o=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),w=(a,e)=>{for(var l in e)t(a,l,{get:e[l],enumerable:!0})},s=(a,e,l,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of g(e))!f.call(a,i)&&i!==l&&t(a,i,{get:()=>e[i],enumerable:!(r=m(e,i))||r.enumerable});return a};var N=(a,e,l)=>(l=a!=null?o(u(a)):{},s(e||!a||!a.__esModule?t(l,\"default\",{value:a,enumerable:!0}):l,a)),x=a=>s(t({},\"__esModule\",{value:!0}),a);var d=b((S,c)=>{c.exports=_jsx_runtime});var y={};w(y,{default:()=>p,frontmatter:()=>v});var n=N(d()),v={title:\"String.raw in Tailwind CSS source code.\"};function h(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze the usage of \",(0,n.jsx)(e.code,{children:\"String.raw\"}),\" in \",(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/tests/ui.spec.ts\",children:\"Tailwindcss source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"stringraw\",children:(0,n.jsx)(e.strong,{children:\"String.raw\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/raw\",children:\"MDN documentation\"}),\" says that:\",(0,n.jsx)(e.br,{}),`\n`,\"\\u201CThe String.raw() static method is a tag function of template literals.\",(0,n.jsx)(e.br,{}),`\n`,\"This is similar to the r prefix in Python, or the @ prefix in C# for string literals.\",(0,n.jsx)(e.br,{}),`\n`,\"It\\u2019s used to get the raw string form of template literals \\u2014 that is, substitutions\",(0,n.jsx)(e.br,{}),`\n`,\"(e.g. ${foo}) are processed, but escape sequences (e.g. \\\\n) are not.\\u201C\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"example-1\",children:(0,n.jsx)(e.strong,{children:\"Example 1:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"The below example is picked from MDN:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Create a variable that uses a Windows\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// path without escaping the backslashes:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const filePath = String.raw`C:\\\\Development\\\\profile\\\\aboutme.html`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log(`The file was uploaded from: ${filePath}`);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'// Expected output: \"The file was uploaded from: C:\\\\Development\\\\profile\\\\aboutme.html\"'})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This above example\\u2019s execution result looks like this:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'> \"The file was uploaded from: C:\\\\Development\\\\profile\\\\aboutme.html\"'})})})})}),`\n`,(0,n.jsx)(e.h2,{id:\"example-2\",children:(0,n.jsx)(e.strong,{children:\"Example 2:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"If you run the same example without String.raw using the code below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Create a variable that uses a Windows\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// path without escaping the backslashes:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const filePath = `C:\\\\Development\\\\profile\\\\aboutme.html`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log(`The file was uploaded from: ${filePath}`);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'// Expected output: \"The file was uploaded from: C:\\\\Development\\\\profile\\\\aboutme.html\"'})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Result looks like this:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'> \"The file was uploaded from: C:Developmentprofileaboutme.html\"'})})})})}),`\n`,(0,n.jsx)(e.h2,{id:\"example-3\",children:(0,n.jsx)(e.strong,{children:\"Example 3:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"If you run the same example involving \\\\n using the code below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const filePathWithoutStringRaw = `\\\\nC:\\\\Development\\\\profile\\\\aboutme.html`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const filePathWithStringRaw = String.raw`\\\\nC:\\\\Development\\\\profile\\\\aboutme.html`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'console.log(\"filePathWithoutStringRaw:\", filePathWithoutStringRaw)'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'console.log(\"*******\")'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'console.log(\"filePathWithStringRaw:\", filePathWithStringRaw)'})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Result looks like this:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'> \"filePathWithoutStringRaw:\" \"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'C:Developmentprofileaboutme.html\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'> \"*******\"'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'> \"filePathWithStringRaw:\" \"\\\\nC:\\\\Development\\\\profile\\\\aboutme.html\"'})})]})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:660/1*q2X-1hKCp-8HUsoMGF3X-g.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"how-tailwindcss-uses-stringraw\",children:(0,n.jsx)(e.strong,{children:\"How Tailwindcss uses String.raw:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/tests/ui.spec.ts\",children:\"ui.spec.ts test file\"}),\" assigns String.raw to \",(0,n.jsx)(e.code,{children:\"html\"}),\" and \",(0,n.jsx)(e.code,{children:\"css\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*jAiDhMrci3wBzrM73A0Ojg.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"html\"}),\" is found to be used in a lot of tests written in \",(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/tests/ui.spec.ts\",children:\"ui.spec.ts\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"Let\\u2019s take a closer look at this test code:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"for (let [classes, expected] of [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'bg-linear-to-r from-red-500',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'linear-gradient(to right, rgb(239, 68, 68) 0%, rgba(0, 0, 0, 0) 100%)',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'bg-linear-to-r via-red-500',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'linear-gradient(to right, rgba(0, 0, 0, 0) 0%, rgb(239, 68, 68) 50%, rgba(0, 0, 0, 0) 100%)',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'bg-linear-to-r to-red-500',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'linear-gradient(to right, rgba(0, 0, 0, 0) 0%, rgb(239, 68, 68) 100%)',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'bg-linear-to-r from-red-500 to-blue-500',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'linear-gradient(to right, rgb(239, 68, 68) 0%, rgb(59, 130, 246) 100%)',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'bg-linear-to-r via-red-500 to-blue-500',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'linear-gradient(to right, rgba(0, 0, 0, 0) 0%, rgb(239, 68, 68) 50%, rgb(59, 130, 246) 100%)',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'bg-linear-to-r from-red-500 via-green-500 to-blue-500',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'linear-gradient(to right, rgb(239, 68, 68) 0%, rgb(34, 197, 94) 50%, rgb(59, 130, 246) 100%)',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" [\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'bg-linear-[to_right,var( - color-red-500),var( - color-green-500),var( - color-blue-500)]',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'linear-gradient(to right, rgb(239, 68, 68), rgb(34, 197, 94), rgb(59, 130, 246))',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" ],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"]) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' test(`background gradient, \"${classes}\"`, async ({ page }) => {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   let { getPropertyValue } = await render(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   page,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'   html`<div id=\"x\" class=\"${classes}\">Hello world</div>`,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   expect(await getPropertyValue('#x', 'background-image')).toEqual(expected)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" })\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"It is interesting to see an entire array defined with in a \",(0,n.jsx)(e.code,{children:\"for\"}),\" loop.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'html`<div id=\"x\" class=\"${classes}\">Hello world</div>`,'})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"${classes}\"}),\" gets replaced with first item of the below array:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"[\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'bg-linear-to-r from-red-500',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" 'linear-gradient(to right, rgb(239, 68, 68) 0%, rgba(0, 0, 0, 0) 100%)',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"],\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/tests/ui.spec.ts\",children:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/tests/ui.spec.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/raw\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/raw\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/34772762/what-are-the-actual-uses-of-es6-raw-string-access\",children:\"https://stackoverflow.com/questions/34772762/what-are-the-actual-uses-of-es6-raw-string-access\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return x(y);})();\n;return Component;"
        },
        "_id": "blog/Stringraw-in-Tailwind.mdx",
        "_raw": {
          "sourceFilePath": "blog/Stringraw-in-Tailwind.mdx",
          "sourceFileName": "Stringraw-in-Tailwind.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Stringraw-in-Tailwind"
        },
        "type": "Doc",
        "slug": "/blog/Stringraw-in-Tailwind",
        "slugAsParams": "Stringraw-in-Tailwind"
      },
      "documentHash": "1740489186221",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/supabase-authentication.mdx": {
      "document": {
        "title": "What does Supabase use for its Authentication?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse the authentication mechanism Supabase uses. You may have used Supabase Auth, but have you ever wondered what Supabase uses for its authentication? well, let’s find out.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*j2beVDZhX4a7eYlLWH4pug.png)\r\n\r\n### signin.tsx\r\n\r\nWe have to start at Signin page, this can be found in [studio workspace](https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx). Supabase is a monorepo and contains workspaces in [apps folder](https://github.com/supabase/supabase/tree/master/apps).  \r\nand [packages](https://github.com/supabase/supabase/tree/master/packages).\r\n\r\nLet’s pick SignInForm as it has email and password based authentication. [At line 51](https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx#L51),, you will find the below component:\r\n\r\n```ts\r\nimport SignInForm from 'components/interfaces/SignIn/SignInForm'\r\n…\r\n<SignInForm />\r\n```\r\n\r\n### SignInForm.tsx\r\n\r\nIn the file — [SignIn/SignInForm.tsx](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L22), you will find the below code:\r\n\r\n```ts\r\n<Form\r\n  validateOnBlur\r\n  id=\"signIn-form\"\r\n  initialValues={{ email: '', password: '' }}\r\n  validationSchema={signInSchema}\r\n  onSubmit={onSignIn}\r\n>\r\n  {({ isSubmitting }: { isSubmitting: boolean }) => {\r\n    return (\r\n      <div className=\"flex flex-col gap-4\">\r\n        <Input\r\n          id=\"email\"\r\n          name=\"email\"\r\n          type=\"email\"\r\n          label=\"Email\"\r\n          placeholder=\"you@example.com\"\r\n          disabled={isSubmitting}\r\n          autoComplete=\"email\"\r\n        />\r\n\r\n        <div className=\"relative\">\r\n          <Input\r\n            id=\"password\"\r\n            name=\"password\"\r\n            type=\"password\"\r\n            label=\"Password\"\r\n            placeholder=\"&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;\"\r\n            disabled={isSubmitting}\r\n            autoComplete=\"current-password\"\r\n          />\r\n\r\n          {/* positioned using absolute instead of labelOptional prop so tabbing between inputs works smoothly */}\r\n          <Link\r\n            href=\"/forgot-password\"\r\n            className=\"absolute top-0 right-0 text-sm text-foreground-lighter\"\r\n          >\r\n            Forgot Password?\r\n          </Link>\r\n        </div>\r\n\r\n        <div className=\"self-center\">\r\n          <HCaptcha\r\n            ref={captchaRef}\r\n            sitekey={process.env.NEXT_PUBLIC_HCAPTCHA_SITE_KEY!}\r\n            size=\"invisible\"\r\n            onVerify={(token) => {\r\n              setCaptchaToken(token)\r\n            }}\r\n            onExpire={() => {\r\n              setCaptchaToken(null)\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        <LastSignInWrapper type=\"email\">\r\n          <Button\r\n            block\r\n            form=\"signIn-form\"\r\n            htmlType=\"submit\"\r\n            size=\"large\"\r\n            disabled={isSubmitting}\r\n            loading={isSubmitting}\r\n          >\r\n            Sign In\r\n          </Button>\r\n        </LastSignInWrapper>\r\n      </div>\r\n    )\r\n  }}\r\n</Form>\r\n```\r\n\r\n#### onSignIn function\r\n\r\nIn the [onSignIn function](https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L30), auth.signInWithPassword is called.\r\n\r\n```ts\r\nconst onSignIn = async ({ email, password }: { email: string; password: string }) => {\r\n    const toastId = toast.loading('Signing in...')\r\n\r\n    let token = captchaToken\r\n    if (!token) {\r\n      const captchaResponse = await captchaRef.current?.execute({ async: true })\r\n      token = captchaResponse?.response ?? null\r\n    }\r\n\r\n    const { error } = await auth.signInWithPassword({\r\n      email,\r\n      password,\r\n      options: { captchaToken: token ?? undefined },\r\n    })\r\n    ...\r\n  }\r\n```\r\n\r\nauth is imported from `lib/gotrue` as shown below:\r\n\r\n```ts\r\nimport { auth, buildPathWithParams, getReturnToPath } from 'lib/gotrue'\r\n```\r\n\r\n### auth in lib/gotrue\r\n\r\nYou will find the below code in [lib/gotrue for the auth function](https://github.com/supabase/supabase/blob/master/apps/studio/lib/gotrue.ts).\r\n\r\n```ts\r\nimport { getAccessToken, gotrueClient } from 'common'\r\nexport const auth = gotrueClient\r\n```\r\n\r\nauth is assigned a function named gotrueClient and this is imported from ‘common’. What’s common here? is that another npm package? no…\r\n\r\n### common package\r\n\r\nSupabase is a monorepo and has a package named common. In the [common/index.ts](https://github.com/supabase/supabase/blob/master/packages/common/index.tsx) at [line 6](https://github.com/supabase/supabase/blob/master/packages/common/index.tsx#L6), you will find the below import:\r\n\r\n```ts\r\nexport * from './gotrue'\r\n```\r\n\r\n#### gotrueClient\r\n\r\n[At line 107, in common/gotrue.ts](https://github.com/supabase/supabase/blob/master/packages/common/gotrue.ts#L107), you will find this below code:\r\n\r\n```ts\r\nexport const gotrueClient = new AuthClient({\r\n  url: process.env.NEXT_PUBLIC_GOTRUE_URL,\r\n  storageKey: STORAGE_KEY,\r\n  detectSessionInUrl: shouldDetectSessionInUrl,\r\n  debug: debug ? (persistedDebug ? logIndexedDB : true) : false,\r\n  lock: navigatorLockEnabled ? navigatorLock : undefined,\r\n})\r\n```\r\n\r\nAuthClient is imported from [`@supabase/auth-js`](http://twitter.com/supabase/auth-js).\r\n\r\n```ts\r\nimport { AuthClient, navigatorLock } from '@supabase/auth-js'\r\n```\r\n\r\nRead more about [@supabase/auth-js](https://www.npmjs.com/package/@supabase/auth-js).\r\n\r\nIn conclusion, Supabase uses its own library for its authentication.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx](https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx)\r\n    \r\n2. [https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx#L51](https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx#L51)\r\n    \r\n3. [https://github.com/supabase/supabase/tree/master/packages](https://github.com/supabase/supabase/tree/master/packages)\r\n    \r\n4. [https://github.com/supabase/supabase/blob/master/packages/common/index.tsx](https://github.com/supabase/supabase/blob/master/packages/common/index.tsx)\r\n    \r\n5. [https://www.npmjs.com/package/@supabase/auth-js](https://www.npmjs.com/package/@supabase/auth-js)",
          "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},o=(n,e,s,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of y(e))!u.call(n,a)&&a!==s&&c(n,a,{get:()=>e[a],enumerable:!(r=p(e,a))||r.enumerable});return n};var N=(n,e,s)=>(s=n!=null?d(m(n)):{},o(e||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),f=n=>o(c({},\"__esModule\",{value:!0}),n);var i=g((S,F)=>{F.exports=_jsx_runtime});var k={};b(k,{default:()=>h,frontmatter:()=>w});var l=N(i()),w={title:\"What does Supabase use for its Authentication?\"};function t(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:\"In this article, we analyse the authentication mechanism Supabase uses. You may have used Supabase Auth, but have you ever wondered what Supabase uses for its authentication? well, let\\u2019s find out.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*j2beVDZhX4a7eYlLWH4pug.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.h3,{id:\"signintsx\",children:\"signin.tsx\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"We have to start at Signin page, this can be found in \",(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx\",children:\"studio workspace\"}),\". Supabase is a monorepo and contains workspaces in \",(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/apps\",children:\"apps folder\"}),\".\",(0,l.jsx)(e.br,{}),`\n`,\"and \",(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/packages\",children:\"packages\"}),\".\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Let\\u2019s pick SignInForm as it has email and password based authentication. \",(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx#L51\",children:\"At line 51\"}),\",, you will find the below component:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" SignInForm \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'components/interfaces/SignIn/SignInForm'\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"\\u2026\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"SignInForm \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/>\"})]})]})})}),`\n`,(0,l.jsx)(e.h3,{id:\"signinformtsx\",children:\"SignInForm.tsx\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"In the file\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L22\",children:\"SignIn/SignInForm.tsx\"}),\", you will find the below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Form\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  validateOnBlur\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  id\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"signIn-form\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  initialValues\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" email\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ''\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" password\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ''\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  validationSchema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"signInSchema\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  onSubmit\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"onSignIn\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  {({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" isSubmitting \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" isSubmitting\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" boolean \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div className\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"flex flex-col gap-4\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Input\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          id\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"email\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"email\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"email\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          label\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"Email\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          placeholder\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"you@example.com\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          disabled\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isSubmitting\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          autoComplete\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"email\"'})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        />\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div className\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"relative\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Input\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            id\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"password\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"password\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"password\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            label\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"Password\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            placeholder\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            disabled\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isSubmitting\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            autoComplete\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"current-password\"'})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          />\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/*\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" positioned using absolute instead of labelOptional prop so tabbing between inputs works smoothly \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"*/\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Link\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            href\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"/forgot-password\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            className\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"absolute top-0 right-0 text-sm text-foreground-lighter\"'})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          >\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            Forgot Password\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          </\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Link\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        </\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div className\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"self-center\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"HCaptcha\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            ref\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"captchaRef\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            sitekey\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"process.env.NEXT_PUBLIC_HCAPTCHA_SITE_KEY!\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            size\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"invisible\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            onVerify\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"(token) => \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              setCaptchaToken\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"token\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            }}\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            onExpire\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"() => \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              setCaptchaToken\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(null)\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"            }}\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          />\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        </\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"LastSignInWrapper type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"email\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Button\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            block\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            form\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"signIn-form\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            htmlType\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"submit\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            size\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"large\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            disabled\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isSubmitting\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            loading\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"isSubmitting\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          >\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            Sign In\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          </\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Button\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        </\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"LastSignInWrapper\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      </\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"div\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    )\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }}\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"</\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Form\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"})]})]})})}),`\n`,(0,l.jsx)(e.h4,{id:\"onsignin-function\",children:\"onSignIn function\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"In the \",(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/components/interfaces/SignIn/SignInForm.tsx#L30\",children:\"onSignIn function\"}),\", auth.signInWithPassword is called.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" onSignIn\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" email\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" password \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" email\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" password\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" toastId \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" toast\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"loading\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'Signing in...'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    let\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" token \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaToken\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"token\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaResponse \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaRef\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"current\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"execute\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      token \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaResponse\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"response \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" error \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" auth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"signInWithPassword\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      email\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      password\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" captchaToken\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" token \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" undefined\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    })\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    ...\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"auth is imported from \",(0,l.jsx)(e.code,{children:\"lib/gotrue\"}),\" as shown below:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" auth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" buildPathWithParams\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getReturnToPath \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'lib/gotrue'\"})]})})})}),`\n`,(0,l.jsx)(e.h3,{id:\"auth-in-libgotrue\",children:\"auth in lib/gotrue\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"You will find the below code in \",(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/lib/gotrue.ts\",children:\"lib/gotrue for the auth function\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getAccessToken\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" gotrueClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'common'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" auth \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" gotrueClient\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"auth is assigned a function named gotrueClient and this is imported from \\u2018common\\u2019. What\\u2019s common here? is that another npm package? no\\u2026\"}),`\n`,(0,l.jsx)(e.h3,{id:\"common-package\",children:\"common package\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"Supabase is a monorepo and has a package named common. In the \",(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/packages/common/index.tsx\",children:\"common/index.ts\"}),\" at \",(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/packages/common/index.tsx#L6\",children:\"line 6\"}),\", you will find the below import:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" *\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" './gotrue'\"})]})})})}),`\n`,(0,l.jsx)(e.h4,{id:\"gotrueclient\",children:\"gotrueClient\"}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/packages/common/gotrue.ts#L107\",children:\"At line 107, in common/gotrue.ts\"}),\", you will find this below code:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" gotrueClient \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" AuthClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  url\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" process\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_GOTRUE_URL\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  storageKey\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" STORAGE_KEY\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  detectSessionInUrl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" shouldDetectSessionInUrl\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  debug\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" debug \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"persistedDebug \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" logIndexedDB \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true)\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  lock\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" navigatorLockEnabled \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" navigatorLock \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" undefined,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"AuthClient is imported from \",(0,l.jsx)(e.a,{href:\"http://twitter.com/supabase/auth-js\",children:(0,l.jsx)(e.code,{children:\"@supabase/auth-js\"})}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"ts\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" AuthClient\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" navigatorLock \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@supabase/auth-js'\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Read more about \",(0,l.jsx)(e.a,{href:\"https://www.npmjs.com/package/@supabase/auth-js\",children:\"@supabase/auth-js\"}),\".\"]}),`\n`,(0,l.jsx)(e.p,{children:\"In conclusion, Supabase uses its own library for its authentication.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx\",children:\"https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx#L51\",children:\"https://github.com/supabase/supabase/blob/master/apps/studio/pages/sign-in.tsx#L51\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/tree/master/packages\",children:\"https://github.com/supabase/supabase/tree/master/packages\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/master/packages/common/index.tsx\",children:\"https://github.com/supabase/supabase/blob/master/packages/common/index.tsx\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://www.npmjs.com/package/@supabase/auth-js\",children:\"https://www.npmjs.com/package/@supabase/auth-js\"})}),`\n`]}),`\n`]})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return f(k);})();\n;return Component;"
        },
        "_id": "blog/supabase-authentication.mdx",
        "_raw": {
          "sourceFilePath": "blog/supabase-authentication.mdx",
          "sourceFileName": "supabase-authentication.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/supabase-authentication"
        },
        "type": "Doc",
        "slug": "/blog/supabase-authentication",
        "slugAsParams": "supabase-authentication"
      },
      "documentHash": "1740489186417",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Supabase-uses-Valtio.mdx": {
      "document": {
        "title": "Supabase uses Valtio for its state management\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nAs I was reading the [Supabase source code](https://github.com/search?q=repo%3Asupabase%2Fsupabase+valtio&type=code) for “fun”, I came across a package named [Valtio](https://github.com/pmndrs/valtio).\r\n\r\nI visited Valtio repository and found this in the description:\r\n\r\n> *💊 Valtio makes proxy-state simple for React and Vanilla*\r\n\r\nIn this article, we will look at:\r\n\r\n1. Proxy object.\r\n    \r\n2. Valtio usage with an example.\r\n    \r\n3. An example use case found in Supabase source code.\r\n    \r\n\r\n# **Proxy object**\r\n\r\nWait, what’s a Proxy? The `Proxy` object enables you to create a proxy for another object, which can intercept and redefine fundamental operations for that object. ([From the MDN docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)). Valtio internally uses [Proxy](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy) mechanism.\r\n\r\nThe below example is picked from MDN docs:\r\n\r\n```plaintext\r\n// Example 1:\r\nconst target = {\r\n  message1: \"hello\",\r\n  message2: \"everyone\",\r\n};\r\n\r\nconst handler1 = {};\r\n\r\nconst proxy1 = new Proxy(target, handler1);\r\n\r\nconsole.log(proxy1.message1); // hello\r\nconsole.log(proxy1.message2); // everyone\r\n\r\n// Example 2:\r\nconst target = {\r\n  message1: \"hello\",\r\n  message2: \"everyone\",\r\n};\r\n\r\nconst handler2 = {\r\n  get(target, prop, receiver) {\r\n    return \"world\";\r\n  },\r\n};\r\n\r\nconst proxy2 = new Proxy(target, handler2);\r\n\r\nconsole.log(proxy2.message1); // world\r\nconsole.log(proxy2.message2); // world\r\n```\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png)\r\n\r\n# **Valtio usage with an example.**\r\n\r\nThe following demonstration is picked from the docs.\r\n\r\n## **Install**\r\n\r\n```plaintext\r\nnpm i valtio\r\n```\r\n\r\n## **Wrap your state object**\r\n\r\nValtio turns the object you pass it into a self-aware proxy.\r\n\r\n```plaintext\r\nimport { proxy, useSnapshot } from 'valtio'\r\nconst state = proxy({ count: 0, text: 'hello' })\r\n```\r\n\r\n## **Mutate from anywhere**\r\n\r\nYou can make changes to it in the same way you would to a normal js-object.\r\n\r\n```plaintext\r\nsetInterval(() => {\r\n  ++state.count\r\n}, 1000)\r\n```\r\n\r\n## **React via useSnapshot**\r\n\r\nCreate a local snapshot that catches changes. Rule of thumb: read from snapshots in render function, otherwise use the source. The component will only re-render when the parts of the state you access have changed, it is render-optimized.\r\n\r\n```plaintext\r\n// This will re-render on `state.count` change but not on `state.text` change\r\nfunction Counter() {\r\n  const snap = useSnapshot(state)\r\n  return (\r\n    <div>\r\n      {snap.count}\r\n      <button onClick={() => ++state.count}>+1</button>\r\n    </div>\r\n  )\r\n}\r\n```\r\n\r\n# **An example use case found in Supabase source code**\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*lViVcuZNxyffIgZ-zbtssw.png)\r\n\r\nI searched long and hard to find a simple, easy to understand example use case in [Supabase source code](https://github.com/search?q=repo%3Asupabase%2Fsupabase+valtio&type=code).\r\n\r\nThe example I picked is from [/apps/studio/state/app-state.ts](https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/state/app-state.ts#L6)\r\n\r\napp-state.ts has about 95 lines of code at the time of writing this article.\r\n\r\n```plaintext\r\n// pulled from https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/state/app-state.ts#L57-L60\r\nshowAiSettingsModal: false,\r\nsetShowAiSettingsModal: (value: boolean) => {\r\n  appState.showAiSettingsModal = value\r\n},\r\n```\r\n\r\n`showAiSettingsModal` is found to be used in [/apps/studio/components/ui/AISettingsModal.tsx](https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/components/ui/AISettingsModal.tsx#L20)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*Kx2xoUAi_t8iSPIEZMdjWw.png align=\"left\")\r\n\r\n> [*Get free courses inspired by the best practices used in open source.*](https://app.thinkthroo.com/best-practices)\r\n\r\n# About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/search?q=repo%3Asupabase%2Fsupabase+valtio&type=code](https://github.com/search?q=repo%3Asupabase%2Fsupabase+valtio&type=code)\r\n    \r\n2. [https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/state/app-state.ts#L6](https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/state/app-state.ts#L6)\r\n    \r\n3. [https://github.com/search?q=repo%3Asupabase/supabase%20appState&type=code](https://github.com/search?q=repo%3Asupabase%2Fsupabase+appState&type=code)\r\n    \r\n4. [https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/components/ui/AISettingsModal.tsx#L20](https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/components/ui/AISettingsModal.tsx#L20)\r\n    \r\n5. [https://github.com/pmndrs/valtio](https://github.com/pmndrs/valtio)\r\n    \r\n6. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Proxy](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy)",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var b=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=>{for(var s in e)i(a,s,{get:e[s],enumerable:!0})},r=(a,e,s,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of u(e))!g.call(a,t)&&t!==s&&i(a,t,{get:()=>e[t],enumerable:!(l=m(e,t))||l.enumerable});return a};var x=(a,e,s)=>(s=a!=null?p(b(a)):{},r(e||!a||!a.__esModule?i(s,\"default\",{value:a,enumerable:!0}):s,a)),N=a=>r(i({},\"__esModule\",{value:!0}),a);var h=f((j,c)=>{c.exports=_jsx_runtime});var w={};y(w,{default:()=>d,frontmatter:()=>v});var n=x(h()),v={title:\"Supabase uses Valtio for its state management\"};function o(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"As I was reading the \",(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Asupabase%2Fsupabase+valtio&type=code\",children:\"Supabase source code\"}),\" for \\u201Cfun\\u201D, I came across a package named \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/valtio\",children:\"Valtio\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"I visited Valtio repository and found this in the description:\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:\"\\u{1F48A} Valtio makes proxy-state simple for React and Vanilla\"})}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"In this article, we will look at:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Proxy object.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Valtio usage with an example.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"An example use case found in Supabase source code.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"proxy-object\",children:(0,n.jsx)(e.strong,{children:\"Proxy object\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Wait, what\\u2019s a Proxy? The \",(0,n.jsx)(e.code,{children:\"Proxy\"}),\" object enables you to create a proxy for another object, which can intercept and redefine fundamental operations for that object. (\",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\",children:\"From the MDN docs\"}),\"). Valtio internally uses \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\",children:\"Proxy\"}),\" mechanism.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"The below example is picked from MDN docs:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Example 1:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const target = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  message1: \"hello\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  message2: \"everyone\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const handler1 = {};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const proxy1 = new Proxy(target, handler1);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log(proxy1.message1); // hello\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log(proxy1.message2); // everyone\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Example 2:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const target = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  message1: \"hello\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  message2: \"everyone\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const handler2 = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  get(target, prop, receiver) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    return \"world\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const proxy2 = new Proxy(target, handler2);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log(proxy2.message1); // world\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"console.log(proxy2.message2); // world\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*47EKz3q3aUidRrzxVGAjLg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"valtio-usage-with-an-example\",children:(0,n.jsx)(e.strong,{children:\"Valtio usage with an example.\"})}),`\n`,(0,n.jsx)(e.p,{children:\"The following demonstration is picked from the docs.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"install\",children:(0,n.jsx)(e.strong,{children:\"Install\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"npm i valtio\"})})})})}),`\n`,(0,n.jsx)(e.h2,{id:\"wrap-your-state-object\",children:(0,n.jsx)(e.strong,{children:\"Wrap your state object\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Valtio turns the object you pass it into a self-aware proxy.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { proxy, useSnapshot } from 'valtio'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const state = proxy({ count: 0, text: 'hello' })\"})})]})})}),`\n`,(0,n.jsx)(e.h2,{id:\"mutate-from-anywhere\",children:(0,n.jsx)(e.strong,{children:\"Mutate from anywhere\"})}),`\n`,(0,n.jsx)(e.p,{children:\"You can make changes to it in the same way you would to a normal js-object.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"setInterval(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  ++state.count\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}, 1000)\"})})]})})}),`\n`,(0,n.jsx)(e.h2,{id:\"react-via-usesnapshot\",children:(0,n.jsx)(e.strong,{children:\"React via useSnapshot\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Create a local snapshot that catches changes. Rule of thumb: read from snapshots in render function, otherwise use the source. The component will only re-render when the parts of the state you access have changed, it is render-optimized.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// This will re-render on `state.count` change but not on `state.text` change\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function Counter() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const snap = useSnapshot(state)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      {snap.count}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <button onClick={() => ++state.count}>+1</button>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"an-example-use-case-found-in-supabase-source-code\",children:(0,n.jsx)(e.strong,{children:\"An example use case found in Supabase source code\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*lViVcuZNxyffIgZ-zbtssw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I searched long and hard to find a simple, easy to understand example use case in \",(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Asupabase%2Fsupabase+valtio&type=code\",children:\"Supabase source code\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The example I picked is from \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/state/app-state.ts#L6\",children:\"/apps/studio/state/app-state.ts\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"app-state.ts has about 95 lines of code at the time of writing this article.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// pulled from https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/state/app-state.ts#L57-L60\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"showAiSettingsModal: false,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"setShowAiSettingsModal: (value: boolean) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  appState.showAiSettingsModal = value\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"showAiSettingsModal\"}),\" is found to be used in \",(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/components/ui/AISettingsModal.tsx#L20\",children:\"/apps/studio/components/ui/AISettingsModal.tsx\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"![](\",(0,n.jsx)(e.a,{href:\"https://miro.medium.com/v2/resize:fit:875/1*Kx2xoUAi_t8iSPIEZMdjWw.png\",children:\"https://miro.medium.com/v2/resize:fit:875/1*Kx2xoUAi_t8iSPIEZMdjWw.png\"}),' align=\"left\")']}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:(0,n.jsx)(e.em,{children:\"Get free courses inspired by the best practices used in open source.\"})})}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Asupabase%2Fsupabase+valtio&type=code\",children:\"https://github.com/search?q=repo%3Asupabase%2Fsupabase+valtio&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/state/app-state.ts#L6\",children:\"https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/state/app-state.ts#L6\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Asupabase%2Fsupabase+appState&type=code\",children:\"https://github.com/search?q=repo%3Asupabase/supabase%20appState&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/components/ui/AISettingsModal.tsx#L20\",children:\"https://github.com/supabase/supabase/blob/00385657e8da32535916969036bb4e76befc5a44/apps/studio/components/ui/AISettingsModal.tsx#L20\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/valtio\",children:\"https://github.com/pmndrs/valtio\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy\"})}),`\n`]}),`\n`]})]})}function d(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(o,{...a})}):o(a)}return N(w);})();\n;return Component;"
        },
        "_id": "blog/Supabase-uses-Valtio.mdx",
        "_raw": {
          "sourceFilePath": "blog/Supabase-uses-Valtio.mdx",
          "sourceFileName": "Supabase-uses-Valtio.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Supabase-uses-Valtio"
        },
        "type": "Doc",
        "slug": "/blog/Supabase-uses-Valtio",
        "slugAsParams": "Supabase-uses-Valtio"
      },
      "documentHash": "1741941812889",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/t3-env-in-lobechat.mdx": {
      "document": {
        "title": "Lobechat applies typesafety to its environment variables\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, you will learn about T3 env and its usage with an example. We also analyze T3 env usage in [Lobechat](https://github.com/lobehub/lobe-chat/blob/main/src/config/db.ts).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*zwtM_FoWfJP0PHPq_3MIUA.png)\r\n\r\n### T3 env\r\n\r\nWhen you visit [T3 env website](https://env.t3.gg/), it has this hero title “Framework agnostic validation for type-safe environment variables.” with this description — “Never build your apps with invalid environment variables again. Validate and transform your environment with the full power of Zod.”\r\n\r\nYou can use T3 env to apply type-safe validations on your environment variables so you don’t end up deploying an application with invalid env variables. but how do you apply these validations? let’s find out.\r\n\r\n#### Installation\r\n\r\nUse the below command to install T3 env in your project.\r\n\r\n```plaintext\r\n# Core package, no framework specific features\r\npnpm add @t3-oss/env-core zod\r\n# or, with options preconfigured for Next.js\r\npnpm add @t3-oss/env-nextjs zod\r\n```\r\n\r\n#### Usage\r\n\r\nT3 env usage is simple, you would first have to define your schema as shown below:\r\n\r\n```plaintext\r\n// src/env.mjs\r\nimport { createEnv } from \"@t3-oss/env-nextjs\";\r\nimport { z } from \"zod\";\r\nexport const env = createEnv({\r\n /*\r\n * Serverside Environment variables, not available on the client.\r\n * Will throw if you access these variables on the client.\r\n */\r\n server: {\r\n DATABASE_URL: z.string().url(),\r\n OPEN_AI_API_KEY: z.string().min(1),\r\n },\r\n /*\r\n * Environment variables available on the client (and server).\r\n *\r\n * 💡 You'll get type errors if these are not prefixed with NEXT_PUBLIC_.\r\n */\r\n client: {\r\n NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\r\n },\r\n /*\r\n * Due to how Next.js bundles environment variables on Edge and Client,\r\n * we need to manually destructure them to make sure all are included in bundle.\r\n *\r\n * 💡 You'll get type errors if not all variables from `server` & `client` are included here.\r\n */\r\n runtimeEnv: {\r\n DATABASE_URL: process.env.DATABASE_URL,\r\n OPEN_AI_API_KEY: process.env.OPEN_AI_API_KEY,\r\n NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:\r\n process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY,\r\n },\r\n});\r\n```\r\n\r\n[Github docs for T3 env](https://github.com/t3-oss/t3-env?tab=readme-ov-file#define-your-schema) provides Next.js based example. Pay extra attention to the comments provided in the above example. Since Next.js is a full-stack framework, you have env variables for server and client and you need to be careful to not expose your server side enviroment variables to   \r\nclient.\r\n\r\nT3 env requires you to define your server env types in server object in schema.\r\n\r\n```plaintext\r\n/*\r\n* Serverside Environment variables, not available on the client.\r\n* Will throw if you access these variables on the client.\r\n*/\r\nserver: {\r\n DATABASE_URL: z.string().url(),\r\n OPEN_AI_API_KEY: z.string().min(1),\r\n},\r\n```\r\n\r\nSimilarly, define the types for the client side environment variables\r\n\r\n```plaintext\r\n/*\r\n * Environment variables available on the client (and server).\r\n *\r\n * 💡 You'll get type errors if these are not prefixed with NEXT_PUBLIC_.\r\n*/\r\nclient: {\r\n NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\r\n},\r\n```\r\n\r\nSo far, we only defined the variables and their types on the client and server side. Next step is to define runtimeEnv.\r\n\r\n```plaintext\r\n/*\r\n* Due to how Next.js bundles environment variables on Edge and Client,\r\n* we need to manually destructure them to make sure all are included in bundle.\r\n*\r\n* 💡 You'll get type errors if not all variables from `server` & `client` are included here.\r\n*/\r\nruntimeEnv: {\r\n DATABASE_URL: process.env.DATABASE_URL,\r\n OPEN_AI_API_KEY: process.env.OPEN_AI_API_KEY,\r\n NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:\r\n process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY,\r\n},\r\n```\r\n\r\n#### Use the schema in your app with autocompletion and type inference\r\n\r\n```plaintext\r\n// src/app/hello/route.ts\r\nimport { env } from \"../env.mjs\";\r\nexport const GET = (req: Request) => {\r\n const DATABASE_URL = env.DATABASE_URL;\r\n // use it…\r\n};\r\n```\r\n\r\nYou can import env in the file that requires it and you now have type-safety applied to your env variables with   \r\nauto-completion.\r\n\r\n### Lobechat usage of T3 env\r\n\r\nLobechat defines the schema, as explained above, in [src/config/db.ts](https://github.com/lobehub/lobe-chat/blob/main/src/config/db.ts).\r\n\r\n```plaintext\r\nimport { createEnv } from '@t3-oss/env-nextjs';\r\nimport { z } from 'zod';\r\nexport const getServerDBConfig = () => {\r\n return createEnv({\r\n client: {\r\n NEXT_PUBLIC_ENABLED_SERVER_SERVICE: z.boolean(),\r\n },\r\n runtimeEnv: {\r\n DATABASE_DRIVER: process.env.DATABASE_DRIVER || 'neon',\r\n DATABASE_TEST_URL: process.env.DATABASE_TEST_URL,\r\n DATABASE_URL: process.env.DATABASE_URL,\r\nDISABLE_REMOVE_GLOBAL_FILE: process.env.DISABLE_REMOVE_GLOBAL_FILE === '1',\r\nKEY_VAULTS_SECRET: process.env.KEY_VAULTS_SECRET,\r\nNEXT_PUBLIC_ENABLED_SERVER_SERVICE: process.env.NEXT_PUBLIC_SERVICE_MODE === 'server',\r\n },\r\n server: {\r\n DATABASE_DRIVER: z.enum(['neon', 'node']),\r\n DATABASE_TEST_URL: z.string().optional(),\r\n DATABASE_URL: z.string().optional(),\r\nDISABLE_REMOVE_GLOBAL_FILE: z.boolean().optional(),\r\nKEY_VAULTS_SECRET: z.string().optional(),\r\n },\r\n });\r\n};\r\nexport const serverDBEnv = getServerDBConfig();\r\n```\r\n\r\nThis serverDBEnv is used in [server/core/db.ts](https://github.com/lobehub/lobe-chat/blob/main/src/database/server/core/db.ts#L7).\r\n\r\nUsage example:\r\n\r\n```plaintext\r\nimport { serverDBEnv } from '@/config/db';\r\n//\r\nlet connectionString = serverDBEnv.DATABASE_URL;\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1\\. https://github.com/t3-oss/t3-env  \r\n2\\. https://github.com/lobehub/lobe-chat/blob/main/src/config/db.ts  \r\n3\\. https://env.t3.gg/",
          "code": "var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var v=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var g=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),E=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!N.call(a,i)&&i!==s&&l(a,i,{get:()=>e[i],enumerable:!(r=m(e,i))||r.enumerable});return a};var b=(a,e,s)=>(s=a!=null?o(v(a)):{},c(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),f=a=>c(l({},\"__esModule\",{value:!0}),a);var d=g((L,t)=>{t.exports=_jsx_runtime});var A={};E(A,{default:()=>p,frontmatter:()=>_});var n=b(d()),_={title:\"Lobechat applies typesafety to its environment variables\"};function h(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, you will learn about T3 env and its usage with an example. We also analyze T3 env usage in \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/config/db.ts\",children:\"Lobechat\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*zwtM_FoWfJP0PHPq_3MIUA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"t3-env\",children:\"T3 env\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"When you visit \",(0,n.jsx)(e.a,{href:\"https://env.t3.gg/\",children:\"T3 env website\"}),\", it has this hero title \\u201CFramework agnostic validation for type-safe environment variables.\\u201D with this description\\u200A\\u2014\\u200A\\u201CNever build your apps with invalid environment variables again. Validate and transform your environment with the full power of Zod.\\u201D\"]}),`\n`,(0,n.jsx)(e.p,{children:\"You can use T3 env to apply type-safe validations on your environment variables so you don\\u2019t end up deploying an application with invalid env variables. but how do you apply these validations? let\\u2019s find out.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"installation\",children:\"Installation\"}),`\n`,(0,n.jsx)(e.p,{children:\"Use the below command to install T3 env in your project.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# Core package, no framework specific features\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"pnpm add @t3-oss/env-core zod\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# or, with options preconfigured for Next.js\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"pnpm add @t3-oss/env-nextjs zod\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,n.jsx)(e.p,{children:\"T3 env usage is simple, you would first have to define your schema as shown below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// src/env.mjs\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { createEnv } from \"@t3-oss/env-nextjs\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { z } from \"zod\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const env = createEnv({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Serverside Environment variables, not available on the client.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Will throw if you access these variables on the client.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" server: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: z.string().url(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" OPEN_AI_API_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Environment variables available on the client (and server).\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * \\u{1F4A1} You'll get type errors if these are not prefixed with NEXT_PUBLIC_.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" client: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Due to how Next.js bundles environment variables on Edge and Client,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * we need to manually destructure them to make sure all are included in bundle.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * \\u{1F4A1} You'll get type errors if not all variables from `server` & `client` are included here.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" runtimeEnv: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: process.env.DATABASE_URL,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" OPEN_AI_API_KEY: process.env.OPEN_AI_API_KEY,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env?tab=readme-ov-file#define-your-schema\",children:\"Github docs for T3 env\"}),\" provides Next.js based example. Pay extra attention to the comments provided in the above example. Since Next.js is a full-stack framework, you have env variables for server and client and you need to be careful to not expose your server side enviroment variables to\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"client.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"T3 env requires you to define your server env types in server object in schema.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"* Serverside Environment variables, not available on the client.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"* Will throw if you access these variables on the client.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"*/\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"server: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: z.string().url(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" OPEN_AI_API_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Similarly, define the types for the client side environment variables\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Environment variables available on the client (and server).\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * \\u{1F4A1} You'll get type errors if these are not prefixed with NEXT_PUBLIC_.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"*/\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"client: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY: z.string().min(1),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"So far, we only defined the variables and their types on the client and server side. Next step is to define runtimeEnv.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"* Due to how Next.js bundles environment variables on Edge and Client,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"* we need to manually destructure them to make sure all are included in bundle.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"*\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"* \\u{1F4A1} You'll get type errors if not all variables from `server` & `client` are included here.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"*/\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"runtimeEnv: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: process.env.DATABASE_URL,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" OPEN_AI_API_KEY: process.env.OPEN_AI_API_KEY,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"},\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"use-the-schema-in-your-app-with-autocompletion-and-type-inference\",children:\"Use the schema in your app with autocompletion and type inference\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// src/app/hello/route.ts\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { env } from \"../env.mjs\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const GET = (req: Request) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" const DATABASE_URL = env.DATABASE_URL;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" // use it\\u2026\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can import env in the file that requires it and you now have type-safety applied to your env variables with\\xA0\",(0,n.jsx)(e.br,{}),`\n`,\"auto-completion.\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"lobechat-usage-of-t3env\",children:\"Lobechat usage of T3\\xA0env\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Lobechat defines the schema, as explained above, in \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/config/db.ts\",children:\"src/config/db.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { createEnv } from '@t3-oss/env-nextjs';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { z } from 'zod';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const getServerDBConfig = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" return createEnv({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" client: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" NEXT_PUBLIC_ENABLED_SERVER_SERVICE: z.boolean(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" runtimeEnv: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_DRIVER: process.env.DATABASE_DRIVER || 'neon',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_TEST_URL: process.env.DATABASE_TEST_URL,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: process.env.DATABASE_URL,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"DISABLE_REMOVE_GLOBAL_FILE: process.env.DISABLE_REMOVE_GLOBAL_FILE === '1',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"KEY_VAULTS_SECRET: process.env.KEY_VAULTS_SECRET,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"NEXT_PUBLIC_ENABLED_SERVER_SERVICE: process.env.NEXT_PUBLIC_SERVICE_MODE === 'server',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" server: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_DRIVER: z.enum(['neon', 'node']),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_TEST_URL: z.string().optional(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" DATABASE_URL: z.string().optional(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"DISABLE_REMOVE_GLOBAL_FILE: z.boolean().optional(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"KEY_VAULTS_SECRET: z.string().optional(),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const serverDBEnv = getServerDBConfig();\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This serverDBEnv is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/database/server/core/db.ts#L7\",children:\"server/core/db.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Usage example:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { serverDBEnv } from '@/config/db';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"//\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let connectionString = serverDBEnv.DATABASE_URL;\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. \",(0,n.jsx)(e.a,{href:\"https://github.com/t3-oss/t3-env\",children:\"https://github.com/t3-oss/t3-env\"}),(0,n.jsx)(e.br,{}),`\n`,\"2. \",(0,n.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/config/db.ts\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/config/db.ts\"}),(0,n.jsx)(e.br,{}),`\n`,\"3. \",(0,n.jsx)(e.a,{href:\"https://env.t3.gg/\",children:\"https://env.t3.gg/\"})]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return f(A);})();\n;return Component;"
        },
        "_id": "blog/t3-env-in-lobechat.mdx",
        "_raw": {
          "sourceFilePath": "blog/t3-env-in-lobechat.mdx",
          "sourceFileName": "t3-env-in-lobechat.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/t3-env-in-lobechat"
        },
        "type": "Doc",
        "slug": "/blog/t3-env-in-lobechat",
        "slugAsParams": "t3-env-in-lobechat"
      },
      "documentHash": "1740489186419",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Telemetry-in-Refine-source.mdx": {
      "document": {
        "title": "Telemetry in Refine source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review the Telemetry component in Refine source code.\r\n\r\n```plaintext\r\n...\r\n<UnsavedWarnContextProvider>\r\n  <RouterComponent>\r\n    {children}\r\n    {!disableTelemetryWithDefault && (\r\n      <Telemetry />\r\n    )}\r\n  <RouteChangeHandler />\r\n  </RouterComponent>\r\n...\r\n```\r\n\r\nThis above code snippet is picked from [/packages/core/src/components/containers/refine/index.tsx#L196](https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L196)\r\n\r\n### Telemetry\r\n\r\nIn the [Refine component](https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L196), Telemetry is imported as shown below\r\n\r\n```plaintext\r\nimport { Telemetry } from \"@components/telemetry\";\r\n```\r\n\r\nTo find the Telemetry code, we should look at [@components/telemetry](https://github.com/refinedev/refine/blob/main/packages/core/src/components/telemetry/index.tsx#L39) in Refine repository.\r\n\r\n```plaintext\r\nexport const Telemetry: React.FC<{}> = () => {\r\n  const payload = useTelemetryData();\r\n  const sent = React.useRef(false);\r\n\r\n  React.useEffect(() => {\r\n    if (sent.current) {\r\n      return;\r\n    }\r\n    const encoded = encode(payload);\r\n\r\n    if (!encoded) {\r\n      return;\r\n    }\r\n\r\n    transport(`https://telemetry.refine.dev/telemetry?payload=${encoded}`);\r\n    sent.current = true;\r\n  }, []);\r\n\r\n  return null;\r\n};\r\n```\r\n\r\nFirstly, you will get the payload returned by calling [useTelemetryData](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18).\r\n\r\n```plaintext\r\nconst payload = useTelemetryData();\r\n```\r\n\r\n#### useTelemetryData\r\n\r\n[useTelemetryData](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18) uses context and computes some values that are returned.\r\n\r\n```plaintext\r\nexport const useTelemetryData = (): ITelemetryData => {\r\n  const auth = useIsExistAuthentication();\r\n  const auditLogContext = useContext(AuditLogContext);\r\n  const { liveProvider } = useContext(LiveContext);\r\n  ...\r\n  const auditLog =\r\n    !!auditLogContext.create ||\r\n    !!auditLogContext.get ||\r\n    !!auditLogContext.update;\r\n\r\n  const live =\r\n    !!liveProvider?.publish ||\r\n    !!liveProvider?.subscribe ||\r\n    !!liveProvider?.unsubscribe;\r\n  ...\r\n  return {\r\n    providers: {\r\n      auth,\r\n      auditLog,\r\n      live,\r\n      router,\r\n      data,\r\n      i18n,\r\n      notification,\r\n      accessControl,\r\n    },\r\n    version: REFINE_VERSION,\r\n    resourceCount: resources.length,\r\n    projectId,\r\n  };\r\n```\r\n\r\nThis returned value is computed based on values available in contexts such as auditContext or liveContext for example.\r\n\r\nThis payload gets encoded\r\n\r\n```plaintext\r\nconst encoded = encode(payload);\r\n```\r\n\r\n#### encode\r\n\r\nencode is a function defined in [the same file](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18) and has the below code\r\n\r\n```plaintext\r\nconst encode = (payload: ITelemetryData): string | undefined => {\r\n  try {\r\n    const stringifiedPayload = JSON.stringify(payload || {});\r\n\r\n    if (typeof btoa !== \"undefined\") {\r\n      return btoa(stringifiedPayload);\r\n    }\r\n\r\n    return Buffer.from(stringifiedPayload).toString(\"base64\");\r\n  } catch (err) {\r\n    return undefined;\r\n  }\r\n};\r\n```\r\n\r\nJSON is stringified, Buffer is created using this stringified JSON and is converted to string using base64.\r\n\r\ntransport is another interesting function I found in [the same file](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18).\r\n\r\n```plaintext\r\ntransport(`https://telemetry.refine.dev/telemetry?payload=${encoded}`);\r\n```\r\n\r\n#### transport\r\n\r\n```plaintext\r\nconst throughImage = (src: string) => {\r\n  const img = new Image();\r\n\r\n  img.src = src;\r\n};\r\n\r\nconst throughFetch = (src: string) => {\r\n  fetch(src);\r\n};\r\n\r\nconst transport = (src: string) => {\r\n  if (typeof Image !== \"undefined\") {\r\n    throughImage(src);\r\n  } else if (typeof fetch !== \"undefined\") {\r\n    throughFetch(src);\r\n  }\r\n};\r\n```\r\n\r\nThis above code snippet has two more methods called conditionally, throughImage and throughFetch.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*ZE8yWs4j0iFJ55nVnWYFhA.png)\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/refinedev/refine/blob/main/packages/core/src/components/telemetry/index.tsx#L39](https://github.com/refinedev/refine/blob/main/packages/core/src/components/telemetry/index.tsx#L39)\r\n    \r\n2. [https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18)",
          "code": "var Component=(()=>{var o=Object.create;var l=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=>{for(var s in e)l(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of u(e))!f.call(a,i)&&i!==s&&l(a,i,{get:()=>e[i],enumerable:!(r=m(e,i))||r.enumerable});return a};var b=(a,e,s)=>(s=a!=null?o(g(a)):{},c(e||!a||!a.__esModule?l(s,\"default\",{value:a,enumerable:!0}):s,a)),x=a=>c(l({},\"__esModule\",{value:!0}),a);var d=N((L,t)=>{t.exports=_jsx_runtime});var k={};y(k,{default:()=>p,frontmatter:()=>v});var n=b(d()),v={title:\"Telemetry in Refine source\\xA0code.\"};function h(a){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this article, we will review the Telemetry component in Refine source code.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"<UnsavedWarnContextProvider>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  <RouterComponent>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    {children}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    {!disableTelemetryWithDefault && (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <Telemetry />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    )}\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  <RouteChangeHandler />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  </RouterComponent>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"...\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This above code snippet is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L196\",children:\"/packages/core/src/components/containers/refine/index.tsx#L196\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"telemetry\",children:\"Telemetry\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L196\",children:\"Refine component\"}),\", Telemetry is imported as shown below\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { Telemetry } from \"@components/telemetry\";'})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"To find the Telemetry code, we should look at \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/components/telemetry/index.tsx#L39\",children:\"@components/telemetry\"}),\" in Refine repository.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const Telemetry: React.FC<{}> = () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const payload = useTelemetryData();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const sent = React.useRef(false);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  React.useEffect(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    if (sent.current) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const encoded = encode(payload);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    if (!encoded) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    transport(`https://telemetry.refine.dev/telemetry?payload=${encoded}`);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    sent.current = true;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }, []);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return null;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Firstly, you will get the payload returned by calling \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18\",children:\"useTelemetryData\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const payload = useTelemetryData();\"})})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"usetelemetrydata\",children:\"useTelemetryData\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18\",children:\"useTelemetryData\"}),\" uses context and computes some values that are returned.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const useTelemetryData = (): ITelemetryData => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const auth = useIsExistAuthentication();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const auditLogContext = useContext(AuditLogContext);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { liveProvider } = useContext(LiveContext);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  ...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const auditLog =\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    !!auditLogContext.create ||\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    !!auditLogContext.get ||\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    !!auditLogContext.update;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const live =\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    !!liveProvider?.publish ||\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    !!liveProvider?.subscribe ||\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    !!liveProvider?.unsubscribe;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  ...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    providers: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      auth,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      auditLog,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      live,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      router,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      data,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      i18n,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      notification,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      accessControl,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    version: REFINE_VERSION,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    resourceCount: resources.length,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    projectId,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  };\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This returned value is computed based on values available in contexts such as auditContext or liveContext for example.\"}),`\n`,(0,n.jsx)(e.p,{children:\"This payload gets encoded\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const encoded = encode(payload);\"})})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"encode\",children:\"encode\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"encode is a function defined in \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18\",children:\"the same file\"}),\" and has the below code\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const encode = (payload: ITelemetryData): string | undefined => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  try {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const stringifiedPayload = JSON.stringify(payload || {});\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    if (typeof btoa !== \"undefined\") {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return btoa(stringifiedPayload);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'    return Buffer.from(stringifiedPayload).toString(\"base64\");'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  } catch (err) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return undefined;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"JSON is stringified, Buffer is created using this stringified JSON and is converted to string using base64.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"transport is another interesting function I found in \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18\",children:\"the same file\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"transport(`https://telemetry.refine.dev/telemetry?payload=${encoded}`);\"})})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"transport\",children:\"transport\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const throughImage = (src: string) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const img = new Image();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  img.src = src;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const throughFetch = (src: string) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  fetch(src);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const transport = (src: string) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  if (typeof Image !== \"undefined\") {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    throughImage(src);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  } else if (typeof fetch !== \"undefined\") {'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    throughFetch(src);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This above code snippet has two more methods called conditionally, throughImage and throughFetch.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*ZE8yWs4j0iFJ55nVnWYFhA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/components/telemetry/index.tsx#L39\",children:\"https://github.com/refinedev/refine/blob/main/packages/core/src/components/telemetry/index.tsx#L39\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18\",children:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/useTelemetryData/index.ts#L18\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return x(k);})();\n;return Component;"
        },
        "_id": "blog/Telemetry-in-Refine-source.mdx",
        "_raw": {
          "sourceFilePath": "blog/Telemetry-in-Refine-source.mdx",
          "sourceFileName": "Telemetry-in-Refine-source.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Telemetry-in-Refine-source"
        },
        "type": "Doc",
        "slug": "/blog/Telemetry-in-Refine-source",
        "slugAsParams": "Telemetry-in-Refine-source"
      },
      "documentHash": "1742200880698",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/text-auto-in-gitattributes.mdx": {
      "document": {
        "title": "text=auto in .gitattributes file\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse the .gitattributes from the [react/.gitattributes](https://github.com/facebook/react/blob/main/.gitattributes). When you are part of a team, you and your colleagues often work on projects across different operating systems and development environments. As a result, file formatting issues, especially related to line endings, can arise.\r\n\r\n* **Linux/macOS** use a Line Feed (LF) character.\r\n    \r\n* **Windows** uses a Carriage Return + Line Feed (CRLF) combination.\r\n    \r\n\r\nusing `.gitattributes` you can define file’s line endings. We will study the .gitattributes from React source and find out how.\r\n\r\n# **What is** `.gitattributes`?\r\n\r\n`.gitattributes` is a configuration file that defines attributes for paths in a Git repository. These attributes allow you to control how Git processes different types of files during specific operations, such as:\r\n\r\n1. **Check-in and check-out**: How files are stored in the repository and retrieved in the working directory. [Link to docs](https://git-scm.com/docs/gitattributes#_effects)\r\n    \r\n2. **Diff and merge behavior**: How changes to files are compared or merged. [Link to docs](https://git-scm.com/docs/gitattributes#_diff).\r\n    \r\n3. **EOL (End of Line) conversion**: Ensuring line endings are consistent across operating systems (Linux/macOS vs. Windows). [Link to docs](https://git-scm.com/docs/gitattributes#_eol)\r\n    \r\n\r\nThe file can be committed into the repository and versioned, meaning its rules are applied consistently for every collaborator, regardless of their local settings.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*EgQVYYylY9Qn2h8TY0Dn6A.png)\r\n\r\n# **Why is** `.gitattributes` Important?\r\n\r\n1. **Cross-Platform Consistency**: Different operating systems use different end-of-line (EOL) characters (LF on Unix-based systems, CRLF on Windows). Without `.gitattributes`, inconsistencies in line endings can result in unnecessary changes being detected, cluttering your Git history and causing conflicts.\r\n    \r\n2. **Binary vs. Text File Handling**: Git automatically tries to detect whether a file is binary or text, but it may not always get it right (e.g., files that are partially ASCII but contain binary data). `.gitattributes` ensures that files are treated correctly, whether they’re text, binary, or specific formats like images or PDFs.\r\n    \r\n\r\nYou can read this more at this [in-depth Stackoverflow answer](https://stackoverflow.com/questions/73086622/is-a-gitattributes-file-really-necessary-for-git).\r\n\r\n**3\\. Control Over Diffs and Merges**: `.gitattributes` can define custom diff and merge strategies, enabling better control over how files are compared and resolved during conflict situations.\r\n\r\n## **Common** `.gitattributes` Configuration\r\n\r\nA typical `.gitattributes` file looks something like this:\r\n\r\n```plaintext\r\n# Auto-detect text files and ensure LF line endings in the repository\r\n* text=auto\r\n# Windows batch scripts must use CRLF\r\n*.bat text eol=crlf\r\n# Go files should use LF only\r\n*.go text eol=lf\r\n# Binary files should not be modified by Git\r\n*.png binary\r\n*.jpg binary\r\n*.pdf binary\r\n```\r\n\r\n* `text=auto`: Automatically detects whether a file is text or binary. If the file is text, Git converts line endings to LF on check-in. This prevents cross-platform issues caused by different EOL characters.\r\n    \r\n* `*.bat text eol=crlf`: Forces Windows batch scripts to always use CRLF for proper execution on Windows.\r\n    \r\n* `*.go text eol=lf`: Ensures Go files use LF, which is the standard line ending on Linux and macOS.\r\n    \r\n* `*.png binary`: Prevents Git from attempting to diff or alter binary files like PNGs, which are not human-readable and should not have EOL conversions.\r\n    \r\n\r\n## `.gitattributes` in React\r\n\r\nReact uses a minimal `.gitattributes` file:\r\n\r\n```plaintext\r\n* text=auto\r\n```\r\n\r\nThis simple line ensures that files with text content (such as JavaScript files) have their line endings converted to LF in the repository while preserving the developers’ local EOL preferences. This setup is enough to prevent line-ending issues across platforms while keeping the repository clean and consistent.\r\n\r\n## **Key Attributes Explained**\r\n\r\n1\\. `text`:\r\n\r\nThis attribute enables Git’s automatic handling of line-ending normalization. It ensures that line endings are consistent (LF) in the repository while allowing the developer’s system to handle them according to local conventions (e.g., CRLF on Windows).\r\n\r\n* **Set**: Enables EOL conversion on check-in and checkout, normalizing line endings to LF in the repository.\r\n    \r\n* **Unset**: Disables any line-ending conversion for the specified files.\r\n    \r\n* `text=auto`: Automatically detects if a file is text or binary. Git performs EOL normalization if the file is identified as text.\r\n    \r\n\r\n## **Is** `.gitattributes` Really Necessary?\r\n\r\nThe necessity of `.gitattributes` depends on the project. For simple projects, Git is often smart enough to handle file types and line endings automatically. However, in larger projects with cross-platform teams, not having a `.gitattributes` file can lead to:\r\n\r\n* **Inconsistent Line Endings**: Developers on Windows may accidentally commit CRLF line endings, creating unnecessary changes in the repository.\r\n    \r\n\r\nImagine just the EOL lines changes appearing in your pull request?\r\n\r\n* **Incorrect Binary Handling**: Git may misinterpret binary files as text, leading to corrupt diffs or merge conflicts.\r\n    \r\n* **Merge and Diff Issues**: Custom merge strategies (e.g., for Unity or image files) are impossible without `.gitattributes`.\r\n    \r\n\r\n## **StackOverflow answer:**\r\n\r\nA [common concern raised on StackOverflow](https://stackoverflow.com/questions/73086622/is-a-gitattributes-file-really-necessary-for-git) is whether `.gitattributes` adds unnecessary complexity to a project.\r\n\r\n> *“Use* `.gitattributes` *if and only if you have to have Git mess with files because users A through M use macOS and users N through Z use Windows.”*\r\n\r\nIn short, while not strictly mandatory, `.gitattributes` provides a level of control that can prevent subtle issues and improve developer experience.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*jSFEa2iNXE1alcXfAslwSQ.png)\r\n\r\nReact devs kept it simple by just adding 1 line `* text=auto` to ensure you are ***not*** including EOL changes as part of your pull request.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/facebook/react/blob/main/.gitattributes](https://github.com/facebook/react/blob/main/.gitattributes)\r\n    \r\n2. [https://git-scm.com/docs/gitattributes](https://git-scm.com/docs/gitattributes)\r\n    \r\n3. [https://stackoverflow.com/questions/73086622/is-a-gitattributes-file-really-necessary-for-git](https://stackoverflow.com/questions/73086622/is-a-gitattributes-file-really-necessary-for-git)\r\n    \r\n",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var i in e)s(t,i,{get:e[i],enumerable:!0})},c=(t,e,i,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of g(e))!f.call(t,r)&&r!==i&&s(t,r,{get:()=>e[r],enumerable:!(a=u(e,r))||a.enumerable});return t};var w=(t,e,i)=>(i=t!=null?p(m(t)):{},c(e||!t||!t.__esModule?s(i,\"default\",{value:t,enumerable:!0}):i,t)),v=t=>c(s({},\"__esModule\",{value:!0}),t);var l=b((F,o)=>{o.exports=_jsx_runtime});var k={};y(k,{default:()=>d,frontmatter:()=>x});var n=w(l()),x={title:\"text=auto in .gitattributes file\"};function h(t){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse the .gitattributes from the \",(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/.gitattributes\",children:\"react/.gitattributes\"}),\". When you are part of a team, you and your colleagues often work on projects across different operating systems and development environments. As a result, file formatting issues, especially related to line endings, can arise.\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Linux/macOS\"}),\" use a Line Feed (LF) character.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Windows\"}),\" uses a Carriage Return + Line Feed (CRLF) combination.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"using \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" you can define file\\u2019s line endings. We will study the .gitattributes from React source and find out how.\"]}),`\n`,(0,n.jsxs)(e.h1,{id:\"what-is-gitattributes\",children:[(0,n.jsx)(e.strong,{children:\"What is\"}),\" \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\"?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" is a configuration file that defines attributes for paths in a Git repository. These attributes allow you to control how Git processes different types of files during specific operations, such as:\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Check-in and check-out\"}),\": How files are stored in the repository and retrieved in the working directory. \",(0,n.jsx)(e.a,{href:\"https://git-scm.com/docs/gitattributes#_effects\",children:\"Link to docs\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Diff and merge behavior\"}),\": How changes to files are compared or merged. \",(0,n.jsx)(e.a,{href:\"https://git-scm.com/docs/gitattributes#_diff\",children:\"Link to docs\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"EOL (End of Line) conversion\"}),\": Ensuring line endings are consistent across operating systems (Linux/macOS vs. Windows). \",(0,n.jsx)(e.a,{href:\"https://git-scm.com/docs/gitattributes#_eol\",children:\"Link to docs\"})]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"The file can be committed into the repository and versioned, meaning its rules are applied consistently for every collaborator, regardless of their local settings.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*EgQVYYylY9Qn2h8TY0Dn6A.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.h1,{id:\"why-is-gitattributes-important\",children:[(0,n.jsx)(e.strong,{children:\"Why is\"}),\" \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" Important?\"]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Cross-Platform Consistency\"}),\": Different operating systems use different end-of-line (EOL) characters (LF on Unix-based systems, CRLF on Windows). Without \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\", inconsistencies in line endings can result in unnecessary changes being detected, cluttering your Git history and causing conflicts.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Binary vs. Text File Handling\"}),\": Git automatically tries to detect whether a file is binary or text, but it may not always get it right (e.g., files that are partially ASCII but contain binary data). \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" ensures that files are treated correctly, whether they\\u2019re text, binary, or specific formats like images or PDFs.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can read this more at this \",(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/73086622/is-a-gitattributes-file-really-necessary-for-git\",children:\"in-depth Stackoverflow answer\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"3. Control Over Diffs and Merges\"}),\": \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" can define custom diff and merge strategies, enabling better control over how files are compared and resolved during conflict situations.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"common-gitattributes-configuration\",children:[(0,n.jsx)(e.strong,{children:\"Common\"}),\" \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" Configuration\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"A typical \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" file looks something like this:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# Auto-detect text files and ensure LF line endings in the repository\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"* text=auto\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# Windows batch scripts must use CRLF\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"*.bat text eol=crlf\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# Go files should use LF only\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"*.go text eol=lf\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"# Binary files should not be modified by Git\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"*.png binary\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"*.jpg binary\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"*.pdf binary\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"text=auto\"}),\": Automatically detects whether a file is text or binary. If the file is text, Git converts line endings to LF on check-in. This prevents cross-platform issues caused by different EOL characters.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"*.bat text eol=crlf\"}),\": Forces Windows batch scripts to always use CRLF for proper execution on Windows.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"*.go text eol=lf\"}),\": Ensures Go files use LF, which is the standard line ending on Linux and macOS.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"*.png binary\"}),\": Prevents Git from attempting to diff or alter binary files like PNGs, which are not human-readable and should not have EOL conversions.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"gitattributes-in-react\",children:[(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" in React\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"React uses a minimal \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" file:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"* text=auto\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"This simple line ensures that files with text content (such as JavaScript files) have their line endings converted to LF in the repository while preserving the developers\\u2019 local EOL preferences. This setup is enough to prevent line-ending issues across platforms while keeping the repository clean and consistent.\"}),`\n`,(0,n.jsx)(e.h2,{id:\"key-attributes-explained\",children:(0,n.jsx)(e.strong,{children:\"Key Attributes Explained\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"1. \",(0,n.jsx)(e.code,{children:\"text\"}),\":\"]}),`\n`,(0,n.jsx)(e.p,{children:\"This attribute enables Git\\u2019s automatic handling of line-ending normalization. It ensures that line endings are consistent (LF) in the repository while allowing the developer\\u2019s system to handle them according to local conventions (e.g., CRLF on Windows).\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Set\"}),\": Enables EOL conversion on check-in and checkout, normalizing line endings to LF in the repository.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Unset\"}),\": Disables any line-ending conversion for the specified files.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"text=auto\"}),\": Automatically detects if a file is text or binary. Git performs EOL normalization if the file is identified as text.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.h2,{id:\"is-gitattributes-really-necessary\",children:[(0,n.jsx)(e.strong,{children:\"Is\"}),\" \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" Really Necessary?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The necessity of \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" depends on the project. For simple projects, Git is often smart enough to handle file types and line endings automatically. However, in larger projects with cross-platform teams, not having a \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" file can lead to:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.strong,{children:\"Inconsistent Line Endings\"}),\": Developers on Windows may accidentally commit CRLF line endings, creating unnecessary changes in the repository.\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Imagine just the EOL lines changes appearing in your pull request?\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Incorrect Binary Handling\"}),\": Git may misinterpret binary files as text, leading to corrupt diffs or merge conflicts.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.strong,{children:\"Merge and Diff Issues\"}),\": Custom merge strategies (e.g., for Unity or image files) are impossible without \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\".\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"stackoverflow-answer\",children:(0,n.jsx)(e.strong,{children:\"StackOverflow answer:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"A \",(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/73086622/is-a-gitattributes-file-really-necessary-for-git\",children:\"common concern raised on StackOverflow\"}),\" is whether \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" adds unnecessary complexity to a project.\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.em,{children:\"\\u201CUse\"}),\" \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" \",(0,n.jsx)(e.em,{children:\"if and only if you have to have Git mess with files because users A through M use macOS and users N through Z use Windows.\\u201D\"})]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"In short, while not strictly mandatory, \",(0,n.jsx)(e.code,{children:\".gitattributes\"}),\" provides a level of control that can prevent subtle issues and improve developer experience.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*jSFEa2iNXE1alcXfAslwSQ.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"React devs kept it simple by just adding 1 line \",(0,n.jsx)(e.code,{children:\"* text=auto\"}),\" to ensure you are \",(0,n.jsx)(e.em,{children:(0,n.jsx)(e.strong,{children:\"not\"})}),\" including EOL changes as part of your pull request.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/facebook/react/blob/main/.gitattributes\",children:\"https://github.com/facebook/react/blob/main/.gitattributes\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://git-scm.com/docs/gitattributes\",children:\"https://git-scm.com/docs/gitattributes\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://stackoverflow.com/questions/73086622/is-a-gitattributes-file-really-necessary-for-git\",children:\"https://stackoverflow.com/questions/73086622/is-a-gitattributes-file-really-necessary-for-git\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(h,{...t})}):h(t)}return v(k);})();\n;return Component;"
        },
        "_id": "blog/text-auto-in-gitattributes.mdx",
        "_raw": {
          "sourceFilePath": "blog/text-auto-in-gitattributes.mdx",
          "sourceFileName": "text-auto-in-gitattributes.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/text-auto-in-gitattributes"
        },
        "type": "Doc",
        "slug": "/blog/text-auto-in-gitattributes",
        "slugAsParams": "text-auto-in-gitattributes"
      },
      "documentHash": "1740489186421",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/toolbar-value-to-cursor-mode.mdx": {
      "document": {
        "title": "toolbar_value_to_cursormode function in Grida codebase\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review a function named [toolbar\\_value\\_to\\_cursormode in Grida source code.](https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L165)\r\n\r\nThis function is called in another function `setCursorMode` \r\n\r\n```js\r\n<ToolsGroup\r\n  value={value}\r\n  options={[\r\n    { value: \"cursor\", label: \"Cursor\", shortcut: \"V\" },\r\n    { value: \"hand\", label: \"Hand tool\", shortcut: \"H\" },\r\n  ]}\r\n  onValueChange={(v) => {\r\n    setCursorMode(toolbar_value_to_cursormode(v as ToolbarToolType));\r\n  }}\r\n/>\r\n```\r\n\r\nsetCursorMode is used in a component called [PlaygroundToolbar](https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L135).\r\n\r\n### toolbar\\_value\\_cursormode\r\n\r\nThis function is defined in [forms/grida-react-canvas/toolbar/index.ts](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/toolbar/index.ts#L31).\r\n\r\n```js\r\nexport function toolbar_value_to_cursormode(tt: ToolbarToolType): CursorMode {\r\n  switch (tt) {\r\n    case \"cursor\":\r\n      return { type: \"cursor\" };\r\n    case \"hand\":\r\n      return { type: \"hand\" };\r\n    case \"container\":\r\n    case \"ellipse\":\r\n    case \"image\":\r\n    case \"rectangle\":\r\n    case \"text\":\r\n      return { type: \"insert\", node: tt };\r\n    case \"line\":\r\n    case \"pencil\":\r\n      return { type: \"draw\", tool: tt };\r\n    case \"path\":\r\n      return { type: \"path\" };\r\n    default:\r\n      return { type: \"cursor\" };\r\n  }\r\n}\r\n```\r\n\r\nThis is a simple function using switch-case, based on the value passed as an argument, an object containing type is returned.\r\n\r\nFor example, if you click on rectangle in the toolbar:\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*eBtphTM1Xkaz9TPt4aAFiw.png)\r\n\r\nThe below object is returned\r\n\r\n```js\r\n{ type: \"insert\", node: tt };\r\n```\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [apps/forms/scaffolds/playground-canvas/toolbar.tsx#L165](https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L165)\r\n    \r\n2. [apps/forms/scaffolds/playground-canvas/toolbar.tsx#L135](https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L135)",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var r in e)c(n,r,{get:e[r],enumerable:!0})},a=(n,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of y(e))!u.call(n,s)&&s!==r&&c(n,s,{get:()=>e[s],enumerable:!(o=p(e,s))||o.enumerable});return n};var f=(n,e,r)=>(r=n!=null?h(m(n)):{},a(e||!n||!n.__esModule?c(r,\"default\",{value:n,enumerable:!0}):r,n)),N=n=>a(c({},\"__esModule\",{value:!0}),n);var t=g((j,F)=>{F.exports=_jsx_runtime});var _={};b(_,{default:()=>d,frontmatter:()=>v});var l=f(t()),v={title:\"toolbar_value_to_cursormode function in Grida\\xA0codebase\"};function i(n){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we will review a function named \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L165\",children:\"toolbar_value_to_cursormode in Grida source code.\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"This function is called in another function \",(0,l.jsx)(e.code,{children:\"setCursorMode\"}),\"\\xA0\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"ToolsGroup\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  options\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={[\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"cursor\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"Cursor\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"V\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" value\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"hand\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" label\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"Hand tool\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" shortcut\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"H\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  ]}\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  onValueChange\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"v\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    setCursorMode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"toolbar_value_to_cursormode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"v \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ToolbarToolType\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }}\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/>\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"setCursorMode is used in a component called \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L135\",children:\"PlaygroundToolbar\"}),\".\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"toolbar_value_cursormode\",children:\"toolbar_value_cursormode\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"This function is defined in \",(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/toolbar/index.ts#L31\",children:\"forms/grida-react-canvas/toolbar/index.ts\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" toolbar_value_to_cursormode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"tt\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ToolbarToolType\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CursorMode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  switch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"tt\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"cursor\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"cursor\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"hand\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"hand\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"container\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"ellipse\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"image\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"rectangle\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"text\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"insert\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" node\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tt \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"line\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"pencil\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"draw\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tool\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tt \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    case\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"path\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"path\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    default:\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"cursor\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"This is a simple function using switch-case, based on the value passed as an argument, an object containing type is returned.\"}),`\n`,(0,l.jsx)(e.p,{children:\"For example, if you click on rectangle in the toolbar:\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*eBtphTM1Xkaz9TPt4aAFiw.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:\"The below object is returned\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"insert\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" node\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tt \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]})})})}),`\n`,(0,l.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L165\",children:\"apps/forms/scaffolds/playground-canvas/toolbar.tsx#L165\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/gridaco/grida/blob/ac377ecdc20355ce1526a209078df353b4ba97b2/apps/forms/scaffolds/playground-canvas/toolbar.tsx#L135\",children:\"apps/forms/scaffolds/playground-canvas/toolbar.tsx#L135\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return N(_);})();\n;return Component;"
        },
        "_id": "blog/toolbar-value-to-cursor-mode.mdx",
        "_raw": {
          "sourceFilePath": "blog/toolbar-value-to-cursor-mode.mdx",
          "sourceFileName": "toolbar-value-to-cursor-mode.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/toolbar-value-to-cursor-mode"
        },
        "type": "Doc",
        "slug": "/blog/toolbar-value-to-cursor-mode",
        "slugAsParams": "toolbar-value-to-cursor-mode"
      },
      "documentHash": "1740489186425",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/ts-pattern-in-documenso.mdx": {
      "document": {
        "title": "ts-pattern usage in Documenso source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse the ts-pattern usage in Documenso source code, but before that, let’s learn what a `ts-pattern` library is.\r\n\r\n### ts-pattern\r\n\r\n`ts-pattern` is an exhaustive Pattern Matching library for TypeScript with smart type inference. Write better and safer conditions. Pattern matching lets you express complex conditions in a single, compact expression. Your code becomes shorter and more readable. Exhaustiveness checking ensures you haven’t forgotten any possible case.\r\n\r\n```js\r\nimport { match, P } from 'ts-pattern';\r\ntype Data =\r\n | { type: 'text'; content: string }\r\n | { type: 'img'; src: string };\r\ntype Result =\r\n | { type: 'ok'; data: Data }\r\n | { type: 'error'; error: Error };\r\nconst result: Result = …;\r\nconst html = match(result)\r\n .with({ type: 'error' }, () => <p>Oups! An error occured</p>)\r\n .with({ type: 'ok', data: { type: 'text' } }, (res) => <p>{res.data.content}</p>)\r\n .with({ type: 'ok', data: { type: 'img', src: P.select() } }, (src) => <img src={src} />)\r\n .exhaustive();\r\n```\r\n\r\nThis example is pretty self-explanatory. Now that we understand a basic example of how ts-pattern works. Let’s apply this to the code found in [Documenso](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L51).\r\n\r\n### match usage in Documenso source code.\r\n\r\nIn Documenso source code, there is a file named [upload/put-file.ts](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L48C1-L54C3) and you will find this below code at [line 48](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L48C1-L54C3).\r\n\r\n```js\r\nimport { match } from 'ts-pattern';\r\nimport { env } from 'next-runtime-env';\r\nexport const putFile = async (file: File) => {\r\n const NEXT_PUBLIC_UPLOAD_TRANSPORT = env('NEXT_PUBLIC_UPLOAD_TRANSPORT');\r\nreturn await match(NEXT_PUBLIC_UPLOAD_TRANSPORT)\r\n .with('s3', async () => putFileInS3(file))\r\n .otherwise(async () => putFileInDatabase(file));\r\n};\r\n```\r\n\r\n`match` is applied against a variable named `NEXT_PUBLIC_UPLOAD_TRANSPORT`. Based on the example above, you   \r\npass a parameter to `match` and run a check against it using `with`. In the example from documentation above, it was based on `type` and `data`, but here in this code snippet from Documenso, it is a different story.\r\n\r\n`with` is checked against a string — ‘s3’. At this point, I just wanted to find out what is expected as value for the variable `Next_PUBLIC_UPLOAD_TRANSPORT`. I searched for this variable — `NEXT_PUBLIC_UPLOAD_TRANSPORT` across the codebase and found its type definition in a file named [process-env.d.ts](https://github.com/documenso/documenso/blob/main/packages/tsconfig/process-env.d.ts#L25). This file is in package named [tsconfig](https://github.com/documenso/documenso/tree/main/packages/tsconfig). Documenso is a ***monorepo*** and contains ***workspaces*** inside apps folder and ***packages*** inside packages folder.\r\n\r\n```js\r\nNEXT_PUBLIC_UPLOAD_TRANSPORT?: 'database' | 's3';\r\n```\r\n\r\n`NEXT_PUBLIC_UPLOAD_TRANSPORT` accepts only two string literals — ‘database’ or ‘s3’. Now it makes sense, you see. This is why you have a check against ‘s3’ string to call a function named `putFileInS3`.\r\n\r\n```js\r\n.with('s3', async () => putFileInS3(file))\r\n```\r\n\r\nOtherwise, the value in `NEXT_PUBLIC_UPLOAD_TRANSPORT` will be ‘database’ and it handled using `otherwise`:\r\n\r\n```js\r\n.otherwise(async () => putFileInDatabase(file));\r\n```\r\n\r\nThis reminds me of the `.exhaustive()` function. `ts-pattern` documentation says this about exhaustive function —   \r\n“  \r\nExhaustiveness checking ensures you haven’t forgotten any possible case.  \r\n“\r\n\r\nI think using `.exhaustive()` when you are dealing with a `match` against an object, like the one provided in documentation example, makes sense. Since this variable `NEXT_PUBLIC_UPLOAD_TRANSPORT` accepts only two string literals — ‘database’ or ‘s3’, there’s only string and no object to match against, that’s why there is no need for using `.exhaustive()`, instead `.otherwise` is used.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L51](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L51)\r\n    \r\n2. [https://www.npmjs.com/package/ts-pattern](https://www.npmjs.com/package/ts-pattern)\r\n    \r\n3. [https://github.com/documenso/documenso/blob/main/packages/tsconfig/process-env.d.ts#L25](https://github.com/documenso/documenso/blob/main/packages/tsconfig/process-env.d.ts#L25)\r\n",
          "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var s in e)r(n,s,{get:e[s],enumerable:!0})},t=(n,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(n,c)&&c!==s&&r(n,c,{get:()=>e[c],enumerable:!(o=p(e,c))||o.enumerable});return n};var b=(n,e,s)=>(s=n!=null?h(m(n)):{},t(e||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),w=n=>t(r({},\"__esModule\",{value:!0}),n);var F=g((_,a)=>{a.exports=_jsx_runtime});var v={};f(v,{default:()=>d,frontmatter:()=>N});var l=b(F()),N={title:\"ts-pattern usage in Documenso source\\xA0code\"};function i(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we analyse the ts-pattern usage in Documenso source code, but before that, let\\u2019s learn what a \",(0,l.jsx)(e.code,{children:\"ts-pattern\"}),\" library is.\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"ts-pattern\",children:\"ts-pattern\"}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"ts-pattern\"}),\" is an exhaustive Pattern Matching library for TypeScript with smart type inference. Write better and safer conditions. Pattern matching lets you express complex conditions in a single, compact expression. Your code becomes shorter and more readable. Exhaustiveness checking ensures you haven\\u2019t forgotten any possible case.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" match\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" P \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'ts-pattern'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'text'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" content\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'img'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" src\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Result\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'ok'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'error'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" result\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Result\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \\u2026\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" html \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" match\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"result\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" .\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"with\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'error'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Oups! An error occured\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"</\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">)\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" .\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"with\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'ok'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'text'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">{\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"res\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"content\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}</\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"p\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">)\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" .\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"with\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'ok'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'img'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" src\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" P\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"select\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"src\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"img src\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"src\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" />)\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" .\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"exhaustive\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"This example is pretty self-explanatory. Now that we understand a basic example of how ts-pattern works. Let\\u2019s apply this to the code found in \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L51\",children:\"Documenso\"}),\".\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"match-usage-in-documenso-sourcecode\",children:\"match usage in Documenso source\\xA0code.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"In Documenso source code, there is a file named \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L48C1-L54C3\",children:\"upload/put-file.ts\"}),\" and you will find this below code at \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L48C1-L54C3\",children:\"line 48\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" match \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'ts-pattern'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" env \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next-runtime-env'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" putFile\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" File\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NEXT_PUBLIC_UPLOAD_TRANSPORT \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" env\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'NEXT_PUBLIC_UPLOAD_TRANSPORT'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" match\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" .\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"with\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'s3'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" putFileInS3\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" .\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"otherwise\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" putFileInDatabase\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"match\"}),\" is applied against a variable named \",(0,l.jsx)(e.code,{children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),\". Based on the example above, you\\xA0\",(0,l.jsx)(e.br,{}),`\n`,\"pass a parameter to \",(0,l.jsx)(e.code,{children:\"match\"}),\" and run a check against it using \",(0,l.jsx)(e.code,{children:\"with\"}),\". In the example from documentation above, it was based on \",(0,l.jsx)(e.code,{children:\"type\"}),\" and \",(0,l.jsx)(e.code,{children:\"data\"}),\", but here in this code snippet from Documenso, it is a different story.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"with\"}),\" is checked against a string\\u200A\\u2014\\u200A\\u2018s3\\u2019. At this point, I just wanted to find out what is expected as value for the variable \",(0,l.jsx)(e.code,{children:\"Next_PUBLIC_UPLOAD_TRANSPORT\"}),\". I searched for this variable\\u200A\\u2014\\u200A\",(0,l.jsx)(e.code,{children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),\" across the codebase and found its type definition in a file named \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/tsconfig/process-env.d.ts#L25\",children:\"process-env.d.ts\"}),\". This file is in package named \",(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/tree/main/packages/tsconfig\",children:\"tsconfig\"}),\". Documenso is a \",(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:\"monorepo\"})}),\" and contains \",(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:\"workspaces\"})}),\" inside apps folder and \",(0,l.jsx)(e.em,{children:(0,l.jsx)(e.strong,{children:\"packages\"})}),\" inside packages folder.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'database'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 's3'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),\" accepts only two string literals\\u200A\\u2014\\u200A\\u2018database\\u2019 or \\u2018s3\\u2019. Now it makes sense, you see. This is why you have a check against \\u2018s3\\u2019 string to call a function named \",(0,l.jsx)(e.code,{children:\"putFileInS3\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"with\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'s3'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" putFileInS3\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Otherwise, the value in \",(0,l.jsx)(e.code,{children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),\" will be \\u2018database\\u2019 and it handled using \",(0,l.jsx)(e.code,{children:\"otherwise\"}),\":\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"otherwise\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" putFileInDatabase\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]})})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"This reminds me of the \",(0,l.jsx)(e.code,{children:\".exhaustive()\"}),\" function. \",(0,l.jsx)(e.code,{children:\"ts-pattern\"}),\" documentation says this about exhaustive function\\u200A\\u2014\\u200A\",(0,l.jsx)(e.br,{}),`\n`,\"\\u201C\",(0,l.jsx)(e.br,{}),`\n`,\"Exhaustiveness checking ensures you haven\\u2019t forgotten any possible case.\",(0,l.jsx)(e.br,{}),`\n`,\"\\u201C\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"I think using \",(0,l.jsx)(e.code,{children:\".exhaustive()\"}),\" when you are dealing with a \",(0,l.jsx)(e.code,{children:\"match\"}),\" against an object, like the one provided in documentation example, makes sense. Since this variable \",(0,l.jsx)(e.code,{children:\"NEXT_PUBLIC_UPLOAD_TRANSPORT\"}),\" accepts only two string literals\\u200A\\u2014\\u200A\\u2018database\\u2019 or \\u2018s3\\u2019, there\\u2019s only string and no object to match against, that\\u2019s why there is no need for using \",(0,l.jsx)(e.code,{children:\".exhaustive()\"}),\", instead \",(0,l.jsx)(e.code,{children:\".otherwise\"}),\" is used.\"]}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L51\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L51\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://www.npmjs.com/package/ts-pattern\",children:\"https://www.npmjs.com/package/ts-pattern\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/tsconfig/process-env.d.ts#L25\",children:\"https://github.com/documenso/documenso/blob/main/packages/tsconfig/process-env.d.ts#L25\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return w(v);})();\n;return Component;"
        },
        "_id": "blog/ts-pattern-in-documenso.mdx",
        "_raw": {
          "sourceFilePath": "blog/ts-pattern-in-documenso.mdx",
          "sourceFileName": "ts-pattern-in-documenso.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/ts-pattern-in-documenso"
        },
        "type": "Doc",
        "slug": "/blog/ts-pattern-in-documenso",
        "slugAsParams": "ts-pattern-in-documenso"
      },
      "documentHash": "1740489186428",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/typedoc-usage-in-vercel-edge.mdx": {
      "document": {
        "title": "TypeDoc usage in @vercel/edge\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze TypeDoc usage in [@vercel/edge package](https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.json).\r\n\r\nI found a file named [typedoc.json](https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.json), got me wondering what’s TypeDoc and a quick google search helped me find [TypeDoc website](https://typedoc.org/).\r\n\r\nSo what’s TypeDoc?\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*9TCfInBedXkB8zIZez1yVw.png)\r\n\r\n# **TypeDoc**\r\n\r\nTypeDoc converts comments in TypeScript source code into rendered HTML documentation or a JSON model. It is extensible and supports a variety of configurations. Available as a CLI or Node module.\r\n\r\nTypeDoc documentation is comprehensive. Let’s now focus on how this is used in [@vercel/edge](https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.json).\r\n\r\n## **typedoc.json configuration in @vercel/edge:**\r\n\r\nThe below code is picked from [packages/edge/typedoc.json](https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.json).\r\n\r\n```plaintext\r\n{\r\n \"$schema\": \"https://typedoc.org/schema.json\",\r\n \"entryPoints\": [\"src/index.ts\"],\r\n \"plugin\": [\"typedoc-plugin-markdown\", \"typedoc-plugin-mdn-links\"],\r\n \"out\": \"docs\",\r\n \"githubPages\": false,\r\n \"gitRevision\": \"main\",\r\n \"readme\": \"none\",\r\n \"hideBreadcrumbs\": true\r\n}\r\n```\r\n\r\nYou require this configuration when you are using CLI to run [TypeDoc](https://typedoc.org/guides/installation/#typedoc.json).\r\n\r\nPay attention to “out” value, it is “docs”, it is a good thing that we have already docs generated for @vercel/edge package\r\n\r\n# **ModifiedRequest interface:**\r\n\r\nLet’s pick ModifiedRequest interface found in [middleware-helpers.ts](https://github.com/vercel/vercel/blob/main/packages/edge/src/middleware-helpers.ts#L1)\r\n\r\n```plaintext\r\nexport interface ModifiedRequest {\r\n /**\r\n * If set, overwrites the incoming headers to the origin request.\r\n *\r\n * This is useful when you want to pass data between a Middleware and a\r\n * Serverless or Edge Function.\r\n *\r\n * @example\r\n * <caption>Add a `x-user-id` header and remove the `Authorization` header</caption>\r\n *\r\n * ```ts\r\n * import { rewrite } from '@vercel/edge';\r\n * export default async function middleware(request: Request): Promise<Response> {\r\n * const newHeaders = new Headers(request.headers);\r\n * newHeaders.set('x-user-id', 'user_123');\r\n * newHeaders.delete('authorization');\r\n * return rewrite(request.url, {\r\n * request: { headers: newHeaders }\r\n * })\r\n * }\r\n * ```\r\n */\r\n headers?: Headers;\r\n}\r\n```\r\n\r\nThis interface has a comment added that is picked by TypeDoc and is made available in docs at [edge/docs/interfaces/ModifiedRequest.md](https://github.com/vercel/vercel/blob/main/packages/edge/docs/interfaces/ModifiedRequest.md)\r\n\r\nBut what’s the command this package uses to initiate documentation generation? It can be found in [package.json](https://github.com/vercel/vercel/blob/main/packages/edge/package.json#L19)\r\n\r\n```plaintext\r\n\"build:docs\": \"typedoc && node scripts/fix-links.js && prettier - write docs/**/*.md docs/*.md\",\r\n```\r\n\r\nYou can see `prettier` is applied on the docs folder.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.jso](https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.json)\r\n    \r\n2. [https://github.com/TypeStrong/typedoc](https://github.com/TypeStrong/typedoc)\r\n    \r\n3. [https://typedoc.org/](https://typedoc.org/)\r\n    \r\n4. [https://github.com/vercel/vercel/blob/main/packages/edge/docs](https://github.com/vercel/vercel/blob/main/packages/edge/docs)\r\n    \r\n5. [https://github.com/vercel/vercel/blob/main/packages/edge/docs/interfaces/ModifiedRequest.md](https://github.com/vercel/vercel/blob/main/packages/edge/docs/interfaces/ModifiedRequest.md)\r\n    \r\n6. [https://github.com/vercel/vercel/blob/main/packages/edge/src/middleware-helpers.ts#L1](https://github.com/vercel/vercel/blob/main/packages/edge/src/middleware-helpers.ts#L1)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=>{for(var i in e)r(a,i,{get:e[i],enumerable:!0})},s=(a,e,i,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of g(e))!f.call(a,c)&&c!==i&&r(a,c,{get:()=>e[c],enumerable:!(t=m(e,c))||t.enumerable});return a};var v=(a,e,i)=>(i=a!=null?p(u(a)):{},s(e||!a||!a.__esModule?r(i,\"default\",{value:a,enumerable:!0}):i,a)),k=a=>s(r({},\"__esModule\",{value:!0}),a);var l=b((x,d)=>{d.exports=_jsx_runtime});var N={};y(N,{default:()=>o,frontmatter:()=>w});var n=v(l()),w={title:\"TypeDoc usage in @vercel/edge\"};function h(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyze TypeDoc usage in \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.json\",children:\"@vercel/edge package\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"I found a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.json\",children:\"typedoc.json\"}),\", got me wondering what\\u2019s TypeDoc and a quick google search helped me find \",(0,n.jsx)(e.a,{href:\"https://typedoc.org/\",children:\"TypeDoc website\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"So what\\u2019s TypeDoc?\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*9TCfInBedXkB8zIZez1yVw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"typedoc\",children:(0,n.jsx)(e.strong,{children:\"TypeDoc\"})}),`\n`,(0,n.jsx)(e.p,{children:\"TypeDoc converts comments in TypeScript source code into rendered HTML documentation or a JSON model. It is extensible and supports a variety of configurations. Available as a CLI or Node module.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"TypeDoc documentation is comprehensive. Let\\u2019s now focus on how this is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.json\",children:\"@vercel/edge\"}),\".\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"typedocjson-configuration-in-verceledge\",children:(0,n.jsx)(e.strong,{children:\"typedoc.json configuration in @vercel/edge:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.json\",children:\"packages/edge/typedoc.json\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"{\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"$schema\": \"https://typedoc.org/schema.json\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"entryPoints\": [\"src/index.ts\"],'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"plugin\": [\"typedoc-plugin-markdown\", \"typedoc-plugin-mdn-links\"],'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"out\": \"docs\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"githubPages\": false,'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"gitRevision\": \"main\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"readme\": \"none\",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:' \"hideBreadcrumbs\": true'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You require this configuration when you are using CLI to run \",(0,n.jsx)(e.a,{href:\"https://typedoc.org/guides/installation/#typedoc.json\",children:\"TypeDoc\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Pay attention to \\u201Cout\\u201D value, it is \\u201Cdocs\\u201D, it is a good thing that we have already docs generated for @vercel/edge package\"}),`\n`,(0,n.jsx)(e.h1,{id:\"modifiedrequest-interface\",children:(0,n.jsx)(e.strong,{children:\"ModifiedRequest interface:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s pick ModifiedRequest interface found in \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/src/middleware-helpers.ts#L1\",children:\"middleware-helpers.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export interface ModifiedRequest {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" /**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * If set, overwrites the incoming headers to the origin request.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * This is useful when you want to pass data between a Middleware and a\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Serverless or Edge Function.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * @example\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * <caption>Add a `x-user-id` header and remove the `Authorization` header</caption>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" *\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * ```ts\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * import { rewrite } from '@vercel/edge';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * export default async function middleware(request: Request): Promise<Response> {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * const newHeaders = new Headers(request.headers);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * newHeaders.set('x-user-id', 'user_123');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * newHeaders.delete('authorization');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * return rewrite(request.url, {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * request: { headers: newHeaders }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * })\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * ```\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" headers?: Headers;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This interface has a comment added that is picked by TypeDoc and is made available in docs at \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/docs/interfaces/ModifiedRequest.md\",children:\"edge/docs/interfaces/ModifiedRequest.md\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"But what\\u2019s the command this package uses to initiate documentation generation? It can be found in \",(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/package.json#L19\",children:\"package.json\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'\"build:docs\": \"typedoc && node scripts/fix-links.js && prettier - write docs/**/*.md docs/*.md\",'})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can see \",(0,n.jsx)(e.code,{children:\"prettier\"}),\" is applied on the docs folder.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.json\",children:\"https://github.com/vercel/vercel/blob/main/packages/edge/typedoc.jso\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/TypeStrong/typedoc\",children:\"https://github.com/TypeStrong/typedoc\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://typedoc.org/\",children:\"https://typedoc.org/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/docs\",children:\"https://github.com/vercel/vercel/blob/main/packages/edge/docs\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/docs/interfaces/ModifiedRequest.md\",children:\"https://github.com/vercel/vercel/blob/main/packages/edge/docs/interfaces/ModifiedRequest.md\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/vercel/vercel/blob/main/packages/edge/src/middleware-helpers.ts#L1\",children:\"https://github.com/vercel/vercel/blob/main/packages/edge/src/middleware-helpers.ts#L1\"})}),`\n`]}),`\n`]})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return k(N);})();\n;return Component;"
        },
        "_id": "blog/typedoc-usage-in-vercel-edge.mdx",
        "_raw": {
          "sourceFilePath": "blog/typedoc-usage-in-vercel-edge.mdx",
          "sourceFileName": "typedoc-usage-in-vercel-edge.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/typedoc-usage-in-vercel-edge"
        },
        "type": "Doc",
        "slug": "/blog/typedoc-usage-in-vercel-edge",
        "slugAsParams": "typedoc-usage-in-vercel-edge"
      },
      "documentHash": "1740996416239",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/upload-file-to-db-in-nextjs.mdx": {
      "document": {
        "title": "Is it possible to upload a file to a database in Next.js?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse how Documenso stores an uploaded file into its database by reviewing its source code. Where is this code that does this? You will find the below code snippet in a file named [upload/put-file.ts](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*lvU5O9VoiK9YlwdySw_p3Q.png)\r\n\r\n```js\r\nconst putFileInDatabase = async (file: File) => {\r\n  const contents = await file.arrayBuffer();\r\n\r\n  const binaryData = new Uint8Array(contents);\r\n\r\n  const asciiData = base64.encode(binaryData);\r\n\r\n  return {\r\n    type: DocumentDataType.BYTES_64,\r\n    data: asciiData,\r\n  };\r\n};\r\n```\r\n\r\n#### arrayBuffer\r\n\r\nSo what exactly is happening here? `contents` is assigned a value returned by file.arrayBuffer(). Read more about [arrayBuffer()](https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer).\r\n\r\n```js\r\nconst contents = await file.arrayBuffer();\r\n```\r\n\r\n#### Uint8Array\r\n\r\nThen this arrayBuffer is converted in an object returned by `new Uint8Array(contents)`. Read more about [Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array).\r\n\r\n```js\r\nconst binaryData = new Uint8Array(contents);\r\n```\r\n\r\n#### base64.encode\r\n\r\nThen this binary data is encoded using base64 and assigned to a variable named `asciiData`. Read more about [base64](https://developer.mozilla.org/en-US/docs/Glossary/Base64).\r\n\r\n```js\r\nconst asciiData = base64.encode(binaryData);\r\n```\r\n\r\nand finally this `asciiData` and the type are returned as an object.\r\n\r\n```js\r\nreturn {\r\n type: DocumentDataType.BYTES_64,\r\n data: asciiData,\r\n};\r\n```\r\n\r\nAt this point, I wanted to find out what is the data type of the column that stores this value. For that, we first need to find out how this returned object is processed further.\r\n\r\n#### createDocumentData fn\r\n\r\nIn the [upload-document.ts](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L67)[,](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L67%29,) you will find this below code snippet:\r\n\r\n```js\r\nconst { id: documentDataId } = await createDocumentData({\r\n type,\r\n data,\r\n});\r\n```\r\n\r\nYou will find `createDocumentData` function in [create-document-data.ts](https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11)\r\n\r\n```js\r\nexport const createDocumentData = async ({ type, data }: CreateDocumentDataOptions) => {\r\n  return await prisma.documentData.create({\r\n    data: {\r\n      type,\r\n      data,\r\n      initialData: data,\r\n    },\r\n  });\r\n};\r\n```\r\n\r\n`prisma.documentData` hints that documentData is the schema you should be looking for. In the [schema.prisma](https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360), you will find the below model defined for DocumentData.\r\n\r\n```js\r\nmodel DocumentData {\r\n id String @id @default(cuid())\r\n type DocumentDataType\r\n data String\r\n initialData String\r\n Document Document?\r\n Template Template?\r\n}\r\n```\r\n\r\nTo conclude this investigation, I found that file is saved as a string after some operations defined above.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56)\r\n    \r\n2. [https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L67](https://github.com/documenso/documenso/blob/main/apps/web/src/app/\\(dashboard\\)/documents/upload-document.tsx#L67)\r\n    \r\n3. [https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11](https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11)\r\n    \r\n4. [https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360](https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360)\r\n    \r\n5. [https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11](https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11)\r\n    \r\n6. [https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer](https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer)\r\n    \r\n7. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)",
          "code": "var Component=(()=>{var F=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var a in e)r(l,a,{get:e[a],enumerable:!0})},t=(l,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of m(e))!u.call(l,c)&&c!==a&&r(l,c,{get:()=>e[c],enumerable:!(s=p(e,c))||s.enumerable});return l};var f=(l,e,a)=>(a=l!=null?F(y(l)):{},t(e||!l||!l.__esModule?r(a,\"default\",{value:l,enumerable:!0}):a,l)),D=l=>t(r({},\"__esModule\",{value:!0}),l);var i=b((j,o)=>{o.exports=_jsx_runtime});var v={};g(v,{default:()=>h,frontmatter:()=>N});var n=f(i()),N={title:\"Is it possible to upload a file to a database in\\xA0Next.js?\"};function d(l){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse how Documenso stores an uploaded file into its database by reviewing its source code. Where is this code that does this? You will find the below code snippet in a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56\",children:\"upload/put-file.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*lvU5O9VoiK9YlwdySw_p3Q.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" putFileInDatabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" File\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" contents \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"arrayBuffer\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" binaryData \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Uint8Array\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"contents\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" asciiData \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" base64\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"encode\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"binaryData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" DocumentDataType\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"BYTES_64\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" asciiData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"arraybuffer\",children:\"arrayBuffer\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"So what exactly is happening here? \",(0,n.jsx)(e.code,{children:\"contents\"}),\" is assigned a value returned by file.arrayBuffer(). Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer\",children:\"arrayBuffer()\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" contents \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"arrayBuffer\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"uint8array\",children:\"Uint8Array\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Then this arrayBuffer is converted in an object returned by \",(0,n.jsx)(e.code,{children:\"new Uint8Array(contents)\"}),\". Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\",children:\"Uint8Array\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" binaryData \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Uint8Array\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"contents\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"base64encode\",children:\"base64.encode\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Then this binary data is encoded using base64 and assigned to a variable named \",(0,n.jsx)(e.code,{children:\"asciiData\"}),\". Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Glossary/Base64\",children:\"base64\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" asciiData \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" base64\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"encode\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"binaryData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"and finally this \",(0,n.jsx)(e.code,{children:\"asciiData\"}),\" and the type are returned as an object.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" DocumentDataType\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"BYTES_64\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" asciiData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"At this point, I wanted to find out what is the data type of the column that stores this value. For that, we first need to find out how this returned object is processed further.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"createdocumentdata-fn\",children:\"createDocumentData fn\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L67\",children:\"upload-document.ts\"}),(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L67%29,\",children:\",\"}),\" you will find this below code snippet:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" id\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" documentDataId \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createDocumentData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find \",(0,n.jsx)(e.code,{children:\"createDocumentData\"}),\" function in \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11\",children:\"create-document-data.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createDocumentData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}:\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CreateDocumentDataOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" prisma\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"documentData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"create\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      initialData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"prisma.documentData\"}),\" hints that documentData is the schema you should be looking for. In the \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360\",children:\"schema.prisma\"}),\", you will find the below model defined for DocumentData.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"model DocumentData \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" id String \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"id \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cuid\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"())\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" DocumentDataType\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data String\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" initialData String\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Document Document?\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Template Template?\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"To conclude this investigation, I found that file is saved as a string after some operations defined above.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L67\",children:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L67\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360\",children:\"https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\"})}),`\n`]}),`\n`]})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(d,{...l})}):d(l)}return D(v);})();\n;return Component;"
        },
        "_id": "blog/upload-file-to-db-in-nextjs.mdx",
        "_raw": {
          "sourceFilePath": "blog/upload-file-to-db-in-nextjs.mdx",
          "sourceFileName": "upload-file-to-db-in-nextjs.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/upload-file-to-db-in-nextjs"
        },
        "type": "Doc",
        "slug": "/blog/upload-file-to-db-in-nextjs",
        "slugAsParams": "upload-file-to-db-in-nextjs"
      },
      "documentHash": "1740489186434",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/Usage-of-Dexie.mdx": {
      "document": {
        "title": "Usage of Dexie, an IndexedDB wrapper, in Lobechat\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyze [Dexie](https://dexie.org/) usage in [Lobechat](https://github.com/lobehub/lobe-chat/blob/main/src/database/client/core/db.ts).\r\n\r\nIf you check \\[database folder in [lobechat](https://github.com/lobehub/lobe-chat/tree/main/src/database), it has 2 folders:\r\n\r\n1. client\r\n    \r\n2. server\r\n    \r\n\r\nIn this [Lobechat’s self-host docs](https://lobehub.com/docs/self-hosting/server-database), it is mentioned that LobeChat  \r\ndefaults to using a client-side database (IndexedDB). That is why you have two folders, one for client and one for server.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*auzPtXHE1jG8EtFtUwBhrw.png align=\"left\")\r\n\r\n[database/client/core/db.ts](https://github.com/lobehub/lobe-chat/blob/main/src/database/client/core/db.ts) imports [Dexie](https://dexie.org/).\r\n\r\nDexie is a minimalistic wrapper for indexedDB. Let’s look at a simple dexie example provided in the [Getting Started tutorial](https://dexie.org/docs/Tutorial/React).\r\n\r\n```javascript\r\n// db.ts\r\nimport Dexie, { type EntityTable } from 'dexie';\r\ninterface Friend {\r\n id: number;\r\n name: string;\r\n age: number;\r\n}\r\nconst db = new Dexie('FriendsDatabase') as Dexie & {\r\n friends: EntityTable<\r\n Friend,\r\n 'id' // primary key \"id\" (for the typings only)\r\n >;\r\n};\r\n// Schema declaration:\r\ndb.version(1).stores({\r\n friends: '++id, name, age' // primary key \"id\" (for the runtime!)\r\n});\r\nexport type { Friend };\r\nexport { db };\r\n```\r\n\r\n## **Important note:**\r\n\r\nApplications typically have one single Dexie instance declared as its own module. This is where you declare which tables you need and how each table shall be indexed. A Dexie instance is a singleton throughout the  \r\napplication — you do not need to create it on demand. Export the resulting db instance from your module so that components or other modules can use it to query or write to the database.\r\n\r\nUsing this line shown below, Lobechat creates a singleton instance of BrowserDB.\r\n\r\n```javascript\r\nexport class BrowserDB extends Dexie {\r\n public files: BrowserDBTable<'files'>;\r\n public sessions: BrowserDBTable<'sessions'>;\r\n public messages: BrowserDBTable<'messages'>;\r\n public topics: BrowserDBTable<'topics'>;\r\n public plugins: BrowserDBTable<'plugins'>;\r\n public sessionGroups: BrowserDBTable<'sessionGroups'>;\r\n public users: BrowserDBTable<'users'>;\r\nconstructor() {\r\n this.version(1).stores(dbSchemaV1);\r\n this.version(2).stores(dbSchemaV2);\r\n this.version(3).stores(dbSchemaV3);\r\n this.version(4)\r\n .stores(dbSchemaV4)\r\n .upgrade((trans) => this.upgradeToV4(trans));\r\n // … more code\r\nexport const browserDB = new BrowserDB();\r\n```\r\n\r\nversions written in constructor show how the client side database schema evolved over the time, Read more about [Dexie.version()](https://dexie.org/docs/Dexie/Dexie.version\\(\\)) to understand the versions.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/lobehub/lobe-chat/blob/main/src/database/client/core/db.ts](https://github.com/lobehub/lobe-chat/blob/main/src/database/client/core/db.ts)\r\n    \r\n2. [https://dexie.org/](https://dexie.org/)\r\n    \r\n3. [https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB\\_API/Using\\_IndexedDB](https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB)\r\n    \r\n4. [https://web.dev/articles/indexeddb](https://web.dev/articles/indexeddb)\r\n    \r\n5. [https://lobehub.com/docs/self-hosting/server-database](https://lobehub.com/docs/self-hosting/server-database)\r\n    \r\n6. [https://dexie.org/docs/Tutorial/React](https://dexie.org/docs/Tutorial/React)\r\n",
          "code": "var Component=(()=>{var d=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var u=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),g=(n,e)=>{for(var s in e)c(n,s,{get:e[s],enumerable:!0})},a=(n,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!b.call(n,r)&&r!==s&&c(n,r,{get:()=>e[r],enumerable:!(o=p(e,r))||o.enumerable});return n};var f=(n,e,s)=>(s=n!=null?d(m(n)):{},a(e||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),x=n=>a(c({},\"__esModule\",{value:!0}),n);var i=u((D,t)=>{t.exports=_jsx_runtime});var N={};g(N,{default:()=>h,frontmatter:()=>w});var l=f(i()),w={title:\"Usage of Dexie, an IndexedDB wrapper, in Lobechat\"};function F(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we analyze \",(0,l.jsx)(e.a,{href:\"https://dexie.org/\",children:\"Dexie\"}),\" usage in \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/database/client/core/db.ts\",children:\"Lobechat\"}),\".\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"If you check [database folder in \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/tree/main/src/database\",children:\"lobechat\"}),\", it has 2 folders:\"]}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"client\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"server\"}),`\n`]}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[\"In this \",(0,l.jsx)(e.a,{href:\"https://lobehub.com/docs/self-hosting/server-database\",children:\"Lobechat\\u2019s self-host docs\"}),\", it is mentioned that LobeChat\",(0,l.jsx)(e.br,{}),`\n`,\"defaults to using a client-side database (IndexedDB). That is why you have two folders, one for client and one for server.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"![](\",(0,l.jsx)(e.a,{href:\"https://miro.medium.com/v2/resize:fit:875/1*auzPtXHE1jG8EtFtUwBhrw.png\",children:\"https://miro.medium.com/v2/resize:fit:875/1*auzPtXHE1jG8EtFtUwBhrw.png\"}),' align=\"left\")']}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/database/client/core/db.ts\",children:\"database/client/core/db.ts\"}),\" imports \",(0,l.jsx)(e.a,{href:\"https://dexie.org/\",children:\"Dexie\"}),\".\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Dexie is a minimalistic wrapper for indexedDB. Let\\u2019s look at a simple dexie example provided in the \",(0,l.jsx)(e.a,{href:\"https://dexie.org/docs/Tutorial/React\",children:\"Getting Started tutorial\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" db.ts\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Dexie\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" EntityTable \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'dexie'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"interface\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Friend\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" id\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" number\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" age\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" number\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" db \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Dexie\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'FriendsDatabase'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Dexie\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" &\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" friends\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" EntityTable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Friend\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'id'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:' primary key \"id\" (for the typings only)'})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" >;\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Schema declaration:\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"db\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"version\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(1).\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"stores\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" friends\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '++id, name, age'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:' primary key \"id\" (for the runtime!)'})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Friend \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" db \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]})]})})}),`\n`,(0,l.jsx)(e.h2,{id:\"important-note\",children:(0,l.jsx)(e.strong,{children:\"Important note:\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"Applications typically have one single Dexie instance declared as its own module. This is where you declare which tables you need and how each table shall be indexed. A Dexie instance is a singleton throughout the\",(0,l.jsx)(e.br,{}),`\n`,\"application \\u2014 you do not need to create it on demand. Export the resulting db instance from your module so that components or other modules can use it to query or write to the database.\"]}),`\n`,(0,l.jsx)(e.p,{children:\"Using this line shown below, Lobechat creates a singleton instance of BrowserDB.\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" class\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" BrowserDB\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" extends\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Dexie\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" public\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" files\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" BrowserDBTable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'files'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" public\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" sessions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" BrowserDBTable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'sessions'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" public\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" messages\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" BrowserDBTable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'messages'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" public\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" topics\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" BrowserDBTable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'topics'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" public\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" plugins\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" BrowserDBTable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'plugins'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" public\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" sessionGroups\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" BrowserDBTable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'sessionGroups'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" public\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" users\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" BrowserDBTable\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'users'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"constructor()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"version\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(1).\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"stores\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"dbSchemaV1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"version\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(2).\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"stores\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"dbSchemaV2\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"version\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(3).\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"stores\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"dbSchemaV3\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"version\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(4)\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" .\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"stores\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"dbSchemaV4\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" .\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"upgrade\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"trans\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" this\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"upgradeToV4\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"trans\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" \\u2026 more code\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" browserDB \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" BrowserDB\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"versions written in constructor show how the client side database schema evolved over the time, Read more about \",(0,l.jsx)(e.a,{href:\"https://dexie.org/docs/Dexie/Dexie.version()\",children:\"Dexie.version()\"}),\" to understand the versions.\"]}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h1,{id:\"references\",children:(0,l.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/database/client/core/db.ts\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/database/client/core/db.ts\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://dexie.org/\",children:\"https://dexie.org/\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/IndexedDB_API/Using_IndexedDB\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://web.dev/articles/indexeddb\",children:\"https://web.dev/articles/indexeddb\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://lobehub.com/docs/self-hosting/server-database\",children:\"https://lobehub.com/docs/self-hosting/server-database\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://dexie.org/docs/Tutorial/React\",children:\"https://dexie.org/docs/Tutorial/React\"})}),`\n`]}),`\n`]})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(F,{...n})}):F(n)}return x(N);})();\n;return Component;"
        },
        "_id": "blog/Usage-of-Dexie.mdx",
        "_raw": {
          "sourceFilePath": "blog/Usage-of-Dexie.mdx",
          "sourceFileName": "Usage-of-Dexie.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/Usage-of-Dexie"
        },
        "type": "Doc",
        "slug": "/blog/Usage-of-Dexie",
        "slugAsParams": "Usage-of-Dexie"
      },
      "documentHash": "1740489186223",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/use-Deep-Memo.mdx": {
      "document": {
        "title": "useDeepMemo() in Refine source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review a function named [useDeepMemo found in Refine source code](https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L73).\r\n\r\n```plaintext\r\nconst queryClient = useDeepMemo(() => {\r\n    if (reactQueryWithDefaults.clientConfig instanceof QueryClient) {\r\n      return reactQueryWithDefaults.clientConfig;\r\n    }\r\n\r\n    return new QueryClient({\r\n      ...reactQueryWithDefaults.clientConfig,\r\n      defaultOptions: {\r\n        ...reactQueryWithDefaults.clientConfig.defaultOptions,\r\n        queries: {\r\n          refetchOnWindowFocus: false,\r\n          keepPreviousData: true,\r\n          ...reactQueryWithDefaults.clientConfig.defaultOptions?.queries,\r\n        },\r\n      },\r\n    });\r\n  }, [reactQueryWithDefaults.clientConfig]);\r\n```\r\n\r\nThis code snippet is picked from [packages/core/src/components/containers/refine/index.tsx](https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L73C3-L89C45).\r\n\r\nWhere is useDeepMemo imported from?\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*A4fLD0qibQDLJjp2Tp_H4w.png)\r\n\r\nas you can see from the above image, useDeepMemo is imported from [@hooks/deepMemo](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/deepMemo/index.tsx#L8)\r\n\r\n### useDeepMemo\r\n\r\nThis below code is picked from [packages/core/src/hooks/deepMemo/index.tsx](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/deepMemo/index.tsx#L8).\r\n\r\n```plaintext\r\nimport React, { useMemo } from \"react\";\r\nimport { useMemoized } from \"@hooks/memoized\";\r\n\r\n/**\r\n * Hook that memoizes the given dependency array and checks the consecutive calls with deep equality and returns the same value as the first call if dependencies are not changed.\r\n * @internal\r\n */\r\nexport const useDeepMemo = <T,>(\r\n  fn: () => T,\r\n  dependencies: React.DependencyList,\r\n): T => {\r\n  const memoizedDependencies = useMemoized(dependencies);\r\n\r\n  const value = useMemo(fn, memoizedDependencies);\r\n\r\n  return value;\r\n};\r\n```\r\n\r\n@internal in the comment here means that this is only internal use and is not exposed in the public API and has a comment explaining what this hook is about:\r\n\r\n> Hook that memoizes the given dependency array and checks the consecutive calls with deep equality and returns the same value as the first call if dependencies are not changed.\r\n\r\nGoing back to code snippet above, there is only dependency here\r\n\r\n```plaintext\r\n[reactQueryWithDefaults.clientConfig]\r\n```\r\n\r\nAnd the function defined returns a query client.\r\n\r\n```plaintext\r\nreturn new QueryClient({\r\n      ...reactQueryWithDefaults.clientConfig,\r\n      defaultOptions: {\r\n        ...reactQueryWithDefaults.clientConfig.defaultOptions,\r\n        queries: {\r\n          refetchOnWindowFocus: false,\r\n          keepPreviousData: true,\r\n          ...reactQueryWithDefaults.clientConfig.defaultOptions?.queries,\r\n        },\r\n      },\r\n    });\r\n```\r\n\r\nNot sure if you have noticed but there is another hook imported, useMemoized.\r\n\r\n```plaintext\r\nimport { useMemoized } from \"@hooks/memoized\";\r\n```\r\n\r\n### useMemoized\r\n\r\nThis above code snippet is imported from [packages/core/src/hooks/memoized/index.tsx](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/memoized/index.tsx#L8)\r\n\r\n```plaintext\r\nimport { useRef } from \"react\";\r\nimport isEqual from \"lodash/isEqual\";\r\n\r\n/**\r\n * Hook that memoizes the given value with deep equality.\r\n * @internal\r\n */\r\nexport const useMemoized = <T = unknown>(value: T): T => {\r\n  const ref = useRef(value);\r\n\r\n  if (!isEqual(ref.current, value)) {\r\n    ref.current = value;\r\n  }\r\n\r\n  return ref.current;\r\n};\r\n```\r\n\r\nThis is also another internal function and is found to be using isEqual imported from “lodash/isEqual”.\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L73](https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L73)\r\n    \r\n2. [https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/deepMemo/index.tsx#L8](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/deepMemo/index.tsx#L8)",
          "code": "var Component=(()=>{var o=Object.create;var r=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var N=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),b=(a,e)=>{for(var i in e)r(a,i,{get:e[i],enumerable:!0})},l=(a,e,i,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let s of u(e))!g.call(a,s)&&s!==i&&r(a,s,{get:()=>e[s],enumerable:!(c=m(e,s))||c.enumerable});return a};var x=(a,e,i)=>(i=a!=null?o(f(a)):{},l(e||!a||!a.__esModule?r(i,\"default\",{value:a,enumerable:!0}):i,a)),k=a=>l(r({},\"__esModule\",{value:!0}),a);var d=N((D,t)=>{t.exports=_jsx_runtime});var v={};b(v,{default:()=>p,frontmatter:()=>y});var n=x(d()),y={title:\"useDeepMemo() in Refine source\\xA0code.\"};function h(a){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will review a function named \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L73\",children:\"useDeepMemo found in Refine source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const queryClient = useDeepMemo(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    if (reactQueryWithDefaults.clientConfig instanceof QueryClient) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return reactQueryWithDefaults.clientConfig;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return new QueryClient({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      ...reactQueryWithDefaults.clientConfig,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      defaultOptions: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        ...reactQueryWithDefaults.clientConfig.defaultOptions,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        queries: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          refetchOnWindowFocus: false,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          keepPreviousData: true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          ...reactQueryWithDefaults.clientConfig.defaultOptions?.queries,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }, [reactQueryWithDefaults.clientConfig]);\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This code snippet is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L73C3-L89C45\",children:\"packages/core/src/components/containers/refine/index.tsx\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Where is useDeepMemo imported from?\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*A4fLD0qibQDLJjp2Tp_H4w.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"as you can see from the above image, useDeepMemo is imported from \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/deepMemo/index.tsx#L8\",children:\"@hooks/deepMemo\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"usedeepmemo\",children:\"useDeepMemo\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This below code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/deepMemo/index.tsx#L8\",children:\"packages/core/src/hooks/deepMemo/index.tsx\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import React, { useMemo } from \"react\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { useMemoized } from \"@hooks/memoized\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Hook that memoizes the given dependency array and checks the consecutive calls with deep equality and returns the same value as the first call if dependencies are not changed.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * @internal\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const useDeepMemo = <T,>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  fn: () => T,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  dependencies: React.DependencyList,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"): T => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const memoizedDependencies = useMemoized(dependencies);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const value = useMemo(fn, memoizedDependencies);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return value;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"@internal in the comment here means that this is only internal use and is not exposed in the public API and has a comment explaining what this hook is about:\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Hook that memoizes the given dependency array and checks the consecutive calls with deep equality and returns the same value as the first call if dependencies are not changed.\"}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Going back to code snippet above, there is only dependency here\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"[reactQueryWithDefaults.clientConfig]\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"And the function defined returns a query client.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"return new QueryClient({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      ...reactQueryWithDefaults.clientConfig,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      defaultOptions: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        ...reactQueryWithDefaults.clientConfig.defaultOptions,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        queries: {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          refetchOnWindowFocus: false,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          keepPreviousData: true,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          ...reactQueryWithDefaults.clientConfig.defaultOptions?.queries,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    });\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Not sure if you have noticed but there is another hook imported, useMemoized.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { useMemoized } from \"@hooks/memoized\";'})})})})}),`\n`,(0,n.jsx)(e.h3,{id:\"usememoized\",children:\"useMemoized\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This above code snippet is imported from \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/memoized/index.tsx#L8\",children:\"packages/core/src/hooks/memoized/index.tsx\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { useRef } from \"react\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import isEqual from \"lodash/isEqual\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Hook that memoizes the given value with deep equality.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * @internal\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const useMemoized = <T = unknown>(value: T): T => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const ref = useRef(value);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (!isEqual(ref.current, value)) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    ref.current = value;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return ref.current;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This is also another internal function and is found to be using isEqual imported from \\u201Clodash/isEqual\\u201D.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L73\",children:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L73\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/deepMemo/index.tsx#L8\",children:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/deepMemo/index.tsx#L8\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}return k(v);})();\n;return Component;"
        },
        "_id": "blog/use-Deep-Memo.mdx",
        "_raw": {
          "sourceFilePath": "blog/use-Deep-Memo.mdx",
          "sourceFileName": "use-Deep-Memo.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/use-Deep-Memo"
        },
        "type": "Doc",
        "slug": "/blog/use-Deep-Memo",
        "slugAsParams": "use-Deep-Memo"
      },
      "documentHash": "1742200534598",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/use-Router-Misuse-Warning.mdx": {
      "document": {
        "title": "useRouterMisuseWarning in Refine source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review [useRouterMisuseWarning hook found in Refine source code](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/router/use-router-misuse-warning/index.ts#L5). Below is the code picked from [refinedev/refine/packages/core/src/hooks/router/use-router-misuse-warning/index.ts](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/router/use-router-misuse-warning/index.ts#L5)\r\n\r\n```plaintext\r\nimport { checkRouterPropMisuse } from \"@definitions/helpers/check-router-prop-misuse\";\r\nimport React from \"react\";\r\nimport type { RouterProvider } from \"../../../contexts/router/types\";\r\n\r\nexport const useRouterMisuseWarning = (value?: RouterProvider) => {\r\n  const warned = React.useRef(false);\r\n\r\n  React.useEffect(() => {\r\n    if (warned.current === false) {\r\n      if (value) {\r\n        const warn = checkRouterPropMisuse(value);\r\n        if (warn) {\r\n          warned.current = true;\r\n        }\r\n      }\r\n    }\r\n  }, [value]);\r\n};\r\n```\r\n\r\n# **How did I find this hook?**\r\n\r\nBut first, let me explain how I ended up finding this hook. I am spending some time, studying Refine dev source code, to learn how they have built React framework that can be used to build Enterprise applications. I will soon release this content about Refine source code on [my learning platform](https://app.thinkthroo.com/architecture). Because of this reason, I started with reading the Refine docs about [Refine component that is core](https://refine.dev/docs/core/refine-component/).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*6XaUqzSMmnYBQljnd9tvEQ.png)\r\n\r\nYou see this Refine is imported from @refinedev/core. Here @refinedev/core is a package name. At this point, I searched for this package in the refine repository and found it in [packages/core/package.json](https://refine.dev/docs/core/refine-component/).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*gTOPtCyjpBwCsxKbxpEdbg.png)\r\n\r\n# **Where did I find this hook?**\r\n\r\nNow that I have located this, it was fairly challening to find this Refine component since this is the first time I am looking at this codebase.\r\n\r\nHowever, I found Refine component code in [packages/core/src/components/containers/refine/index.tsx](https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L104C3-L104C25)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*oLfXydZk3uRNELAT7ZX75Q.png)\r\n\r\nAt line 104 in [packages/core/src/components/containers/refine/index.tsx](https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L104C3-L104C25), you will find this below code snippet\r\n\r\n```plaintext\r\n/**\r\n * Warn our users if they are using the old way of routing in the wrong prop.\r\n */\r\nuseRouterMisuseWarning(routerProvider);\r\n/** */\r\n```\r\n\r\n# **What this hook is about?**\r\n\r\nIf you take a closer look at its comment:\r\n\r\n> *Warn our users if they are using the old way of routing in the wrong prop.*\r\n\r\nThis hook simply throws a warning in your browser’s console if you use their old way of routing.\r\n\r\nYou will find this in a function, [checkRouterPropMisuse](https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/check-router-prop-misuse/index.ts#L4).\r\n\r\n```plaintext\r\nimport type { LegacyRouterProvider } from \"../../../contexts/router/legacy/types\";\r\nimport type { RouterProvider } from \"../../../contexts/router/types\";\r\n\r\nexport const checkRouterPropMisuse = (\r\n  value: LegacyRouterProvider | RouterProvider,\r\n) => {\r\n  // check if `routerProvider` prop is passed with legacy properties.\r\n  // If yes, console.warn the user to use `legacyRuterProvider` prop instead.\r\n  const bindings = [\"go\", \"parse\", \"back\", \"Link\"];\r\n\r\n  // check if `value` contains properties other than `bindings`\r\n  const otherProps = Object.keys(value).filter(\r\n    (key) => !bindings.includes(key),\r\n  );\r\n\r\n  const hasOtherProps = otherProps.length > 0;\r\n\r\n  if (hasOtherProps) {\r\n    console.warn(\r\n      `Unsupported properties are found in \\`routerProvider\\` prop. You provided \\`${otherProps.join(\r\n        \", \",\r\n      )}\\`. Supported properties are \\`${bindings.join(\r\n        \", \",\r\n      )}\\`. You may wanted to use \\`legacyRouterProvider\\` prop instead.`,\r\n    );\r\n\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n};\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com/). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L104C3-L104C25](https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L104C3-L104C25)\r\n    \r\n2. [https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/router/use-router-misuse-warning/index.ts#L5](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/router/use-router-misuse-warning/index.ts#L5)\r\n    \r\n3. [https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/check-router-prop-misuse/index.ts#L4](https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/check-router-prop-misuse/index.ts#L4)\r\n    \r\n4. [https://refine.dev/docs/core/refine-component/](https://refine.dev/docs/core/refine-component/)\r\n    \r\n5. [https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/package.json](https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/package.json)",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var b=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),k=(r,e)=>{for(var i in e)s(r,i,{get:e[i],enumerable:!0})},t=(r,e,i,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of u(e))!g.call(r,a)&&a!==i&&s(r,a,{get:()=>e[a],enumerable:!(c=m(e,a))||c.enumerable});return r};var N=(r,e,i)=>(i=r!=null?p(f(r)):{},t(e||!r||!r.__esModule?s(i,\"default\",{value:r,enumerable:!0}):i,r)),v=r=>t(s({},\"__esModule\",{value:!0}),r);var l=b((R,o)=>{o.exports=_jsx_runtime});var y={};k(y,{default:()=>d,frontmatter:()=>w});var n=N(l()),w={title:\"useRouterMisuseWarning in Refine source code\"};function h(r){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will review \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/router/use-router-misuse-warning/index.ts#L5\",children:\"useRouterMisuseWarning hook found in Refine source code\"}),\". Below is the code picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/router/use-router-misuse-warning/index.ts#L5\",children:\"refinedev/refine/packages/core/src/hooks/router/use-router-misuse-warning/index.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import { checkRouterPropMisuse } from \"@definitions/helpers/check-router-prop-misuse\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import React from \"react\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import type { RouterProvider } from \"../../../contexts/router/types\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const useRouterMisuseWarning = (value?: RouterProvider) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const warned = React.useRef(false);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  React.useEffect(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    if (warned.current === false) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      if (value) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        const warn = checkRouterPropMisuse(value);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        if (warn) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          warned.current = true;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }, [value]);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"how-did-i-find-this-hook\",children:(0,n.jsx)(e.strong,{children:\"How did I find this hook?\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"But first, let me explain how I ended up finding this hook. I am spending some time, studying Refine dev source code, to learn how they have built React framework that can be used to build Enterprise applications. I will soon release this content about Refine source code on \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"my learning platform\"}),\". Because of this reason, I started with reading the Refine docs about \",(0,n.jsx)(e.a,{href:\"https://refine.dev/docs/core/refine-component/\",children:\"Refine component that is core\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*6XaUqzSMmnYBQljnd9tvEQ.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You see this Refine is imported from @refinedev/core. Here @refinedev/core is a package name. At this point, I searched for this package in the refine repository and found it in \",(0,n.jsx)(e.a,{href:\"https://refine.dev/docs/core/refine-component/\",children:\"packages/core/package.json\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*gTOPtCyjpBwCsxKbxpEdbg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"where-did-i-find-this-hook\",children:(0,n.jsx)(e.strong,{children:\"Where did I find this hook?\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Now that I have located this, it was fairly challening to find this Refine component since this is the first time I am looking at this codebase.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"However, I found Refine component code in \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L104C3-L104C25\",children:\"packages/core/src/components/containers/refine/index.tsx\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*oLfXydZk3uRNELAT7ZX75Q.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"At line 104 in \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L104C3-L104C25\",children:\"packages/core/src/components/containers/refine/index.tsx\"}),\", you will find this below code snippet\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Warn our users if they are using the old way of routing in the wrong prop.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"useRouterMisuseWarning(routerProvider);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/** */\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"what-this-hook-is-about\",children:(0,n.jsx)(e.strong,{children:\"What this hook is about?\"})}),`\n`,(0,n.jsx)(e.p,{children:\"If you take a closer look at its comment:\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:\"Warn our users if they are using the old way of routing in the wrong prop.\"})}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"This hook simply throws a warning in your browser\\u2019s console if you use their old way of routing.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find this in a function, \",(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/check-router-prop-misuse/index.ts#L4\",children:\"checkRouterPropMisuse\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import type { LegacyRouterProvider } from \"../../../contexts/router/legacy/types\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'import type { RouterProvider } from \"../../../contexts/router/types\";'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const checkRouterPropMisuse = (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  value: LegacyRouterProvider | RouterProvider,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\") => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // check if `routerProvider` prop is passed with legacy properties.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // If yes, console.warn the user to use `legacyRuterProvider` prop instead.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'  const bindings = [\"go\", \"parse\", \"back\", \"Link\"];'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // check if `value` contains properties other than `bindings`\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const otherProps = Object.keys(value).filter(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    (key) => !bindings.includes(key),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const hasOtherProps = otherProps.length > 0;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (hasOtherProps) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    console.warn(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      `Unsupported properties are found in \\\\`routerProvider\\\\` prop. You provided \\\\`${otherProps.join(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'        \", \",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      )}\\\\`. Supported properties are \\\\`${bindings.join(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:'        \", \",'})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      )}\\\\`. You may wanted to use \\\\`legacyRouterProvider\\\\` prop instead.`,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    );\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return true;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return false;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L104C3-L104C25\",children:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/src/components/containers/refine/index.tsx#L104C3-L104C25\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/router/use-router-misuse-warning/index.ts#L5\",children:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/router/use-router-misuse-warning/index.ts#L5\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/check-router-prop-misuse/index.ts#L4\",children:\"https://github.com/refinedev/refine/blob/main/packages/core/src/definitions/helpers/check-router-prop-misuse/index.ts#L4\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://refine.dev/docs/core/refine-component/\",children:\"https://refine.dev/docs/core/refine-component/\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/package.json\",children:\"https://github.com/refinedev/refine/blob/6729794dada71ad34402c8e66303e821193af0d9/packages/core/package.json\"})}),`\n`]}),`\n`]})]})}function d(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(h,{...r})}):h(r)}return v(y);})();\n;return Component;"
        },
        "_id": "blog/use-Router-Misuse-Warning.mdx",
        "_raw": {
          "sourceFilePath": "blog/use-Router-Misuse-Warning.mdx",
          "sourceFileName": "use-Router-Misuse-Warning.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/use-Router-Misuse-Warning"
        },
        "type": "Doc",
        "slug": "/blog/use-Router-Misuse-Warning",
        "slugAsParams": "use-Router-Misuse-Warning"
      },
      "documentHash": "1742199974174",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/useBoundStoreWithEqualityFn-in-zustand.mdx": {
      "document": {
        "title": "useBoundStoreWithEqualityFn in Zustand source code explained.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will understand how the useBoundStoreWithEqualityFn function is used in [Zustand’s source code](https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L80).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*P7a8HFLXH0pDgCiWLoJcRA.png)\r\n\r\nThe above code is picked from [https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L80](https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L80)\r\n\r\nuseBoundStoreWithEqualityFn is called in `createWithEqualityFnImpl`function and returns another function named `useStoreWithEqualityFn`.\r\n\r\nLet’s look at what’s in `useStoreWithEqualityFn`.\r\n\r\n```plaintext\r\n// Pulled from https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L80\r\nexport function useStoreWithEqualityFn<TState, StateSlice>(\r\n  api: ReadonlyStoreApi<TState>,\r\n  selector: (state: TState) => StateSlice = identity as any,\r\n  equalityFn?: (a: StateSlice, b: StateSlice) => boolean,\r\n) {\r\n  const slice = useSyncExternalStoreWithSelector(\r\n    api.subscribe,\r\n    api.getState,\r\n    api.getInitialState,\r\n    selector,\r\n    equalityFn,\r\n  )\r\n  useDebugValue(slice)\r\n  return slice\r\n}\r\n```\r\n\r\n[`useSyncExternalStore`](https://react.dev/reference/react/useSyncExternalStore) is a React Hook that lets you subscribe to an external store and useSyncExternalStoreWithSelector is imported as shown below:\r\n\r\n```plaintext\r\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector'\r\n```\r\n\r\nslice returned by this function, useStoreWithEqualityFn is further used in createWithEqualityFnImpl .\r\n\r\n```plaintext\r\nconst useBoundStoreWithEqualityFn: any = (\r\n  selector?: any,\r\n  equalityFn = defaultEqualityFn,\r\n) => useStoreWithEqualityFn(api, selector, equalityFn)\r\n\r\nObject.assign(useBoundStoreWithEqualityFn, api)\r\n\r\nreturn useBoundStoreWithEqualityFn\r\n```\r\n\r\nObject.assign updates the slice returned by useBoundStoreWithEqualityFn with the “api”.\r\n\r\nThe screenshot below demonstrates with an example how Object.assign does the update\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*5Bjk2iqVbP1d0g1TFt_2Lw.png)\r\n\r\nand finally useBoundStoreWithEqualityFn is returned by createWithEqualityFnImpl.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/search?q=useBoundStore&type=code](https://github.com/search?q=useBoundStore&type=code)\r\n    \r\n2. [https://github.com/churichard/notabase](https://github.com/churichard/notabase)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----8af3bf276010--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var r=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),f=(t,e)=>{for(var a in e)r(t,a,{get:e[a],enumerable:!0})},c=(t,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let i of m(e))!b.call(t,i)&&i!==a&&r(t,i,{get:()=>e[i],enumerable:!(s=u(e,i))||s.enumerable});return t};var S=(t,e,a)=>(a=t!=null?p(g(t)):{},c(e||!t||!t.__esModule?r(a,\"default\",{value:t,enumerable:!0}):a,t)),x=t=>c(r({},\"__esModule\",{value:!0}),t);var h=y((E,l)=>{l.exports=_jsx_runtime});var F={};f(F,{default:()=>o,frontmatter:()=>N});var n=S(h()),N={title:\"useBoundStoreWithEqualityFn in Zustand source code explained.\"};function d(t){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will understand how the useBoundStoreWithEqualityFn function is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L80\",children:\"Zustand\\u2019s source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*P7a8HFLXH0pDgCiWLoJcRA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The above code is picked from \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L80\",children:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L80\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"useBoundStoreWithEqualityFn is called in \",(0,n.jsx)(e.code,{children:\"createWithEqualityFnImpl\"}),\"function and returns another function named \",(0,n.jsx)(e.code,{children:\"useStoreWithEqualityFn\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s look at what\\u2019s in \",(0,n.jsx)(e.code,{children:\"useStoreWithEqualityFn\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Pulled from https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L80\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function useStoreWithEqualityFn<TState, StateSlice>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api: ReadonlyStoreApi<TState>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  selector: (state: TState) => StateSlice = identity as any,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  equalityFn?: (a: StateSlice, b: StateSlice) => boolean,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\") {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const slice = useSyncExternalStoreWithSelector(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.subscribe,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.getState,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.getInitialState,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    selector,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    equalityFn,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  useDebugValue(slice)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return slice\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useSyncExternalStore\",children:(0,n.jsx)(e.code,{children:\"useSyncExternalStore\"})}),\" is a React Hook that lets you subscribe to an external store and useSyncExternalStoreWithSelector is imported as shown below:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector'\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"slice returned by this function, useStoreWithEqualityFn is further used in createWithEqualityFnImpl .\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const useBoundStoreWithEqualityFn: any = (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  selector?: any,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  equalityFn = defaultEqualityFn,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\") => useStoreWithEqualityFn(api, selector, equalityFn)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"Object.assign(useBoundStoreWithEqualityFn, api)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"return useBoundStoreWithEqualityFn\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Object.assign updates the slice returned by useBoundStoreWithEqualityFn with the \\u201Capi\\u201D.\"}),`\n`,(0,n.jsx)(e.p,{children:\"The screenshot below demonstrates with an example how Object.assign does the update\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*5Bjk2iqVbP1d0g1TFt_2Lw.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"and finally useBoundStoreWithEqualityFn is returned by createWithEqualityFnImpl.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=useBoundStore&type=code\",children:\"https://github.com/search?q=useBoundStore&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/churichard/notabase\",children:\"https://github.com/churichard/notabase\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----8af3bf276010--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function o(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(d,{...t})}):d(t)}return x(F);})();\n;return Component;"
        },
        "_id": "blog/useBoundStoreWithEqualityFn-in-zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/useBoundStoreWithEqualityFn-in-zustand.mdx",
          "sourceFileName": "useBoundStoreWithEqualityFn-in-zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/useBoundStoreWithEqualityFn-in-zustand"
        },
        "type": "Doc",
        "slug": "/blog/useBoundStoreWithEqualityFn-in-zustand",
        "slugAsParams": "useBoundStoreWithEqualityFn-in-zustand"
      },
      "documentHash": "1740489186437",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/useDebugValue-usage-in-zustand.mdx": {
      "document": {
        "title": "useDebugValue usage in Zustand source code explained.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will understand how useDebugValue is used in [Zustand’s source code](https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L51).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*pmHgtvDCjmbheB334tPcuA.png)\r\n\r\nuseDebugValue is used in a function named useStoreWithEquality. `useDebugValue` is a React Hook that lets you add a label to a custom Hook in [React DevTools.](https://react.dev/learn/react-developer-tools)\r\n\r\nCall `useDebugValue` at the top level of your [custom Hook](https://react.dev/learn/reusing-logic-with-custom-hooks) to display a readable debug value:\r\n\r\n```plaintext\r\n// Pulled from https://react.dev/reference/react/useDebugValue\r\nimport { useDebugValue } from 'react';\r\n\r\nfunction useOnlineStatus() {\r\n  // ...\r\n  useDebugValue(isOnline ? 'Online' : 'Offline');\r\n  // ...\r\n}\r\n```\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*lpnm07SZX97KWa6hCSIChQ.png)\r\n\r\nIn Zustand, useDebugValue is used on slice an object that looks like below:\r\n\r\n```plaintext\r\nconst slice = useSyncExternalStoreWithSelector(\r\n  api.subscribe,\r\n  api.getState,\r\n  api.getInitialState,\r\n  selector,\r\n  equalityFn,\r\n)\r\n```\r\n\r\nuseDebugValue is also used in [src/react.ts](https://github.com/pmndrs/zustand/blob/0a4f9d0f71477c5ef399191acc19e25674d0d3c4/src/react.ts#L42)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L51](https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L51)\r\n    \r\n2. [https://react.dev/reference/react/useDebugValue](https://react.dev/reference/react/useDebugValue)\r\n    \r\n3. [https://github.com/pmndrs/zustand/blob/0a4f9d0f71477c5ef399191acc19e25674d0d3c4/src/react.ts#L42](https://github.com/pmndrs/zustand/blob/0a4f9d0f71477c5ef399191acc19e25674d0d3c4/src/react.ts#L42)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----76979f026054--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=>{for(var t in e)c(a,t,{get:e[t],enumerable:!0})},s=(a,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!b.call(a,r)&&r!==t&&c(a,r,{get:()=>e[r],enumerable:!(i=u(e,r))||i.enumerable});return a};var v=(a,e,t)=>(t=a!=null?p(g(a)):{},s(e||!a||!a.__esModule?c(t,\"default\",{value:a,enumerable:!0}):t,a)),k=a=>s(c({},\"__esModule\",{value:!0}),a);var h=f((w,l)=>{l.exports=_jsx_runtime});var N={};y(N,{default:()=>o,frontmatter:()=>D});var n=v(h()),D={title:\"useDebugValue usage in Zustand source code explained.\"};function d(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will understand how useDebugValue is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L51\",children:\"Zustand\\u2019s source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*pmHgtvDCjmbheB334tPcuA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"useDebugValue is used in a function named useStoreWithEquality. \",(0,n.jsx)(e.code,{children:\"useDebugValue\"}),\" is a React Hook that lets you add a label to a custom Hook in \",(0,n.jsx)(e.a,{href:\"https://react.dev/learn/react-developer-tools\",children:\"React DevTools.\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Call \",(0,n.jsx)(e.code,{children:\"useDebugValue\"}),\" at the top level of your \",(0,n.jsx)(e.a,{href:\"https://react.dev/learn/reusing-logic-with-custom-hooks\",children:\"custom Hook\"}),\" to display a readable debug value:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Pulled from https://react.dev/reference/react/useDebugValue\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { useDebugValue } from 'react';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function useOnlineStatus() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // ...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  useDebugValue(isOnline ? 'Online' : 'Offline');\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // ...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*lpnm07SZX97KWa6hCSIChQ.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"In Zustand, useDebugValue is used on slice an object that looks like below:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const slice = useSyncExternalStoreWithSelector(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api.subscribe,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api.getState,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api.getInitialState,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  selector,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  equalityFn,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\")\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"useDebugValue is also used in \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/0a4f9d0f71477c5ef399191acc19e25674d0d3c4/src/react.ts#L42\",children:\"src/react.ts\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L51\",children:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L51\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useDebugValue\",children:\"https://react.dev/reference/react/useDebugValue\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/0a4f9d0f71477c5ef399191acc19e25674d0d3c4/src/react.ts#L42\",children:\"https://github.com/pmndrs/zustand/blob/0a4f9d0f71477c5ef399191acc19e25674d0d3c4/src/react.ts#L42\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----76979f026054--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function o(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return k(N);})();\n;return Component;"
        },
        "_id": "blog/useDebugValue-usage-in-zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/useDebugValue-usage-in-zustand.mdx",
          "sourceFileName": "useDebugValue-usage-in-zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/useDebugValue-usage-in-zustand"
        },
        "type": "Doc",
        "slug": "/blog/useDebugValue-usage-in-zustand",
        "slugAsParams": "useDebugValue-usage-in-zustand"
      },
      "documentHash": "1740489186440",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/useinternal-in-grida.mdx": {
      "document": {
        "title": "__useInternal() in Grida codebase.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review the [\\_\\_useInternal() function in Grida codebase](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133).\r\n\r\n```js\r\nfunction __useInternal() {\r\n  const state = useContext(DocumentContext);\r\n  if (!state) {\r\n    throw new Error(\r\n      \"useDocument must be used within a StandaloneDocumentEditor\"\r\n    );\r\n  }\r\n\r\n  const dispatch = __useDispatch();\r\n\r\n  return useMemo(() => [state, dispatch] as const, [state, dispatch]);\r\n}\r\n```\r\n\r\nHow did I come across this function? In the previous articles, I wrote Toolbar component and a function called setCursorMode. \r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*bdohzvRBjI6wxGkvgj2L4g.png)\r\n\r\nIn the [useEventTarget function](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087), state and dispatch are destructured from this function, \\_\\_useInternal().\r\n\r\n```js\r\nexport function useEventTarget() {\r\n  const [state, dispatch] = __useInternal();\r\n```\r\n\r\n#### DocumentContext\r\n\r\nDocumentContext is created at [line number 41 in provider.tsx](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L41).\r\n\r\n```js\r\nconst DocumentContext = createContext<IDocumentEditorState | null>(null);\r\n```\r\n\r\n#### DocumentContext.Provider\r\n\r\nYou will find DocumentContext.Provider in StandaloneDocumentEditor [component at line 102](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L102).\r\n\r\n```js\r\nreturn (\r\n    <DocumentContext.Provider value={state}>\r\n      <DocumentDispatcherContext.Provider value={__dispatch}>\r\n        <ProgramDataContextHost>\r\n          <DataProvider data={{ props: shallowRootProps }}>\r\n            <EditorGoogleFontsManager>\r\n              {/*  */}\r\n              {children}\r\n            </EditorGoogleFontsManager>\r\n          </DataProvider>\r\n        </ProgramDataContextHost>\r\n      </DocumentDispatcherContext.Provider>\r\n    </DocumentContext.Provider>\r\n  );\r\n```\r\n\r\nThis is where value is initialised to state.\r\n\r\n#### state\r\n\r\nThe below code is picked from [line 71 in provider.tsx](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L71C2-L74C5)\r\n\r\n```js\r\nconst state = useMemo(\r\n  () => initDocumentEditorState({ ...initial, editable, debug }),\r\n  [initial, editable, debug]\r\n);\r\n```\r\n\r\nLet’s just follow along the code as this is about state that used in the canvas. I would find out how initDocumentEditorState looks like.\r\n\r\n#### initDocumentEditorState\r\n\r\nThis function is defined in [grida-react-canvas/state.ts at line 600](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/state.ts#L600)\r\n\r\n```js\r\nexport function initDocumentEditorState({\r\n  debug,\r\n  ...init\r\n}: Omit<IDocumentEditorInit, \"debug\"> & {\r\n  debug?: boolean;\r\n}): IDocumentEditorState {\r\n  const s = new document.DocumentState(init.document);\r\n\r\n  // console.log(\"i\", init[\"transform\"]);\r\n\r\n  return {\r\n    transform: cmath.transform.identity,\r\n    debug: debug ?? false,\r\n    selection: [],\r\n    hovered_node_id: null,\r\n    hovered_vertex_idx: null,\r\n    pointer: {\r\n      position: cmath.vector2.zero,\r\n    },\r\n    history: {\r\n      future: [],\r\n      past: [],\r\n    },\r\n    gesture: { type: \"idle\" },\r\n    gesture_modifiers: {\r\n      translate_with_hierarchy_change: \"on\",\r\n      translate_with_clone: \"off\",\r\n      tarnslate_with_axis_lock: \"off\",\r\n      transform_with_center_origin: \"off\",\r\n      transform_with_preserve_aspect_ratio: \"off\",\r\n      rotate_with_quantize: \"off\",\r\n    },\r\n    document_ctx: document.Context.from(init.document).snapshot(),\r\n    // history: initialHistoryState(init),\r\n    surface_raycast_targeting: DEFAULT_RAY_TARGETING,\r\n    surface_measurement_targeting: \"off\",\r\n    surface_measurement_targeting_locked: false,\r\n    surface_raycast_detected_node_ids: [],\r\n    googlefonts: s.fonts().map((family) => ({ family })),\r\n    cursor_mode: { type: \"cursor\" },\r\n    ...init,\r\n  };\r\n}\r\n```\r\n\r\nThis function is used in playground.tsx\r\n\r\n#### playground.tsx\r\n\r\n```js\r\nconst [state, dispatch] = useReducer(\r\n    standaloneDocumentReducer,\r\n    initDocumentEditorState({\r\n      editable: true,\r\n      debug: pref.debug,\r\n      document: {\r\n        nodes: {\r\n          root: {\r\n            id: \"root\",\r\n            name: \"root\",\r\n            active: true,\r\n            locked: false,\r\n            type: \"container\",\r\n            children: [],\r\n            width: 800,\r\n            height: 600,\r\n            position: \"relative\",\r\n            style: {},\r\n            opacity: 1,\r\n            zIndex: 0,\r\n            rotation: 0,\r\n            expanded: false,\r\n            cornerRadius: 0,\r\n            padding: 0,\r\n            layout: \"flow\",\r\n            direction: \"horizontal\",\r\n            mainAxisAlignment: \"start\",\r\n            crossAxisAlignment: \"start\",\r\n            mainAxisGap: 0,\r\n            crossAxisGap: 0,\r\n          },\r\n        },\r\n        root_id: \"root\",\r\n      },\r\n    })\r\n```\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087)\r\n    \r\n2. [https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133C1-L144C2](https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133C1-L144C2)",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,l)=>()=>(l||n((l={exports:{}}).exports,l),l.exports),f=(n,l)=>{for(var s in l)c(n,s,{get:l[s],enumerable:!0})},o=(n,l,s,F)=>{if(l&&typeof l==\"object\"||typeof l==\"function\")for(let r of y(l))!u.call(n,r)&&r!==s&&c(n,r,{get:()=>l[r],enumerable:!(F=p(l,r))||F.enumerable});return n};var N=(n,l,s)=>(s=n!=null?h(m(n)):{},o(l||!n||!n.__esModule?c(s,\"default\",{value:n,enumerable:!0}):s,n)),b=n=>o(c({},\"__esModule\",{value:!0}),n);var i=g((w,a)=>{a.exports=_jsx_runtime});var v={};f(v,{default:()=>d,frontmatter:()=>_});var e=N(i()),_={title:\"__useInternal() in Grida codebase.\"};function t(n){let l={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(l.p,{children:[\"In this article, we will review the \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133\",children:\"__useInternal() function in Grida codebase\"}),\".\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"function\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" __useInternal\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" state \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" useContext\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentContext\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    throw\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" Error\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:'      \"useDocument must be used within a StandaloneDocumentEditor\"'})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    );\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" dispatch \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" __useDispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" useMemo\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" dispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" const,\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" dispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"]);\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"How did I come across this function? In the previous articles, I wrote Toolbar component and a function called setCursorMode.\\xA0\"}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*bdohzvRBjI6wxGkvgj2L4g.png\",alt:\"\"})}),`\n`,(0,e.jsxs)(l.p,{children:[\"In the \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087\",children:\"useEventTarget function\"}),\", state and dispatch are destructured from this function, __useInternal().\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" useEventTarget\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" dispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" __useInternal\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"();\"})]})]})})}),`\n`,(0,e.jsx)(l.h4,{id:\"documentcontext\",children:\"DocumentContext\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"DocumentContext is created at \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L41\",children:\"line number 41 in provider.tsx\"}),\".\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsx)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" DocumentContext \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" createContext\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"IDocumentEditorState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">(null);\"})]})})})}),`\n`,(0,e.jsx)(l.h4,{id:\"documentcontextprovider\",children:\"DocumentContext.Provider\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"You will find DocumentContext.Provider in StandaloneDocumentEditor \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L102\",children:\"component at line 102\"}),\".\"]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentContext.Provider value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentDispatcherContext.Provider value\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"__dispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ProgramDataContextHost\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DataProvider data\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"={{\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" props\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" shallowRootProps \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}}>\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            <\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"EditorGoogleFontsManager\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"              {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"/*\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  */\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"              {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"children\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"            </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"EditorGoogleFontsManager\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DataProvider\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"ProgramDataContextHost\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentDispatcherContext.Provider\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    </\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentContext.Provider\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  );\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"This is where value is initialised to state.\"}),`\n`,(0,e.jsx)(l.h4,{id:\"state\",children:\"state\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"The below code is picked from \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L71C2-L74C5\",children:\"line 71 in provider.tsx\"})]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" state \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" useMemo\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  ()\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" initDocumentEditorState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ...\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"initial\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" editable\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" debug \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"initial\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" editable\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"]\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"Let\\u2019s just follow along the code as this is about state that used in the canvas. I would find out how initDocumentEditorState looks like.\"}),`\n`,(0,e.jsx)(l.h4,{id:\"initdocumenteditorstate\",children:\"initDocumentEditorState\"}),`\n`,(0,e.jsxs)(l.p,{children:[\"This function is defined in \",(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/state.ts#L600\",children:\"grida-react-canvas/state.ts at line 600\"})]}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" initDocumentEditorState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  ...\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"init\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}:\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Omit\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"IDocumentEditorInit\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"debug\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" &\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"  debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" boolean\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}):\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" IDocumentEditorState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" s \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" document\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"DocumentState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"init\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"document\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:' console.log(\"i\", init[\"transform\"]);'})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:\" \"}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    transform\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" cmath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"transform\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"identity\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" debug \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    selection\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    hovered_node_id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" null,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    hovered_vertex_idx\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" null,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    pointer\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      position\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" cmath\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"vector2\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"zero\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    history\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      future\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      past\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    gesture\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"idle\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    gesture_modifiers\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      translate_with_hierarchy_change\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"on\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      translate_with_clone\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      tarnslate_with_axis_lock\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      transform_with_center_origin\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      transform_with_preserve_aspect_ratio\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      rotate_with_quantize\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    document_ctx\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" document\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"Context\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"from\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"init\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"document\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"snapshot\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    //\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF4\"},children:\" history: initialHistoryState(init),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    surface_raycast_targeting\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" DEFAULT_RAY_TARGETING\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    surface_measurement_targeting\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"off\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    surface_measurement_targeting_locked\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    surface_raycast_detected_node_ids\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    googlefonts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" s\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"fonts\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"().\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"map\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"family\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" family \"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"})),\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    cursor_mode\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"cursor\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    ...\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"init\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"  };\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,e.jsx)(l.p,{children:\"This function is used in playground.tsx\"}),`\n`,(0,e.jsx)(l.h4,{id:\"playgroundtsx\",children:\"playground.tsx\"}),`\n`,(0,e.jsx)(l.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(l.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,e.jsxs)(l.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" dispatch\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" useReducer\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    standaloneDocumentReducer\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"    initDocumentEditorState\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      editable\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\" pref\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"debug\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"      document\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        nodes\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"          root\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"root\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            name\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"root\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            active\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            locked\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            type\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"container\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            children\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            width\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 800,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            height\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 600,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            position\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"relative\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            style\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" {},\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            opacity\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 1,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            zIndex\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            rotation\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            expanded\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            cornerRadius\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            padding\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            layout\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"flow\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            direction\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"horizontal\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            mainAxisAlignment\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"start\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            crossAxisAlignment\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"start\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            mainAxisGap\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"            crossAxisGap\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\" 0,\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"          },\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,e.jsxs)(l.span,{className:\"line\",children:[(0,e.jsx)(l.span,{style:{color:\"#FFF\"},children:\"        root_id\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:' \"root\"'}),(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,e.jsx)(l.span,{className:\"line\",children:(0,e.jsx)(l.span,{style:{color:\"#FFF8\"},children:\"    })\"})})]})})}),`\n`,(0,e.jsx)(l.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,e.jsx)(l.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.em,{children:(0,e.jsxs)(l.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(l.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,e.jsxs)(l.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(l.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,e.jsx)(l.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(l.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,e.jsxs)(l.ol,{children:[`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L2087\"})}),`\n`]}),`\n`,(0,e.jsxs)(l.li,{children:[`\n`,(0,e.jsx)(l.p,{children:(0,e.jsx)(l.a,{href:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133C1-L144C2\",children:\"https://github.com/gridaco/grida/blob/main/apps/forms/grida-react-canvas/provider.tsx#L133C1-L144C2\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:l}=n.components||{};return l?(0,e.jsx)(l,{...n,children:(0,e.jsx)(t,{...n})}):t(n)}return b(v);})();\n;return Component;"
        },
        "_id": "blog/useinternal-in-grida.mdx",
        "_raw": {
          "sourceFilePath": "blog/useinternal-in-grida.mdx",
          "sourceFileName": "useinternal-in-grida.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/useinternal-in-grida"
        },
        "type": "Doc",
        "slug": "/blog/useinternal-in-grida",
        "slugAsParams": "useinternal-in-grida"
      },
      "documentHash": "1740489186449",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/useLayoutEffect-in-zustand-test.mdx": {
      "document": {
        "title": "useLayoutEffect in Zustand test-case explained.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nReact’s `useLayoutEffect` is one of the lesser-used but crucial hooks that offers precise control over side effects that need to be executed before the browser paints the UI. In this article, we'll break down how `useLayoutEffect` works and demonstrate its usage with a [test case from Zustand's source code](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L598). The [test case](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L598) provides a perfect example of how `useLayoutEffect` can help manage state and updates effectively when timing is critical.\r\n\r\nThis test case validates a bug fix related to an [issue reported](https://github.com/pmndrs/zustand/issues/84) where the subscribed listener gets overwritten. Please note this issue was reported on Zustand’s version — 2.2.1. Link to codesandbox: [https://codesandbox.io/s/quirky-taussig-ng90m](https://codesandbox.io/s/quirky-taussig-ng90m)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*49_ts2DhjaXfW0wgY3UVwQ.png)\r\n\r\nThe latest stable Zustand’s version is 4.5.5 but it’s good to learn what this test case is about, especially when it uses `useLayoutEffect`\r\n\r\n# **What is** `useLayoutEffect`?\r\n\r\n[`useLayoutEffect`](https://react.dev/reference/react/useLayoutEffect) is similar to `useEffect`, but it fires synchronously **after** all DOM mutations and **before** the browser repaints the screen. It ensures that updates inside this hook are reflected on the page immediately, without the user experiencing any visual inconsistency.\r\n\r\nIn contrast, `useEffect` runs after the browser repaints the screen, meaning the user might see the DOM in an interim state before the effect takes place.\r\n\r\nYou can read more about [useLayoutEffect in React docs](https://react.dev/reference/react/useLayoutEffect).\r\n\r\n# **When Should You Use** `useLayoutEffect`?\r\n\r\nYou should use `useLayoutEffect` in situations where you need to ensure that the DOM has been updated before the browser paints the UI. Typical use cases include:\r\n\r\n* Measuring the DOM layout (e.g., for animations or measurements).\r\n    \r\n* Synchronizing state or making changes that must be reflected in the DOM immediately.\r\n    \r\n* Updating state that depends on DOM changes, such as adjusting styles or positions based on layout changes.\r\n    \r\n\r\nFor less critical side effects, such as data fetching or logging, `useEffect` is generally preferred because it's non-blocking and doesn’t delay browser painting.\r\n\r\n# **Zustand Test Case**\r\n\r\nHere’s a test case from Zustand’s source code that demonstrates `useLayoutEffect` in action:\r\n\r\n```plaintext\r\n// https://github.com/pmndrs/zustand/issues/84\r\nit('ensures the correct subscriber is removed on unmount', async () => {\r\n  const useBoundStore = create(() => ({ count: 0 }))\r\n  const api = useBoundStore\r\n\r\n  function increment() {\r\n    api.setState(({ count }) => ({ count: count + 1 }))\r\n  }\r\n\r\n  function Count() {\r\n    const c = useBoundStore((s) => s.count)\r\n    return <div>count: {c}</div>\r\n  }\r\n\r\n  function CountWithInitialIncrement() {\r\n    useLayoutEffect(increment, [])\r\n    return <Count />\r\n  }\r\n\r\n  function Component() {\r\n    const [Counter, setCounter] = useState(() => CountWithInitialIncrement)\r\n    useLayoutEffect(() => {\r\n      setCounter(() => Count)\r\n    }, [])\r\n    return (\r\n      <>\r\n        <Counter />\r\n        <Count />\r\n      </>\r\n    )\r\n  }\r\n\r\n  const { findAllByText } = render(\r\n    <>\r\n      <Component />\r\n    </>,\r\n  )\r\n\r\n  expect((await findAllByText('count: 1')).length).toBe(2)\r\n\r\n  act(increment)\r\n\r\n  expect((await findAllByText('count: 2')).length).toBe(2)\r\n})\r\n```\r\n\r\n# **Breaking Down the Code**\r\n\r\nThis test validates that Zustand correctly removes subscribers when components unmount and re-renders state changes appropriately. The core element we will focus on is how `useLayoutEffect` plays a critical role in controlling when state changes occur relative to the component lifecycle.\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*_gTq0wSQLjktw-hmi31LCg.png)\r\n\r\n## **1\\. Creating the Store and Increment Function**\r\n\r\nThe store is initialized with an object containing a single state property `count` set to `0`.\r\n\r\n```plaintext\r\nconst useBoundStore = create(() => ({ count: 0 }))\r\nconst api = useBoundStore\r\n```\r\n\r\nThe `increment` function updates the `count` in the store:\r\n\r\n```plaintext\r\nfunction increment() {\r\n    api.setState(({ count }) => ({ count: count + 1 }))\r\n}\r\n```\r\n\r\n## **2\\. The** `Count` Component\r\n\r\nThe `Count` component subscribes to the store and renders the current `count`:\r\n\r\n```plaintext\r\nfunction Count() {\r\n    const c = useBoundStore((s) => s.count)\r\n    return <div>count: {c}</div>\r\n}\r\n```\r\n\r\nThis component simply pulls the `count` from Zustand’s store and displays it in the DOM.\r\n\r\n## **3\\.** `CountWithInitialIncrement` and `useLayoutEffect`\r\n\r\nThis is where `useLayoutEffect` comes into play. In the `CountWithInitialIncrement` component, we use `useLayoutEffect` to trigger the `increment` function immediately after the component mounts but before the browser paints:\r\n\r\n```plaintext\r\nfunction CountWithInitialIncrement() {\r\n    useLayoutEffect(increment, [])\r\n    return <Count />\r\n}\r\n```\r\n\r\nThis ensures that the `count` is incremented before the component's UI is rendered. If we used `useEffect` here, the UI would first render `count: 0`, then update to `count: 1` after the effect runs. However, with `useLayoutEffect`, the UI skips the initial `count: 0` and directly renders `count: 1`.\r\n\r\n## **4\\. Switching Components Dynamically**\r\n\r\nThe `Component` component demonstrates a more advanced scenario where `useLayoutEffect` is used to switch between two different components on mount:\r\n\r\n```plaintext\r\nfunction Component() {\r\n    const [Counter, setCounter] = useState(() => CountWithInitialIncrement)\r\n    useLayoutEffect(() => {\r\n      setCounter(() => Count)\r\n    }, [])\r\n    return (\r\n      <>\r\n        <Counter />\r\n        <Count />\r\n      </>\r\n    )\r\n}\r\n```\r\n\r\n* Initially, `Counter` is set to `CountWithInitialIncrement`, which triggers the `increment` function when it mounts.\r\n    \r\n* Then, `useLayoutEffect` runs synchronously after the DOM is updated, changing `Counter` to the `Count` component. This switch ensures that after the layout is painted, the next time the component renders, it doesn’t include the initial increment logic.\r\n    \r\n\r\nBy the time `Counter` switches to `Count`, the `count` is already incremented, and the correct values are displayed.\r\n\r\n## **5\\. The Test Expectations**\r\n\r\nFinally, the test verifies the following:\r\n\r\n1. Initially, both the `Counter` and `Count` components display `count: 1`.\r\n    \r\n2. After triggering another `increment`, both components should update to `count: 2`.\r\n    \r\n\r\n```plaintext\r\nexpect((await findAllByText('count: 1')).length).toBe(2)\r\n\r\nact(increment)\r\n\r\nexpect((await findAllByText('count: 2')).length).toBe(2)\r\n```\r\n\r\nThe test passes because `useLayoutEffect` ensures the state update happens before the browser renders the UI, avoiding any intermediate render where `count` would still be `0`.\r\n\r\n# **Why Use** `useLayoutEffect` Here?\r\n\r\nthis test case closely resembles the issue repro provided in the [codesandbox](https://codesandbox.io/s/quirky-taussig-ng90m).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*q0ujhhQN31RdQEm0x-G9Ng.png)\r\n\r\nThe aim of this test case is to validate that subscribers do not get overwritten when the components unmount. Since useLayoutEffect renders the state before the browser repaints the UI, this is to ensure the listeners all work as expected. The issue states that one of listeners simply does not get updated, which is weird.\r\n\r\n# **Conclusion**\r\n\r\nReact’s `useLayoutEffect` provides control over state updates and DOM changes that need to happen before the user sees the page. In the Zustand test case we reviewed, `useLayoutEffect` ensures that the `increment` function is executed synchronously after the DOM updates, making sure that state changes are reflected immediately.\r\n\r\n> `useLayoutEffect` can hurt performance. Prefer [`useEffect`](https://react.dev/reference/react/useEffect) when possible. — [React Docs](https://react.dev/reference/react/useLayoutEffect)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L598](https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L598)\r\n    \r\n2. [https://react.dev/reference/react/useLayoutEffect](https://react.dev/reference/react/useLayoutEffect)\r\n    \r\n3. [https://github.com/pmndrs/zustand/issues/84](https://github.com/pmndrs/zustand/issues/84)\r\n    \r\n4. [https://codesandbox.io/s/quirky-taussig-ng90m](https://codesandbox.io/s/quirky-taussig-ng90m)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----548f1323f825--------------------------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),b=(t,e)=>{for(var s in e)c(t,s,{get:e[s],enumerable:!0})},r=(t,e,s,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of m(e))!g.call(t,a)&&a!==s&&c(t,a,{get:()=>e[a],enumerable:!(i=u(e,a))||i.enumerable});return t};var w=(t,e,s)=>(s=t!=null?p(f(t)):{},r(e||!t||!t.__esModule?c(s,\"default\",{value:t,enumerable:!0}):s,t)),N=t=>r(c({},\"__esModule\",{value:!0}),t);var d=y((L,l)=>{l.exports=_jsx_runtime});var v={};b(v,{default:()=>o,frontmatter:()=>x});var n=w(d()),x={title:\"useLayoutEffect in Zustand test-case explained.\"};function h(t){let e={a:\"a\",blockquote:\"blockquote\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"React\\u2019s \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" is one of the lesser-used but crucial hooks that offers precise control over side effects that need to be executed before the browser paints the UI. In this article, we'll break down how \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" works and demonstrate its usage with a \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L598\",children:\"test case from Zustand's source code\"}),\". The \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L598\",children:\"test case\"}),\" provides a perfect example of how \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" can help manage state and updates effectively when timing is critical.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"This test case validates a bug fix related to an \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/issues/84\",children:\"issue reported\"}),\" where the subscribed listener gets overwritten. Please note this issue was reported on Zustand\\u2019s version \\u2014 2.2.1. Link to codesandbox: \",(0,n.jsx)(e.a,{href:\"https://codesandbox.io/s/quirky-taussig-ng90m\",children:\"https://codesandbox.io/s/quirky-taussig-ng90m\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*49_ts2DhjaXfW0wgY3UVwQ.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The latest stable Zustand\\u2019s version is 4.5.5 but it\\u2019s good to learn what this test case is about, especially when it uses \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"})]}),`\n`,(0,n.jsxs)(e.h1,{id:\"what-is-uselayouteffect\",children:[(0,n.jsx)(e.strong,{children:\"What is\"}),\" \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\"?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useLayoutEffect\",children:(0,n.jsx)(e.code,{children:\"useLayoutEffect\"})}),\" is similar to \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\", but it fires synchronously \",(0,n.jsx)(e.strong,{children:\"after\"}),\" all DOM mutations and \",(0,n.jsx)(e.strong,{children:\"before\"}),\" the browser repaints the screen. It ensures that updates inside this hook are reflected on the page immediately, without the user experiencing any visual inconsistency.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"In contrast, \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" runs after the browser repaints the screen, meaning the user might see the DOM in an interim state before the effect takes place.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"You can read more about \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useLayoutEffect\",children:\"useLayoutEffect in React docs\"}),\".\"]}),`\n`,(0,n.jsxs)(e.h1,{id:\"when-should-you-use-uselayouteffect\",children:[(0,n.jsx)(e.strong,{children:\"When Should You Use\"}),\" \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\"?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"You should use \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" in situations where you need to ensure that the DOM has been updated before the browser paints the UI. Typical use cases include:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Measuring the DOM layout (e.g., for animations or measurements).\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Synchronizing state or making changes that must be reflected in the DOM immediately.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Updating state that depends on DOM changes, such as adjusting styles or positions based on layout changes.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"For less critical side effects, such as data fetching or logging, \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" is generally preferred because it's non-blocking and doesn\\u2019t delay browser painting.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"zustand-test-case\",children:(0,n.jsx)(e.strong,{children:\"Zustand Test Case\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Here\\u2019s a test case from Zustand\\u2019s source code that demonstrates \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" in action:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// https://github.com/pmndrs/zustand/issues/84\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"it('ensures the correct subscriber is removed on unmount', async () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const useBoundStore = create(() => ({ count: 0 }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const api = useBoundStore\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function increment() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.setState(({ count }) => ({ count: count + 1 }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function Count() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const c = useBoundStore((s) => s.count)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return <div>count: {c}</div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function CountWithInitialIncrement() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    useLayoutEffect(increment, [])\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return <Count />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  function Component() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const [Counter, setCounter] = useState(() => CountWithInitialIncrement)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    useLayoutEffect(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      setCounter(() => Count)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }, [])\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        <Counter />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        <Count />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      </>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { findAllByText } = render(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    <>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <Component />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    </>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  expect((await findAllByText('count: 1')).length).toBe(2)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  act(increment)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  expect((await findAllByText('count: 2')).length).toBe(2)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"})\"})})]})})}),`\n`,(0,n.jsx)(e.h1,{id:\"breaking-down-the-code\",children:(0,n.jsx)(e.strong,{children:\"Breaking Down the Code\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This test validates that Zustand correctly removes subscribers when components unmount and re-renders state changes appropriately. The core element we will focus on is how \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" plays a critical role in controlling when state changes occur relative to the component lifecycle.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*_gTq0wSQLjktw-hmi31LCg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h2,{id:\"1-creating-the-store-and-increment-function\",children:(0,n.jsx)(e.strong,{children:\"1. Creating the Store and Increment Function\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The store is initialized with an object containing a single state property \",(0,n.jsx)(e.code,{children:\"count\"}),\" set to \",(0,n.jsx)(e.code,{children:\"0\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const useBoundStore = create(() => ({ count: 0 }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const api = useBoundStore\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"increment\"}),\" function updates the \",(0,n.jsx)(e.code,{children:\"count\"}),\" in the store:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function increment() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.setState(({ count }) => ({ count: count + 1 }))\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.h2,{id:\"2-the-count-component\",children:[(0,n.jsx)(e.strong,{children:\"2. The\"}),\" \",(0,n.jsx)(e.code,{children:\"Count\"}),\" Component\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"Count\"}),\" component subscribes to the store and renders the current \",(0,n.jsx)(e.code,{children:\"count\"}),\":\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function Count() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const c = useBoundStore((s) => s.count)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return <div>count: {c}</div>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This component simply pulls the \",(0,n.jsx)(e.code,{children:\"count\"}),\" from Zustand\\u2019s store and displays it in the DOM.\"]}),`\n`,(0,n.jsxs)(e.h2,{id:\"3-countwithinitialincrement-and-uselayouteffect\",children:[(0,n.jsx)(e.strong,{children:\"3.\"}),\" \",(0,n.jsx)(e.code,{children:\"CountWithInitialIncrement\"}),\" and \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"This is where \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" comes into play. In the \",(0,n.jsx)(e.code,{children:\"CountWithInitialIncrement\"}),\" component, we use \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" to trigger the \",(0,n.jsx)(e.code,{children:\"increment\"}),\" function immediately after the component mounts but before the browser paints:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function CountWithInitialIncrement() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    useLayoutEffect(increment, [])\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return <Count />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This ensures that the \",(0,n.jsx)(e.code,{children:\"count\"}),\" is incremented before the component's UI is rendered. If we used \",(0,n.jsx)(e.code,{children:\"useEffect\"}),\" here, the UI would first render \",(0,n.jsx)(e.code,{children:\"count: 0\"}),\", then update to \",(0,n.jsx)(e.code,{children:\"count: 1\"}),\" after the effect runs. However, with \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\", the UI skips the initial \",(0,n.jsx)(e.code,{children:\"count: 0\"}),\" and directly renders \",(0,n.jsx)(e.code,{children:\"count: 1\"}),\".\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"4-switching-components-dynamically\",children:(0,n.jsx)(e.strong,{children:\"4. Switching Components Dynamically\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"Component\"}),\" component demonstrates a more advanced scenario where \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" is used to switch between two different components on mount:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function Component() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    const [Counter, setCounter] = useState(() => CountWithInitialIncrement)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    useLayoutEffect(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      setCounter(() => Count)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }, [])\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return (\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      <>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        <Counter />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        <Count />\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      </>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Initially, \",(0,n.jsx)(e.code,{children:\"Counter\"}),\" is set to \",(0,n.jsx)(e.code,{children:\"CountWithInitialIncrement\"}),\", which triggers the \",(0,n.jsx)(e.code,{children:\"increment\"}),\" function when it mounts.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Then, \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" runs synchronously after the DOM is updated, changing \",(0,n.jsx)(e.code,{children:\"Counter\"}),\" to the \",(0,n.jsx)(e.code,{children:\"Count\"}),\" component. This switch ensures that after the layout is painted, the next time the component renders, it doesn\\u2019t include the initial increment logic.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"By the time \",(0,n.jsx)(e.code,{children:\"Counter\"}),\" switches to \",(0,n.jsx)(e.code,{children:\"Count\"}),\", the \",(0,n.jsx)(e.code,{children:\"count\"}),\" is already incremented, and the correct values are displayed.\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"5-the-test-expectations\",children:(0,n.jsx)(e.strong,{children:\"5. The Test Expectations\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Finally, the test verifies the following:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Initially, both the \",(0,n.jsx)(e.code,{children:\"Counter\"}),\" and \",(0,n.jsx)(e.code,{children:\"Count\"}),\" components display \",(0,n.jsx)(e.code,{children:\"count: 1\"}),\".\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"After triggering another \",(0,n.jsx)(e.code,{children:\"increment\"}),\", both components should update to \",(0,n.jsx)(e.code,{children:\"count: 2\"}),\".\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"expect((await findAllByText('count: 1')).length).toBe(2)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"act(increment)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"expect((await findAllByText('count: 2')).length).toBe(2)\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The test passes because \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" ensures the state update happens before the browser renders the UI, avoiding any intermediate render where \",(0,n.jsx)(e.code,{children:\"count\"}),\" would still be \",(0,n.jsx)(e.code,{children:\"0\"}),\".\"]}),`\n`,(0,n.jsxs)(e.h1,{id:\"why-use-uselayouteffect-here\",children:[(0,n.jsx)(e.strong,{children:\"Why Use\"}),\" \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" Here?\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"this test case closely resembles the issue repro provided in the \",(0,n.jsx)(e.a,{href:\"https://codesandbox.io/s/quirky-taussig-ng90m\",children:\"codesandbox\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*q0ujhhQN31RdQEm0x-G9Ng.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"The aim of this test case is to validate that subscribers do not get overwritten when the components unmount. Since useLayoutEffect renders the state before the browser repaints the UI, this is to ensure the listeners all work as expected. The issue states that one of listeners simply does not get updated, which is weird.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"conclusion\",children:(0,n.jsx)(e.strong,{children:\"Conclusion\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"React\\u2019s \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" provides control over state updates and DOM changes that need to happen before the user sees the page. In the Zustand test case we reviewed, \",(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" ensures that the \",(0,n.jsx)(e.code,{children:\"increment\"}),\" function is executed synchronously after the DOM updates, making sure that state changes are reflected immediately.\"]}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useLayoutEffect\"}),\" can hurt performance. Prefer \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useEffect\",children:(0,n.jsx)(e.code,{children:\"useEffect\"})}),\" when possible. \\u2014 \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useLayoutEffect\",children:\"React Docs\"})]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L598\",children:\"https://github.com/pmndrs/zustand/blob/v4.5.5/tests/basic.test.tsx#L598\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useLayoutEffect\",children:\"https://react.dev/reference/react/useLayoutEffect\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/issues/84\",children:\"https://github.com/pmndrs/zustand/issues/84\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://codesandbox.io/s/quirky-taussig-ng90m\",children:\"https://codesandbox.io/s/quirky-taussig-ng90m\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----548f1323f825--------------------------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function o(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(h,{...t})}):h(t)}return N(v);})();\n;return Component;"
        },
        "_id": "blog/useLayoutEffect-in-zustand-test.mdx",
        "_raw": {
          "sourceFilePath": "blog/useLayoutEffect-in-zustand-test.mdx",
          "sourceFileName": "useLayoutEffect-in-zustand-test.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/useLayoutEffect-in-zustand-test"
        },
        "type": "Doc",
        "slug": "/blog/useLayoutEffect-in-zustand-test",
        "slugAsParams": "useLayoutEffect-in-zustand-test"
      },
      "documentHash": "1740489186443",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/usememo-usage-in-documenso.mdx": {
      "document": {
        "title": "useMemo usage in Documenso, an open-source Docusign alternative.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse few arrow functions found in open source projects that are passed in as a parameter to useMemo or useCallback. I found these below list of functions in the wild, there could be more use cases but let’s control our sample size for this analysis.\r\n\r\n### useMemo and the arrow function\r\n\r\nLet’s first understand what a useMemo is. useMemo is a React Hook that lets you cache the result of a calculation between re-renders.\r\n\r\n```plaintext\r\nconst cachedValue = useMemo(calculateValue, dependencies)\r\n```\r\n\r\nRead more about [useMemo](https://react.dev/reference/react/useMemo). React docs provides some great examples such as\r\n\r\n* [Skipping expensive recalculations](https://react.dev/reference/react/useMemo#skipping-expensive-recalculations)\r\n    \r\n* [Skipping re-rendering of components](https://react.dev/reference/react/useMemo#skipping-re-rendering-of-components)\r\n    \r\n* [Preventing an Effect from firing too often](https://react.dev/reference/react/useMemo#preventing-an-effect-from-firing-too-often)\r\n    \r\n* [Memoizing a dependency of another Hook](https://react.dev/reference/react/useMemo#memoizing-a-dependency-of-another-hook)\r\n    \r\n* [Memoizing a function](https://react.dev/reference/react/useMemo#memoizing-a-function)\r\n    \r\n\r\n#### useMemo in Documenso\r\n\r\n[Documenso](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L48) is as an open-source Docusign alternative. I have to admit, Documenso is good!!! I like its user interface and the best part is this is open-source and built using Next.js. You can read their source code to learn best practices such as uploading files, rendering pdf with quality in Next.js and so much more. I have added this repository to my collection to study in depth and hopefully produce some articles like this one in the future.\r\n\r\nAt [line 48 in upload-document.tsx](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L48), you will find the below code snippet.\r\n\r\n```plaintext\r\nconst disabledMessage = useMemo(() => {\r\n    if (remaining.documents === 0) {\r\n      return team\r\n        ? msg`Document upload disabled due to unpaid invoices`\r\n        : msg`You have reached your document limit.`;\r\n    }\r\n\r\n    if (!session?.user.emailVerified) {\r\n      return msg`Verify your email to upload documents.`;\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n}, [remaining.documents, session?.user.emailVerified, team]);\r\n```\r\n\r\nIn this case, results are cached based on these below values between re-renders:\r\n\r\n* remaining.documents\r\n    \r\n* session?.user.emailVerified\r\n    \r\n* team\r\n    \r\n\r\n#### useMemo in Tisqleditor\r\n\r\n[tisqleditor](https://github.com/tidbcloud/tisqleditor/tree/main) is a codeMirror6 based SQL code editor which is used in TiDB Cloud Console. I am not sure what a TiDB cloud console is but we are interested in useMemo with arrow function as its parameter.\r\n\r\n```plaintext\r\nconst activeFile = useMemo(\r\n    () => openedFiles.find((f) => f.id === activeFileId),\r\n    [activeFileId, openedFiles]\r\n)\r\n```\r\n\r\nIn the above image, you will find that activeFile is assigned the value returned by useMemo call that has two dependencies. activeFileId, openedFiles. This means activeFile results are cached between re-renders.\r\n\r\n[React docs](https://react.dev/reference/react/useMemo#memoizing-a-function) says that —   \r\n“  \r\nJust as {} creates a different object, function declarations like function() {} and expressions like () =&gt; {} produce a different function on every re-render. By itself, creating a new function is not a problem. This is not something to avoid! However, if the Form component is memoized, presumably you want to skip re-rendering it when no props have changed. A prop that is always different would defeat the point of memoization.  \r\n“\r\n\r\nAt this point, it is also worth mentioning useCallback.\r\n\r\n### useCallback\r\n\r\nThis below explanation is picked from [React documentation](https://react.dev/reference/react/useMemo#memoizing-a-dependency-of-another-hook).\r\n\r\nTo memoize a function with useMemo, your calculation function would have to return another function:\r\n\r\n```plaintext\r\nexport default function Page({ productId, referrer }) {\r\n  \r\n  const handleSubmit = useMemo(() => {\r\n       return (orderDetails) => {\r\n         post('/product/' + productId + '/buy', {\r\n         referrer,\r\n         orderDetails\r\n       });\r\n      };\r\n     }, [productId, referrer]);\r\n   \r\n  return <Form onSubmit={handleSubmit} />;\r\n}\r\n```\r\n\r\nThis looks clunky! Memoizing functions is common enough that React has a built-in Hook specifically for that. Wrap your functions into useCallback instead of useMemo to avoid having to write an extra nested function:\r\n\r\n```plaintext\r\nexport default function Page({ productId, referrer }) {\r\n \r\n  const handleSubmit = useCallback((orderDetails) => {\r\n \r\n    post('/product/' + productId + '/buy', {\r\n       referrer,\r\n       orderDetails\r\n     });\r\n    }, [productId, referrer]);\r\n    \r\n    return <Form onSubmit={handleSubmit} />;\r\n}\r\n```\r\n\r\nThe two examples above are completely equivalent. The only benefit to useCallback is that it lets you avoid writing an extra nested function inside. It doesn’t do anything else. [Read more about useCallback](https://react.dev/reference/react/useCallback).\r\n\r\n#### useCallback usage in Postiz\r\n\r\n[Postiz](https://postiz.com/) is an open-source social media scheduling tool.\r\n\r\nAt [line 147 in messages.tsx](https://github.com/gitroomhq/postiz-app/blob/e3bd1df158d272190ae90aef48cea6ee17142da2/apps/frontend/src/components/messages/messages.tsx#L147), you will find the below code snippet.\r\n\r\n```plaintext\r\nconst Page: FC<{ page: number; group: string; refChange: any }> = (props) => {\r\n  const { page, group, refChange } = props;\r\n  const fetch = useFetch();\r\n  const { message } = useContext(MarketplaceProvider);\r\n  const visible = usePageVisibility(page);\r\n\r\n  const loadMessages = useCallback(async () => {\r\n    return await (await fetch(`/messages/${group}/${page}`)).json();\r\n  }, []);\r\n```\r\n\r\nloadMessages contains a cached result except it does not contain any dependencies. Interesting. The component in which this function is defined has the following signature:\r\n\r\n```plaintext\r\nconst Page: FC<{ page: number; group: string; refChange: any }> = (props) => {\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1. [https://github.com/tidbcloud/tisqleditor/blob/main/packages/playground-nextjs/app/playground/editor-panel/editor.tsx#L78](https://github.com/tidbcloud/tisqleditor/blob/main/packages/playground-nextjs/app/playground/editor-panel/editor.tsx#L78)\r\n    \r\n2. [https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L48](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L48)\r\n    \r\n3. [https://github.com/gitroomhq/postiz-app/blob/e3bd1df158d272190ae90aef48cea6ee17142da2/apps/frontend/src/components/messages/layout.tsx#L19](https://github.com/gitroomhq/postiz-app/blob/e3bd1df158d272190ae90aef48cea6ee17142da2/apps/frontend/src/components/messages/layout.tsx#L19)\r\n    \r\n4. [https://github.com/search?q=repo%3Agitroomhq%2Fpostiz-app%20useCallback&type=code](https://github.com/search?q=repo%3Agitroomhq%2Fpostiz-app%20useCallback&type=code)\r\n    \r\n5. [https://github.com/gitroomhq/postiz-app/blob/e3bd1df158d272190ae90aef48cea6ee17142da2/apps/frontend/src/components/messages/messages.tsx#L147](https://github.com/gitroomhq/postiz-app/blob/e3bd1df158d272190ae90aef48cea6ee17142da2/apps/frontend/src/components/messages/messages.tsx#L147)\r\n    \r\n6. https://react.dev/reference/react/useMemo#memoizing-a-function",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var f=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var b=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=>{for(var i in e)s(a,i,{get:e[i],enumerable:!0})},c=(a,e,i,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of m(e))!g.call(a,t)&&t!==i&&s(a,t,{get:()=>e[t],enumerable:!(r=u(e,t))||r.enumerable});return a};var N=(a,e,i)=>(i=a!=null?p(f(a)):{},c(e||!a||!a.__esModule?s(i,\"default\",{value:a,enumerable:!0}):i,a)),v=a=>c(s({},\"__esModule\",{value:!0}),a);var d=b((M,l)=>{l.exports=_jsx_runtime});var x={};y(x,{default:()=>h,frontmatter:()=>w});var n=N(d()),w={title:\"useMemo usage in Documenso, an open-source Docusign alternative.\"};function o(a){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"In this article, we analyse few arrow functions found in open source projects that are passed in as a parameter to useMemo or useCallback. I found these below list of functions in the wild, there could be more use cases but let\\u2019s control our sample size for this analysis.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"usememo-and-the-arrowfunction\",children:\"useMemo and the arrow\\xA0function\"}),`\n`,(0,n.jsx)(e.p,{children:\"Let\\u2019s first understand what a useMemo is. useMemo is a React Hook that lets you cache the result of a calculation between re-renders.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const cachedValue = useMemo(calculateValue, dependencies)\"})})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useMemo\",children:\"useMemo\"}),\". React docs provides some great examples such as\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useMemo#skipping-expensive-recalculations\",children:\"Skipping expensive recalculations\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useMemo#skipping-re-rendering-of-components\",children:\"Skipping re-rendering of components\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useMemo#preventing-an-effect-from-firing-too-often\",children:\"Preventing an Effect from firing too often\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useMemo#memoizing-a-dependency-of-another-hook\",children:\"Memoizing a dependency of another Hook\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useMemo#memoizing-a-function\",children:\"Memoizing a function\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h4,{id:\"usememo-in-documenso\",children:\"useMemo in Documenso\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L48\",children:\"Documenso\"}),\" is as an open-source Docusign alternative. I have to admit, Documenso is good!!! I like its user interface and the best part is this is open-source and built using Next.js. You can read their source code to learn best practices such as uploading files, rendering pdf with quality in Next.js and so much more. I have added this repository to my collection to study in depth and hopefully produce some articles like this one in the future.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"At \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L48\",children:\"line 48 in upload-document.tsx\"}),\", you will find the below code snippet.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const disabledMessage = useMemo(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    if (remaining.documents === 0) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return team\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        ? msg`Document upload disabled due to unpaid invoices`\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        : msg`You have reached your document limit.`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    if (!session?.user.emailVerified) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      return msg`Verify your email to upload documents.`;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    // eslint-disable-next-line react-hooks/exhaustive-deps\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}, [remaining.documents, session?.user.emailVerified, team]);\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"In this case, results are cached based on these below values between re-renders:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"remaining.documents\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"session?.user.emailVerified\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"team\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h4,{id:\"usememo-in-tisqleditor\",children:\"useMemo in Tisqleditor\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/tidbcloud/tisqleditor/tree/main\",children:\"tisqleditor\"}),\" is a codeMirror6 based SQL code editor which is used in TiDB Cloud Console. I am not sure what a TiDB cloud console is but we are interested in useMemo with arrow function as its parameter.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const activeFile = useMemo(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    () => openedFiles.find((f) => f.id === activeFileId),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    [activeFileId, openedFiles]\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\")\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"In the above image, you will find that activeFile is assigned the value returned by useMemo call that has two dependencies. activeFileId, openedFiles. This means activeFile results are cached between re-renders.\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useMemo#memoizing-a-function\",children:\"React docs\"}),\" says that\\u200A\\u2014\\u200A\",(0,n.jsx)(e.br,{}),`\n`,\"\\u201C\",(0,n.jsx)(e.br,{}),`\n`,\"Just as \",\" creates a different object, function declarations like function() \",\" and expressions like () => \",\" produce a different function on every re-render. By itself, creating a new function is not a problem. This is not something to avoid! However, if the Form component is memoized, presumably you want to skip re-rendering it when no props have changed. A prop that is always different would defeat the point of memoization.\",(0,n.jsx)(e.br,{}),`\n`,\"\\u201C\"]}),`\n`,(0,n.jsx)(e.p,{children:\"At this point, it is also worth mentioning useCallback.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"usecallback\",children:\"useCallback\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This below explanation is picked from \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useMemo#memoizing-a-dependency-of-another-hook\",children:\"React documentation\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"To memoize a function with useMemo, your calculation function would have to return another function:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export default function Page({ productId, referrer }) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const handleSubmit = useMemo(() => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       return (orderDetails) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"         post('/product/' + productId + '/buy', {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"         referrer,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"         orderDetails\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     }, [productId, referrer]);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"   \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return <Form onSubmit={handleSubmit} />;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This looks clunky! Memoizing functions is common enough that React has a built-in Hook specifically for that. Wrap your functions into useCallback instead of useMemo to avoid having to write an extra nested function:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export default function Page({ productId, referrer }) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const handleSubmit = useCallback((orderDetails) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    post('/product/' + productId + '/buy', {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       referrer,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"       orderDetails\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"     });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    }, [productId, referrer]);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    \"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return <Form onSubmit={handleSubmit} />;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The two examples above are completely equivalent. The only benefit to useCallback is that it lets you avoid writing an extra nested function inside. It doesn\\u2019t do anything else. \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useCallback\",children:\"Read more about useCallback\"}),\".\"]}),`\n`,(0,n.jsx)(e.h4,{id:\"usecallback-usage-inpostiz\",children:\"useCallback usage in\\xA0Postiz\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://postiz.com/\",children:\"Postiz\"}),\" is an open-source social media scheduling tool.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"At \",(0,n.jsx)(e.a,{href:\"https://github.com/gitroomhq/postiz-app/blob/e3bd1df158d272190ae90aef48cea6ee17142da2/apps/frontend/src/components/messages/messages.tsx#L147\",children:\"line 147 in messages.tsx\"}),\", you will find the below code snippet.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const Page: FC<{ page: number; group: string; refChange: any }> = (props) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { page, group, refChange } = props;\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const fetch = useFetch();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const { message } = useContext(MarketplaceProvider);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const visible = usePageVisibility(page);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const loadMessages = useCallback(async () => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    return await (await fetch(`/messages/${group}/${page}`)).json();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }, []);\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"loadMessages contains a cached result except it does not contain any dependencies. Interesting. The component in which this function is defined has the following signature:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const Page: FC<{ page: number; group: string; refChange: any }> = (props) => {\"})})})})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/tidbcloud/tisqleditor/blob/main/packages/playground-nextjs/app/playground/editor-panel/editor.tsx#L78\",children:\"https://github.com/tidbcloud/tisqleditor/blob/main/packages/playground-nextjs/app/playground/editor-panel/editor.tsx#L78\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L48\",children:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L48\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/gitroomhq/postiz-app/blob/e3bd1df158d272190ae90aef48cea6ee17142da2/apps/frontend/src/components/messages/layout.tsx#L19\",children:\"https://github.com/gitroomhq/postiz-app/blob/e3bd1df158d272190ae90aef48cea6ee17142da2/apps/frontend/src/components/messages/layout.tsx#L19\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Agitroomhq%2Fpostiz-app%20useCallback&type=code\",children:\"https://github.com/search?q=repo%3Agitroomhq%2Fpostiz-app%20useCallback&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/gitroomhq/postiz-app/blob/e3bd1df158d272190ae90aef48cea6ee17142da2/apps/frontend/src/components/messages/messages.tsx#L147\",children:\"https://github.com/gitroomhq/postiz-app/blob/e3bd1df158d272190ae90aef48cea6ee17142da2/apps/frontend/src/components/messages/messages.tsx#L147\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useMemo#memoizing-a-function\",children:\"https://react.dev/reference/react/useMemo#memoizing-a-function\"})}),`\n`]}),`\n`]})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(o,{...a})}):o(a)}return v(x);})();\n;return Component;"
        },
        "_id": "blog/usememo-usage-in-documenso.mdx",
        "_raw": {
          "sourceFilePath": "blog/usememo-usage-in-documenso.mdx",
          "sourceFileName": "usememo-usage-in-documenso.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/usememo-usage-in-documenso"
        },
        "type": "Doc",
        "slug": "/blog/usememo-usage-in-documenso",
        "slugAsParams": "usememo-usage-in-documenso"
      },
      "documentHash": "1740489186452",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/user-id-in-trpc-context.mdx": {
      "document": {
        "title": "How the userId is added to the tRPC ctx in LobeChat source code?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse how the currently logged-in userId is added to the tRPC ctx by reviewing LobeChat source code. I recommend [reading this tRPC setup](https://trpc.io/docs/client/react/server-components) to relate to the concepts explained in this article.\r\n\r\nBut before that, I want to explain how I found this. I study LobeChat source code and was working on a project that involved tRPC + Supabase in a Next.js app router. I am following the similar codebase architecture to LobeChat’s.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*0aZjm-ITDZYywrCk_rvsSA.png)\r\n\r\nLobeChat uses Clerk for Authentication, the feature I was working required auth wall before making a request to the backend. Since I am following the LobeChat codebase principles, I just had to figure out how LobeChat configured `authedProcedure`.\r\n\r\nWhen reading open-source code, I always use documentation to set my direction, otherwise I would be lost as these projects massive. This way, at the step — [Create a tRPC router](https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router), you will find this code below:\r\n\r\n```js\r\nimport * as trpcNext from '@trpc/server/adapters/next';\r\nimport { appRouter } from '../../../server/routers/_app';\r\n// export API handler\r\n// @link https://trpc.io/docs/v11/server/adapters\r\nexport default trpcNext.createNextApiHandler({\r\n router: appRouter,\r\n createContext: () => ({}),\r\n});\r\n```\r\n\r\n`createContext` in this documentation returns an object but that is not the case with LobeChat’s createContext. createContext is configured when you define your route, this means we should be looking at [trpc/lambda/\\[trpc\\]/route.ts](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts)\r\n\r\n### createContext in LobeChat\r\n\r\nYou will find the createContext in [lambda/\\[trpc\\]/route.ts](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts)[.](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts%29.) This below code is from LobeChat:\r\n\r\n```js\r\nimport { fetchRequestHandler } from '@trpc/server/adapters/fetch';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nimport { pino } from '@/libs/logger';\r\nimport { createContext } from '@/server/context';\r\nimport { lambdaRouter } from '@/server/routers/lambda';\r\n\r\nconst handler = (req: NextRequest) =>\r\n  fetchRequestHandler({\r\n    /**\r\n     * @link https://trpc.io/docs/v11/context\r\n     */\r\n    createContext: () => createContext(req),\r\n\r\n    endpoint: '/trpc/lambda',\r\n\r\n    onError: ({ error, path, type }) => {\r\n      pino.info(`Error in tRPC handler (lambda) on path: ${path}, type: ${type}`);\r\n      console.error(error);\r\n    },\r\n\r\n    req,\r\n    router: lambdaRouter,\r\n  });\r\n\r\nexport { handler as GET, handler as POST };\r\n```\r\n\r\nAs you can see here, `createContext` is imported from `@/server/context`. Let’s now analyse `@/server/context` code. This below source code is picked from [@/server/context](https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19).\r\n\r\n```js\r\n/**\r\n * Creates context for an incoming request\r\n * @link https://trpc.io/docs/v11/context\r\n */\r\nexport const createContext = async (request: NextRequest): Promise<Context> => {\r\n   // for API-response caching see https://trpc.io/docs/v11/caching\r\n  const authorization = request.headers.get(LOBE_CHAT_AUTH_HEADER);\r\n  let userId;\r\n  let auth;\r\n  if (enableClerk) {\r\n    auth = getAuth(request);\r\n    userId = auth.userId;\r\n    return createContextInner({ authorizationHeader: authorization, clerkAuth: auth, userId });\r\n   }\r\n// …\r\n```\r\n\r\nIn this code snippet, if `enableClerk` is true, `createContextInner` is called with `auth` in parameter object. This is it, this is how you set userId in createContext. `userId` is returned by `auth.userId`. `createContext`  \r\nfrom the definition above only has to return object with the context set.\r\n\r\n#### createContextInner function:\r\n\r\nYou will find this below code at [Line 19 in server/context.ts](https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19)\r\n\r\n```js\r\n/**\r\n * Inner function for `createContext` where we create the context.\r\n * This is useful for testing when we don't want to mock Next.js' request/response\r\n */\r\nexport const createContextInner = async (params?: {\r\n authorizationHeader?: string | null;\r\n clerkAuth?: ClerkAuth;\r\n nextAuth?: User;\r\n userId?: string | null;\r\n}): Promise<AuthContext> => ({\r\n authorizationHeader: params?.authorizationHeader,\r\n clerkAuth: params?.clerkAuth,\r\n nextAuth: params?.nextAuth,\r\n userId: params?.userId,\r\n});\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19](https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19)\r\n    \r\n2. [https://github.com/lobehub/lobe-chat/blob/main/src/app/(backend)/trpc/lambda/%5Btrpc%5D/route.ts](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts)\r\n    \r\n3. [https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router](https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router)\r\n    \r\n4. [https://trpc.io/docs/client/react/server-components](https://trpc.io/docs/client/react/server-components)\r\n",
          "code": "var Component=(()=>{var d=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),g=(n,e)=>{for(var r in e)s(n,r,{get:e[r],enumerable:!0})},t=(n,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(n,c)&&c!==r&&s(n,c,{get:()=>e[c],enumerable:!(o=p(e,c))||o.enumerable});return n};var f=(n,e,r)=>(r=n!=null?d(m(n)):{},t(e||!n||!n.__esModule?s(r,\"default\",{value:n,enumerable:!0}):r,n)),N=n=>t(s({},\"__esModule\",{value:!0}),n);var F=b((k,a)=>{a.exports=_jsx_runtime});var w={};g(w,{default:()=>h,frontmatter:()=>x});var l=f(F()),x={title:\"How the userId is added to the tRPC ctx in LobeChat source code?\"};function i(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we analyse how the currently logged-in userId is added to the tRPC ctx by reviewing LobeChat source code. I recommend \",(0,l.jsx)(e.a,{href:\"https://trpc.io/docs/client/react/server-components\",children:\"reading this tRPC setup\"}),\" to relate to the concepts explained in this article.\"]}),`\n`,(0,l.jsx)(e.p,{children:\"But before that, I want to explain how I found this. I study LobeChat source code and was working on a project that involved tRPC + Supabase in a Next.js app router. I am following the similar codebase architecture to LobeChat\\u2019s.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*0aZjm-ITDZYywrCk_rvsSA.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"LobeChat uses Clerk for Authentication, the feature I was working required auth wall before making a request to the backend. Since I am following the LobeChat codebase principles, I just had to figure out how LobeChat configured \",(0,l.jsx)(e.code,{children:\"authedProcedure\"}),\".\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"When reading open-source code, I always use documentation to set my direction, otherwise I would be lost as these projects massive. This way, at the step\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router\",children:\"Create a tRPC router\"}),\", you will find this code below:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" *\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" trpcNext \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@trpc/server/adapters/next'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" appRouter \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../../server/routers/_app'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" export API handler\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" @link https://trpc.io/docs/v11/server/adapters\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" trpcNext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createNextApiHandler\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" router\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" appRouter\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createContext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({}),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"createContext\"}),\" in this documentation returns an object but that is not the case with LobeChat\\u2019s createContext. createContext is configured when you define your route, this means we should be looking at \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts\",children:\"trpc/lambda/[trpc]/route.ts\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"createcontext-inlobechat\",children:\"createContext in\\xA0LobeChat\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"You will find the createContext in \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts\",children:\"lambda/[trpc]/route.ts\"}),(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts%29.\",children:\".\"}),\" This below code is from LobeChat:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fetchRequestHandler \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@trpc/server/adapters/fetch'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextRequest \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next/server'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" pino \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/libs/logger'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createContext \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/server/context'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" lambdaRouter \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/server/routers/lambda'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" handler\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NextRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  fetchRequestHandler\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    /**\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"     * \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@link\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://trpc.io/docs/v11/context\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    createContext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createContext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    endpoint\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/trpc/lambda'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    onError\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      pino\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"info\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`Error in tRPC handler (lambda) on path: ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}, type: ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    req\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    router\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" lambdaRouter\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" handler \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GET\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" handler \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" POST \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"As you can see here, \",(0,l.jsx)(e.code,{children:\"createContext\"}),\" is imported from \",(0,l.jsx)(e.code,{children:\"@/server/context\"}),\". Let\\u2019s now analyse \",(0,l.jsx)(e.code,{children:\"@/server/context\"}),\" code. This below source code is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19\",children:\"@/server/context\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Creates context for an incoming request\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@link\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://trpc.io/docs/v11/context\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createContext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NextRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Promise\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Context\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" for API-response caching see https://trpc.io/docs/v11/caching\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorization \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"headers\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"LOBE_CHAT_AUTH_HEADER\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" userId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" auth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"enableClerk\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    auth \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    userId \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" auth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"userId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createContextInner\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorizationHeader\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorization\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" clerkAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" auth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" userId \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   }\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" \\u2026\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"In this code snippet, if \",(0,l.jsx)(e.code,{children:\"enableClerk\"}),\" is true, \",(0,l.jsx)(e.code,{children:\"createContextInner\"}),\" is called with \",(0,l.jsx)(e.code,{children:\"auth\"}),\" in parameter object. This is it, this is how you set userId in createContext. \",(0,l.jsx)(e.code,{children:\"userId\"}),\" is returned by \",(0,l.jsx)(e.code,{children:\"auth.userId\"}),\". \",(0,l.jsx)(e.code,{children:\"createContext\"}),(0,l.jsx)(e.br,{}),`\n`,\"from the definition above only has to return object with the context set.\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"createcontextinner-function\",children:\"createContextInner function:\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"You will find this below code at \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19\",children:\"Line 19 in server/context.ts\"})]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Inner function for `createContext` where we create the context.\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * This is useful for testing when we don't want to mock Next.js' request/response\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createContextInner \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" async \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"params\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorizationHeader?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"|\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" clerkAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ClerkAuth;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" User;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" userId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"|\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Promise\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"AuthContext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorizationHeader\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" params\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"authorizationHeader\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" clerkAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" params\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"clerkAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" params\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" userId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" params\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"userId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/(backend)/trpc/lambda/%5Btrpc%5D/route.ts\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router\",children:\"https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://trpc.io/docs/client/react/server-components\",children:\"https://trpc.io/docs/client/react/server-components\"})}),`\n`]}),`\n`]})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return N(w);})();\n;return Component;"
        },
        "_id": "blog/user-id-in-trpc-context.mdx",
        "_raw": {
          "sourceFilePath": "blog/user-id-in-trpc-context.mdx",
          "sourceFileName": "user-id-in-trpc-context.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/user-id-in-trpc-context"
        },
        "type": "Doc",
        "slug": "/blog/user-id-in-trpc-context",
        "slugAsParams": "user-id-in-trpc-context"
      },
      "documentHash": "1740489186455",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/usesyncexternalstore-in-tiptap.mdx": {
      "document": {
        "title": "useSyncExternalStore usage in TipTap source code\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review [useSyncExternalStore](https://react.dev/reference/react/useSyncExternalStore) usage in TipTap. \r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*SZu_B0RXKLINGiZeGAdeTw.png)\r\n\r\nI found `useSyncExternalStore` is used in 3 files:\r\n\r\n* [EditorContent.tsx](https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/EditorContent.tsx#L32)\r\n    \r\n* [useEditorState.ts](https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/useEditorState.ts#L162)\r\n    \r\n* [useEditor.ts](https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/useEditor.ts#L345)\r\n    \r\n\r\nBefore we look at these files, let’s learn what is useSyncExternalStore.\r\n\r\n### useSyncExternalStore\r\n\r\n[`useSyncExternalStore`](https://react.dev/reference/react/useSyncExternalStore) is a React Hook that lets you subscribe to an external store.\r\n\r\nRead more about [useSyncExternalStore](https://react.dev/reference/react/useSyncExternalStore).\r\n\r\n```js\r\nconst snapshot = useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)\r\n```\r\n\r\n### EditorContent.tsx\r\n\r\n```js\r\nimport { useSyncExternalStore } from 'use-sync-external-store/shim'\r\n...\r\n/**\r\n * This component renders all of the editor's node views.\r\n */\r\nconst Portals: React.FC<{ contentComponent: ContentComponent }> = ({\r\n  contentComponent,\r\n}) => {\r\n  // For performance reasons, we render the node view portals on state changes only\r\n  const renderers = useSyncExternalStore(\r\n    contentComponent.subscribe,\r\n    contentComponent.getSnapshot,\r\n    contentComponent.getServerSnapshot,\r\n  )\r\n\r\n  // This allows us to directly render the portals without any additional wrapper\r\n  return (\r\n    <>\r\n      {Object.values(renderers)}\r\n    </>\r\n  )\r\n}\r\n```\r\n\r\nPay attention to the comment in this above code snippet:\r\n\r\n> For performance reasons, we render the node view portals on state changes only\r\n\r\n### useEditorState.ts\r\n\r\n```js\r\nimport { useSyncExternalStoreWithSelector } from 'use-sync-external-store/shim/with-selector'\r\n...\r\n/**\r\n * This hook allows you to watch for changes on the editor instance.\r\n * It will allow you to select a part of the editor state and re-render the component when it changes.\r\n * @example\r\n * ```tsx\r\n * const editor = useEditor({...options})\r\n * const { currentSelection } = useEditorState({\r\n *  editor,\r\n *  selector: snapshot => ({ currentSelection: snapshot.editor.state.selection }),\r\n * })\r\n */\r\nexport function useEditorState<TSelectorResult>(\r\n  options: UseEditorStateOptions<TSelectorResult, Editor> | UseEditorStateOptions<TSelectorResult, Editor | null>,\r\n): TSelectorResult | null {\r\n  const [editorStateManager] = useState(() => new EditorStateManager(options.editor))\r\n\r\n  // Using the `useSyncExternalStore` hook to sync the editor instance with the component state\r\n  const selectedState = useSyncExternalStoreWithSelector(\r\n    editorStateManager.subscribe,\r\n    editorStateManager.getSnapshot,\r\n    editorStateManager.getServerSnapshot,\r\n    options.selector as UseEditorStateOptions<TSelectorResult, Editor | null>['selector'],\r\n    options.equalityFn ?? deepEqual,\r\n  )\r\n\r\n  useIsomorphicLayoutEffect(() => {\r\n    return editorStateManager.watch(options.editor)\r\n  }, [options.editor, editorStateManager])\r\n\r\n  useDebugValue(selectedState)\r\n\r\n  return selectedState\r\n}\r\n```\r\n\r\n> Using the `useSyncExternalStore` hook to sync the editor instance with the component state\r\n\r\nIn the `EditorContent.tsx`, the import was from `use-sync-external-store/shim` but here in this useEditorState, import is from `use-sync-external-store/shim/with-selector`.\r\n\r\n### useEditor.ts\r\n\r\n```js\r\nimport { useSyncExternalStore } from 'use-sync-external-store/shim'\r\n...\r\nexport function useEditor(\r\n  options: UseEditorOptions = {},\r\n  deps: DependencyList = [],\r\n): Editor | null {\r\n  const mostRecentOptions = useRef(options)\r\n\r\n  mostRecentOptions.current = options\r\n\r\n  const [instanceManager] = useState(() => new EditorInstanceManager(mostRecentOptions))\r\n\r\n  const editor = useSyncExternalStore(\r\n    instanceManager.subscribe,\r\n    instanceManager.getEditor,\r\n    instanceManager.getServerSnapshot,\r\n  )\r\n\r\n  useDebugValue(editor)\r\n```\r\n\r\nHere the external store is instanceManager.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [useSyncExternalStore&type=code](https://github.com/search?q=repo%3Aueberdosis%2Ftiptap%20useSyncExternalStore&type=code)\r\n    \r\n2. [packages/react/src/EditorContent.tsx#L32](https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/EditorContent.tsx#L32)\r\n    \r\n3. [packages/react/src/useEditorState.ts#L162](https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/useEditorState.ts#L162)\r\n    \r\n4. [packages/react/src/useEditor.ts#L345](https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/useEditor.ts#L345)\r\n    \r\n5. [https://react.dev/reference/react/useSyncExternalStore](https://react.dev/reference/react/useSyncExternalStore)",
          "code": "var Component=(()=>{var h=Object.create;var c=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),f=(l,e)=>{for(var s in e)c(l,s,{get:e[s],enumerable:!0})},t=(l,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of y(e))!u.call(l,r)&&r!==s&&c(l,r,{get:()=>e[r],enumerable:!(o=p(e,r))||o.enumerable});return l};var S=(l,e,s)=>(s=l!=null?h(m(l)):{},t(e||!l||!l.__esModule?c(s,\"default\",{value:l,enumerable:!0}):s,l)),b=l=>t(c({},\"__esModule\",{value:!0}),l);var F=g((w,a)=>{a.exports=_jsx_runtime});var E={};f(E,{default:()=>d,frontmatter:()=>N});var n=S(F()),N={title:\"useSyncExternalStore usage in TipTap source\\xA0code\"};function i(l){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will review \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useSyncExternalStore\",children:\"useSyncExternalStore\"}),\" usage in TipTap.\\xA0\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*SZu_B0RXKLINGiZeGAdeTw.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I found \",(0,n.jsx)(e.code,{children:\"useSyncExternalStore\"}),\" is used in 3 files:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/EditorContent.tsx#L32\",children:\"EditorContent.tsx\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/useEditorState.ts#L162\",children:\"useEditorState.ts\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/useEditor.ts#L345\",children:\"useEditor.ts\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Before we look at these files, let\\u2019s learn what is useSyncExternalStore.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"usesyncexternalstore\",children:\"useSyncExternalStore\"}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useSyncExternalStore\",children:(0,n.jsx)(e.code,{children:\"useSyncExternalStore\"})}),\" is a React Hook that lets you subscribe to an external store.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useSyncExternalStore\",children:\"useSyncExternalStore\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" snapshot \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useSyncExternalStore\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"subscribe\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getSnapshot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getServerSnapshot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\")\"})]})})})}),`\n`,(0,n.jsx)(e.h3,{id:\"editorcontenttsx\",children:\"EditorContent.tsx\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useSyncExternalStore \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'use-sync-external-store/shim'\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * This component renders all of the editor's node views.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Portals\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" React\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"FC\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<{\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" contentComponent\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" ContentComponent\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  contentComponent\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" For performance reasons, we render the node view portals on state changes only\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" renderers \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useSyncExternalStore\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    contentComponent\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"subscribe\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    contentComponent\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getSnapshot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    contentComponent\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getServerSnapshot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" This allows us to directly render the portals without any additional wrapper\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    <>\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"values\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"renderers\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")}\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    </>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Pay attention to the comment in this above code snippet:\"}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:\"For performance reasons, we render the node view portals on state changes only\"}),`\n`]}),`\n`,(0,n.jsx)(e.h3,{id:\"useeditorstatets\",children:\"useEditorState.ts\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useSyncExternalStoreWithSelector \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'use-sync-external-store/shim/with-selector'\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * This hook allows you to watch for changes on the editor instance.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * It will allow you to select a part of the editor state and re-render the component when it changes.\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@example\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * ```tsx\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * const editor = useEditor({...options})\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * const { currentSelection } = useEditorState({\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" *  editor,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" *  selector: snapshot => ({ currentSelection: snapshot.editor.state.selection }),\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * })\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" useEditorState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TSelectorResult\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" UseEditorStateOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TSelectorResult\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" UseEditorStateOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TSelectorResult\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">,\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TSelectorResult\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"editorStateManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" EditorStateManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Using the `useSyncExternalStore` hook to sync the editor instance with the component state\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" selectedState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useSyncExternalStoreWithSelector\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    editorStateManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"subscribe\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    editorStateManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getSnapshot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    editorStateManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getServerSnapshot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"selector \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" UseEditorStateOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TSelectorResult\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'selector'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"],\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"equalityFn \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" deepEqual\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  useIsomorphicLayoutEffect\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" editorStateManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"watch\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  },\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" editorStateManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"])\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  useDebugValue\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"selectedState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" selectedState\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Using the \",(0,n.jsx)(e.code,{children:\"useSyncExternalStore\"}),\" hook to sync the editor instance with the component state\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.code,{children:\"EditorContent.tsx\"}),\", the import was from \",(0,n.jsx)(e.code,{children:\"use-sync-external-store/shim\"}),\" but here in this useEditorState, import is from \",(0,n.jsx)(e.code,{children:\"use-sync-external-store/shim/with-selector\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"useeditorts\",children:\"useEditor.ts\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useSyncExternalStore \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'use-sync-external-store/shim'\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"...\"})}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" function\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" useEditor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" UseEditorOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {},\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  deps\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" DependencyList\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [],\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" |\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" null \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" mostRecentOptions \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useRef\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"options\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  mostRecentOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"current \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"instanceManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(()\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" EditorInstanceManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"mostRecentOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" editor \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useSyncExternalStore\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    instanceManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"subscribe\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    instanceManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getEditor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    instanceManager\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"getServerSnapshot\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  useDebugValue\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"editor\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Here the external store is instanceManager.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Aueberdosis%2Ftiptap%20useSyncExternalStore&type=code\",children:\"useSyncExternalStore&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/EditorContent.tsx#L32\",children:\"packages/react/src/EditorContent.tsx#L32\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/useEditorState.ts#L162\",children:\"packages/react/src/useEditorState.ts#L162\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/ueberdosis/tiptap/blob/4d9cc0519f7d4d3df69cd2d6839718a9ac92244c/packages/react/src/useEditor.ts#L345\",children:\"packages/react/src/useEditor.ts#L345\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useSyncExternalStore\",children:\"https://react.dev/reference/react/useSyncExternalStore\"})}),`\n`]}),`\n`]})]})}function d(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(i,{...l})}):i(l)}return b(E);})();\n;return Component;"
        },
        "_id": "blog/usesyncexternalstore-in-tiptap.mdx",
        "_raw": {
          "sourceFilePath": "blog/usesyncexternalstore-in-tiptap.mdx",
          "sourceFileName": "usesyncexternalstore-in-tiptap.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/usesyncexternalstore-in-tiptap"
        },
        "type": "Doc",
        "slug": "/blog/usesyncexternalstore-in-tiptap",
        "slugAsParams": "usesyncexternalstore-in-tiptap"
      },
      "documentHash": "1740489186456",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/useSyncExternalStoreExports-in-Zustand.mdx": {
      "document": {
        "title": "useSyncExternalStoreExports in Zustand source code explained.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will look at how Zustand uses `useSyncExternalStoreExports` in its [source code.](https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L44)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*clGskdPnb_vycCWlYYcq5A.png)\r\n\r\n`useSyncExternalStoreExports` is imported from [use-sync-external-store/shim/with-selector](https://www.npmjs.com/package/use-sync-external-store). use-sync-external-store is a backwards-compatible shim for [`React.useSyncExternalStore`](https://reactjs.org/docs/hooks-reference.html#usesyncexternalstore) Works with any React that supports Hooks.\r\n\r\nReading the above sentence, you might be wondering what a useSyncExternalStore.\r\n\r\n# **useSyncExternalStore**\r\n\r\n[`useSyncExternalStore`](https://react.dev/reference/react/useSyncExternalStore) is a React Hook that lets you subscribe to an external store.\r\n\r\n```plaintext\r\nconst snapshot = useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)\r\n```\r\n\r\nUse the useSyncExternalStore to read a value from external store that can be:\r\n\r\n1. Third-party state management libraries that hold state outside of React.\r\n    \r\n2. Browser APIs that expose a mutable value and events to subscribe to its changes.\r\n    \r\n\r\n## **Example usage:**\r\n\r\n```plaintext\r\nimport { useSyncExternalStore } from 'react';\r\nimport { todosStore } from './todoStore.js';\r\n\r\nfunction TodosApp() {\r\n  const todos = useSyncExternalStore(todosStore.subscribe, todosStore.getSnapshot);\r\n  // ...\r\n}\r\n```\r\n\r\nThe above example is picked from [React docs](https://react.dev/reference/react/useSyncExternalStore#subscribing-to-an-external-store).\r\n\r\n# **useSyncExternalStore Usage In Zustand:**\r\n\r\nZustand uses `useSyncExternalStore` in [src/traditional.ts](https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L44).\r\n\r\n```plaintext\r\nimport ReactExports from 'react'\r\n// eslint-disable-next-line import/extensions\r\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector'\r\nimport { createStore } from './vanilla.ts'\r\nimport type {\r\n  Mutate,\r\n  StateCreator,\r\n  StoreApi,\r\n  StoreMutatorIdentifier,\r\n} from './vanilla.ts'\r\n\r\nconst { useDebugValue } = ReactExports\r\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports\r\n```\r\n\r\n`useSyncExternalStoreWithSelector` is de-structured from `useSyncExternalStoreExports` and this is used in `useStoreWithEqualityFn`.\r\n\r\n```plaintext\r\nexport function useStoreWithEqualityFn<TState, StateSlice>(\r\n  api: ReadonlyStoreApi<TState>,\r\n  selector: (state: TState) => StateSlice = identity as any,\r\n  equalityFn?: (a: StateSlice, b: StateSlice) => boolean,\r\n) {\r\n  const slice = useSyncExternalStoreWithSelector(\r\n    api.subscribe,\r\n    api.getState,\r\n    api.getInitialState,\r\n    selector,\r\n    equalityFn,\r\n  )\r\n  useDebugValue(slice)\r\n  return slice\r\n}\r\n```\r\n\r\nuseSyncExternalStoreWithSelector has api.subscribe, api.getState, api.getInitialState, selector and equalityFn.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L44](https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L44)\r\n    \r\n2. [https://www.npmjs.com/package/use-sync-external-store](https://www.npmjs.com/package/use-sync-external-store)\r\n    \r\n3. [https://legacy.reactjs.org/docs/hooks-reference.html#usesyncexternalstore](https://legacy.reactjs.org/docs/hooks-reference.html#usesyncexternalstore)\r\n    \r\n4. [https://react.dev/reference/react/useSyncExternalStore](https://react.dev/reference/react/useSyncExternalStore)\r\n    \r\n5. [https://github.com/reactwg/react-18/discussions/86](https://github.com/reactwg/react-18/discussions/86)\r\n    \r\n\r\n[  \r\n](https://medium.com/tag/javascript?source=post_page-----5b92cc0f3bf8---------------javascript-----------------)\r\n",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var x=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),y=(t,e)=>{for(var a in e)s(t,a,{get:e[a],enumerable:!0})},i=(t,e,a,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!S.call(t,r)&&r!==a&&s(t,r,{get:()=>e[r],enumerable:!(c=m(e,r))||c.enumerable});return t};var f=(t,e,a)=>(a=t!=null?p(g(t)):{},i(e||!t||!t.__esModule?s(a,\"default\",{value:t,enumerable:!0}):a,t)),b=t=>i(s({},\"__esModule\",{value:!0}),t);var h=x((k,l)=>{l.exports=_jsx_runtime});var E={};y(E,{default:()=>d,frontmatter:()=>N});var n=f(h()),N={title:\"useSyncExternalStoreExports in Zustand source code explained.\"};function o(t){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we will look at how Zustand uses \",(0,n.jsx)(e.code,{children:\"useSyncExternalStoreExports\"}),\" in its \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L44\",children:\"source code.\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*clGskdPnb_vycCWlYYcq5A.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useSyncExternalStoreExports\"}),\" is imported from \",(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/use-sync-external-store\",children:\"use-sync-external-store/shim/with-selector\"}),\". use-sync-external-store is a backwards-compatible shim for \",(0,n.jsx)(e.a,{href:\"https://reactjs.org/docs/hooks-reference.html#usesyncexternalstore\",children:(0,n.jsx)(e.code,{children:\"React.useSyncExternalStore\"})}),\" Works with any React that supports Hooks.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Reading the above sentence, you might be wondering what a useSyncExternalStore.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"usesyncexternalstore\",children:(0,n.jsx)(e.strong,{children:\"useSyncExternalStore\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useSyncExternalStore\",children:(0,n.jsx)(e.code,{children:\"useSyncExternalStore\"})}),\" is a React Hook that lets you subscribe to an external store.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const snapshot = useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"Use the useSyncExternalStore to read a value from external store that can be:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Third-party state management libraries that hold state outside of React.\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Browser APIs that expose a mutable value and events to subscribe to its changes.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"example-usage\",children:(0,n.jsx)(e.strong,{children:\"Example usage:\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { useSyncExternalStore } from 'react';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { todosStore } from './todoStore.js';\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"function TodosApp() {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const todos = useSyncExternalStore(todosStore.subscribe, todosStore.getSnapshot);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // ...\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The above example is picked from \",(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useSyncExternalStore#subscribing-to-an-external-store\",children:\"React docs\"}),\".\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"usesyncexternalstore-usage-in-zustand\",children:(0,n.jsx)(e.strong,{children:\"useSyncExternalStore Usage In Zustand:\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Zustand uses \",(0,n.jsx)(e.code,{children:\"useSyncExternalStore\"}),\" in \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L44\",children:\"src/traditional.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import ReactExports from 'react'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// eslint-disable-next-line import/extensions\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import { createStore } from './vanilla.ts'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"import type {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  Mutate,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  StateCreator,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  StoreApi,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  StoreMutatorIdentifier,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"} from './vanilla.ts'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const { useDebugValue } = ReactExports\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"const { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"useSyncExternalStoreWithSelector\"}),\" is de-structured from \",(0,n.jsx)(e.code,{children:\"useSyncExternalStoreExports\"}),\" and this is used in \",(0,n.jsx)(e.code,{children:\"useStoreWithEqualityFn\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function useStoreWithEqualityFn<TState, StateSlice>(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  api: ReadonlyStoreApi<TState>,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  selector: (state: TState) => StateSlice = identity as any,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  equalityFn?: (a: StateSlice, b: StateSlice) => boolean,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\") {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  const slice = useSyncExternalStoreWithSelector(\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.subscribe,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.getState,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    api.getInitialState,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    selector,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    equalityFn,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  )\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  useDebugValue(slice)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return slice\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"useSyncExternalStoreWithSelector has api.subscribe, api.getState, api.getInitialState, selector and equalityFn.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L44\",children:\"https://github.com/pmndrs/zustand/blob/main/src/traditional.ts#L44\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://www.npmjs.com/package/use-sync-external-store\",children:\"https://www.npmjs.com/package/use-sync-external-store\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://legacy.reactjs.org/docs/hooks-reference.html#usesyncexternalstore\",children:\"https://legacy.reactjs.org/docs/hooks-reference.html#usesyncexternalstore\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://react.dev/reference/react/useSyncExternalStore\",children:\"https://react.dev/reference/react/useSyncExternalStore\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/reactwg/react-18/discussions/86\",children:\"https://github.com/reactwg/react-18/discussions/86\"})}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsxs)(e.a,{href:\"https://medium.com/tag/javascript?source=post_page-----5b92cc0f3bf8---------------javascript-----------------\",children:[(0,n.jsx)(e.br,{}),`\n`]})})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(o,{...t})}):o(t)}return b(E);})();\n;return Component;"
        },
        "_id": "blog/useSyncExternalStoreExports-in-Zustand.mdx",
        "_raw": {
          "sourceFilePath": "blog/useSyncExternalStoreExports-in-Zustand.mdx",
          "sourceFileName": "useSyncExternalStoreExports-in-Zustand.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/useSyncExternalStoreExports-in-Zustand"
        },
        "type": "Doc",
        "slug": "/blog/useSyncExternalStoreExports-in-Zustand",
        "slugAsParams": "useSyncExternalStoreExports-in-Zustand"
      },
      "documentHash": "1740489186446",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/WeakMap-in-react-scan.mdx": {
      "document": {
        "title": "WeakMap in react-scan vs next-mdx source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review the below code snippet picked from [react-scan source code](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/instrumentation.ts#L125).\r\n\r\n```plaintext\r\nconst cache = new WeakMap<object, string>();\r\n\r\nexport function fastSerialize(value: unknown, depth = 0): string {\r\n  ...\r\n  if (value === null) return 'null';\r\n\r\n  if (cache.has(value)) {\r\n    const cached = cache.get(value);\r\n    if (cached !== undefined) {\r\n      return cached;\r\n    }\r\n  }\r\n```\r\n\r\nThis is picked from a file, [instrumentation.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/instrumentation.ts#L125).\r\n\r\nThis is the second time I am writing about WeakMap. Previously, I wrote an article about [WeakMap in JavaScript](https://medium.com/@ramu.narasinga_61050/lessons-from-opensource-weakmap-in-javascript-d7882bbf01f7) and this was a review about a code snippet from [next-mdx source code](https://github.com/vercel/next.js/blob/d01d6d9c35a8c2725b3d74c1402ab76d4779a6cf/packages/next-mdx/mdx-rs-loader.js#L21) and the code looks like below:\r\n\r\n```plaintext\r\nconst cache = new WeakMap()\r\n\r\n/**\r\n * A webpack loader for mdx-rs. This is largely based on existing @mdx-js/loader,\r\n * replaces internal compilation logic to use mdx-rs instead.\r\n */\r\nfunction loader(value, bindings, callback) {\r\n  ...\r\n  const compiler = this._compiler || marker\r\n\r\n  let map = cache.get(compiler)\r\n\r\n  if (!map) {\r\n    map = new Map()\r\n    cache.set(compiler, map)\r\n  }\r\n...\r\n```\r\n\r\nWhat’s one thing that’s common here? cache….\r\n\r\nBelow is how cache is initialized in react-scan source code:\r\n\r\n```plaintext\r\nconst cache = new WeakMap<object, string>();\r\n```\r\n\r\nBelow is how cache is initialized in next-mdx source code\r\n\r\n```plaintext\r\nconst cache = new WeakMap()\r\n```\r\n\r\nWell, there is types in the react-scan source code.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*lV-WiaxBu7Z5gevwBnEBtg.png)\r\n\r\n### WeakMap\r\n\r\nA `WeakMap` is a collection of key/value pairs whose keys must be objects or [non-registered symbols](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#shared_symbols_in_the_global_symbol_registry), with values of any arbitrary [JavaScript type](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Data_structures), and which does not create strong references to its keys. That is, an object's presence as a key in a `WeakMap` does not prevent the object from being garbage collected. Once an object used as a key has been collected, its corresponding values in any `WeakMap` become candidates for garbage collection as well — as long as they aren't strongly referred to elsewhere. The only primitive type that can be used as a `WeakMap` key is symbol — more specifically, [non-registered symbols](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#shared_symbols_in_the_global_symbol_registry) — because non-registered symbols are guaranteed to be unique and cannot be re-created.\r\n\r\nRead more about [WeakMap](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap).\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/instrumentation.ts#L125](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/instrumentation.ts#L125)\r\n    \r\n2. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/WeakMap](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap)\r\n    \r\n3. [https://medium.com/@ramu.narasinga\\_61050/lessons-from-opensource-weakmap-in-javascript-d7882bbf01f7](https://medium.com/@ramu.narasinga_61050/lessons-from-opensource-weakmap-in-javascript-d7882bbf01f7)",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),y=(n,e)=>{for(var c in e)i(n,c,{get:e[c],enumerable:!0})},t=(n,e,c,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!b.call(n,r)&&r!==c&&i(n,r,{get:()=>e[r],enumerable:!(s=m(e,r))||s.enumerable});return n};var k=(n,e,c)=>(c=n!=null?p(g(n)):{},t(e||!n||!n.__esModule?i(c,\"default\",{value:n,enumerable:!0}):c,n)),v=n=>t(i({},\"__esModule\",{value:!0}),n);var d=f((_,l)=>{l.exports=_jsx_runtime});var x={};y(x,{default:()=>o,frontmatter:()=>w});var a=k(d()),w={title:\"WeakMap in react-scan vs next-mdx source\\xA0code.\"};function h(n){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:[\"In this article, we will review the below code snippet picked from \",(0,a.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/instrumentation.ts#L125\",children:\"react-scan source code\"}),\".\"]}),`\n`,(0,a.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"const cache = new WeakMap<object, string>();\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"export function fastSerialize(value: unknown, depth = 0): string {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  ...\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  if (value === null) return 'null';\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  if (cache.has(value)) {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    const cached = cache.get(value);\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    if (cached !== undefined) {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"      return cached;\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    }\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  }\"})})]})})}),`\n`,(0,a.jsxs)(e.p,{children:[\"This is picked from a file, \",(0,a.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/instrumentation.ts#L125\",children:\"instrumentation.ts\"}),\".\"]}),`\n`,(0,a.jsxs)(e.p,{children:[\"This is the second time I am writing about WeakMap. Previously, I wrote an article about \",(0,a.jsx)(e.a,{href:\"https://medium.com/@ramu.narasinga_61050/lessons-from-opensource-weakmap-in-javascript-d7882bbf01f7\",children:\"WeakMap in JavaScript\"}),\" and this was a review about a code snippet from \",(0,a.jsx)(e.a,{href:\"https://github.com/vercel/next.js/blob/d01d6d9c35a8c2725b3d74c1402ab76d4779a6cf/packages/next-mdx/mdx-rs-loader.js#L21\",children:\"next-mdx source code\"}),\" and the code looks like below:\"]}),`\n`,(0,a.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"const cache = new WeakMap()\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"/**\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\" * A webpack loader for mdx-rs. This is largely based on existing @mdx-js/loader,\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\" * replaces internal compilation logic to use mdx-rs instead.\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\" */\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"function loader(value, bindings, callback) {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  ...\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  const compiler = this._compiler || marker\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  let map = cache.get(compiler)\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  if (!map) {\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    map = new Map()\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"    cache.set(compiler, map)\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"...\"})})]})})}),`\n`,(0,a.jsx)(e.p,{children:\"What\\u2019s one thing that\\u2019s common here? cache\\u2026.\"}),`\n`,(0,a.jsx)(e.p,{children:\"Below is how cache is initialized in react-scan source code:\"}),`\n`,(0,a.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"const cache = new WeakMap<object, string>();\"})})})})}),`\n`,(0,a.jsx)(e.p,{children:\"Below is how cache is initialized in next-mdx source code\"}),`\n`,(0,a.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,a.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,a.jsx)(e.span,{className:\"line\",children:(0,a.jsx)(e.span,{children:\"const cache = new WeakMap()\"})})})})}),`\n`,(0,a.jsx)(e.p,{children:\"Well, there is types in the react-scan source code.\"}),`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*lV-WiaxBu7Z5gevwBnEBtg.png\",alt:\"\"})}),`\n`,(0,a.jsx)(e.h3,{id:\"weakmap\",children:\"WeakMap\"}),`\n`,(0,a.jsxs)(e.p,{children:[\"A \",(0,a.jsx)(e.code,{children:\"WeakMap\"}),\" is a collection of key/value pairs whose keys must be objects or \",(0,a.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#shared_symbols_in_the_global_symbol_registry\",children:\"non-registered symbols\"}),\", with values of any arbitrary \",(0,a.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Data_structures\",children:\"JavaScript type\"}),\", and which does not create strong references to its keys. That is, an object's presence as a key in a \",(0,a.jsx)(e.code,{children:\"WeakMap\"}),\" does not prevent the object from being garbage collected. Once an object used as a key has been collected, its corresponding values in any \",(0,a.jsx)(e.code,{children:\"WeakMap\"}),\" become candidates for garbage collection as well\\u200A\\u2014\\u200Aas long as they aren't strongly referred to elsewhere. The only primitive type that can be used as a \",(0,a.jsx)(e.code,{children:\"WeakMap\"}),\" key is symbol\\u200A\\u2014\\u200Amore specifically, \",(0,a.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#shared_symbols_in_the_global_symbol_registry\",children:\"non-registered symbols\"}),\"\\u200A\\u2014\\u200Abecause non-registered symbols are guaranteed to be unique and cannot be re-created.\"]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Read more about \",(0,a.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\",children:\"WeakMap\"}),\".\"]}),`\n`,(0,a.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,a.jsxs)(e.p,{children:[\"Hey, my name is \",(0,a.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.em,{children:(0,a.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,a.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,a.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,a.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,a.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,a.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,a.jsxs)(e.ol,{children:[`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/instrumentation.ts#L125\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/instrumentation.ts#L125\"})}),`\n`]}),`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap\"})}),`\n`]}),`\n`,(0,a.jsxs)(e.li,{children:[`\n`,(0,a.jsx)(e.p,{children:(0,a.jsx)(e.a,{href:\"https://medium.com/@ramu.narasinga_61050/lessons-from-opensource-weakmap-in-javascript-d7882bbf01f7\",children:\"https://medium.com/@ramu.narasinga_61050/lessons-from-opensource-weakmap-in-javascript-d7882bbf01f7\"})}),`\n`]}),`\n`]})]})}function o(n={}){let{wrapper:e}=n.components||{};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(h,{...n})}):h(n)}return v(x);})();\n;return Component;"
        },
        "_id": "blog/WeakMap-in-react-scan.mdx",
        "_raw": {
          "sourceFilePath": "blog/WeakMap-in-react-scan.mdx",
          "sourceFileName": "WeakMap-in-react-scan.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/WeakMap-in-react-scan"
        },
        "type": "Doc",
        "slug": "/blog/WeakMap-in-react-scan",
        "slugAsParams": "WeakMap-in-react-scan"
      },
      "documentHash": "1741609299913",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/WeakSet()-in-react-scan.mdx": {
      "document": {
        "title": "WeakSet() in react-scan source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we review a code snippet from [react-scan source code](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L609).\r\n\r\n```plaintext\r\nexport const ignoredProps = new WeakSet<\r\n  Exclude<ReactNode, undefined | null | string | number | boolean | bigint>\r\n>();\r\n\r\nexport const ignoreScan = (node: ReactNode) => {\r\n  if (node && typeof node === 'object') {\r\n    ignoredProps.add(node);\r\n  }\r\n};\r\n```\r\n\r\nI found this code snippet in a file, [core/index.ts](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L609). Why not use a proper Set? why would react-scan author decide to use WeakSet? To draw some conclusion around that, we first need to understand difference between WeakSet and Set in JavaScript.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*_cUOESQn8Ob47ZrLxtzD9g.png)\r\n\r\n### WeakSet\r\n\r\nA `WeakSet` is a collection of garbage-collectable values, including objects and [non-registered symbols](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#shared_symbols_in_the_global_symbol_registry). A value in the `WeakSet` may only occur once. It is unique in the `WeakSet`'s collection.\r\n\r\nRead more about [WeakSet](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet).\r\n\r\n### Set\r\n\r\nThe `Set` object lets you store unique values of any type, whether [primitive values](https://developer.mozilla.org/en-US/docs/Glossary/Primitive) or object references.\r\n\r\nRead more about Set\r\n\r\n### WeakSet vs Set\r\n\r\nValues of WeakSets must be garbage-collectable. Most [primitive data types](https://developer.mozilla.org/en-US/docs/Glossary/Primitive) can be arbitrarily created and don’t have a lifetime, so they cannot be stored. Objects and [non-registered symbols](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#shared_symbols_in_the_global_symbol_registry) can be stored because they are garbage-collectable.\r\n\r\nThe main differences to the [`Set`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set) object are:\r\n\r\n* `WeakSet`s are collections of objects and symbols only. They cannot contain arbitrary values of any type, as [`Set`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)s can.\r\n    \r\n* The `WeakSet` is *weak*, meaning references to objects in a `WeakSet` are held *weakly*. If no other references to a value stored in the `WeakSet` exist, those values can be garbage collected.\r\n    \r\n\r\nComing back to the code snippet in react-scan\r\n\r\n```plaintext\r\nexport const ignoreScan = (node: ReactNode) => {\r\n  if (node && typeof node === 'object') {\r\n    ignoredProps.add(node);\r\n  }\r\n};\r\n```\r\n\r\nNow it makes sense why typeof node === ‘object’ check is in place. Can you guess why? this is because only Object and Symbols can be stored in the WeakMap that are garbage collectable if they are not referenced elsewhere.\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L609](https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L609)\r\n    \r\n2. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/WeakSet](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet)",
          "code": "var Component=(()=>{var p=Object.create;var c=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),y=(a,e)=>{for(var t in e)c(a,t,{get:e[t],enumerable:!0})},o=(a,e,t,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of b(e))!g.call(a,r)&&r!==t&&c(a,r,{get:()=>e[r],enumerable:!(i=m(e,r))||i.enumerable});return a};var S=(a,e,t)=>(t=a!=null?p(u(a)):{},o(e||!a||!a.__esModule?c(t,\"default\",{value:a,enumerable:!0}):t,a)),k=a=>o(c({},\"__esModule\",{value:!0}),a);var s=f((_,l)=>{l.exports=_jsx_runtime});var j={};y(j,{default:()=>h,frontmatter:()=>v});var n=S(s()),v={title:\"WeakSet() in react-scan source\\xA0code.\"};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we review a code snippet from \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L609\",children:\"react-scan source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const ignoredProps = new WeakSet<\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  Exclude<ReactNode, undefined | null | string | number | boolean | bigint>\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\">();\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const ignoreScan = (node: ReactNode) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (node && typeof node === 'object') {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    ignoredProps.add(node);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I found this code snippet in a file, \",(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L609\",children:\"core/index.ts\"}),\". Why not use a proper Set? why would react-scan author decide to use WeakSet? To draw some conclusion around that, we first need to understand difference between WeakSet and Set in JavaScript.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*_cUOESQn8Ob47ZrLxtzD9g.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h3,{id:\"weakset\",children:\"WeakSet\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"A \",(0,n.jsx)(e.code,{children:\"WeakSet\"}),\" is a collection of garbage-collectable values, including objects and \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#shared_symbols_in_the_global_symbol_registry\",children:\"non-registered symbols\"}),\". A value in the \",(0,n.jsx)(e.code,{children:\"WeakSet\"}),\" may only occur once. It is unique in the \",(0,n.jsx)(e.code,{children:\"WeakSet\"}),\"'s collection.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet\",children:\"WeakSet\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"set\",children:\"Set\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"Set\"}),\" object lets you store unique values of any type, whether \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Glossary/Primitive\",children:\"primitive values\"}),\" or object references.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Read more about Set\"}),`\n`,(0,n.jsx)(e.h3,{id:\"weakset-vsset\",children:\"WeakSet vs\\xA0Set\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Values of WeakSets must be garbage-collectable. Most \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Glossary/Primitive\",children:\"primitive data types\"}),\" can be arbitrarily created and don\\u2019t have a lifetime, so they cannot be stored. Objects and \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol#shared_symbols_in_the_global_symbol_registry\",children:\"non-registered symbols\"}),\" can be stored because they are garbage-collectable.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"The main differences to the \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\",children:(0,n.jsx)(e.code,{children:\"Set\"})}),\" object are:\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"WeakSet\"}),\"s are collections of objects and symbols only. They cannot contain arbitrary values of any type, as \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set\",children:(0,n.jsx)(e.code,{children:\"Set\"})}),\"s can.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"WeakSet\"}),\" is \",(0,n.jsx)(e.em,{children:\"weak\"}),\", meaning references to objects in a \",(0,n.jsx)(e.code,{children:\"WeakSet\"}),\" are held \",(0,n.jsx)(e.em,{children:\"weakly\"}),\". If no other references to a value stored in the \",(0,n.jsx)(e.code,{children:\"WeakSet\"}),\" exist, those values can be garbage collected.\"]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"Coming back to the code snippet in react-scan\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export const ignoreScan = (node: ReactNode) => {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (node && typeof node === 'object') {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    ignoredProps.add(node);\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"Now it makes sense why typeof node === \\u2018object\\u2019 check is in place. Can you guess why? this is because only Object and Symbols can be stored in the WeakMap that are garbage collectable if they are not referenced elsewhere.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L609\",children:\"https://github.com/aidenybai/react-scan/blob/main/packages/scan/src/core/index.ts#L609\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet\"})}),`\n`]}),`\n`]})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return k(j);})();\n;return Component;"
        },
        "_id": "blog/WeakSet()-in-react-scan.mdx",
        "_raw": {
          "sourceFilePath": "blog/WeakSet()-in-react-scan.mdx",
          "sourceFileName": "WeakSet()-in-react-scan.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/WeakSet()-in-react-scan"
        },
        "type": "Doc",
        "slug": "/blog/WeakSet()-in-react-scan",
        "slugAsParams": "WeakSet()-in-react-scan"
      },
      "documentHash": "1741595281217",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/what-is-tnpm-cnpm.mdx": {
      "document": {
        "title": "You are familiar with npm/pnpm but have you heard of tnpm or cnpm?\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "I have written an articles explaining [how to install npm packages programmatically](https://medium.com/@thinkthroo/part-1-how-to-install-npm-packages-programmatically-b35f1a2c0142). There’s a function called [getNpmClient](https://github.com/umijs/umi/blob/master/packages/utils/src/npmClient.ts#L13).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*SmdHCy7BxVLFRVcAmhAlBA.png)\r\n\r\n# **Detect tnpm/cnpm client**\r\n\r\nThis comment below and the code show us how you could detect tnpm/cnpm client.\r\n\r\n```javascript\r\n// detect tnpm/cnpm client\r\n  // all situations:\r\n  //   - npminstall mode + native fs => generate _resolved field in package.json\r\n  //   - npminstall mode + rapid fs => generate .package-lock.json in node_modules\r\n  //   - npm mode + native fs => generate .package-lock.json in node_modules\r\n  //   - npm mode + rapid fs => generate .package-lock.json in node_modules\r\n  // all conditions:\r\n  //   - has _resolved field or .package-lock.json means tnpm/cnpm\r\n  //   - _resolved field or .package-lock.json contains tnpm registry means tnpm\r\n  if (chokidarPkg._resolved) {\r\n    return tnpmRegistries.some((r) => chokidarPkg._resolved.includes(r))\r\n      ? 'tnpm'\r\n      : 'cnpm';\r\n  } else if (existsSync(tcnpmLockPath)) {\r\n    const tcnpmLock = readFileSync(tcnpmLockPath, 'utf-8');\r\n\r\n    return tnpmRegistries.some((r) => tcnpmLock.includes(r)) ? 'tnpm' : 'cnpm';\r\n  }\r\n```\r\n\r\n## **Detect tnpm client**\r\n\r\n> *has \\_resolved field or .package-loc.json means tnpm/cnpm*\r\n\r\nThis comment explains what this below if block is about\r\n\r\n```javascript\r\nif (chokidarPkg._resolved) {\r\n    return tnpmRegistries.some((r) => chokidarPkg._resolved.includes(r))\r\n      ? 'tnpm'\r\n      : 'cnpm';\r\n}\r\n```\r\n\r\n## **Detect tnpm client**\r\n\r\n> *\\- \\_resolved field or .package-lock.json contains tnpm registry means tnpm*\r\n\r\nThis comment above explains the else if block below\r\n\r\n```javascript\r\nelse if (existsSync(tcnpmLockPath)) {\r\n  const tcnpmLock = readFileSync(tcnpmLockPath, 'utf-8');\r\n```\r\n\r\n```javascript\r\n  return tnpmRegistries.some((r) => tcnpmLock.includes(r)) ? 'tnpm' : 'cnpm';\r\n}\r\n```\r\n\r\nThis is the first time I am learning about tnpm or cnpm. I will write an article about these.\r\n\r\nBut what is tnpm or cnpm client?\r\n\r\n# **tnpm Client**\r\n\r\ntnpm is an enterprise service for Alibaba and Ant Group, which is also based on cnpm, with additional enterprise-level customization.\r\n\r\n# **cnpm Client**\r\n\r\n[cnpm](https://github.com/cnpm) is an open-source implementation of npm, which supports mirror synchronization with the official npm registry and private package capabilities.\r\n\r\nThere is an [in-depth of tnpm rapid mode — how tnpm managed to be 10 second faster than pnpm](https://dev.to/atian25/in-depth-of-tnpm-rapid-mode-how-could-we-fast-10s-than-pnpm-3bpp)\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*MPa2-prYc7-XOw3CdOBEbg.png)\r\n\r\nThis article talks in depth about\r\n\r\n1. Why is npm soooo slow?\r\n    \r\n2. What are tnpm and cnpm?\r\n    \r\n3. Optimization results and much more.\r\n    \r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://dev.to/atian25/in-depth-of-tnpm-rapid-mode-how-could-we-fast-10s-than-pnpm-3bpp](https://dev.to/atian25/in-depth-of-tnpm-rapid-mode-how-could-we-fast-10s-than-pnpm-3bpp)\r\n    \r\n2. [https://github.com/cnpm/cnpm](https://github.com/cnpm/cnpm)\r\n    \r\n3. [https://github.com/umijs/umi/blob/packages/utils/src/npmClient.ts#L18](https://github.com/umijs/umi/blob/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/src/npmClient.ts#L18)",
          "code": "var Component=(()=>{var h=Object.create;var s=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),f=(l,e)=>{for(var c in e)s(l,c,{get:e[c],enumerable:!0})},o=(l,e,c,t)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!u.call(l,r)&&r!==c&&s(l,r,{get:()=>e[r],enumerable:!(t=d(e,r))||t.enumerable});return l};var k=(l,e,c)=>(c=l!=null?h(y(l)):{},o(e||!l||!l.__esModule?s(c,\"default\",{value:l,enumerable:!0}):c,l)),b=l=>o(s({},\"__esModule\",{value:!0}),l);var i=g((N,a)=>{a.exports=_jsx_runtime});var w={};f(w,{default:()=>p,frontmatter:()=>v});var n=k(i()),v={title:\"You are familiar with npm/pnpm but have you heard of tnpm or cnpm?\"};function F(l){let e={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h2:\"h2\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I have written an articles explaining \",(0,n.jsx)(e.a,{href:\"https://medium.com/@thinkthroo/part-1-how-to-install-npm-packages-programmatically-b35f1a2c0142\",children:\"how to install npm packages programmatically\"}),\". There\\u2019s a function called \",(0,n.jsx)(e.a,{href:\"https://github.com/umijs/umi/blob/master/packages/utils/src/npmClient.ts#L13\",children:\"getNpmClient\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*SmdHCy7BxVLFRVcAmhAlBA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"detect-tnpmcnpm-client\",children:(0,n.jsx)(e.strong,{children:\"Detect tnpm/cnpm client\"})}),`\n`,(0,n.jsx)(e.p,{children:\"This comment below and the code show us how you could detect tnpm/cnpm client.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" detect tnpm/cnpm client\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" all situations:\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"   - npminstall mode + native fs => generate _resolved field in package.json\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"   - npminstall mode + rapid fs => generate .package-lock.json in node_modules\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"   - npm mode + native fs => generate .package-lock.json in node_modules\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"   - npm mode + rapid fs => generate .package-lock.json in node_modules\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" all conditions:\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"   - has _resolved field or .package-lock.json means tnpm/cnpm\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"   - _resolved field or .package-lock.json contains tnpm registry means tnpm\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"chokidarPkg\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"_resolved\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tnpmRegistries\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"some\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" chokidarPkg\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"_resolved\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'tnpm'\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      :\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'cnpm'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" else\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"existsSync\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"tcnpmLockPath\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tcnpmLock \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" readFileSync\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"tcnpmLockPath\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'utf-8'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tnpmRegistries\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"some\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tcnpmLock\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'tnpm'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'cnpm'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})})]})})}),`\n`,(0,n.jsx)(e.h2,{id:\"detect-tnpm-client\",children:(0,n.jsx)(e.strong,{children:\"Detect tnpm client\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:\"has _resolved field or .package-loc.json means tnpm/cnpm\"})}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"This comment explains what this below if block is about\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"chokidarPkg\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"_resolved\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tnpmRegistries\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"some\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" chokidarPkg\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"_resolved\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'tnpm'\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      :\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'cnpm'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.h2,{id:\"detect-tnpm-client-1\",children:(0,n.jsx)(e.strong,{children:\"Detect tnpm client\"})}),`\n`,(0,n.jsxs)(e.blockquote,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:\"- _resolved field or .package-lock.json contains tnpm registry means tnpm\"})}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"This comment above explains the else if block below\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"else\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" if\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"existsSync\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"tcnpmLockPath\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tcnpmLock \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" readFileSync\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"tcnpmLockPath\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'utf-8'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tnpmRegistries\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"some\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" tcnpmLock\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"includes\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"r\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'tnpm'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" :\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'cnpm'\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"This is the first time I am learning about tnpm or cnpm. I will write an article about these.\"}),`\n`,(0,n.jsx)(e.p,{children:\"But what is tnpm or cnpm client?\"}),`\n`,(0,n.jsx)(e.h1,{id:\"tnpm-client\",children:(0,n.jsx)(e.strong,{children:\"tnpm Client\"})}),`\n`,(0,n.jsx)(e.p,{children:\"tnpm is an enterprise service for Alibaba and Ant Group, which is also based on cnpm, with additional enterprise-level customization.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"cnpm-client\",children:(0,n.jsx)(e.strong,{children:\"cnpm Client\"})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/cnpm\",children:\"cnpm\"}),\" is an open-source implementation of npm, which supports mirror synchronization with the official npm registry and private package capabilities.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"There is an \",(0,n.jsx)(e.a,{href:\"https://dev.to/atian25/in-depth-of-tnpm-rapid-mode-how-could-we-fast-10s-than-pnpm-3bpp\",children:\"in-depth of tnpm rapid mode \\u2014 how tnpm managed to be 10 second faster than pnpm\"})]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*MPa2-prYc7-XOw3CdOBEbg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"This article talks in depth about\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Why is npm soooo slow?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"What are tnpm and cnpm?\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Optimization results and much more.\"}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://dev.to/atian25/in-depth-of-tnpm-rapid-mode-how-could-we-fast-10s-than-pnpm-3bpp\",children:\"https://dev.to/atian25/in-depth-of-tnpm-rapid-mode-how-could-we-fast-10s-than-pnpm-3bpp\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/cnpm/cnpm\",children:\"https://github.com/cnpm/cnpm\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/umijs/umi/blob/9c3194d0617276fbecd09d19a8cff606fcaac82d/packages/utils/src/npmClient.ts#L18\",children:\"https://github.com/umijs/umi/blob/packages/utils/src/npmClient.ts#L18\"})}),`\n`]}),`\n`]})]})}function p(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(F,{...l})}):F(l)}return b(w);})();\n;return Component;"
        },
        "_id": "blog/what-is-tnpm-cnpm.mdx",
        "_raw": {
          "sourceFilePath": "blog/what-is-tnpm-cnpm.mdx",
          "sourceFileName": "what-is-tnpm-cnpm.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/what-is-tnpm-cnpm"
        },
        "type": "Doc",
        "slug": "/blog/what-is-tnpm-cnpm",
        "slugAsParams": "what-is-tnpm-cnpm"
      },
      "documentHash": "1740489186459",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/withAlpha-utility-in-Tailwind.mdx": {
      "document": {
        "title": "withAlpha utility in Tailwind CSS source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we analyse [withAlpha utitlity function](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utilities.ts#L108-L123) in Tailwind CSS source code.\r\n\r\n```plaintext\r\n/**\r\n * Apply opacity to a color using `color-mix`.\r\n */\r\nexport function withAlpha(value: string, alpha: string): string {\r\n  if (alpha === null) return value\r\n\r\n  // Convert numeric values (like `0.5`) to percentages (like `50%`) so they\r\n  // work properly with `color-mix`. Assume anything that isn't a number is\r\n  // safe to pass through as-is, like `var(--my-opacity)`.\r\n  let alphaAsNumber = Number(alpha)\r\n  if (!Number.isNaN(alphaAsNumber)) {\r\n    alpha = `${alphaAsNumber * 100}%`\r\n  }\r\n\r\n  // If the alpha value is a percentage, we can pass it directly to\r\n  // `color-mix()`. In any other case, e.g.: `var(…)`, `round(…)`, … we need to\r\n  // make sure it's a percentage.\r\n  else if (alpha[alpha.length - 1] !== '%') {\r\n    alpha = `calc(${alpha} * 100%)`\r\n  }\r\n\r\n  return `color-mix(in srgb, ${value} ${alpha}, transparent)`\r\n}\r\n```\r\n\r\nThe beauty about this utility function is that it comes with comments explaining what the code does.\r\n\r\n```plaintext\r\n// Convert numeric values (like `0.5`) to percentages (like `50%`) so they\r\n// work properly with `color-mix`. Assume anything that isn't a number is\r\n// safe to pass through as-is, like `var(--my-opacity)`.\r\nlet alphaAsNumber = Number(alpha)\r\nif (!Number.isNaN(alphaAsNumber)) {\r\n  alpha = `${alphaAsNumber * 100}%`\r\n}\r\n```\r\n\r\nFirst the alpha is converted to Number, withAlpha accepts `alpha` as a string and is assigned to a variable named `alphaAsNumber`\r\n\r\nif alphaAsNumber is not a number, then this is converted to % by multiplying it with \\* 100.\r\n\r\n```plaintext\r\n// If the alpha value is a percentage, we can pass it directly to\r\n// `color-mix()`. In any other case, e.g.: `var(…)`, `round(…)`, … we need to\r\n// make sure it's a percentage.\r\nelse if (alpha[alpha.length - 1] !== '%') {\r\n  alpha = `calc(${alpha} * 100%)`\r\n}\r\n```\r\n\r\nThe way this above code snippet ensures that alpha value is a percentage is by checking if the item at last index is ‘%’, otherwise, it is multiplied with `*100%`.\r\n\r\nand finally color-mix is returned.\r\n\r\n```plaintext\r\nreturn `color-mix(in srgb, ${value} ${alpha}, transparent)`\r\n```\r\n\r\nbut you might be wondering what a color-mix is.\r\n\r\n# **color-mix**\r\n\r\nThe `color-mix()` functional notation takes two [`<color>`](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value) values and returns the result of mixing them in a given colorspace by a given amount. — [MDN documentation](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix).\r\n\r\n![](https://miro.medium.com/v2/resize:fit:875/1*TOWU7KHZMiOGjWdnSs5rfA.png)\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n# **References:**\r\n\r\n1. [https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utilities.ts#L108-L123](https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utilities.ts#L108-L123)\r\n    \r\n2. [https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/design-system.ts#L136](https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/design-system.ts#L136)\r\n    \r\n3. [https://developer.mozilla.org/en-US/docs/Web/CSS/color\\_value/color-mix](https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix)\r\n",
          "code": "var Component=(()=>{var o=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),N=(a,e)=>{for(var i in e)t(a,i,{get:e[i],enumerable:!0})},r=(a,e,i,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of u(e))!b.call(a,l)&&l!==i&&t(a,l,{get:()=>e[l],enumerable:!(s=m(e,l))||s.enumerable});return a};var w=(a,e,i)=>(i=a!=null?o(g(a)):{},r(e||!a||!a.__esModule?t(i,\"default\",{value:a,enumerable:!0}):i,a)),y=a=>r(t({},\"__esModule\",{value:!0}),a);var h=f((A,c)=>{c.exports=_jsx_runtime});var v={};N(v,{default:()=>p,frontmatter:()=>x});var n=w(h()),x={title:\"withAlpha utility in Tailwind CSS source code.\"};function d(a){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse \",(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utilities.ts#L108-L123\",children:\"withAlpha utitlity function\"}),\" in Tailwind CSS source code.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"/**\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" * Apply opacity to a color using `color-mix`.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" */\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"export function withAlpha(value: string, alpha: string): string {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (alpha === null) return value\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // Convert numeric values (like `0.5`) to percentages (like `50%`) so they\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // work properly with `color-mix`. Assume anything that isn't a number is\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // safe to pass through as-is, like `var(--my-opacity)`.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  let alphaAsNumber = Number(alpha)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  if (!Number.isNaN(alphaAsNumber)) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    alpha = `${alphaAsNumber * 100}%`\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // If the alpha value is a percentage, we can pass it directly to\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // `color-mix()`. In any other case, e.g.: `var(\\u2026)`, `round(\\u2026)`, \\u2026 we need to\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  // make sure it's a percentage.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  else if (alpha[alpha.length - 1] !== '%') {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    alpha = `calc(${alpha} * 100%)`\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  }\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  return `color-mix(in srgb, ${value} ${alpha}, transparent)`\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"The beauty about this utility function is that it comes with comments explaining what the code does.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// Convert numeric values (like `0.5`) to percentages (like `50%`) so they\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// work properly with `color-mix`. Assume anything that isn't a number is\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// safe to pass through as-is, like `var(--my-opacity)`.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"let alphaAsNumber = Number(alpha)\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"if (!Number.isNaN(alphaAsNumber)) {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  alpha = `${alphaAsNumber * 100}%`\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"First the alpha is converted to Number, withAlpha accepts \",(0,n.jsx)(e.code,{children:\"alpha\"}),\" as a string and is assigned to a variable named \",(0,n.jsx)(e.code,{children:\"alphaAsNumber\"})]}),`\n`,(0,n.jsx)(e.p,{children:\"if alphaAsNumber is not a number, then this is converted to % by multiplying it with * 100.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// If the alpha value is a percentage, we can pass it directly to\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// `color-mix()`. In any other case, e.g.: `var(\\u2026)`, `round(\\u2026)`, \\u2026 we need to\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"// make sure it's a percentage.\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"else if (alpha[alpha.length - 1] !== '%') {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  alpha = `calc(${alpha} * 100%)`\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"}\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The way this above code snippet ensures that alpha value is a percentage is by checking if the item at last index is \\u2018%\\u2019, otherwise, it is multiplied with \",(0,n.jsx)(e.code,{children:\"*100%\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:\"and finally color-mix is returned.\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"return `color-mix(in srgb, ${value} ${alpha}, transparent)`\"})})})})}),`\n`,(0,n.jsx)(e.p,{children:\"but you might be wondering what a color-mix is.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"color-mix\",children:(0,n.jsx)(e.strong,{children:\"color-mix\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"color-mix()\"}),\" functional notation takes two \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/CSS/color_value\",children:(0,n.jsx)(e.code,{children:\"<color>\"})}),\" values and returns the result of mixing them in a given colorspace by a given amount. \\u2014 \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix\",children:\"MDN documentation\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://miro.medium.com/v2/resize:fit:875/1*TOWU7KHZMiOGjWdnSs5rfA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h1,{id:\"references\",children:(0,n.jsx)(e.strong,{children:\"References:\"})}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utilities.ts#L108-L123\",children:\"https://github.com/tailwindlabs/tailwindcss/blob/next/packages/tailwindcss/src/utilities.ts#L108-L123\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/design-system.ts#L136\",children:\"https://github.com/tailwindlabs/tailwindcss/blob/c01b8254e822d4f328674357347ca0532f1283a0/packages/tailwindcss/src/design-system.ts#L136\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix\",children:\"https://developer.mozilla.org/en-US/docs/Web/CSS/color_value/color-mix\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return y(v);})();\n;return Component;"
        },
        "_id": "blog/withAlpha-utility-in-Tailwind.mdx",
        "_raw": {
          "sourceFilePath": "blog/withAlpha-utility-in-Tailwind.mdx",
          "sourceFileName": "withAlpha-utility-in-Tailwind.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/withAlpha-utility-in-Tailwind"
        },
        "type": "Doc",
        "slug": "/blog/withAlpha-utility-in-Tailwind",
        "slugAsParams": "withAlpha-utility-in-Tailwind"
      },
      "documentHash": "1740489186461",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "course/charts-page.mdx": {
      "document": {
        "title": "Charts Page",
        "description": "Components Structure In Charts Page.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this lesson, we are only focusing on the folder structure, \r\nfile naming conventions used in [Charts page](https://ui.shadcn.com/charts)\r\n\r\n## Charts Page\r\n\r\nThis Charts Page source code is found at [www/app/(app)/charts/page.tsx](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/charts/page.tsx).\r\n\r\n### Components imported\r\n\r\nThe following components are imported in the charts page, found at [www/app/(app)/charts/page.tsx](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/charts/page.tsx).\r\n\r\n```js\r\nimport { THEMES } from \"@/lib/themes\"\r\nimport { ChartDisplay } from \"@/components/chart-display\"\r\nimport { ChartsNav } from \"@/components/charts-nav\"\r\nimport { ThemesSwitcher } from \"@/components/themes-selector\"\r\nimport { ThemesStyle } from \"@/components/themes-styles\"\r\nimport { Separator } from \"@/registry/new-york/ui/separator\"\r\nimport * as Charts from \"@/app/(app)/charts/charts\"\r\n```\r\n\r\nThere are few observations that can be made here:\r\n\r\n- @/components folder:\r\n\r\nChartDisplay, ChartsNav, ThemesSwitcher, ThemesStyle are imported from generic [components folder](https://github.com/shadcn-ui/ui/tree/main/apps/www/components) that is at the root level.\r\n\r\nYou could place the components such as ChartDisplay, ChartsNav in a folder named components \r\nthat could be created in `app/(app)/charts` for colocating purposes. \r\n\r\n- charts components:\r\n\r\n\r\n\r\n## Conclusion:\r\nYou make the best judgement based on what works for you. Across the shadcn-ui/ui, components used in pages are located in\r\ncomponents folder at the root level so they can be imported using `@/components`.\r\n\r\nWe picked the special use cases such as Charts Page, Mail Example page where you will find some components imported from with\r\nin the route folder.",
          "code": "var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var f=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),g=(r,e)=>{for(var s in e)o(r,s,{get:e[s],enumerable:!0})},c=(r,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of m(e))!u.call(r,l)&&l!==s&&o(r,l,{get:()=>e[l],enumerable:!(a=F(e,l))||a.enumerable});return r};var w=(r,e,s)=>(s=r!=null?d(y(r)):{},c(e||!r||!r.__esModule?o(s,\"default\",{value:r,enumerable:!0}):s,r)),C=r=>c(o({},\"__esModule\",{value:!0}),r);var i=f((N,t)=>{t.exports=_jsx_runtime});var x={};g(x,{default:()=>p,frontmatter:()=>b});var n=w(i()),b={title:\"Charts Page\",description:\"Components Structure In Charts Page.\"};function h(r){let e={a:\"a\",code:\"code\",div:\"div\",h2:\"h2\",h3:\"h3\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",ul:\"ul\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[`In this lesson, we are only focusing on the folder structure,\\r\nfile naming conventions used in `,(0,n.jsx)(e.a,{href:\"https://ui.shadcn.com/charts\",children:\"Charts page\"})]}),`\n`,(0,n.jsx)(e.h2,{id:\"charts-page\",children:\"Charts Page\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This Charts Page source code is found at \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/charts/page.tsx\",children:\"www/app/(app)/charts/page.tsx\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"components-imported\",children:\"Components imported\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The following components are imported in the charts page, found at \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/charts/page.tsx\",children:\"www/app/(app)/charts/page.tsx\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" THEMES \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/lib/themes\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ChartDisplay \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/chart-display\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ChartsNav \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/charts-nav\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ThemesSwitcher \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/themes-selector\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ThemesStyle \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/themes-styles\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Separator \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/registry/new-york/ui/separator\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" *\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Charts \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/charts/charts\"'})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"There are few observations that can be made here:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"@/components folder:\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"ChartDisplay, ChartsNav, ThemesSwitcher, ThemesStyle are imported from generic \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/components\",children:\"components folder\"}),\" that is at the root level.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`You could place the components such as ChartDisplay, ChartsNav in a folder named components\\r\nthat could be created in `,(0,n.jsx)(e.code,{children:\"app/(app)/charts\"}),\" for colocating purposes.\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"charts components:\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"conclusion\",children:\"Conclusion:\"}),`\n`,(0,n.jsxs)(e.p,{children:[`You make the best judgement based on what works for you. Across the shadcn-ui/ui, components used in pages are located in\\r\ncomponents folder at the root level so they can be imported using `,(0,n.jsx)(e.code,{children:\"@/components\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:`We picked the special use cases such as Charts Page, Mail Example page where you will find some components imported from with\\r\nin the route folder.`})]})}function p(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(h,{...r})}):h(r)}return C(x);})();\n;return Component;"
        },
        "_id": "course/charts-page.mdx",
        "_raw": {
          "sourceFilePath": "course/charts-page.mdx",
          "sourceFileName": "charts-page.mdx",
          "sourceFileDir": "course",
          "contentType": "mdx",
          "flattenedPath": "course/charts-page"
        },
        "type": "Doc",
        "slug": "/course/charts-page",
        "slugAsParams": "charts-page"
      },
      "documentHash": "1740489186463",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "course/components-structure-in-shadcn-ui/charts-page.mdx": {
      "document": {
        "title": "Charts Page",
        "description": "Components Structure In Charts Page.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this lesson, we are only focusing on the folder structure, \r\nfile naming conventions used in [Charts page](https://ui.shadcn.com/charts)\r\n\r\n## Charts Page\r\n\r\nThis Charts Page source code is found at [www/app/(app)/charts/page.tsx](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/charts/page.tsx).\r\n\r\n### Components imported\r\n\r\nThe following components are imported in the charts page, found at [www/app/(app)/charts/page.tsx](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/charts/page.tsx).\r\n\r\n```js\r\nimport { THEMES } from \"@/lib/themes\"\r\nimport { ChartDisplay } from \"@/components/chart-display\"\r\nimport { ChartsNav } from \"@/components/charts-nav\"\r\nimport { ThemesSwitcher } from \"@/components/themes-selector\"\r\nimport { ThemesStyle } from \"@/components/themes-styles\"\r\nimport { Separator } from \"@/registry/new-york/ui/separator\"\r\nimport * as Charts from \"@/app/(app)/charts/charts\"\r\n```\r\n\r\nThere are few observations that can be made here:\r\n\r\n- @/components folder:\r\n\r\nChartDisplay, ChartsNav, ThemesSwitcher, ThemesStyle are imported from generic [components folder](https://github.com/shadcn-ui/ui/tree/main/apps/www/components) that is at the root level.\r\n\r\nYou could place the components such as ChartDisplay, ChartsNav in a folder named components \r\nthat could be created in `app/(app)/charts` for colocating purposes. \r\n\r\n- charts components:\r\n\r\n\r\n\r\n## Conclusion:\r\nYou make the best judgement based on what works for you. Across the shadcn-ui/ui, components used in pages are located in\r\ncomponents folder at the root level so they can be imported using `@/components`.\r\n\r\nWe picked the special use cases such as Charts Page, Mail Example page where you will find some components imported from with\r\nin the route folder.",
          "code": "var Component=(()=>{var d=Object.create;var o=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var f=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),g=(r,e)=>{for(var s in e)o(r,s,{get:e[s],enumerable:!0})},c=(r,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of m(e))!u.call(r,l)&&l!==s&&o(r,l,{get:()=>e[l],enumerable:!(a=F(e,l))||a.enumerable});return r};var w=(r,e,s)=>(s=r!=null?d(y(r)):{},c(e||!r||!r.__esModule?o(s,\"default\",{value:r,enumerable:!0}):s,r)),C=r=>c(o({},\"__esModule\",{value:!0}),r);var i=f((N,t)=>{t.exports=_jsx_runtime});var x={};g(x,{default:()=>p,frontmatter:()=>b});var n=w(i()),b={title:\"Charts Page\",description:\"Components Structure In Charts Page.\"};function h(r){let e={a:\"a\",code:\"code\",div:\"div\",h2:\"h2\",h3:\"h3\",li:\"li\",p:\"p\",pre:\"pre\",span:\"span\",ul:\"ul\",...r.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[`In this lesson, we are only focusing on the folder structure,\\r\nfile naming conventions used in `,(0,n.jsx)(e.a,{href:\"https://ui.shadcn.com/charts\",children:\"Charts page\"})]}),`\n`,(0,n.jsx)(e.h2,{id:\"charts-page\",children:\"Charts Page\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This Charts Page source code is found at \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/charts/page.tsx\",children:\"www/app/(app)/charts/page.tsx\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"components-imported\",children:\"Components imported\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The following components are imported in the charts page, found at \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/charts/page.tsx\",children:\"www/app/(app)/charts/page.tsx\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" THEMES \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/lib/themes\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ChartDisplay \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/chart-display\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ChartsNav \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/charts-nav\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ThemesSwitcher \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/themes-selector\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ThemesStyle \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/themes-styles\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Separator \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/registry/new-york/ui/separator\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" *\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Charts \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/charts/charts\"'})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"There are few observations that can be made here:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"@/components folder:\"}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"ChartDisplay, ChartsNav, ThemesSwitcher, ThemesStyle are imported from generic \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/components\",children:\"components folder\"}),\" that is at the root level.\"]}),`\n`,(0,n.jsxs)(e.p,{children:[`You could place the components such as ChartDisplay, ChartsNav in a folder named components\\r\nthat could be created in `,(0,n.jsx)(e.code,{children:\"app/(app)/charts\"}),\" for colocating purposes.\"]}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsx)(e.li,{children:\"charts components:\"}),`\n`]}),`\n`,(0,n.jsx)(e.h2,{id:\"conclusion\",children:\"Conclusion:\"}),`\n`,(0,n.jsxs)(e.p,{children:[`You make the best judgement based on what works for you. Across the shadcn-ui/ui, components used in pages are located in\\r\ncomponents folder at the root level so they can be imported using `,(0,n.jsx)(e.code,{children:\"@/components\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:`We picked the special use cases such as Charts Page, Mail Example page where you will find some components imported from with\\r\nin the route folder.`})]})}function p(r={}){let{wrapper:e}=r.components||{};return e?(0,n.jsx)(e,{...r,children:(0,n.jsx)(h,{...r})}):h(r)}return C(x);})();\n;return Component;"
        },
        "_id": "course/components-structure-in-shadcn-ui/charts-page.mdx",
        "_raw": {
          "sourceFilePath": "course/components-structure-in-shadcn-ui/charts-page.mdx",
          "sourceFileName": "charts-page.mdx",
          "sourceFileDir": "course/components-structure-in-shadcn-ui",
          "contentType": "mdx",
          "flattenedPath": "course/components-structure-in-shadcn-ui/charts-page"
        },
        "type": "Doc",
        "slug": "/course/components-structure-in-shadcn-ui/charts-page",
        "slugAsParams": "components-structure-in-shadcn-ui/charts-page"
      },
      "documentHash": "1740489186466",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "course/components-structure-in-shadcn-ui/home-page.mdx": {
      "document": {
        "title": "Home Page",
        "description": "Components Structure In Home Page.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nShadcn-ui/ui provides beautifully designed components that you can copy and paste into your apps.\r\n\r\nIn this lesson, we are only focusing on the folder structure, file naming conventions and how the page is built.\r\nTo begin with, we picked https://ui.shadcn.com/, that is, the home page.\r\n\r\n## Home Page\r\n\r\nThis home page source code is found at [app/(app)/page.tsx](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/page.tsx).\r\n\r\n### Components imported\r\n\r\nThe following components are imported in the home page, found at [app/(app)/page.tsx](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/page.tsx)\r\n\r\n```js\r\nimport { Announcement } from \"@/components/announcement\"\r\nimport { ExamplesNav } from \"@/components/examples-nav\"\r\nimport {\r\n  PageActions,\r\n  PageHeader,\r\n  PageHeaderDescription,\r\n  PageHeaderHeading,\r\n} from \"@/components/page-header\"\r\nimport { Button } from \"@/registry/new-york/ui/button\"\r\nimport MailPage from \"@/app/(app)/examples/mail/page\"\r\n```\r\n\r\nThere are few observations that can be made here:\r\n\r\n- Component name follows PascalCase naming convention.\r\nExample: `Announcement`, `ExamplesNav`, `PageActions`, `PageHeader`, `PageHeaderDescription` etc.,\r\n\r\n- Import alias used.\r\nYou will find the below code snippet in [tsconfig.json](https://github.com/shadcn-ui/ui/blob/main/apps/www/tsconfig.json#L19C5-L20C22)\r\n\r\n```json\r\n\"paths\": {\r\n      \"@/*\": [\"./*\"],\r\n}\r\n```\r\n\r\n\"@/\" is the default import alias in Next.js.\r\n\r\n- File naming convention.\r\nFile names such as `examples-nav`, `page-header` seem to be following kebab-case convention.\r\n\r\n- Folder structure\r\nComponents used in this home page are found to be imported from \r\n\r\n1. `components` folder\r\n\r\n![Shadcn-ui/ui Components Structure](/components-structure/shadcn-components-folder.png)\r\n\r\nComponents folder does not have any nested folders. All the components that are used across the shadcn-ui/ui are located in this folder.\r\n\r\nThese components are different from what you see on https://ui.shadcn.com/docs/components. \r\nDifferent how? https://ui.shadcn.com/docs/components provides the components that can be copied and pasted and these reside in [`registry`](https://github.com/shadcn-ui/ui/tree/main/apps/www/registry). \r\nHowever, `components` provides building blocks that are built using components from registry and are used in pages.\r\n\r\n\r\n2. `registry/new-york/ui` folder\r\n\r\n[registry/new-york/ui](https://github.com/shadcn-ui/ui/tree/main/apps/www/registry/new-york/ui) contains the components \r\nthe components that you see at https://ui.shadcn.com/docs/components.\r\n\r\nThis ui folder is what you get when you initialise shadcn-ui/ui via the CLI.\r\nThere's no need to create a folder named registry and put your ui components in there because shadcn-ui/ui already \r\ndoes this for you via the CLI.\r\n\r\n\r\n3. `@/app/(app)/examples/mail` folder \r\n\r\n[@/app/(app)/examples/mail](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/mail) this is an interesting\r\nuse case because this imports the whole MailPage.\r\n\r\nWhat does this tell us? it means, you can use a page as a component, \r\nthat is MailPage in this case, by importing in another page. \r\n\r\n## Conclusion:\r\n\r\nYou will find this common pattern across the entire shadcn-ui/ui pages using the app router. Components used are either imported \r\nfrom components folder or imported registry/new-york/ui folder which is the exact folder that shadcn-ui/ui creates for you\r\nin your project when you initialise it via CLI. There is one special use case where a MailPage is imported in Home Page\r\nto show MailPage on the landing page.",
          "code": "var Component=(()=>{var p=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var F=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var y=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),f=(o,e)=>{for(var s in e)i(o,s,{get:e[s],enumerable:!0})},l=(o,e,s,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of F(e))!g.call(o,a)&&a!==s&&i(o,a,{get:()=>e[a],enumerable:!(r=m(e,a))||r.enumerable});return o};var w=(o,e,s)=>(s=o!=null?p(u(o)):{},l(e||!o||!o.__esModule?i(s,\"default\",{value:o,enumerable:!0}):s,o)),b=o=>l(i({},\"__esModule\",{value:!0}),o);var t=y((C,c)=>{c.exports=_jsx_runtime});var v={};f(v,{default:()=>h,frontmatter:()=>x});var n=w(t()),x={title:\"Home Page\",description:\"Components Structure In Home Page.\"};function d(o){let e={a:\"a\",code:\"code\",div:\"div\",h2:\"h2\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",ul:\"ul\",...o.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Shadcn-ui/ui provides beautifully designed components that you can copy and paste into your apps.\"}),`\n`,(0,n.jsxs)(e.p,{children:[`In this lesson, we are only focusing on the folder structure, file naming conventions and how the page is built.\\r\nTo begin with, we picked `,(0,n.jsx)(e.a,{href:\"https://ui.shadcn.com/\",children:\"https://ui.shadcn.com/\"}),\", that is, the home page.\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"home-page\",children:\"Home Page\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This home page source code is found at \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/page.tsx\",children:\"app/(app)/page.tsx\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"components-imported\",children:\"Components imported\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The following components are imported in the home page, found at \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/page.tsx\",children:\"app/(app)/page.tsx\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Announcement \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/announcement\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ExamplesNav \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/examples-nav\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  PageActions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  PageHeader\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  PageHeaderDescription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  PageHeaderHeading\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/page-header\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Button \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/registry/new-york/ui/button\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" MailPage \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/examples/mail/page\"'})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"There are few observations that can be made here:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[`Component name follows PascalCase naming convention.\\r\nExample: `,(0,n.jsx)(e.code,{children:\"Announcement\"}),\", \",(0,n.jsx)(e.code,{children:\"ExamplesNav\"}),\", \",(0,n.jsx)(e.code,{children:\"PageActions\"}),\", \",(0,n.jsx)(e.code,{children:\"PageHeader\"}),\", \",(0,n.jsx)(e.code,{children:\"PageHeaderDescription\"}),\" etc.,\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[`Import alias used.\\r\nYou will find the below code snippet in `,(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/tsconfig.json#L19C5-L20C22\",children:\"tsconfig.json\"})]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"json\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"paths\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'      \"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"@/*\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"./*\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"],\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:'\"@/\" is the default import alias in Next.js.'}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[`File naming convention.\\r\nFile names such as `,(0,n.jsx)(e.code,{children:\"examples-nav\"}),\", \",(0,n.jsx)(e.code,{children:\"page-header\"}),\" seem to be following kebab-case convention.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:`Folder structure\\r\nComponents used in this home page are found to be imported from`}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"components\"}),\" folder\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/components-structure/shadcn-components-folder.png\",alt:\"Shadcn-ui/ui Components Structure\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Components folder does not have any nested folders. All the components that are used across the shadcn-ui/ui are located in this folder.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"These components are different from what you see on \",(0,n.jsx)(e.a,{href:\"https://ui.shadcn.com/docs/components\",children:\"https://ui.shadcn.com/docs/components\"}),`.\\r\nDifferent how? `,(0,n.jsx)(e.a,{href:\"https://ui.shadcn.com/docs/components\",children:\"https://ui.shadcn.com/docs/components\"}),\" provides the components that can be copied and pasted and these reside in \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/registry\",children:(0,n.jsx)(e.code,{children:\"registry\"})}),`.\\r\nHowever, `,(0,n.jsx)(e.code,{children:\"components\"}),\" provides building blocks that are built using components from registry and are used in pages.\"]}),`\n`,(0,n.jsxs)(e.ol,{start:\"2\",children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"registry/new-york/ui\"}),\" folder\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/registry/new-york/ui\",children:\"registry/new-york/ui\"}),` contains the components\\r\nthe components that you see at `,(0,n.jsx)(e.a,{href:\"https://ui.shadcn.com/docs/components\",children:\"https://ui.shadcn.com/docs/components\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:`This ui folder is what you get when you initialise shadcn-ui/ui via the CLI.\\r\nThere's no need to create a folder named registry and put your ui components in there because shadcn-ui/ui already\\r\ndoes this for you via the CLI.`}),`\n`,(0,n.jsxs)(e.ol,{start:\"3\",children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"@/app/(app)/examples/mail\"}),\" folder\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/mail\",children:\"@/app/(app)/examples/mail\"}),` this is an interesting\\r\nuse case because this imports the whole MailPage.`]}),`\n`,(0,n.jsx)(e.p,{children:`What does this tell us? it means, you can use a page as a component,\\r\nthat is MailPage in this case, by importing in another page.`}),`\n`,(0,n.jsx)(e.h2,{id:\"conclusion\",children:\"Conclusion:\"}),`\n`,(0,n.jsx)(e.p,{children:`You will find this common pattern across the entire shadcn-ui/ui pages using the app router. Components used are either imported\\r\nfrom components folder or imported registry/new-york/ui folder which is the exact folder that shadcn-ui/ui creates for you\\r\nin your project when you initialise it via CLI. There is one special use case where a MailPage is imported in Home Page\\r\nto show MailPage on the landing page.`})]})}function h(o={}){let{wrapper:e}=o.components||{};return e?(0,n.jsx)(e,{...o,children:(0,n.jsx)(d,{...o})}):d(o)}return b(v);})();\n;return Component;"
        },
        "_id": "course/components-structure-in-shadcn-ui/home-page.mdx",
        "_raw": {
          "sourceFilePath": "course/components-structure-in-shadcn-ui/home-page.mdx",
          "sourceFileName": "home-page.mdx",
          "sourceFileDir": "course/components-structure-in-shadcn-ui",
          "contentType": "mdx",
          "flattenedPath": "course/components-structure-in-shadcn-ui/home-page"
        },
        "type": "Doc",
        "slug": "/course/components-structure-in-shadcn-ui/home-page",
        "slugAsParams": "components-structure-in-shadcn-ui/home-page"
      },
      "documentHash": "1740489186469",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "course/components-structure-in-shadcn-ui/introduction.mdx": {
      "document": {
        "title": "Introduction\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this guide, you will learn how components are organized in shadcn-ui/ui\r\n\r\nBy components, here we mean the building blocks of the user interface or more precisely, the building blocks used in a page.\r\n\r\nOur focus is primarily on the folder structure and file naming conventions used. \r\nIn order to establish a common pattern and to understand components structure better, \r\nwe will study few pages/routes in the Shadcn-ui/ui.\r\n\r\nOur approach is to pick a route, locate the route in the source code and from there on, we will look at \r\n1. Where the imported components are located in a project\r\n2. Folder structure and naming conventions used  \r\n3. How the \"page\" is built using these imported components\r\n\r\nThere will be screenshots and links pointing to folders and components that belong to a project. \r\n\r\nUse this free guide to learn how components are organized in Shadcn-ui/ui.",
          "code": "var Component=(()=>{var h=Object.create;var i=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var w=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var o in e)i(n,o,{get:e[o],enumerable:!0})},c=(n,e,o,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of m(e))!f.call(n,r)&&r!==o&&i(n,r,{get:()=>e[r],enumerable:!(s=p(e,r))||s.enumerable});return n};var x=(n,e,o)=>(o=n!=null?h(g(n)):{},c(e||!n||!n.__esModule?i(o,\"default\",{value:n,enumerable:!0}):o,n)),j=n=>c(i({},\"__esModule\",{value:!0}),n);var a=w((F,l)=>{l.exports=_jsx_runtime});var y={};b(y,{default:()=>u,frontmatter:()=>_});var t=x(a()),_={title:\"Introduction\"};function d(n){let e={li:\"li\",ol:\"ol\",p:\"p\",...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.p,{children:\"In this guide, you will learn how components are organized in shadcn-ui/ui\"}),`\n`,(0,t.jsx)(e.p,{children:\"By components, here we mean the building blocks of the user interface or more precisely, the building blocks used in a page.\"}),`\n`,(0,t.jsx)(e.p,{children:`Our focus is primarily on the folder structure and file naming conventions used.\\r\nIn order to establish a common pattern and to understand components structure better,\\r\nwe will study few pages/routes in the Shadcn-ui/ui.`}),`\n`,(0,t.jsx)(e.p,{children:\"Our approach is to pick a route, locate the route in the source code and from there on, we will look at\"}),`\n`,(0,t.jsxs)(e.ol,{children:[`\n`,(0,t.jsx)(e.li,{children:\"Where the imported components are located in a project\"}),`\n`,(0,t.jsx)(e.li,{children:\"Folder structure and naming conventions used\"}),`\n`,(0,t.jsx)(e.li,{children:'How the \"page\" is built using these imported components'}),`\n`]}),`\n`,(0,t.jsx)(e.p,{children:\"There will be screenshots and links pointing to folders and components that belong to a project.\"}),`\n`,(0,t.jsx)(e.p,{children:\"Use this free guide to learn how components are organized in Shadcn-ui/ui.\"})]})}function u(n={}){let{wrapper:e}=n.components||{};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}return j(y);})();\n;return Component;"
        },
        "_id": "course/components-structure-in-shadcn-ui/introduction.mdx",
        "_raw": {
          "sourceFilePath": "course/components-structure-in-shadcn-ui/introduction.mdx",
          "sourceFileName": "introduction.mdx",
          "sourceFileDir": "course/components-structure-in-shadcn-ui",
          "contentType": "mdx",
          "flattenedPath": "course/components-structure-in-shadcn-ui/introduction"
        },
        "type": "Doc",
        "slug": "/course/components-structure-in-shadcn-ui/introduction",
        "slugAsParams": "components-structure-in-shadcn-ui/introduction"
      },
      "documentHash": "1740489186471",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "course/components-structure-in-shadcn-ui/mail-example-page.mdx": {
      "document": {
        "title": "Mail Example Page",
        "description": "Components Structure In Mail Example Page.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this lesson, we are only focusing on the folder structure, file naming conventions and \r\nhow the Mail Example Page is built.\r\n\r\n## Mail Example Page\r\n\r\nThis Mail Example Page source code is found at [www/app/(app)/examples/mail](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/mail).\r\n\r\n### Components imported\r\n\r\nThe following components are imported in the mail page, found at [www/app/(app)/examples/mail](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/examples/mail/page.tsx).\r\n\r\n```js\r\nimport { Mail } from \"@/app/(app)/examples/mail/components/mail\"\r\nimport { accounts, mails } from \"@/app/(app)/examples/mail/data\"\r\n```\r\n\r\nThere are few observations that can be made here:\r\n\r\n- Mail component\r\nMail component seems to be imported from mail/components. What does this tell you? components specific to a page are \r\ncolocated with in examples/mail folder. In the previous lesson, we mentioned about components folder that contains components\r\nthat can be used across the app.\r\n\r\nThere are some more components imported in [www/app/(app)/examples/mail/components/mail](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/mail/components)\r\n\r\n```js\r\nimport { cn } from \"@/lib/utils\"\r\nimport { Input } from \"@/registry/new-york/ui/input\"\r\nimport {\r\n  ResizableHandle,\r\n  ResizablePanel,\r\n  ResizablePanelGroup,\r\n} from \"@/registry/new-york/ui/resizable\"\r\nimport { Separator } from \"@/registry/new-york/ui/separator\"\r\nimport {\r\n  Tabs,\r\n  TabsContent,\r\n  TabsList,\r\n  TabsTrigger,\r\n} from \"@/registry/new-york/ui/tabs\"\r\nimport { TooltipProvider } from \"@/registry/new-york/ui/tooltip\"\r\nimport { AccountSwitcher } from \"@/app/(app)/examples/mail/components/account-switcher\"\r\nimport { MailDisplay } from \"@/app/(app)/examples/mail/components/mail-display\"\r\nimport { MailList } from \"@/app/(app)/examples/mail/components/mail-list\"\r\nimport { Nav } from \"@/app/(app)/examples/mail/components/nav\"\r\nimport { type Mail } from \"@/app/(app)/examples/mail/data\"\r\nimport { useMail } from \"@/app/(app)/examples/mail/use-mail\"\r\n```\r\nRemember, our focus is on folder structure.\r\n\r\n- @/registry/new-york/ui:\r\n@/registry/new-york/ui is used in the shadcn-ui/ui codebase to reuse ui blocks. this ui folder is automatically generated when \r\nyou install shadcn-ui/ui via CLI\r\n\r\n- `examples/mail/components/` folder:\r\nThis folder contains the following files:\r\n1. account-switcher.tsx\r\n2. mail-display.tsx\r\n3. mail-list.tsx\r\n4. mail.tsx\r\n5. nav.tsx\r\n\r\nmail.tsx is the base of MailPage as it imports the other building blocks/components to form the Mail Page.\r\n\r\n- data folder\r\nThis [data file](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/examples/mail/data.tsx) contains static data \r\nthat is used in Mail Example page. You could write your server data fetching actions in a file like this that is specific to \r\na page, colocated with in a folder, like in this case \"mail\" as this is related to Mail page.  \r\n\r\n- use-mail.ts custom hook:\r\nYou will also a find a custom hook, [use-mail.ts](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/examples/mail/use-mail.ts)\r\nThis hook uses Jotai to manage state.",
          "code": "var Component=(()=>{var d=Object.create;var r=Object.defineProperty;var h=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),g=(n,e)=>{for(var s in e)r(n,s,{get:e[s],enumerable:!0})},o=(n,e,s,i)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let a of m(e))!u.call(n,a)&&a!==s&&r(n,a,{get:()=>e[a],enumerable:!(i=h(e,a))||i.enumerable});return n};var w=(n,e,s)=>(s=n!=null?d(y(n)):{},o(e||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),x=n=>o(r({},\"__esModule\",{value:!0}),n);var t=f((k,c)=>{c.exports=_jsx_runtime});var N={};g(N,{default:()=>F,frontmatter:()=>b});var l=w(t()),b={title:\"Mail Example Page\",description:\"Components Structure In Mail Example Page.\"};function p(n){let e={a:\"a\",code:\"code\",div:\"div\",h2:\"h2\",h3:\"h3\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",ul:\"ul\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:`In this lesson, we are only focusing on the folder structure, file naming conventions and\\r\nhow the Mail Example Page is built.`}),`\n`,(0,l.jsx)(e.h2,{id:\"mail-example-page\",children:\"Mail Example Page\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"This Mail Example Page source code is found at \",(0,l.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/mail\",children:\"www/app/(app)/examples/mail\"}),\".\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"components-imported\",children:\"Components imported\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"The following components are imported in the mail page, found at \",(0,l.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/examples/mail/page.tsx\",children:\"www/app/(app)/examples/mail\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Mail \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/examples/mail/components/mail\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" accounts\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" mails \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/examples/mail/data\"'})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"There are few observations that can be made here:\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsx)(e.li,{children:`Mail component\\r\nMail component seems to be imported from mail/components. What does this tell you? components specific to a page are\\r\ncolocated with in examples/mail folder. In the previous lesson, we mentioned about components folder that contains components\\r\nthat can be used across the app.`}),`\n`]}),`\n`,(0,l.jsxs)(e.p,{children:[\"There are some more components imported in \",(0,l.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/mail/components\",children:\"www/app/(app)/examples/mail/components/mail\"})]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" cn \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/lib/utils\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Input \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/registry/new-york/ui/input\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  ResizableHandle\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  ResizablePanel\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  ResizablePanelGroup\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/registry/new-york/ui/resizable\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Separator \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/registry/new-york/ui/separator\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  Tabs\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  TabsContent\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  TabsList\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  TabsTrigger\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/registry/new-york/ui/tabs\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" TooltipProvider \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/registry/new-york/ui/tooltip\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" AccountSwitcher \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/examples/mail/components/account-switcher\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" MailDisplay \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/examples/mail/components/mail-display\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" MailList \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/examples/mail/components/mail-list\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Nav \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/examples/mail/components/nav\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Mail \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/examples/mail/data\"'})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useMail \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/examples/mail/use-mail\"'})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Remember, our focus is on folder structure.\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:`@/registry/new-york/ui:\\r\n@/registry/new-york/ui is used in the shadcn-ui/ui codebase to reuse ui blocks. this ui folder is automatically generated when\\r\nyou install shadcn-ui/ui via CLI`}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"examples/mail/components/\"}),` folder:\\r\nThis folder contains the following files:`]}),`\n`]}),`\n`]}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsx)(e.li,{children:\"account-switcher.tsx\"}),`\n`,(0,l.jsx)(e.li,{children:\"mail-display.tsx\"}),`\n`,(0,l.jsx)(e.li,{children:\"mail-list.tsx\"}),`\n`,(0,l.jsx)(e.li,{children:\"mail.tsx\"}),`\n`,(0,l.jsx)(e.li,{children:\"nav.tsx\"}),`\n`]}),`\n`,(0,l.jsx)(e.p,{children:\"mail.tsx is the base of MailPage as it imports the other building blocks/components to form the Mail Page.\"}),`\n`,(0,l.jsxs)(e.ul,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[`data folder\\r\nThis `,(0,l.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/examples/mail/data.tsx\",children:\"data file\"}),` contains static data\\r\nthat is used in Mail Example page. You could write your server data fetching actions in a file like this that is specific to\\r\na page, colocated with in a folder, like in this case \"mail\" as this is related to Mail page.`]}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsxs)(e.p,{children:[`use-mail.ts custom hook:\\r\nYou will also a find a custom hook, `,(0,l.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/examples/mail/use-mail.ts\",children:\"use-mail.ts\"}),`\\r\nThis hook uses Jotai to manage state.`]}),`\n`]}),`\n`]})]})}function F(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(p,{...n})}):p(n)}return x(N);})();\n;return Component;"
        },
        "_id": "course/components-structure-in-shadcn-ui/mail-example-page.mdx",
        "_raw": {
          "sourceFilePath": "course/components-structure-in-shadcn-ui/mail-example-page.mdx",
          "sourceFileName": "mail-example-page.mdx",
          "sourceFileDir": "course/components-structure-in-shadcn-ui",
          "contentType": "mdx",
          "flattenedPath": "course/components-structure-in-shadcn-ui/mail-example-page"
        },
        "type": "Doc",
        "slug": "/course/components-structure-in-shadcn-ui/mail-example-page",
        "slugAsParams": "components-structure-in-shadcn-ui/mail-example-page"
      },
      "documentHash": "1740489186473",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "course/components-structure-in-supabase/components-structure-in-supabase.mdx": {
      "document": {
        "title": "Changelog",
        "description": "Latest updates and announcements.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\n## Component Architecture\r\n[C: Introduction]\r\n\r\nIn this guide, you will learn how components are organized in shadcn-ui/ui\r\n\r\nBy components, here we mean the building blocks of the user interface or more precisely, the building blocks used in a page.\r\n\r\nOur focus is primarily on the folder structure and file naming conventions used. \r\nIn order to establish a common pattern and to understand components structure better, \r\nwe will study few pages/routes in the Shadcn-ui/ui.\r\n\r\nOur approach is to pick a route, locate the route in the source code and from there on, we will look at \r\n1. Where the imported components are located in a project\r\n2. Folder structure and naming conventions used  \r\n3. How the \"page\" is built using these imported components\r\n\r\nThere will be screenshots and links pointing to folders and components that belong to a project. \r\n\r\nUse this free guide to learn how components are organized in Shadcn-ui/ui.\r\n\r\n### C: shadcn-ui/ui\r\n#### L: Home Page\r\n\r\nShadcn-ui/ui provides beautifully designed components that you can copy and paste into your apps.\r\n\r\nIn this lesson, we are only focusing on the folder structure, file naming conventions and how the page is built.\r\nTo begin with, we picked https://ui.shadcn.com/, that is, the home page.\r\n\r\n# Home Page\r\n\r\nThis home page source code is found at [app/(app)/page.tsx](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/page.tsx).\r\n\r\n## Components imported\r\n\r\nThe following components are imported in the home page, found at [app/(app)/page.tsx](https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/page.tsx)\r\n\r\n```js\r\nimport { Announcement } from \"@/components/announcement\"\r\nimport { ExamplesNav } from \"@/components/examples-nav\"\r\nimport {\r\n  PageActions,\r\n  PageHeader,\r\n  PageHeaderDescription,\r\n  PageHeaderHeading,\r\n} from \"@/components/page-header\"\r\nimport { Button } from \"@/registry/new-york/ui/button\"\r\nimport MailPage from \"@/app/(app)/examples/mail/page\"\r\n```\r\n\r\nThere are few observations that can be made here:\r\n\r\n- Component name follows PascalCase naming convention.\r\nExample: `Announcement`, `ExamplesNav`, `PageActions`, `PageHeader`, `PageHeaderDescription` etc.,\r\n\r\n- Import alias used.\r\nYou will find the below code snippet in [tsconfig.json](https://github.com/shadcn-ui/ui/blob/main/apps/www/tsconfig.json#L19C5-L20C22)\r\n\r\n```json\r\n\"paths\": {\r\n      \"@/*\": [\"./*\"],\r\n}\r\n```\r\n\r\n\"@/\" is the default import alias in Next.js.\r\n\r\n- File naming convention.\r\nFile names such as `examples-nav`, `page-header` seem to be following kebab-case convention.\r\n\r\n- Folder structure\r\nComponents used in this home page are found to be imported from \r\n\r\n1. `components` folder\r\n\r\n![Shadcn-ui/ui Components Structure](/components-structure/shadcn-components-folder.png)\r\n\r\nComponents folder does not have any nested folders. All the components that are used across the shadcn-ui/ui are located in this folder.\r\n\r\nThese components are different from what you see on https://ui.shadcn.com/docs/components. \r\nDifferent how? https://ui.shadcn.com/docs/components provides the components that can be copied and pasted and these reside in [`registry`](https://github.com/shadcn-ui/ui/tree/main/apps/www/registry). \r\nHowever, `components` provides building blocks that are built using components from registry and are used in pages.\r\n\r\n\r\n2. `registry/new-york/ui` folder\r\n\r\n[registry/new-york/ui](https://github.com/shadcn-ui/ui/tree/main/apps/www/registry/new-york/ui) contains the components \r\nthe components that you see at https://ui.shadcn.com/docs/components.\r\n\r\nThis ui folder is what you get when you initialise shadcn-ui/ui via the CLI.\r\nThere's no need to create a folder named registry and put your ui components in there because shadcn-ui/ui already \r\ndoes this for you via the CLI.\r\n\r\n\r\n3. `@/app/(app)/examples/mail` folder \r\n\r\n[@/app/(app)/examples/mail](https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/mail) this is an interesting\r\nuse case because this imports the whole MailPage.\r\n\r\nWhat does this tell us? it means, you can use a page as a component, \r\nthat is MailPage in this case, by importing in another page. \r\n\r\n# Conclusion:\r\n\r\nYou will find this common pattern across the entire shadcn-ui/ui pages using the app router. Components used are either imported \r\nfrom components folder or imported registry/new-york/ui folder which is the exact folder that shadcn-ui/ui creates for you\r\nin your project when you initialise it via CLI. There is one special use case where a MailPage is imported in Home Page\r\nto show MailPage on the landing page.\r\n\r\n\r\n[C: Supabase]\r\n\r\n[C: Cal.com]\r\n\r\n[C: LobeChat]\r\n\r\n# API Layer\r\n\r\n# State management",
          "code": "var Component=(()=>{var p=Object.create;var a=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty;var y=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),f=(o,e)=>{for(var i in e)a(o,i,{get:e[i],enumerable:!0})},t=(o,e,i,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let r of u(e))!g.call(o,r)&&r!==i&&a(o,r,{get:()=>e[r],enumerable:!(s=m(e,r))||s.enumerable});return o};var w=(o,e,i)=>(i=o!=null?p(F(o)):{},t(e||!o||!o.__esModule?a(i,\"default\",{value:o,enumerable:!0}):i,o)),b=o=>t(a({},\"__esModule\",{value:!0}),o);var c=y((P,l)=>{l.exports=_jsx_runtime});var C={};f(C,{default:()=>h,frontmatter:()=>x});var n=w(c()),x={title:\"Changelog\",description:\"Latest updates and announcements.\"};function d(o){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h2:\"h2\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",ul:\"ul\",...o.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h2,{id:\"component-architecture\",children:\"Component Architecture\"}),`\n`,(0,n.jsx)(e.p,{children:\"[C: Introduction]\"}),`\n`,(0,n.jsx)(e.p,{children:\"In this guide, you will learn how components are organized in shadcn-ui/ui\"}),`\n`,(0,n.jsx)(e.p,{children:\"By components, here we mean the building blocks of the user interface or more precisely, the building blocks used in a page.\"}),`\n`,(0,n.jsx)(e.p,{children:`Our focus is primarily on the folder structure and file naming conventions used.\\r\nIn order to establish a common pattern and to understand components structure better,\\r\nwe will study few pages/routes in the Shadcn-ui/ui.`}),`\n`,(0,n.jsx)(e.p,{children:\"Our approach is to pick a route, locate the route in the source code and from there on, we will look at\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsx)(e.li,{children:\"Where the imported components are located in a project\"}),`\n`,(0,n.jsx)(e.li,{children:\"Folder structure and naming conventions used\"}),`\n`,(0,n.jsx)(e.li,{children:'How the \"page\" is built using these imported components'}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:\"There will be screenshots and links pointing to folders and components that belong to a project.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Use this free guide to learn how components are organized in Shadcn-ui/ui.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"c-shadcn-uiui\",children:\"C: shadcn-ui/ui\"}),`\n`,(0,n.jsx)(e.h4,{id:\"l-home-page\",children:\"L: Home Page\"}),`\n`,(0,n.jsx)(e.p,{children:\"Shadcn-ui/ui provides beautifully designed components that you can copy and paste into your apps.\"}),`\n`,(0,n.jsxs)(e.p,{children:[`In this lesson, we are only focusing on the folder structure, file naming conventions and how the page is built.\\r\nTo begin with, we picked `,(0,n.jsx)(e.a,{href:\"https://ui.shadcn.com/\",children:\"https://ui.shadcn.com/\"}),\", that is, the home page.\"]}),`\n`,(0,n.jsx)(e.h1,{id:\"home-page\",children:\"Home Page\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"This home page source code is found at \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/page.tsx\",children:\"app/(app)/page.tsx\"}),\".\"]}),`\n`,(0,n.jsx)(e.h2,{id:\"components-imported\",children:\"Components imported\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The following components are imported in the home page, found at \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/app/(app)/page.tsx\",children:\"app/(app)/page.tsx\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Announcement \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/announcement\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ExamplesNav \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/examples-nav\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  PageActions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  PageHeader\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  PageHeaderDescription\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  PageHeaderHeading\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/components/page-header\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Button \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/registry/new-york/ui/button\"'})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" MailPage \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"@/app/(app)/examples/mail/page\"'})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"There are few observations that can be made here:\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[`Component name follows PascalCase naming convention.\\r\nExample: `,(0,n.jsx)(e.code,{children:\"Announcement\"}),\", \",(0,n.jsx)(e.code,{children:\"ExamplesNav\"}),\", \",(0,n.jsx)(e.code,{children:\"PageActions\"}),\", \",(0,n.jsx)(e.code,{children:\"PageHeader\"}),\", \",(0,n.jsx)(e.code,{children:\"PageHeaderDescription\"}),\" etc.,\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[`Import alias used.\\r\nYou will find the below code snippet in `,(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/blob/main/apps/www/tsconfig.json#L19C5-L20C22\",children:\"tsconfig.json\"})]}),`\n`]}),`\n`]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"json\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"json\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"paths\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\": \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'      \"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"@/*\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" [\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"./*\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"],\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:'\"@/\" is the default import alias in Next.js.'}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[`File naming convention.\\r\nFile names such as `,(0,n.jsx)(e.code,{children:\"examples-nav\"}),\", \",(0,n.jsx)(e.code,{children:\"page-header\"}),\" seem to be following kebab-case convention.\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:`Folder structure\\r\nComponents used in this home page are found to be imported from`}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"components\"}),\" folder\"]}),`\n`]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"/components-structure/shadcn-components-folder.png\",alt:\"Shadcn-ui/ui Components Structure\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Components folder does not have any nested folders. All the components that are used across the shadcn-ui/ui are located in this folder.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"These components are different from what you see on \",(0,n.jsx)(e.a,{href:\"https://ui.shadcn.com/docs/components\",children:\"https://ui.shadcn.com/docs/components\"}),`.\\r\nDifferent how? `,(0,n.jsx)(e.a,{href:\"https://ui.shadcn.com/docs/components\",children:\"https://ui.shadcn.com/docs/components\"}),\" provides the components that can be copied and pasted and these reside in \",(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/registry\",children:(0,n.jsx)(e.code,{children:\"registry\"})}),`.\\r\nHowever, `,(0,n.jsx)(e.code,{children:\"components\"}),\" provides building blocks that are built using components from registry and are used in pages.\"]}),`\n`,(0,n.jsxs)(e.ol,{start:\"2\",children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"registry/new-york/ui\"}),\" folder\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/registry/new-york/ui\",children:\"registry/new-york/ui\"}),` contains the components\\r\nthe components that you see at `,(0,n.jsx)(e.a,{href:\"https://ui.shadcn.com/docs/components\",children:\"https://ui.shadcn.com/docs/components\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:`This ui folder is what you get when you initialise shadcn-ui/ui via the CLI.\\r\nThere's no need to create a folder named registry and put your ui components in there because shadcn-ui/ui already\\r\ndoes this for you via the CLI.`}),`\n`,(0,n.jsxs)(e.ol,{start:\"3\",children:[`\n`,(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.code,{children:\"@/app/(app)/examples/mail\"}),\" folder\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:\"https://github.com/shadcn-ui/ui/tree/main/apps/www/app/(app)/examples/mail\",children:\"@/app/(app)/examples/mail\"}),` this is an interesting\\r\nuse case because this imports the whole MailPage.`]}),`\n`,(0,n.jsx)(e.p,{children:`What does this tell us? it means, you can use a page as a component,\\r\nthat is MailPage in this case, by importing in another page.`}),`\n`,(0,n.jsx)(e.h1,{id:\"conclusion\",children:\"Conclusion:\"}),`\n`,(0,n.jsx)(e.p,{children:`You will find this common pattern across the entire shadcn-ui/ui pages using the app router. Components used are either imported\\r\nfrom components folder or imported registry/new-york/ui folder which is the exact folder that shadcn-ui/ui creates for you\\r\nin your project when you initialise it via CLI. There is one special use case where a MailPage is imported in Home Page\\r\nto show MailPage on the landing page.`}),`\n`,(0,n.jsx)(e.p,{children:\"[C: Supabase]\"}),`\n`,(0,n.jsx)(e.p,{children:\"[C: Cal.com]\"}),`\n`,(0,n.jsx)(e.p,{children:\"[C: LobeChat]\"}),`\n`,(0,n.jsx)(e.h1,{id:\"api-layer\",children:\"API Layer\"}),`\n`,(0,n.jsx)(e.h1,{id:\"state-management\",children:\"State management\"})]})}function h(o={}){let{wrapper:e}=o.components||{};return e?(0,n.jsx)(e,{...o,children:(0,n.jsx)(d,{...o})}):d(o)}return b(C);})();\n;return Component;"
        },
        "_id": "course/components-structure-in-supabase/components-structure-in-supabase.mdx",
        "_raw": {
          "sourceFilePath": "course/components-structure-in-supabase/components-structure-in-supabase.mdx",
          "sourceFileName": "components-structure-in-supabase.mdx",
          "sourceFileDir": "course/components-structure-in-supabase",
          "contentType": "mdx",
          "flattenedPath": "course/components-structure-in-supabase/components-structure-in-supabase"
        },
        "type": "Doc",
        "slug": "/course/components-structure-in-supabase/components-structure-in-supabase",
        "slugAsParams": "components-structure-in-supabase/components-structure-in-supabase"
      },
      "documentHash": "1740489186475",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    },
    "blog/warnOnce-package-in-Refine.mdx": {
      "document": {
        "title": "warnOnce package in Refine source code.\r",
        "published": false,
        "featured": false,
        "component": false,
        "toc": true,
        "body": {
          "raw": "\r\nIn this article, we will review a package named warn-once. You will learn\r\n\r\n1. What is warn-once?\r\n    \r\n2. Warn once usage in Refine source code\r\n    \r\n3. warn-once code review\r\n    \r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*ZtasVLHNhJL2qIBzxu6IOg.png)\r\n\r\n### What is warn-once?\r\n\r\nPrint a warning exactly once during development. Suitable for deprecation warnings, warnings for missing setup etc.\r\n\r\n#### Installation\r\n\r\nRun the below command in your CLI to install this package\r\n\r\n```plaintext\r\nnpm install warn-once\r\n```\r\n\r\n#### Usage\r\n\r\nwarn-once accepts 2 parameters, one is the condition and the other one is the message that gets printed to the CLI exactly once. warn-once has some underlying checks to ensure this logs only once in the CLI.\r\n\r\n```plaintext\r\nconst warnOnce = require('warn-once');\r\n\r\n// ...\r\n\r\nwarnOnce(someCondition, 'This is a warning message');\r\n```\r\n\r\n> Note: This warning is only shown only when NODE\\_ENV is ***not set to “production”***\r\n\r\n### Warn once usage in Refine source code\r\n\r\nSo I found this package in the Refine codebase in a file named [hooks/breadcrumbs/index.ts](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L3)\r\n\r\n```plaintext\r\nif (action && action !== \"list\") {\r\n    const key = `actions.${action}`;\r\n    const actionLabel = translate(key);\r\n    if (typeof i18nProvider !== \"undefined\" && actionLabel === key) {\r\n      warnOnce(\r\n        true,\r\n        `[useBreadcrumb]: Breadcrumb missing translate key for the \"${action}\" action. Please add \"actions.${action}\" key to your translation file.\\nFor more information, see https://refine.dev/docs/api-reference/core/hooks/useBreadcrumb/#i18n-support`,\r\n      );\r\n      breadcrumbs.push({\r\n        label: translate(\r\n          `buttons.${action}`,\r\n          textTransformers.humanize(action),\r\n        ),\r\n      });\r\n    } else {\r\n      breadcrumbs.push({\r\n        label: translate(key, textTransformers.humanize(action)),\r\n      });\r\n    }\r\n  }\r\n```\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*K_fNsFB8vybC5vfrZir5MA.png)\r\n\r\nAs you can see there are other files too, where this warn-once is used but with different parameters.\r\n\r\n### warn-once code review\r\n\r\nindex.js in the warn-once repository contains the below code\r\n\r\n```plaintext\r\nconst DEV = process.env.NODE_ENV !== \"production\";\r\n\r\nconst warnings = new Set();\r\n\r\nfunction warnOnce(condition, ...rest) {\r\n  if (DEV && condition) {\r\n    const key = rest.join(\" \");\r\n\r\n    if (warnings.has(key)) {\r\n      return;\r\n    }\r\n\r\n    warnings.add(key);\r\n    console.warn(...rest);\r\n  }\r\n}\r\n\r\nmodule.exports = warnOnce;\r\n```\r\n\r\nI also happened to create a [Pull request](https://github.com/satya164/warn-once/pull/3) with an example demonstrating the ability to pass n number of message strings as parameters.\r\n\r\nSet is used and has check ensures the message gets logged only once.\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/satya164/warn-once/pull/3](https://github.com/satya164/warn-once/pull/3)\r\n    \r\n2. [https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L109](https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L109)\r\n    \r\n3. [https://www.npmjs.com/package/warn-once](https://www.npmjs.com/package/warn-once)\r\n    \r\n4. [https://github.com/satya164/warn-once/blob/main/index.js](https://github.com/satya164/warn-once/blob/main/index.js)",
          "code": "var Component=(()=>{var p=Object.create;var s=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,f=Object.prototype.hasOwnProperty;var w=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),b=(a,n)=>{for(var i in n)s(a,i,{get:n[i],enumerable:!0})},t=(a,n,i,c)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let r of u(n))!f.call(a,r)&&r!==i&&s(a,r,{get:()=>n[r],enumerable:!(c=m(n,r))||c.enumerable});return a};var N=(a,n,i)=>(i=a!=null?p(g(a)):{},t(n||!a||!a.__esModule?s(i,\"default\",{value:a,enumerable:!0}):i,a)),y=a=>t(s({},\"__esModule\",{value:!0}),a);var h=w((j,l)=>{l.exports=_jsx_runtime});var x={};b(x,{default:()=>o,frontmatter:()=>k});var e=N(h()),k={title:\"warnOnce package in Refine source\\xA0code.\"};function d(a){let n={a:\"a\",blockquote:\"blockquote\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"In this article, we will review a package named warn-once. You will learn\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"What is warn-once?\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"Warn once usage in Refine source code\"}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:\"warn-once code review\"}),`\n`]}),`\n`]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*ZtasVLHNhJL2qIBzxu6IOg.png\",alt:\"\"})}),`\n`,(0,e.jsx)(n.h3,{id:\"what-is-warn-once\",children:\"What is warn-once?\"}),`\n`,(0,e.jsx)(n.p,{children:\"Print a warning exactly once during development. Suitable for deprecation warnings, warnings for missing setup etc.\"}),`\n`,(0,e.jsx)(n.h4,{id:\"installation\",children:\"Installation\"}),`\n`,(0,e.jsx)(n.p,{children:\"Run the below command in your CLI to install this package\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsx)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"npm install warn-once\"})})})})}),`\n`,(0,e.jsx)(n.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,e.jsx)(n.p,{children:\"warn-once accepts 2 parameters, one is the condition and the other one is the message that gets printed to the CLI exactly once. warn-once has some underlying checks to ensure this logs only once in the CLI.\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const warnOnce = require('warn-once');\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"// ...\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"warnOnce(someCondition, 'This is a warning message');\"})})]})})}),`\n`,(0,e.jsxs)(n.blockquote,{children:[`\n`,(0,e.jsxs)(n.p,{children:[\"Note: This warning is only shown only when NODE_ENV is \",(0,e.jsx)(n.em,{children:(0,e.jsx)(n.strong,{children:\"not set to \\u201Cproduction\\u201D\"})})]}),`\n`]}),`\n`,(0,e.jsx)(n.h3,{id:\"warn-once-usage-in-refine-sourcecode\",children:\"Warn once usage in Refine source\\xA0code\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"So I found this package in the Refine codebase in a file named \",(0,e.jsx)(n.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L3\",children:\"hooks/breadcrumbs/index.ts\"})]}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'if (action && action !== \"list\") {'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    const key = `actions.${action}`;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    const actionLabel = translate(key);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'    if (typeof i18nProvider !== \"undefined\" && actionLabel === key) {'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      warnOnce(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        true,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'        `[useBreadcrumb]: Breadcrumb missing translate key for the \"${action}\" action. Please add \"actions.${action}\" key to your translation file.\\\\nFor more information, see https://refine.dev/docs/api-reference/core/hooks/useBreadcrumb/#i18n-support`,'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      );\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      breadcrumbs.push({\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        label: translate(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"          `buttons.${action}`,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"          textTransformers.humanize(action),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        ),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      });\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    } else {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      breadcrumbs.push({\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        label: translate(key, textTransformers.humanize(action)),\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      });\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*K_fNsFB8vybC5vfrZir5MA.png\",alt:\"\"})}),`\n`,(0,e.jsx)(n.p,{children:\"As you can see there are other files too, where this warn-once is used but with different parameters.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"warn-once-codereview\",children:\"warn-once code\\xA0review\"}),`\n`,(0,e.jsx)(n.p,{children:\"index.js in the warn-once repository contains the below code\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'const DEV = process.env.NODE_ENV !== \"production\";'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const warnings = new Set();\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"function warnOnce(condition, ...rest) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  if (DEV && condition) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'    const key = rest.join(\" \");'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    if (warnings.has(key)) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      return;\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    warnings.add(key);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    console.warn(...rest);\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"module.exports = warnOnce;\"})})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"I also happened to create a \",(0,e.jsx)(n.a,{href:\"https://github.com/satya164/warn-once/pull/3\",children:\"Pull request\"}),\" with an example demonstrating the ability to pass n number of message strings as parameters.\"]}),`\n`,(0,e.jsx)(n.p,{children:\"Set is used and has check ensures the message gets logged only once.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Hey, my name is \",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.em,{children:(0,e.jsxs)(n.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(n.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Github\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My website\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Learning platform\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Best practices\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A\",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(n.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/satya164/warn-once/pull/3\",children:\"https://github.com/satya164/warn-once/pull/3\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L109\",children:\"https://github.com/refinedev/refine/blob/main/packages/core/src/hooks/breadcrumb/index.ts#L109\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://www.npmjs.com/package/warn-once\",children:\"https://www.npmjs.com/package/warn-once\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/satya164/warn-once/blob/main/index.js\",children:\"https://github.com/satya164/warn-once/blob/main/index.js\"})}),`\n`]}),`\n`]})]})}function o(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(d,{...a})}):d(a)}return y(x);})();\n;return Component;"
        },
        "_id": "blog/warnOnce-package-in-Refine.mdx",
        "_raw": {
          "sourceFilePath": "blog/warnOnce-package-in-Refine.mdx",
          "sourceFileName": "warnOnce-package-in-Refine.mdx",
          "sourceFileDir": "blog",
          "contentType": "mdx",
          "flattenedPath": "blog/warnOnce-package-in-Refine"
        },
        "type": "Doc",
        "slug": "/blog/warnOnce-package-in-Refine",
        "slugAsParams": "warnOnce-package-in-Refine"
      },
      "documentHash": "1742201973624",
      "hasWarnings": false,
      "documentTypeName": "Doc"
    }
  }
}
