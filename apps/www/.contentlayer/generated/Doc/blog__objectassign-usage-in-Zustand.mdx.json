{
  "title": "Object.assign() usage in Zustand source code.\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\n### In this article, we will understand how [Object.assign()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign) is used in [Zustand’s source code](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76).\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*EyRIG5AtyItQSDOHES6hsA.png)\r\n\r\nThe above code snippet is from [vanilla.ts](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76), when you set a state, Object.assign is used to update your state object.\r\n\r\nLet’s first understand the basics of Object.assign:\r\n\r\n### Object.assign()\r\n\r\nThe `Object.assign()` static method copies all [enumerable](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/propertyIsEnumerable) [own properties](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn) from one or more *source objects* to a *target object*. It returns the modified target object.\r\n\r\n```javascript\r\nconst target = { a: 1, b: 2 };\r\nconst source = { b: 4, c: 5 };\r\n\r\nconst returnedTarget = Object.assign(target, source);\r\n\r\nconsole.log(target);\r\n// Expected output: Object { a: 1, b: 4, c: 5 }\r\n\r\nconsole.log(returnedTarget === target);\r\n// Expected output: true\r\n```\r\n\r\nb value in the target object is replaced with b value in source object.\r\n\r\nReally simple right? let’s now run some experiments and understand how Zustand’s setState leverages Object.assign() method.\r\n\r\n### Object.assign() in Zustand’s source code:\r\n\r\n```javascript\r\n// pulled from: https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\r\nstate = (replace != null ? \r\n              replace : \r\n              typeof nextState !== \"object\" || \r\n              nextState === null) ? \r\n                nextState : \r\n                Object.assign({}, state, nextState);\r\n```\r\n\r\nThat’s nested ternary operator there in the above code snippet. if the `replace` is not null, state will be replace or if the nextState is not an object, just return nextState as is but what we are interested in is `Object.assign({}, state, newState)`.\r\n\r\nLet’s first log and see what is in state and nextState when you update your state. The example I picked is from [demo](https://github.com/pmndrs/zustand/tree/main/examples/demo) example in Zustand’s source code. I modified the code a bit so we can put some console statements and run these experiments.\r\n\r\n![](https://cdn-images-1.medium.com/max/1500/1*6_VK0nCD5AqYJQEQr5GtAg.png)\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*O8JfLEqI0ikMLlTTSfDnOA.png)\r\n\r\nIn this simple example, when the count is incremented, it comes down to updating the state object using Object.assign.\r\n\r\nNext time, you are trying to perform some updates on your JSON object, use the Object.assign.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76)\r\n    \r\n2. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Object/assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)\r\n",
    "code": "var Component=(()=>{var F=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,y=Object.prototype.hasOwnProperty;var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),b=(t,e)=>{for(var s in e)r(t,s,{get:e[s],enumerable:!0})},a=(t,e,s,c)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let l of m(e))!y.call(t,l)&&l!==s&&r(t,l,{get:()=>e[l],enumerable:!(c=p(e,l))||c.enumerable});return t};var j=(t,e,s)=>(s=t!=null?F(u(t)):{},a(e||!t||!t.__esModule?r(s,\"default\",{value:t,enumerable:!0}):s,t)),f=t=>a(r({},\"__esModule\",{value:!0}),t);var i=g((x,o)=>{o.exports=_jsx_runtime});var w={};b(w,{default:()=>d,frontmatter:()=>v});var n=j(i()),v={title:\"Object.assign() usage in Zustand source\\xA0code.\"};function h(t){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h1:\"h1\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.h3,{id:\"in-this-article-we-will-understand-how-objectassign-is-used-in-zustands-source-code\",children:[\"In this article, we will understand how \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\",children:\"Object.assign()\"}),\" is used in \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\",children:\"Zustand\\u2019s source code\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*EyRIG5AtyItQSDOHES6hsA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The above code snippet is from \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\",children:\"vanilla.ts\"}),\", when you set a state, Object.assign is used to update your state object.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"Let\\u2019s first understand the basics of Object.assign:\"}),`\n`,(0,n.jsx)(e.h3,{id:\"objectassign\",children:\"Object.assign()\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"The \",(0,n.jsx)(e.code,{children:\"Object.assign()\"}),\" static method copies all \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/propertyIsEnumerable\",children:\"enumerable\"}),\" \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwn\",children:\"own properties\"}),\" from one or more \",(0,n.jsx)(e.em,{children:\"source objects\"}),\" to a \",(0,n.jsx)(e.em,{children:\"target object\"}),\". It returns the modified target object.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" target \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" a\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 2\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" source \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 4,\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" c\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 5\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" };\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" returnedTarget \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Object\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"assign\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"target\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" source\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"target\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: Object { a: 1, b: 4, c: 5 }\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"returnedTarget \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" target\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: true\"})]})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"b value in the target object is replaced with b value in source object.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Really simple right? let\\u2019s now run some experiments and understand how Zustand\\u2019s setState leverages Object.assign() method.\"}),`\n`,(0,n.jsx)(e.h3,{id:\"objectassign-in-zustands-sourcecode\",children:\"Object.assign() in Zustand\\u2019s source\\xA0code:\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" pulled from: https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"replace \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              replace \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"              typeof\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"object\"'}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"              nextState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null)\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ?\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"                nextState \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" \"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"                Object\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"assign\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({},\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"That\\u2019s nested ternary operator there in the above code snippet. if the \",(0,n.jsx)(e.code,{children:\"replace\"}),\" is not null, state will be replace or if the nextState is not an object, just return nextState as is but what we are interested in is \",(0,n.jsx)(e.code,{children:\"Object.assign({}, state, newState)\"}),\".\"]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Let\\u2019s first log and see what is in state and nextState when you update your state. The example I picked is from \",(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/tree/main/examples/demo\",children:\"demo\"}),\" example in Zustand\\u2019s source code. I modified the code a bit so we can put some console statements and run these experiments.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1500/1*6_VK0nCD5AqYJQEQr5GtAg.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*O8JfLEqI0ikMLlTTSfDnOA.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.p,{children:\"In this simple example, when the count is incremented, it comes down to updating the state object using Object.assign.\"}),`\n`,(0,n.jsx)(e.p,{children:\"Next time, you are trying to perform some updates on your JSON object, use the Object.assign.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\",children:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L76\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\"})}),`\n`]}),`\n`]})]})}function d(t={}){let{wrapper:e}=t.components||{};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(h,{...t})}):h(t)}return f(w);})();\n;return Component;"
  },
  "_id": "blog/objectassign-usage-in-Zustand.mdx",
  "_raw": {
    "sourceFilePath": "blog/objectassign-usage-in-Zustand.mdx",
    "sourceFileName": "objectassign-usage-in-Zustand.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/objectassign-usage-in-Zustand"
  },
  "type": "Doc",
  "slug": "/blog/objectassign-usage-in-Zustand",
  "slugAsParams": "objectassign-usage-in-Zustand"
}