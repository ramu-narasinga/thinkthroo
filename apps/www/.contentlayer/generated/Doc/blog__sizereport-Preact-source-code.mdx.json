{
  "title": "sizereport.config.js in Preact source code.  \r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nI found a file named [sizereport.config.js in Preact source code](https://github.com/preactjs/preact/blob/main/sizereport.config.js) and it has the below code.\r\n\r\n```plaintext\r\nmodule.exports = {\r\n repo: 'preactjs/preact',\r\n path: ['./{compat,debug,hooks,}/dist/**/!(*.map)'],\r\n branch: 'main'\r\n};\r\n```\r\n\r\nI was trying to find where this config is used, but I couldn’t yet. Below are the [search results](https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code):\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*QmxthZjxJceSFFs6mQ9dWA.png)\r\n\r\nInstead I found something else. There is a [size.yml in the .github folder](https://github.com/preactjs/preact/blob/main/.github/workflows/size.yml)\r\n\r\n### size.yml\r\n\r\n```plaintext\r\nname: Compressed Size\r\n\r\non:\r\n  workflow_call:\r\n\r\njobs:\r\n  build:\r\n    runs-on: ubuntu-latest\r\n    steps:\r\n      - uses: actions/checkout@v4\r\n      - uses: actions/setup-node@v4\r\n        with:\r\n          node-version-file: 'package.json'\r\n          cache: 'npm'\r\n          cache-dependency-path: '**/package-lock.json'\r\n      - uses: preactjs/compressed-size-action@v2\r\n        with:\r\n          repo-token: '${{ secrets.GITHUB_TOKEN }}'\r\n          # Our `prepare` script already builds the app post-install,\r\n          # building it again would be redundant\r\n          build-script: 'npm run --if-present noop'\r\n```\r\n\r\nThis size workflow action contains this above code. It uses preactjs/compressed-size-action@v2. [compressed-sized-action is another repository.](https://github.com/preactjs/compressed-size-action/tree/master)\r\n\r\n### Compressed Size Action\r\n\r\nA GitHub action that reports changes in compressed file sizes on your PRs.\r\n\r\n* Automatically uses `yarn`, `pnpm`, `bun`, or `npm ci` when lockfiles are present\r\n    \r\n* Builds your PR, then builds the target and compares between the two\r\n    \r\n* Doesn’t upload anything or rely on centralized storage\r\n    \r\n* Supports [custom build scripts](https://github.com/preactjs/compressed-size-action/tree/master#customizing-the-build) and [file patterns](https://github.com/preactjs/compressed-size-action/tree/master#customizing-the-list-of-files)\r\n    \r\n\r\nRead more about [compress-size-action](https://github.com/marketplace/actions/compressed-size-action).\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*QAtoXcgYPTKpXqP84GYOUA.png)\r\n\r\nThe above image shows how this Github action reports the size changes, check out this [pull request](https://github.com/preactjs/compressed-size-action/pull/53).\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/preactjs/preact/blob/main/sizereport.config.js](https://github.com/preactjs/preact/blob/main/sizereport.config.js)\r\n    \r\n2. [https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code](https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code)\r\n    \r\n3. [https://github.com/preactjs/compressed-size-action/tree/master](https://github.com/preactjs/compressed-size-action/tree/master)",
    "code": "var Component=(()=>{var d=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,b=Object.prototype.hasOwnProperty;var f=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),j=(a,e)=>{for(var r in e)i(a,r,{get:e[r],enumerable:!0})},c=(a,e,r,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let t of u(e))!b.call(a,t)&&t!==r&&i(a,t,{get:()=>e[t],enumerable:!(s=m(e,t))||s.enumerable});return a};var y=(a,e,r)=>(r=a!=null?d(g(a)):{},c(e||!a||!a.__esModule?i(r,\"default\",{value:a,enumerable:!0}):r,a)),z=a=>c(i({},\"__esModule\",{value:!0}),a);var l=f((x,h)=>{h.exports=_jsx_runtime});var w={};j(w,{default:()=>p,frontmatter:()=>N});var n=y(l()),N={title:\"sizereport.config.js in Preact source code.\"};function o(a){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",ul:\"ul\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"I found a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/sizereport.config.js\",children:\"sizereport.config.js in Preact source code\"}),\" and it has the below code.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"module.exports = {\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" repo: 'preactjs/preact',\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" path: ['./{compat,debug,hooks,}/dist/**/!(*.map)'],\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\" branch: 'main'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"I was trying to find where this config is used, but I couldn\\u2019t yet. Below are the \",(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code\",children:\"search results\"}),\":\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*QmxthZjxJceSFFs6mQ9dWA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Instead I found something else. There is a \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/.github/workflows/size.yml\",children:\"size.yml in the\\xA0.github folder\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"sizeyml\",children:\"size.yml\"}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"name: Compressed Size\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"on:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  workflow_call:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"jobs:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"  build:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    runs-on: ubuntu-latest\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"    steps:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      - uses: actions/checkout@v4\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      - uses: actions/setup-node@v4\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        with:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          node-version-file: 'package.json'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          cache: 'npm'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          cache-dependency-path: '**/package-lock.json'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"      - uses: preactjs/compressed-size-action@v2\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"        with:\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          repo-token: '${{ secrets.GITHUB_TOKEN }}'\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          # Our `prepare` script already builds the app post-install,\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          # building it again would be redundant\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{children:\"          build-script: 'npm run --if-present noop'\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"This size workflow action contains this above code. It uses preactjs/compressed-size-action@v2. \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/compressed-size-action/tree/master\",children:\"compressed-sized-action is another repository.\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"compressed-sizeaction\",children:\"Compressed Size\\xA0Action\"}),`\n`,(0,n.jsx)(e.p,{children:\"A GitHub action that reports changes in compressed file sizes on your PRs.\"}),`\n`,(0,n.jsxs)(e.ul,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Automatically uses \",(0,n.jsx)(e.code,{children:\"yarn\"}),\", \",(0,n.jsx)(e.code,{children:\"pnpm\"}),\", \",(0,n.jsx)(e.code,{children:\"bun\"}),\", or \",(0,n.jsx)(e.code,{children:\"npm ci\"}),\" when lockfiles are present\"]}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Builds your PR, then builds the target and compares between the two\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:\"Doesn\\u2019t upload anything or rely on centralized storage\"}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsxs)(e.p,{children:[\"Supports \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/compressed-size-action/tree/master#customizing-the-build\",children:\"custom build scripts\"}),\" and \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/compressed-size-action/tree/master#customizing-the-list-of-files\",children:\"file patterns\"})]}),`\n`]}),`\n`]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Read more about \",(0,n.jsx)(e.a,{href:\"https://github.com/marketplace/actions/compressed-size-action\",children:\"compress-size-action\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*QAtoXcgYPTKpXqP84GYOUA.png\",alt:\"\"})}),`\n`,(0,n.jsxs)(e.p,{children:[\"The above image shows how this Github action reports the size changes, check out this \",(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/compressed-size-action/pull/53\",children:\"pull request\"}),\".\"]}),`\n`,(0,n.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Hey, my name is \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/preact/blob/main/sizereport.config.js\",children:\"https://github.com/preactjs/preact/blob/main/sizereport.config.js\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code\",children:\"https://github.com/search?q=repo%3Apreactjs%2Fpreact%20report&type=code\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/preactjs/compressed-size-action/tree/master\",children:\"https://github.com/preactjs/compressed-size-action/tree/master\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(o,{...a})}):o(a)}return z(w);})();\n;return Component;"
  },
  "_id": "blog/sizereport-Preact-source-code.mdx",
  "_raw": {
    "sourceFilePath": "blog/sizereport-Preact-source-code.mdx",
    "sourceFileName": "sizereport-Preact-source-code.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/sizereport-Preact-source-code"
  },
  "type": "Doc",
  "slug": "/blog/sizereport-Preact-source-code",
  "slugAsParams": "sizereport-Preact-source-code"
}