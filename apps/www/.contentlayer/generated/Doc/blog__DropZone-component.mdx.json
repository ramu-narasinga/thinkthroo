{
  "title": "DropZone component in FilePizza codebase.\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, we will review DropZone.tsx component in FilePizza codebase.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*8Z8G2JnWmswFweRE3VsGZA.png)\r\n\r\n### DropZone HTML\r\n\r\n```plaintext\r\n<>\r\n  <div\r\n    className={`fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center text-2xl text-white transition-opacity duration-300 backdrop-blur-sm z-50 ${\r\n      isDragging ? 'opacity-100 visible' : 'opacity-0 invisible'\r\n    }`}\r\n  >\r\n    Drop to select {fileCount} file{fileCount !== 1 ? 's' : ''}\r\n  </div>\r\n  <input\r\n    type=\"file\"\r\n    ref={fileInputRef}\r\n    className=\"hidden\"\r\n    onChange={handleFileInputChange}\r\n    multiple\r\n  />\r\n  <button\r\n    className=\"block cursor-pointer relative py-3 px-6 text-base font-bold text-stone-700 dark:text-stone-200 bg-white dark:bg-stone-800 border-2 border-stone-700 dark:border-stone-700 rounded-lg transition-all duration-300 ease-in-out outline-none hover:shadow-md active:shadow-inner focus:shadow-outline\"\r\n    onClick={handleClick}\r\n  >\r\n    <span className=\"text-center text-stone-700 dark:text-stone-200\">\r\n      Drop a file to get started\r\n    </span>\r\n  </button>\r\n</>\r\n```\r\n\r\nThis is pretty standard, you hide your input and handle the file upload. On the button, you will find the handleClick button.\r\n\r\nFilePizza claims that no file reaches their servers. Let’s confirm by reviewing what they do with selected files from your local machine.\r\n\r\n### File handlers\r\n\r\n```plaintext\r\nconst handleDragEnter = useCallback((e: DragEvent) => {\r\n  e.preventDefault()\r\n  setIsDragging(true)\r\n  setFileCount(e.dataTransfer?.items.length || 0)\r\n}, [])\r\n\r\nconst handleDragLeave = useCallback((e: DragEvent) => {\r\n  e.preventDefault()\r\n\r\n  const currentTarget =\r\n    e.currentTarget === window ? window.document : e.currentTarget\r\n  if (\r\n    e.relatedTarget &&\r\n    currentTarget instanceof Node &&\r\n    currentTarget.contains(e.relatedTarget as Node)\r\n  ) {\r\n    return\r\n  }\r\n\r\n  setIsDragging(false)\r\n}, [])\r\n\r\nconst handleDragOver = useCallback((e: DragEvent) => {\r\n  e.preventDefault()\r\n  if (e.dataTransfer) {\r\n    e.dataTransfer.dropEffect = 'copy'\r\n  }\r\n}, [])\r\n\r\nconst handleDrop = useCallback(\r\n  async (e: DragEvent) => {\r\n    e.preventDefault()\r\n    setIsDragging(false)\r\n\r\n    if (e.dataTransfer) {\r\n      const files = await extractFileList(e)\r\n      onDrop(files)\r\n    }\r\n  },\r\n  [onDrop],\r\n)\r\n\r\nconst handleClick = useCallback(() => {\r\n  fileInputRef.current?.click()\r\n}, [])\r\n\r\nconst handleFileInputChange = useCallback(\r\n  async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    if (e.target.files) {\r\n      const files = Array.from(e.target.files)\r\n      onDrop(files)\r\n    }\r\n  },\r\n  [onDrop],\r\n)\r\n```\r\n\r\nThere is no addition API calls here, just onDrop and the extractFileList.\r\n\r\n### extractFileList\r\n\r\n```plaintext\r\nexport const extractFileList = async (\r\n  e: React.DragEvent | DragEvent,\r\n): Promise<File[]> => {\r\n  if (!e.dataTransfer || !e.dataTransfer.items.length) {\r\n    return []\r\n  }\r\n\r\n  const items = e.dataTransfer.items\r\n  const scans: Promise<File[]>[] = []\r\n  const files: Promise<File>[] = []\r\n\r\n  for (let i = 0; i < items.length; i++) {\r\n    const item = items[i]\r\n    const entry = item.webkitGetAsEntry()\r\n    if (entry) {\r\n      if (entry.isDirectory) {\r\n        scans.push(scanDirectoryEntry(entry))\r\n      } else {\r\n        files.push(getAsFile(entry))\r\n      }\r\n    }\r\n  }\r\n\r\n  const scanResults = await Promise.all(scans)\r\n  const fileResults = await Promise.all(files)\r\n\r\n  return scanResults.flat().concat(fileResults)\r\n}\r\n```\r\n\r\nFrom the looks of this function, FilePizza also supports uploading a directory.\r\n\r\n### Drag and drop listeners\r\n\r\nFinally, let’s review the listeners attached in this DropZone component.\r\n\r\n```plaintext\r\nuseEffect(() => {\r\n  window.addEventListener('dragenter', handleDragEnter)\r\n  window.addEventListener('dragleave', handleDragLeave)\r\n  window.addEventListener('dragover', handleDragOver)\r\n  window.addEventListener('drop', handleDrop)\r\n\r\n  return () => {\r\n    window.removeEventListener('dragenter', handleDragEnter)\r\n    window.removeEventListener('dragleave', handleDragLeave)\r\n    window.removeEventListener('dragover', handleDragOver)\r\n    window.removeEventListener('drop', handleDrop)\r\n  }\r\n}, [handleDragEnter, handleDragLeave, handleDragOver, handleDrop])\r\n```\r\n\r\n### About me:\r\n\r\nHey, my name is [Ramu Narasinga](https://ramunarasinga.com). I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@ramu-narasinga](https://www.youtube.com/@ramu-narasinga)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/kern/filepizza/blob/main/src/components/DropZone.tsx#L4](https://github.com/kern/filepizza/blob/main/src/components/DropZone.tsx#L4)\r\n    \r\n2. [https://github.com/kern/filepizza/blob/327dcc3581b930ee191f54840110679b959445c7/src/app/page.tsx#L30](https://github.com/kern/filepizza/blob/327dcc3581b930ee191f54840110679b959445c7/src/app/page.tsx#L30)\r\n    \r\n3. [https://github.com/kern/filepizza/blob/327dcc3581b930ee191f54840110679b959445c7/src/app/page.tsx#L141](https://github.com/kern/filepizza/blob/327dcc3581b930ee191f54840110679b959445c7/src/app/page.tsx#L141)",
    "code": "var Component=(()=>{var o=Object.create;var i=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var N=Object.getOwnPropertyNames;var g=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var f=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports),b=(a,n)=>{for(var s in n)i(a,s,{get:n[s],enumerable:!0})},c=(a,n,s,r)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let l of N(n))!u.call(a,l)&&l!==s&&i(a,l,{get:()=>n[l],enumerable:!(r=m(n,l))||r.enumerable});return a};var v=(a,n,s)=>(s=a!=null?o(g(a)):{},c(n||!a||!a.__esModule?i(s,\"default\",{value:a,enumerable:!0}):s,a)),w=a=>c(i({},\"__esModule\",{value:!0}),a);var d=f((k,t)=>{t.exports=_jsx_runtime});var y={};b(y,{default:()=>p,frontmatter:()=>D});var e=v(d()),D={title:\"DropZone component in FilePizza codebase.\"};function h(a){let n={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...a.components};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.p,{children:\"In this article, we will review DropZone.tsx component in FilePizza codebase.\"}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*8Z8G2JnWmswFweRE3VsGZA.png\",alt:\"\"})}),`\n`,(0,e.jsx)(n.h3,{id:\"dropzone-html\",children:\"DropZone HTML\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"<>\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  <div\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    className={`fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center text-2xl text-white transition-opacity duration-300 backdrop-blur-sm z-50 ${\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      isDragging ? 'opacity-100 visible' : 'opacity-0 invisible'\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }`}\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  >\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    Drop to select {fileCount} file{fileCount !== 1 ? 's' : ''}\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  </div>\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  <input\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'    type=\"file\"'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    ref={fileInputRef}\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'    className=\"hidden\"'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    onChange={handleFileInputChange}\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    multiple\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  />\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  <button\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'    className=\"block cursor-pointer relative py-3 px-6 text-base font-bold text-stone-700 dark:text-stone-200 bg-white dark:bg-stone-800 border-2 border-stone-700 dark:border-stone-700 rounded-lg transition-all duration-300 ease-in-out outline-none hover:shadow-md active:shadow-inner focus:shadow-outline\"'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    onClick={handleClick}\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  >\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:'    <span className=\"text-center text-stone-700 dark:text-stone-200\">'})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      Drop a file to get started\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    </span>\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  </button>\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"</>\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"This is pretty standard, you hide your input and handle the file upload. On the button, you will find the handleClick button.\"}),`\n`,(0,e.jsx)(n.p,{children:\"FilePizza claims that no file reaches their servers. Let\\u2019s confirm by reviewing what they do with selected files from your local machine.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"file-handlers\",children:\"File handlers\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const handleDragEnter = useCallback((e: DragEvent) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  e.preventDefault()\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  setIsDragging(true)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  setFileCount(e.dataTransfer?.items.length || 0)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}, [])\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const handleDragLeave = useCallback((e: DragEvent) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  e.preventDefault()\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const currentTarget =\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    e.currentTarget === window ? window.document : e.currentTarget\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  if (\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    e.relatedTarget &&\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    currentTarget instanceof Node &&\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    currentTarget.contains(e.relatedTarget as Node)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  ) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    return\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  setIsDragging(false)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}, [])\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const handleDragOver = useCallback((e: DragEvent) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  e.preventDefault()\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  if (e.dataTransfer) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    e.dataTransfer.dropEffect = 'copy'\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}, [])\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const handleDrop = useCallback(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  async (e: DragEvent) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    e.preventDefault()\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    setIsDragging(false)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    if (e.dataTransfer) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      const files = await extractFileList(e)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      onDrop(files)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  [onDrop],\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\")\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const handleClick = useCallback(() => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  fileInputRef.current?.click()\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}, [])\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"const handleFileInputChange = useCallback(\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  async (e: React.ChangeEvent<HTMLInputElement>) => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    if (e.target.files) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      const files = Array.from(e.target.files)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      onDrop(files)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  },\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  [onDrop],\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\")\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"There is no addition API calls here, just onDrop and the extractFileList.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"extractfilelist\",children:\"extractFileList\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"export const extractFileList = async (\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  e: React.DragEvent | DragEvent,\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"): Promise<File[]> => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  if (!e.dataTransfer || !e.dataTransfer.items.length) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    return []\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const items = e.dataTransfer.items\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const scans: Promise<File[]>[] = []\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const files: Promise<File>[] = []\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  for (let i = 0; i < items.length; i++) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    const item = items[i]\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    const entry = item.webkitGetAsEntry()\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    if (entry) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      if (entry.isDirectory) {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        scans.push(scanDirectoryEntry(entry))\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      } else {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"        files.push(getAsFile(entry))\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"      }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const scanResults = await Promise.all(scans)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  const fileResults = await Promise.all(files)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  return scanResults.flat().concat(fileResults)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}\"})})]})})}),`\n`,(0,e.jsx)(n.p,{children:\"From the looks of this function, FilePizza also supports uploading a directory.\"}),`\n`,(0,e.jsx)(n.h3,{id:\"drag-and-drop-listeners\",children:\"Drag and drop listeners\"}),`\n`,(0,e.jsx)(n.p,{children:\"Finally, let\\u2019s review the listeners attached in this DropZone component.\"}),`\n`,(0,e.jsx)(n.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,e.jsx)(n.pre,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:(0,e.jsxs)(n.code,{\"data-language\":\"plaintext\",\"data-theme\":\"default\",children:[(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"useEffect(() => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  window.addEventListener('dragenter', handleDragEnter)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  window.addEventListener('dragleave', handleDragLeave)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  window.addEventListener('dragover', handleDragOver)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  window.addEventListener('drop', handleDrop)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  return () => {\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    window.removeEventListener('dragenter', handleDragEnter)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    window.removeEventListener('dragleave', handleDragLeave)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    window.removeEventListener('dragover', handleDragOver)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"    window.removeEventListener('drop', handleDrop)\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"  }\"})}),`\n`,(0,e.jsx)(n.span,{className:\"line\",children:(0,e.jsx)(n.span,{children:\"}, [handleDragEnter, handleDragLeave, handleDragOver, handleDrop])\"})})]})})}),`\n`,(0,e.jsx)(n.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,e.jsxs)(n.p,{children:[\"Hey, my name is \",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com\",children:\"Ramu Narasinga\"}),\". I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"]}),`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.em,{children:(0,e.jsxs)(n.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,e.jsx)(n.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://www.youtube.com/@ramu-narasinga\",children:\"https://www.youtube.com/@ramu-narasinga\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,e.jsxs)(n.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,e.jsx)(n.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,e.jsx)(n.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,e.jsxs)(n.ol,{children:[`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/kern/filepizza/blob/main/src/components/DropZone.tsx#L4\",children:\"https://github.com/kern/filepizza/blob/main/src/components/DropZone.tsx#L4\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/kern/filepizza/blob/327dcc3581b930ee191f54840110679b959445c7/src/app/page.tsx#L30\",children:\"https://github.com/kern/filepizza/blob/327dcc3581b930ee191f54840110679b959445c7/src/app/page.tsx#L30\"})}),`\n`]}),`\n`,(0,e.jsxs)(n.li,{children:[`\n`,(0,e.jsx)(n.p,{children:(0,e.jsx)(n.a,{href:\"https://github.com/kern/filepizza/blob/327dcc3581b930ee191f54840110679b959445c7/src/app/page.tsx#L141\",children:\"https://github.com/kern/filepizza/blob/327dcc3581b930ee191f54840110679b959445c7/src/app/page.tsx#L141\"})}),`\n`]}),`\n`]})]})}function p(a={}){let{wrapper:n}=a.components||{};return n?(0,e.jsx)(n,{...a,children:(0,e.jsx)(h,{...a})}):h(a)}return w(y);})();\n;return Component;"
  },
  "_id": "blog/DropZone-component.mdx",
  "_raw": {
    "sourceFilePath": "blog/DropZone-component.mdx",
    "sourceFileName": "DropZone-component.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/DropZone-component"
  },
  "type": "Doc",
  "slug": "/blog/DropZone-component",
  "slugAsParams": "DropZone-component"
}