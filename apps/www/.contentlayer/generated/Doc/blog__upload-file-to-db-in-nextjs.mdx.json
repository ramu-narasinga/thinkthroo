{
  "title": "Is it possible to upload a file to a database in Next.js?\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, we analyse how Documenso stores an uploaded file into its database by reviewing its source code. Where is this code that does this? You will find the below code snippet in a file named [upload/put-file.ts](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56).\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*lvU5O9VoiK9YlwdySw_p3Q.png)\r\n\r\n```js\r\nconst putFileInDatabase = async (file: File) => {\r\n  const contents = await file.arrayBuffer();\r\n\r\n  const binaryData = new Uint8Array(contents);\r\n\r\n  const asciiData = base64.encode(binaryData);\r\n\r\n  return {\r\n    type: DocumentDataType.BYTES_64,\r\n    data: asciiData,\r\n  };\r\n};\r\n```\r\n\r\n#### arrayBuffer\r\n\r\nSo what exactly is happening here? `contents` is assigned a value returned by file.arrayBuffer(). Read more about [arrayBuffer()](https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer).\r\n\r\n```js\r\nconst contents = await file.arrayBuffer();\r\n```\r\n\r\n#### Uint8Array\r\n\r\nThen this arrayBuffer is converted in an object returned by `new Uint8Array(contents)`. Read more about [Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array).\r\n\r\n```js\r\nconst binaryData = new Uint8Array(contents);\r\n```\r\n\r\n#### base64.encode\r\n\r\nThen this binary data is encoded using base64 and assigned to a variable named `asciiData`. Read more about [base64](https://developer.mozilla.org/en-US/docs/Glossary/Base64).\r\n\r\n```js\r\nconst asciiData = base64.encode(binaryData);\r\n```\r\n\r\nand finally this `asciiData` and the type are returned as an object.\r\n\r\n```js\r\nreturn {\r\n type: DocumentDataType.BYTES_64,\r\n data: asciiData,\r\n};\r\n```\r\n\r\nAt this point, I wanted to find out what is the data type of the column that stores this value. For that, we first need to find out how this returned object is processed further.\r\n\r\n#### createDocumentData fn\r\n\r\nIn the [upload-document.ts](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L67)[,](https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L67%29,) you will find this below code snippet:\r\n\r\n```js\r\nconst { id: documentDataId } = await createDocumentData({\r\n type,\r\n data,\r\n});\r\n```\r\n\r\nYou will find `createDocumentData` function in [create-document-data.ts](https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11)\r\n\r\n```js\r\nexport const createDocumentData = async ({ type, data }: CreateDocumentDataOptions) => {\r\n  return await prisma.documentData.create({\r\n    data: {\r\n      type,\r\n      data,\r\n      initialData: data,\r\n    },\r\n  });\r\n};\r\n```\r\n\r\n`prisma.documentData` hints that documentData is the schema you should be looking for. In the [schema.prisma](https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360), you will find the below model defined for DocumentData.\r\n\r\n```js\r\nmodel DocumentData {\r\n id String @id @default(cuid())\r\n type DocumentDataType\r\n data String\r\n initialData String\r\n Document Document?\r\n Template Template?\r\n}\r\n```\r\n\r\nTo conclude this investigation, I found that file is saved as a string after some operations defined above.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56](https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56)\r\n    \r\n2. [https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L67](https://github.com/documenso/documenso/blob/main/apps/web/src/app/\\(dashboard\\)/documents/upload-document.tsx#L67)\r\n    \r\n3. [https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11](https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11)\r\n    \r\n4. [https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360](https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360)\r\n    \r\n5. [https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11](https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11)\r\n    \r\n6. [https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer](https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer)\r\n    \r\n7. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array)",
    "code": "var Component=(()=>{var F=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var m=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(l,e)=>()=>(e||l((e={exports:{}}).exports,e),e.exports),g=(l,e)=>{for(var a in e)r(l,a,{get:e[a],enumerable:!0})},t=(l,e,a,s)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of m(e))!u.call(l,c)&&c!==a&&r(l,c,{get:()=>e[c],enumerable:!(s=p(e,c))||s.enumerable});return l};var f=(l,e,a)=>(a=l!=null?F(y(l)):{},t(e||!l||!l.__esModule?r(a,\"default\",{value:l,enumerable:!0}):a,l)),D=l=>t(r({},\"__esModule\",{value:!0}),l);var i=b((j,o)=>{o.exports=_jsx_runtime});var v={};g(v,{default:()=>h,frontmatter:()=>N});var n=f(i()),N={title:\"Is it possible to upload a file to a database in\\xA0Next.js?\"};function d(l){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...l.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:[\"In this article, we analyse how Documenso stores an uploaded file into its database by reviewing its source code. Where is this code that does this? You will find the below code snippet in a file named \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56\",children:\"upload/put-file.ts\"}),\".\"]}),`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*lvU5O9VoiK9YlwdySw_p3Q.png\",alt:\"\"})}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" putFileInDatabase\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"file\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" File\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" contents \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"arrayBuffer\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" binaryData \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Uint8Array\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"contents\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" asciiData \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" base64\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"encode\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"binaryData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" DocumentDataType\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"BYTES_64\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" asciiData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  };\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.h4,{id:\"arraybuffer\",children:\"arrayBuffer\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"So what exactly is happening here? \",(0,n.jsx)(e.code,{children:\"contents\"}),\" is assigned a value returned by file.arrayBuffer(). Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer\",children:\"arrayBuffer()\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" contents \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" file\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"arrayBuffer\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"();\"})]})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"uint8array\",children:\"Uint8Array\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Then this arrayBuffer is converted in an object returned by \",(0,n.jsx)(e.code,{children:\"new Uint8Array(contents)\"}),\". Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\",children:\"Uint8Array\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" binaryData \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" new\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Uint8Array\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"contents\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,n.jsx)(e.h4,{id:\"base64encode\",children:\"base64.encode\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"Then this binary data is encoded using base64 and assigned to a variable named \",(0,n.jsx)(e.code,{children:\"asciiData\"}),\". Read more about \",(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Glossary/Base64\",children:\"base64\"}),\".\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsx)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" asciiData \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" base64\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"encode\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"binaryData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]})})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"and finally this \",(0,n.jsx)(e.code,{children:\"asciiData\"}),\" and the type are returned as an object.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" DocumentDataType\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"BYTES_64\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" asciiData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"At this point, I wanted to find out what is the data type of the column that stores this value. For that, we first need to find out how this returned object is processed further.\"}),`\n`,(0,n.jsx)(e.h4,{id:\"createdocumentdata-fn\",children:\"createDocumentData fn\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"In the \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L67\",children:\"upload-document.ts\"}),(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/%28dashboard%29/documents/upload-document.tsx#L67%29,\",children:\",\"}),\" you will find this below code snippet:\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" id\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" documentDataId \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createDocumentData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"You will find \",(0,n.jsx)(e.code,{children:\"createDocumentData\"}),\" function in \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11\",children:\"create-document-data.ts\"})]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createDocumentData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}:\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" CreateDocumentDataOptions\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  return\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" await\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" prisma\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"documentData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"create\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      initialData\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})})]})})}),`\n`,(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:\"prisma.documentData\"}),\" hints that documentData is the schema you should be looking for. In the \",(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360\",children:\"schema.prisma\"}),\", you will find the below model defined for DocumentData.\"]}),`\n`,(0,n.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,n.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,n.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"model DocumentData \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" id String \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"id \"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"default\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\"cuid\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"())\"})]}),`\n`,(0,n.jsxs)(e.span,{className:\"line\",children:[(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,n.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" DocumentDataType\"})]}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" data String\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" initialData String\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Document Document?\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Template Template?\"})}),`\n`,(0,n.jsx)(e.span,{className:\"line\",children:(0,n.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,n.jsx)(e.p,{children:\"To conclude this investigation, I found that file is saved as a string after some operations defined above.\"}),`\n`,(0,n.jsx)(e.h1,{id:\"about-me\",children:(0,n.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,n.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,n.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,n.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,n.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,n.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,n.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,n.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,n.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,n.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,n.jsxs)(e.ol,{children:[`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/universal/upload/put-file.ts#L56\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L67\",children:\"https://github.com/documenso/documenso/blob/main/apps/web/src/app/(dashboard)/documents/upload-document.tsx#L67\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360\",children:\"https://github.com/documenso/documenso/blob/main/packages/prisma/schema.prisma#L360\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11\",children:\"https://github.com/documenso/documenso/blob/main/packages/lib/server-only/document-data/create-document-data.ts#L11\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer\",children:\"https://developer.mozilla.org/en-US/docs/Web/API/Blob/arrayBuffer\"})}),`\n`]}),`\n`,(0,n.jsxs)(e.li,{children:[`\n`,(0,n.jsx)(e.p,{children:(0,n.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array\"})}),`\n`]}),`\n`]})]})}function h(l={}){let{wrapper:e}=l.components||{};return e?(0,n.jsx)(e,{...l,children:(0,n.jsx)(d,{...l})}):d(l)}return D(v);})();\n;return Component;"
  },
  "_id": "blog/upload-file-to-db-in-nextjs.mdx",
  "_raw": {
    "sourceFilePath": "blog/upload-file-to-db-in-nextjs.mdx",
    "sourceFileName": "upload-file-to-db-in-nextjs.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/upload-file-to-db-in-nextjs"
  },
  "type": "Doc",
  "slug": "/blog/upload-file-to-db-in-nextjs",
  "slugAsParams": "upload-file-to-db-in-nextjs"
}