{
  "title": "How the userId is added to the tRPC ctx in LobeChat source code?\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, we analyse how the currently logged-in userId is added to the tRPC ctx by reviewing LobeChat source code. I recommend [reading this tRPC setup](https://trpc.io/docs/client/react/server-components) to relate to the concepts explained in this article.\r\n\r\nBut before that, I want to explain how I found this. I study LobeChat source code and was working on a project that involved tRPC + Supabase in a Next.js app router. I am following the similar codebase architecture to LobeChat’s.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*0aZjm-ITDZYywrCk_rvsSA.png)\r\n\r\nLobeChat uses Clerk for Authentication, the feature I was working required auth wall before making a request to the backend. Since I am following the LobeChat codebase principles, I just had to figure out how LobeChat configured `authedProcedure`.\r\n\r\nWhen reading open-source code, I always use documentation to set my direction, otherwise I would be lost as these projects massive. This way, at the step — [Create a tRPC router](https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router), you will find this code below:\r\n\r\n```js\r\nimport * as trpcNext from '@trpc/server/adapters/next';\r\nimport { appRouter } from '../../../server/routers/_app';\r\n// export API handler\r\n// @link https://trpc.io/docs/v11/server/adapters\r\nexport default trpcNext.createNextApiHandler({\r\n router: appRouter,\r\n createContext: () => ({}),\r\n});\r\n```\r\n\r\n`createContext` in this documentation returns an object but that is not the case with LobeChat’s createContext. createContext is configured when you define your route, this means we should be looking at [trpc/lambda/\\[trpc\\]/route.ts](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts)\r\n\r\n### createContext in LobeChat\r\n\r\nYou will find the createContext in [lambda/\\[trpc\\]/route.ts](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts)[.](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts%29.) This below code is from LobeChat:\r\n\r\n```js\r\nimport { fetchRequestHandler } from '@trpc/server/adapters/fetch';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nimport { pino } from '@/libs/logger';\r\nimport { createContext } from '@/server/context';\r\nimport { lambdaRouter } from '@/server/routers/lambda';\r\n\r\nconst handler = (req: NextRequest) =>\r\n  fetchRequestHandler({\r\n    /**\r\n     * @link https://trpc.io/docs/v11/context\r\n     */\r\n    createContext: () => createContext(req),\r\n\r\n    endpoint: '/trpc/lambda',\r\n\r\n    onError: ({ error, path, type }) => {\r\n      pino.info(`Error in tRPC handler (lambda) on path: ${path}, type: ${type}`);\r\n      console.error(error);\r\n    },\r\n\r\n    req,\r\n    router: lambdaRouter,\r\n  });\r\n\r\nexport { handler as GET, handler as POST };\r\n```\r\n\r\nAs you can see here, `createContext` is imported from `@/server/context`. Let’s now analyse `@/server/context` code. This below source code is picked from [@/server/context](https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19).\r\n\r\n```js\r\n/**\r\n * Creates context for an incoming request\r\n * @link https://trpc.io/docs/v11/context\r\n */\r\nexport const createContext = async (request: NextRequest): Promise<Context> => {\r\n   // for API-response caching see https://trpc.io/docs/v11/caching\r\n  const authorization = request.headers.get(LOBE_CHAT_AUTH_HEADER);\r\n  let userId;\r\n  let auth;\r\n  if (enableClerk) {\r\n    auth = getAuth(request);\r\n    userId = auth.userId;\r\n    return createContextInner({ authorizationHeader: authorization, clerkAuth: auth, userId });\r\n   }\r\n// …\r\n```\r\n\r\nIn this code snippet, if `enableClerk` is true, `createContextInner` is called with `auth` in parameter object. This is it, this is how you set userId in createContext. `userId` is returned by `auth.userId`. `createContext`  \r\nfrom the definition above only has to return object with the context set.\r\n\r\n#### createContextInner function:\r\n\r\nYou will find this below code at [Line 19 in server/context.ts](https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19)\r\n\r\n```js\r\n/**\r\n * Inner function for `createContext` where we create the context.\r\n * This is useful for testing when we don't want to mock Next.js' request/response\r\n */\r\nexport const createContextInner = async (params?: {\r\n authorizationHeader?: string | null;\r\n clerkAuth?: ClerkAuth;\r\n nextAuth?: User;\r\n userId?: string | null;\r\n}): Promise<AuthContext> => ({\r\n authorizationHeader: params?.authorizationHeader,\r\n clerkAuth: params?.clerkAuth,\r\n nextAuth: params?.nextAuth,\r\n userId: params?.userId,\r\n});\r\n```\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19](https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19)\r\n    \r\n2. [https://github.com/lobehub/lobe-chat/blob/main/src/app/(backend)/trpc/lambda/%5Btrpc%5D/route.ts](https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts)\r\n    \r\n3. [https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router](https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router)\r\n    \r\n4. [https://trpc.io/docs/client/react/server-components](https://trpc.io/docs/client/react/server-components)\r\n",
    "code": "var Component=(()=>{var d=Object.create;var s=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var b=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),g=(n,e)=>{for(var r in e)s(n,r,{get:e[r],enumerable:!0})},t=(n,e,r,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(n,c)&&c!==r&&s(n,c,{get:()=>e[c],enumerable:!(o=p(e,c))||o.enumerable});return n};var f=(n,e,r)=>(r=n!=null?d(m(n)):{},t(e||!n||!n.__esModule?s(r,\"default\",{value:n,enumerable:!0}):r,n)),N=n=>t(s({},\"__esModule\",{value:!0}),n);var F=b((k,a)=>{a.exports=_jsx_runtime});var w={};g(w,{default:()=>h,frontmatter:()=>x});var l=f(F()),x={title:\"How the userId is added to the tRPC ctx in LobeChat source code?\"};function i(n){let e={a:\"a\",br:\"br\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we analyse how the currently logged-in userId is added to the tRPC ctx by reviewing LobeChat source code. I recommend \",(0,l.jsx)(e.a,{href:\"https://trpc.io/docs/client/react/server-components\",children:\"reading this tRPC setup\"}),\" to relate to the concepts explained in this article.\"]}),`\n`,(0,l.jsx)(e.p,{children:\"But before that, I want to explain how I found this. I study LobeChat source code and was working on a project that involved tRPC + Supabase in a Next.js app router. I am following the similar codebase architecture to LobeChat\\u2019s.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*0aZjm-ITDZYywrCk_rvsSA.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"LobeChat uses Clerk for Authentication, the feature I was working required auth wall before making a request to the backend. Since I am following the LobeChat codebase principles, I just had to figure out how LobeChat configured \",(0,l.jsx)(e.code,{children:\"authedProcedure\"}),\".\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"When reading open-source code, I always use documentation to set my direction, otherwise I would be lost as these projects massive. This way, at the step\\u200A\\u2014\\u200A\",(0,l.jsx)(e.a,{href:\"https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router\",children:\"Create a tRPC router\"}),\", you will find this code below:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" *\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" trpcNext \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@trpc/server/adapters/next'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" appRouter \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '../../../server/routers/_app'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" export API handler\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" @link https://trpc.io/docs/v11/server/adapters\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" default\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" trpcNext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"createNextApiHandler\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" router\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" appRouter\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createContext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({}),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:\"createContext\"}),\" in this documentation returns an object but that is not the case with LobeChat\\u2019s createContext. createContext is configured when you define your route, this means we should be looking at \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts\",children:\"trpc/lambda/[trpc]/route.ts\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"createcontext-inlobechat\",children:\"createContext in\\xA0LobeChat\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"You will find the createContext in \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts\",children:\"lambda/[trpc]/route.ts\"}),(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts%29.\",children:\".\"}),\" This below code is from LobeChat:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" fetchRequestHandler \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@trpc/server/adapters/fetch'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" NextRequest \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'next/server'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" pino \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/libs/logger'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createContext \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/server/context'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" lambdaRouter \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '@/server/routers/lambda'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" handler\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NextRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  fetchRequestHandler\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    /**\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"     * \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@link\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://trpc.io/docs/v11/context\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"     */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    createContext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createContext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"req\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    endpoint\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" '/trpc/lambda'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"    onError\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" type \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"})\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      pino\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"info\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"`Error in tRPC handler (lambda) on path: ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"path\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}, type: ${\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"type\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}`\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"error\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    req\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    router\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" lambdaRouter\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  });\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" handler \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" GET\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" handler \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" POST \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"As you can see here, \",(0,l.jsx)(e.code,{children:\"createContext\"}),\" is imported from \",(0,l.jsx)(e.code,{children:\"@/server/context\"}),\". Let\\u2019s now analyse \",(0,l.jsx)(e.code,{children:\"@/server/context\"}),\" code. This below source code is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19\",children:\"@/server/context\"}),\".\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Creates context for an incoming request\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"@link\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://trpc.io/docs/v11/context\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" createContext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" async\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" NextRequest\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Promise\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"Context\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" for API-response caching see https://trpc.io/docs/v11/caching\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorization \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"headers\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"get\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"LOBE_CHAT_AUTH_HEADER\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" userId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  let\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" auth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"enableClerk\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    auth \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" getAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"request\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\");\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    userId \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" auth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"userId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    return\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createContextInner\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorizationHeader\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorization\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" clerkAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" auth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" userId \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"   }\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" \\u2026\"})]})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"In this code snippet, if \",(0,l.jsx)(e.code,{children:\"enableClerk\"}),\" is true, \",(0,l.jsx)(e.code,{children:\"createContextInner\"}),\" is called with \",(0,l.jsx)(e.code,{children:\"auth\"}),\" in parameter object. This is it, this is how you set userId in createContext. \",(0,l.jsx)(e.code,{children:\"userId\"}),\" is returned by \",(0,l.jsx)(e.code,{children:\"auth.userId\"}),\". \",(0,l.jsx)(e.code,{children:\"createContext\"}),(0,l.jsx)(e.br,{}),`\n`,\"from the definition above only has to return object with the context set.\"]}),`\n`,(0,l.jsx)(e.h4,{id:\"createcontextinner-function\",children:\"createContextInner function:\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"You will find this below code at \",(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19\",children:\"Line 19 in server/context.ts\"})]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"/**\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * Inner function for `createContext` where we create the context.\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" * This is useful for testing when we don't want to mock Next.js' request/response\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"export\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" createContextInner \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" async \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"params\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorizationHeader?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"|\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" clerkAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" ClerkAuth;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" User;\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" userId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?:\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" string \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"|\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\";\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}):\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" Promise\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"AuthContext\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" authorizationHeader\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" params\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"authorizationHeader\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" clerkAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" params\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"clerkAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" params\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextAuth\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" userId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" params\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"userId\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"});\"})})]})})}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/server/context.ts#L19\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/%28backend%29/trpc/lambda/%5Btrpc%5D/route.ts\",children:\"https://github.com/lobehub/lobe-chat/blob/main/src/app/(backend)/trpc/lambda/%5Btrpc%5D/route.ts\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router\",children:\"https://trpc.io/docs/client/nextjs/setup#3-create-a-trpc-router\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://trpc.io/docs/client/react/server-components\",children:\"https://trpc.io/docs/client/react/server-components\"})}),`\n`]}),`\n`]})]})}function h(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return N(w);})();\n;return Component;"
  },
  "_id": "blog/user-id-in-trpc-context.mdx",
  "_raw": {
    "sourceFilePath": "blog/user-id-in-trpc-context.mdx",
    "sourceFileName": "user-id-in-trpc-context.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/user-id-in-trpc-context"
  },
  "type": "Doc",
  "slug": "/blog/user-id-in-trpc-context",
  "slugAsParams": "user-id-in-trpc-context"
}