{
  "title": "Defu usage in unbuild source code.\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nFor this week, I have been reading [unbuild](https://github.com/unjs/unbuild) source code and found few packages that I have never seen before or used. I wanted to share some interesting packages that are used in these OSS projects so we can learn a thing or two ;)\r\n\r\nThe following are discussed in this article:\r\n\r\n1. What is Defu?\r\n    \r\n2. Defu’s usage in unbuild\r\n    \r\n\r\n### What is Defu?\r\n\r\nDefu is a package built by [authors at Unjs](https://github.com/unjs). Unjs provides JS tools, libraries and has about 63 npm packages and [421m downloads per month](https://unjs.io/packages?q=&order=1&orderBy=title). Sheesh, that’s a lot.\r\n\r\n![](https://cdn-images-1.medium.com/max/1600/1*AmoWOAIoUQj1n4jby_uhRg.png)\r\n\r\n[Defu repository](https://github.com/unjs/defu#readme) has this description “Assign default properties recursively”.\r\n\r\nThis package is straightforward to use:\r\n\r\n#### Install\r\n\r\n```js\r\n# yarn\r\nyarn add defu\r\n# npm\r\nnpm install defu\r\n# pnpm\r\npnpm install defu\r\n```\r\n\r\n#### Usage\r\n\r\n```js\r\nimport { defu } from \"defu\";\r\n\r\nconsole.log(defu({ a: { b: 2 } }, { a: { b: 1, c: 3 } }));\r\n// => { a: { b: 2, c: 3 } }\r\n```\r\n\r\nLeftmost arguments have more priority when assigning defaults.\r\n\r\nDefu is used to merge objects and the leftmost arguments have precedence as shown in the above example, picked from [Readme](https://github.com/unjs/defu?tab=readme-ov-file#usage).\r\n\r\n### Defu’s usage in unbuild\r\n\r\n[At line 93 in build.ts](https://github.com/unjs/unbuild/blob/main/src/build.ts#L93), you will find this below code snippet:\r\n\r\n```js\r\n// Merge options\r\n  const options = defu(\r\n    buildConfig,\r\n    pkg.unbuild || pkg.build,\r\n    inputConfig,\r\n    preset,\r\n    <BuildOptions>{\r\n      name: (pkg?.name || \"\").split(\"/\").pop() || \"default\",\r\n      rootDir,\r\n      entries: [],\r\n      clean: true,\r\n      declaration: undefined,\r\n      outDir: \"dist\",\r\n      stub: _stubMode,\r\n      stubOptions: {\r\n        /**\r\n         * See https://github.com/unjs/jiti#%EF%B8%8F-options\r\n         */\r\n        jiti: {\r\n          interopDefault: true,\r\n          alias: {},\r\n        },\r\n      },\r\n      watch: _watchMode,\r\n      watchOptions: _watchMode\r\n        ? {\r\n            exclude: \"node_modules/**\",\r\n            include: \"src/**\",\r\n          }\r\n        : undefined,\r\n      externals: [\r\n        ...Module.builtinModules,\r\n        ...Module.builtinModules.map((m) => \"node:\" + m),\r\n      ],\r\n      dependencies: [],\r\n      devDependencies: [],\r\n      peerDependencies: [],\r\n      alias: {},\r\n      replace: {},\r\n      failOnWarn: true,\r\n      sourcemap: false,\r\n      rollup: {\r\n        emitCJS: false,\r\n        watch: false,\r\n        cjsBridge: false,\r\n        inlineDependencies: false,\r\n        preserveDynamicImports: true,\r\n        output: {\r\n          // https://v8.dev/features/import-attributes\r\n          importAttributesKey: \"with\",\r\n        },\r\n        // Plugins\r\n        replace: {\r\n          preventAssignment: true,\r\n        },\r\n        alias: {},\r\n        resolve: {\r\n          preferBuiltins: true,\r\n        },\r\n        json: {\r\n          preferConst: true,\r\n        },\r\n        commonjs: {\r\n          ignoreTryCatch: true,\r\n        },\r\n        esbuild: { target: \"esnext\" },\r\n        dts: {\r\n          // https://github.com/Swatinem/rollup-plugin-dts/issues/143\r\n          compilerOptions: { preserveSymlinks: false },\r\n          respectExternal: true,\r\n        },\r\n      },\r\n      parallel: false,\r\n    },\r\n  ) as BuildOptions;\r\n```\r\n\r\nthis `options` object is large and following the Defu’s definition, all these objects are merged recursively with leftmost arguments taking precedence.\r\n\r\nI wonder how this package is different from [lodash.\\_merge](https://lodash.com/docs/#merge). Something to explore, I guess.\r\n\r\n### About me:\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\n***I am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com***\r\n\r\nMy Github —  [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website —  [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel —  [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform —  [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture —  [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices —  [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects —  [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References\r\n\r\n1. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L93](https://github.com/unjs/unbuild/blob/main/src/build.ts#L93)\r\n    \r\n2. [https://github.com/unjs/unbuild/blob/main/src/build.ts#L8](https://github.com/unjs/unbuild/blob/main/src/build.ts#L8)\r\n    \r\n3. [https://www.npmjs.com/package/defu](https://www.npmjs.com/package/defu)",
    "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),f=(n,e)=>{for(var s in e)r(n,s,{get:e[s],enumerable:!0})},F=(n,e,s,a)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(n,c)&&c!==s&&r(n,c,{get:()=>e[c],enumerable:!(a=p(e,c))||a.enumerable});return n};var N=(n,e,s)=>(s=n!=null?h(m(n)):{},F(e||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),b=n=>F(r({},\"__esModule\",{value:!0}),n);var i=g((v,o)=>{o.exports=_jsx_runtime});var w={};f(w,{default:()=>d,frontmatter:()=>j});var l=N(i()),j={title:\"Defu usage in unbuild source\\xA0code.\"};function t(n){let e={a:\"a\",code:\"code\",div:\"div\",em:\"em\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"For this week, I have been reading \",(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild\",children:\"unbuild\"}),\" source code and found few packages that I have never seen before or used. I wanted to share some interesting packages that are used in these OSS projects so we can learn a thing or two\\xA0;)\"]}),`\n`,(0,l.jsx)(e.p,{children:\"The following are discussed in this article:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"What is Defu?\"}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:\"Defu\\u2019s usage in unbuild\"}),`\n`]}),`\n`]}),`\n`,(0,l.jsx)(e.h3,{id:\"what-isdefu\",children:\"What is\\xA0Defu?\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"Defu is a package built by \",(0,l.jsx)(e.a,{href:\"https://github.com/unjs\",children:\"authors at Unjs\"}),\". Unjs provides JS tools, libraries and has about 63 npm packages and \",(0,l.jsx)(e.a,{href:\"https://unjs.io/packages?q=&order=1&orderBy=title\",children:\"421m downloads per month\"}),\". Sheesh, that\\u2019s a lot.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1600/1*AmoWOAIoUQj1n4jby_uhRg.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/unjs/defu#readme\",children:\"Defu repository\"}),\" has this description \\u201CAssign default properties recursively\\u201D.\"]}),`\n`,(0,l.jsx)(e.p,{children:\"This package is straightforward to use:\"}),`\n`,(0,l.jsx)(e.h4,{id:\"install\",children:\"Install\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"# yarn\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"yarn add defu\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"# npm\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"npm install defu\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"# pnpm\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"pnpm install defu\"})})]})})}),`\n`,(0,l.jsx)(e.h4,{id:\"usage\",children:\"Usage\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"import\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defu \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" from\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"defu\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\";\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"defu\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" a\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 2\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" a\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" b\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" c\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 3\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" }));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" => { a: { b: 2, c: 3 } }\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Leftmost arguments have more priority when assigning defaults.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"Defu is used to merge objects and the leftmost arguments have precedence as shown in the above example, picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/unjs/defu?tab=readme-ov-file#usage\",children:\"Readme\"}),\".\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"defus-usage-inunbuild\",children:\"Defu\\u2019s usage in\\xA0unbuild\"}),`\n`,(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\",children:\"At line 93 in build.ts\"}),\", you will find this below code snippet:\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"js\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"js\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Merge options\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" options \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" defu\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    buildConfig\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    pkg\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"unbuild \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" pkg\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"build\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    inputConfig\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    preset\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    <\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"BuildOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">{\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      name: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"pkg\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"?.\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"name \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"split\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"/\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\").\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"pop\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"default\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      rootDir\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      entries: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[],\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      clean: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      declaration: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"undefined,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      outDir: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:'\"dist\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      stub: _stubMode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      stubOptions: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        /**\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\"         * See https://github.com/unjs/jiti#%EF%B8%8F-options\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"         */\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        jiti\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          interopDefault\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          alias\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {},\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      watch: _watchMode\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      watchOptions: _watchMode\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            exclude\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"node_modules/**\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"            include\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"src/**\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          }\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" undefined,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      externals: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Module\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"builtinModules\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ...\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Module\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"builtinModules\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"map\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"m\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"node:\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" +\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" m\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ],\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      dependencies: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[],\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      devDependencies: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[],\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      peerDependencies: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"[],\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      alias: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{},\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      replace: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{},\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      failOnWarn: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      sourcemap: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      rollup: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"{\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        emitCJS\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        watch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        cjsBridge\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        inlineDependencies\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        preserveDynamicImports\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        output\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://v8.dev/features/import-attributes\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          importAttributesKey\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"with\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Plugins\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        replace\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          preventAssignment\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        alias\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {},\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        resolve\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          preferBuiltins\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        json\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          preferConst\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        commonjs\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          ignoreTryCatch\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        esbuild\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" target\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"esnext\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"        dts\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"          //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://github.com/Swatinem/rollup-plugin-dts/issues/143\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          compilerOptions\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" preserveSymlinks\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" false\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" },\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"          respectExternal\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" true,\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        },\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      },\"})}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"      parallel: \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"false,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    }\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\",\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  ) as BuildOptions;\"})})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"this \",(0,l.jsx)(e.code,{children:\"options\"}),\" object is large and following the Defu\\u2019s definition, all these objects are merged recursively with leftmost arguments taking precedence.\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"I wonder how this package is different from \",(0,l.jsx)(e.a,{href:\"https://lodash.com/docs/#merge\",children:\"lodash._merge\"}),\". Something to explore, I guess.\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"about-me\",children:\"About me:\"}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.em,{children:(0,l.jsxs)(e.strong,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]})})}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects\\u200A\\u2014\\u200A \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L93\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L8\",children:\"https://github.com/unjs/unbuild/blob/main/src/build.ts#L8\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://www.npmjs.com/package/defu\",children:\"https://www.npmjs.com/package/defu\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(t,{...n})}):t(n)}return b(w);})();\n;return Component;"
  },
  "_id": "blog/defu-usage-in-unbuild.mdx",
  "_raw": {
    "sourceFilePath": "blog/defu-usage-in-unbuild.mdx",
    "sourceFileName": "defu-usage-in-unbuild.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/defu-usage-in-unbuild"
  },
  "type": "Doc",
  "slug": "/blog/defu-usage-in-unbuild",
  "slugAsParams": "defu-usage-in-unbuild"
}