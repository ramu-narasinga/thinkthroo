{
  "title": "Object.is() usage in Zustand source code\r",
  "published": false,
  "featured": false,
  "component": false,
  "toc": true,
  "body": {
    "raw": "\r\nIn this article, we will explore how Object.is() method is used in [Zustand’s source code](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71). \r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*CMnT4oJcS6-EjWECujm5ZQ.png)\r\n\r\nThe above code snippet is picked from [vanilla.ts](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71)\r\n\r\nObject.is() method is used in setState (more articles on this later on).\r\n\r\nLet’s first understand what an Object.is() method is.\r\n\r\n### [Object.is()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)\r\n\r\nThe [`Object.is()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is) static method determines whether two values are [the same value](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value_equality_using_object.is).\r\n\r\nThe below example is picked from MDN Docs:\r\n\r\n```javascript\r\nconsole.log(Object.is('1', 1));\r\n// Expected output: false\r\n\r\nconsole.log(Object.is(NaN, NaN));\r\n// Expected output: true\r\n\r\nconsole.log(Object.is(-0, 0));\r\n// Expected output: false\r\n\r\nconst obj = {};\r\nconsole.log(Object.is(obj, {}));\r\n// Expected output: false\r\n```\r\n\r\nHere is a bit complicated JSON example:\r\n\r\n```javascript\r\nconst jsonObject1 = {\r\n    name: \"foo\",\r\n    age: 30\r\n};\r\n\r\nconst jsonObject2 = {\r\n    name: \"bar\",\r\n    age: 30\r\n};\r\n\r\nconsole.log(Object.is(jsonObject1, jsonObject2)); // false\r\n```\r\n\r\n#### Why does `Object.is()` return `false`?\r\n\r\nEven though `jsonObject1` and `jsonObject2` have the same content, they are different objects in memory. In JavaScript, objects are compared by reference, not by their content. Since these two objects are stored at different memory locations, `Object.is()` returns `false`.\r\n\r\n### Object.is(nextState, state)\r\n\r\nIn the below code snippet from Zustand, the `Object.is()` method is used to determine whether the `nextState` is truly different from the current `state` before proceeding to update the state and notify listeners. This check is crucial for performance and avoiding unnecessary state updates.\r\n\r\n```typescript\r\nconst setState: StoreApi<TState>['setState'] = (partial, replace) => {\r\n  // TODO: Remove type assertion once https://github.com/microsoft/TypeScript/issues/37663 is resolved\r\n  // https://github.com/microsoft/TypeScript/issues/37663#issuecomment-759728342\r\n  const nextState =\r\n    typeof partial === 'function'\r\n      ? (partial as (state: TState) => TState)(state)\r\n      : partial\r\n  if (!Object.is(nextState, state)) {\r\n    const previousState = state\r\n    state =\r\n      (replace ?? (typeof nextState !== 'object' || nextState === null))\r\n        ? (nextState as TState)\r\n        : Object.assign({}, state, nextState)\r\n    listeners.forEach((listener) => listener(state, previousState))\r\n  }\r\n}\r\n```\r\n\r\nThe below image shows the Object.is() in action\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*wkLCVrd_hdUJqRqRJ4ontg.png)\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*B1C9X61Rr7faIhczJnyS7Q.png)\r\n\r\nTo add the above log statements, I compiled Zustand using the command `pnpm run build` and copied the dist into `examples/demo/src`. Looks hacky, but hey we are experimenting and figuring out how Zustand works internally.\r\n\r\n![](https://cdn-images-1.medium.com/max/1000/1*1FOi8LhNb04F4-x1neQ5vA.png)\r\n\r\n```javascript\r\nconst useStore = create((set) => ({\r\n  count: 1,\r\n  inc: () => set((state) => ({ count: state.count + 1 })),\r\n}))\r\n```\r\n\r\nCalling inc somehow triggers the setState, we will figure out how in the upcoming articles.\r\n\r\n# **About me:**\r\n\r\nHey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\r\n\r\nI am open to work on interesting projects. Send me an email at ramu.narasinga@gmail.com\r\n\r\nMy Github — [https://github.com/ramu-narasinga](https://github.com/ramu-narasinga)\r\n\r\nMy website — [https://ramunarasinga.com](https://ramunarasinga.com/)\r\n\r\nMy Youtube channel — [https://www.youtube.com/@thinkthroo](https://www.youtube.com/@thinkthroo)\r\n\r\nLearning platform — [https://thinkthroo.com](https://thinkthroo.com/)\r\n\r\nCodebase Architecture — [https://app.thinkthroo.com/architecture](https://app.thinkthroo.com/architecture)\r\n\r\nBest practices — [https://app.thinkthroo.com/best-practices](https://app.thinkthroo.com/best-practices)\r\n\r\nProduction-grade projects — [https://app.thinkthroo.com/production-grade-projects](https://app.thinkthroo.com/production-grade-projects)\r\n\r\n### References:\r\n\r\n1. [https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71](https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71)\r\n    \r\n2. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global\\_Objects/Object/is](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is)\r\n    \r\n3. [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality\\_comparisons\\_and\\_sameness#same-value\\_equality\\_using\\_object.is](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value_equality_using_object.is)\r\n",
    "code": "var Component=(()=>{var h=Object.create;var r=Object.defineProperty;var p=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var m=Object.getPrototypeOf,u=Object.prototype.hasOwnProperty;var g=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var s in e)r(n,s,{get:e[s],enumerable:!0})},t=(n,e,s,o)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of y(e))!u.call(n,c)&&c!==s&&r(n,c,{get:()=>e[c],enumerable:!(o=p(e,c))||o.enumerable});return n};var f=(n,e,s)=>(s=n!=null?h(m(n)):{},t(e||!n||!n.__esModule?r(s,\"default\",{value:n,enumerable:!0}):s,n)),j=n=>t(r({},\"__esModule\",{value:!0}),n);var F=g((O,a)=>{a.exports=_jsx_runtime});var v={};b(v,{default:()=>d,frontmatter:()=>N});var l=f(F()),N={title:\"Object.is() usage in Zustand source\\xA0code\"};function i(n){let e={a:\"a\",code:\"code\",div:\"div\",h1:\"h1\",h3:\"h3\",h4:\"h4\",img:\"img\",li:\"li\",ol:\"ol\",p:\"p\",pre:\"pre\",span:\"span\",strong:\"strong\",...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e.p,{children:[\"In this article, we will explore how Object.is() method is used in \",(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71\",children:\"Zustand\\u2019s source code\"}),\".\\xA0\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*CMnT4oJcS6-EjWECujm5ZQ.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"The above code snippet is picked from \",(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71\",children:\"vanilla.ts\"})]}),`\n`,(0,l.jsx)(e.p,{children:\"Object.is() method is used in setState (more articles on this later on).\"}),`\n`,(0,l.jsx)(e.p,{children:\"Let\\u2019s first understand what an Object.is() method is.\"}),`\n`,(0,l.jsx)(e.h3,{id:\"objectis\",children:(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",children:\"Object.is()\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"The \",(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",children:(0,l.jsx)(e.code,{children:\"Object.is()\"})}),\" static method determines whether two values are \",(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value_equality_using_object.is\",children:\"the same value\"}),\".\"]}),`\n`,(0,l.jsx)(e.p,{children:\"The below example is picked from MDN Docs:\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'1'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: false\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(NaN,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" NaN));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: true\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(-0,\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 0));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: false\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" obj \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {};\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"obj\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {}));\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"//\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" Expected output: false\"})]})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Here is a bit complicated JSON example:\"}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" jsonObject1 \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"foo\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    age\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 30\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" jsonObject2 \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    name\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:' \"bar\"'}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    age\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 30\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"};\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:\" \"}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"console\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"log\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"jsonObject1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" jsonObject2\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"));\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" false\"})]})]})})}),`\n`,(0,l.jsxs)(e.h4,{id:\"why-does-objectis-returnfalse\",children:[\"Why does \",(0,l.jsx)(e.code,{children:\"Object.is()\"}),\" return\\xA0\",(0,l.jsx)(e.code,{children:\"false\"}),\"?\"]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Even though \",(0,l.jsx)(e.code,{children:\"jsonObject1\"}),\" and \",(0,l.jsx)(e.code,{children:\"jsonObject2\"}),\" have the same content, they are different objects in memory. In JavaScript, objects are compared by reference, not by their content. Since these two objects are stored at different memory locations, \",(0,l.jsx)(e.code,{children:\"Object.is()\"}),\" returns \",(0,l.jsx)(e.code,{children:\"false\"}),\".\"]}),`\n`,(0,l.jsx)(e.h3,{id:\"objectisnextstate-state\",children:\"Object.is(nextState, state)\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"In the below code snippet from Zustand, the \",(0,l.jsx)(e.code,{children:\"Object.is()\"}),\" method is used to determine whether the \",(0,l.jsx)(e.code,{children:\"nextState\"}),\" is truly different from the current \",(0,l.jsx)(e.code,{children:\"state\"}),\" before proceeding to update the state and notify listeners. This check is crucial for performance and avoiding unnecessary state updates.\"]}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"typescript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" setState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" StoreApi\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"<\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\">[\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"'setState'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"]\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"partial\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" replace\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" TODO: Remove type assertion once https://github.com/microsoft/TypeScript/issues/37663 is resolved\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  //\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF4\"},children:\" https://github.com/microsoft/TypeScript/issues/37663#issuecomment-759728342\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'function'\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      ?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"partial \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" partial\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  if\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (!\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"is\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" {\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"    const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" previousState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    state \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"      (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"replace \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"??\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (typeof\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"!==\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 'object'\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ||\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"===\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" null))\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        ?\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" (\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"nextState \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"as\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\" TState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"        :\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" Object\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"assign\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"({},\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" nextState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"    listeners\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"forEach\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" listener\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"(\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\",\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" previousState\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"))\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"  }\"})}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"The below image shows the Object.is() in action\"}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*wkLCVrd_hdUJqRqRJ4ontg.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*B1C9X61Rr7faIhczJnyS7Q.png\",alt:\"\"})}),`\n`,(0,l.jsxs)(e.p,{children:[\"To add the above log statements, I compiled Zustand using the command \",(0,l.jsx)(e.code,{children:\"pnpm run build\"}),\" and copied the dist into \",(0,l.jsx)(e.code,{children:\"examples/demo/src\"}),\". Looks hacky, but hey we are experimenting and figuring out how Zustand works internally.\"]}),`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.img,{src:\"https://cdn-images-1.medium.com/max/1000/1*1FOi8LhNb04F4-x1neQ5vA.png\",alt:\"\"})}),`\n`,(0,l.jsx)(e.div,{\"data-rehype-pretty-code-fragment\":\"\",children:(0,l.jsx)(e.pre,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:(0,l.jsxs)(e.code,{\"data-language\":\"javascript\",\"data-theme\":\"default\",children:[(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"const\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" useStore \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"=\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" create\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"  count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1,\"})]}),`\n`,(0,l.jsxs)(e.span,{className:\"line\",children:[(0,l.jsx)(e.span,{style:{color:\"#FFF\",fontWeight:\"bold\"},children:\"  inc\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ()\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" set\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"((\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\")\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" =>\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" ({\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" count\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\":\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\" state\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\".\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF\"},children:\"count \"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"+\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" 1\"}),(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\" })),\"})]}),`\n`,(0,l.jsx)(e.span,{className:\"line\",children:(0,l.jsx)(e.span,{style:{color:\"#FFF8\"},children:\"}))\"})})]})})}),`\n`,(0,l.jsx)(e.p,{children:\"Calling inc somehow triggers the setState, we will figure out how in the upcoming articles.\"}),`\n`,(0,l.jsx)(e.h1,{id:\"about-me\",children:(0,l.jsx)(e.strong,{children:\"About me:\"})}),`\n`,(0,l.jsx)(e.p,{children:\"Hey, my name is Ramu Narasinga. I study large open-source projects and create content about their codebase architecture and best practices, sharing it through articles, videos.\"}),`\n`,(0,l.jsxs)(e.p,{children:[\"I am open to work on interesting projects. Send me an email at \",(0,l.jsx)(e.a,{href:\"mailto:ramu.narasinga@gmail.com\",children:\"ramu.narasinga@gmail.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Github \\u2014 \",(0,l.jsx)(e.a,{href:\"https://github.com/ramu-narasinga\",children:\"https://github.com/ramu-narasinga\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My website \\u2014 \",(0,l.jsx)(e.a,{href:\"https://ramunarasinga.com/\",children:\"https://ramunarasinga.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"My Youtube channel \\u2014 \",(0,l.jsx)(e.a,{href:\"https://www.youtube.com/@thinkthroo\",children:\"https://www.youtube.com/@thinkthroo\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Learning platform \\u2014 \",(0,l.jsx)(e.a,{href:\"https://thinkthroo.com/\",children:\"https://thinkthroo.com\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Codebase Architecture \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/architecture\",children:\"https://app.thinkthroo.com/architecture\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Best practices \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/best-practices\",children:\"https://app.thinkthroo.com/best-practices\"})]}),`\n`,(0,l.jsxs)(e.p,{children:[\"Production-grade projects \\u2014 \",(0,l.jsx)(e.a,{href:\"https://app.thinkthroo.com/production-grade-projects\",children:\"https://app.thinkthroo.com/production-grade-projects\"})]}),`\n`,(0,l.jsx)(e.h3,{id:\"references\",children:\"References:\"}),`\n`,(0,l.jsxs)(e.ol,{children:[`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71\",children:\"https://github.com/pmndrs/zustand/blob/main/src/vanilla.ts#L71\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\"})}),`\n`]}),`\n`,(0,l.jsxs)(e.li,{children:[`\n`,(0,l.jsx)(e.p,{children:(0,l.jsx)(e.a,{href:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value_equality_using_object.is\",children:\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Equality_comparisons_and_sameness#same-value_equality_using_object.is\"})}),`\n`]}),`\n`]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(i,{...n})}):i(n)}return j(v);})();\n;return Component;"
  },
  "_id": "blog/object-usage-in-zustand.mdx",
  "_raw": {
    "sourceFilePath": "blog/object-usage-in-zustand.mdx",
    "sourceFileName": "object-usage-in-zustand.mdx",
    "sourceFileDir": "blog",
    "contentType": "mdx",
    "flattenedPath": "blog/object-usage-in-zustand"
  },
  "type": "Doc",
  "slug": "/blog/object-usage-in-zustand",
  "slugAsParams": "object-usage-in-zustand"
}